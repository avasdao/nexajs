/* NexaJS <Address> v2023.03.11 */
!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAddr=exports.encodeAddress=exports.decodeAddress=exports.Address=void 0;var _events=require("events"),obj=(obj=require("debug"))&&obj.__esModule?obj:{default:obj},require=require("./src/cashaddr.js");const debug=(0,obj.default)("nexa:address"),encodeAddress=require.encodeAddress,decodeAddress=(exports.encodeAddress=encodeAddress,require.decodeAddress);exports.decodeAddress=decodeAddress;class Address extends _events.EventEmitter{constructor(_params){if(debug("Initializing Address..."),debug(JSON.stringify(_params,null,2)),super(),this._seed=_params?.seed,this._seed||(this._seed=_params),this._seedType=getSeedType(_params),!this._seedType)throw new Error("Oops! Invalid address seed.")}test(){testAddr()}decode(_addr){return decodeAddress(_addr)}static decode(_addr){return decodeAddress(_addr)}encode(_prefix,_type,_hash){return encodeAddress(_prefix,_type,_hash)}static encode(_prefix,_type,_hash){return encodeAddress(_prefix,_type,_hash)}toString(_formatted=!1){var pkg={seed:this._seed,seedType:this._seedType};return _formatted?JSON.stringify(pkg,null,2):pkg}}exports.Address=Address;const testAddr=()=>{console.log("NexaJS Address is a GO!")},getSeedType=(exports.testAddr=testAddr,_seed=>_seed?_seed.toLowerCase().startsWith("nexa:")?"(Mainnet) address":_seed.toLowerCase().startsWith("nexatest:")?"(Testnet) address":0<_seed.length?"privatekey":null:null)},{"./src/cashaddr.js":7,debug:3,events:10}],2:[function(require,module,exports){var bigInt=function(){"use strict";var BASE=1e7,LOG_BASE=7,MAX_INT=9007199254740992,MAX_INT_ARR=smallToArray(MAX_INT),DEFAULT_ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz",supportsNativeBigInt="function"==typeof BigInt;function Integer(v,radix,alphabet,caseSensitive){return void 0===v?Integer[0]:void 0!==radix&&(10!=+radix||alphabet)?parseBase(v,radix,alphabet,caseSensitive):parseValue(v)}function BigInteger(value,sign){this.value=value,this.sign=sign,this.isSmall=!1}function SmallInteger(value){this.value=value,this.sign=value<0,this.isSmall=!0}function NativeBigInt(value){this.value=value}function isPrecise(n){return-MAX_INT<n&&n<MAX_INT}function smallToArray(n){return n<1e7?[n]:n<1e14?[n%1e7,Math.floor(n/1e7)]:[n%1e7,Math.floor(n/1e7)%1e7,Math.floor(n/1e14)]}function arrayToSmall(arr){trim(arr);var length=arr.length;if(length<4&&compareAbs(arr,MAX_INT_ARR)<0)switch(length){case 0:return 0;case 1:return arr[0];case 2:return arr[0]+arr[1]*BASE;default:return arr[0]+(arr[1]+arr[2]*BASE)*BASE}return arr}function trim(v){for(var i=v.length;0===v[--i];);v.length=i+1}function createArray(length){for(var x=new Array(length),i=-1;++i<length;)x[i]=0;return x}function truncate(n){return 0<n?Math.floor(n):Math.ceil(n)}function add(a,b){for(var sum,l_a=a.length,l_b=b.length,r=new Array(l_a),carry=0,base=BASE,i=0;i<l_b;i++)sum=a[i]+b[i]+carry,r[i]=sum-(carry=base<=sum?1:0)*base;for(;i<l_a;)sum=a[i]+carry,r[i++]=sum-(carry=sum===base?1:0)*base;return 0<carry&&r.push(carry),r}function addAny(a,b){return a.length>=b.length?add(a,b):add(b,a)}function addSmall(a,carry){for(var sum,l=a.length,r=new Array(l),base=BASE,i=0;i<l;i++)sum=a[i]-base+carry,carry=Math.floor(sum/base),r[i]=sum-carry*base,carry+=1;for(;0<carry;)r[i++]=carry%base,carry=Math.floor(carry/base);return r}function subtract(a,b){for(var difference,a_l=a.length,b_l=b.length,r=new Array(a_l),borrow=0,base=BASE,i=0;i<b_l;i++)borrow=(difference=a[i]-borrow-b[i])<0?(difference+=base,1):0,r[i]=difference;for(i=b_l;i<a_l;i++){if(!((difference=a[i]-borrow)<0)){r[i++]=difference;break}difference+=base,r[i]=difference}for(;i<a_l;i++)r[i]=a[i];return trim(r),r}function subtractSmall(a,b,sign){for(var difference,l=a.length,r=new Array(l),carry=-b,base=BASE,i=0;i<l;i++)difference=a[i]+carry,carry=Math.floor(difference/base),r[i]=(difference%=base)<0?difference+base:difference;return"number"==typeof(r=arrayToSmall(r))?new SmallInteger(r=sign?-r:r):new BigInteger(r,sign)}function multiplyLong(a,b){for(var product,carry,a_l=a.length,b_l=b.length,r=createArray(a_l+b_l),base=BASE,i=0;i<a_l;++i)for(var a_i=a[i],j=0;j<b_l;++j)product=a_i*b[j]+r[i+j],carry=Math.floor(product/base),r[i+j]=product-carry*base,r[i+j+1]+=carry;return trim(r),r}function multiplySmall(a,b){for(var product,l=a.length,r=new Array(l),base=BASE,carry=0,i=0;i<l;i++)product=a[i]*b+carry,carry=Math.floor(product/base),r[i]=product-carry*base;for(;0<carry;)r[i++]=carry%base,carry=Math.floor(carry/base);return r}function shiftLeft(x,n){for(var r=[];0<n--;)r.push(0);return r.concat(x)}function multiplySmallAndArray(a,b,sign){return new BigInteger(a<BASE?multiplySmall(b,a):multiplyLong(b,smallToArray(a)),sign)}function square(a){for(var product,l=a.length,r=createArray(l+l),base=BASE,i=0;i<l;i++){for(var a_i,carry=0-(a_i=a[i])*a_i,j=i;j<l;j++)product=a_i*a[j]*2+r[i+j]+carry,carry=Math.floor(product/base),r[i+j]=product-carry*base;r[i+l]=carry}return trim(r),r}function divModSmall(value,lambda){for(var divisor,length=value.length,quotient=createArray(length),base=BASE,remainder=0,i=length-1;0<=i;--i)remainder=(divisor=remainder*base+value[i])-(divisor=truncate(divisor/lambda))*lambda,quotient[i]=0|divisor;return[quotient,0|remainder]}function divModAny(self,v){v=parseValue(v);if(supportsNativeBigInt)return[new NativeBigInt(self.value/v.value),new NativeBigInt(self.value%v.value)];var a=self.value,b=v.value;if(0===b)throw new Error("Cannot divide by zero");if(self.isSmall)return v.isSmall?[new SmallInteger(truncate(a/b)),new SmallInteger(a%b)]:[Integer[0],self];if(v.isSmall){if(1===b)return[self,Integer[0]];if(-1==b)return[self.negate(),Integer[0]];var value,quotient,abs=Math.abs(b);if(abs<BASE)return quotient=arrayToSmall((value=divModSmall(a,abs))[0]),remainder=value[1],self.sign&&(remainder=-remainder),"number"==typeof quotient?[new SmallInteger(quotient=self.sign!==v.sign?-quotient:quotient),new SmallInteger(remainder)]:[new BigInteger(quotient,self.sign!==v.sign),new SmallInteger(remainder)];b=smallToArray(abs)}var remainder=compareAbs(a,b);if(-1===remainder)return[Integer[0],self];if(0===remainder)return[Integer[self.sign===v.sign?1:-1],Integer[0]];quotient=(value=(a.length+b.length<=200?function(a,b){var quotientDigit,shift,carry,borrow,i,l,q,a_l=a.length,b_l=b.length,base=BASE,result=createArray(b.length),divisorMostSignificantDigit=b[b_l-1],lambda=Math.ceil(base/(2*divisorMostSignificantDigit)),remainder=multiplySmall(a,lambda),divisor=multiplySmall(b,lambda);for(remainder.length<=a_l&&remainder.push(0),divisor.push(0),divisorMostSignificantDigit=divisor[b_l-1],shift=a_l-b_l;0<=shift;shift--){for(quotientDigit=base-1,remainder[shift+b_l]!==divisorMostSignificantDigit&&(quotientDigit=Math.floor((remainder[shift+b_l]*base+remainder[shift+b_l-1])/divisorMostSignificantDigit)),l=divisor.length,i=borrow=carry=0;i<l;i++)carry+=quotientDigit*divisor[i],q=Math.floor(carry/base),borrow+=remainder[shift+i]-(carry-q*base),carry=q,borrow=borrow<0?(remainder[shift+i]=borrow+base,-1):(remainder[shift+i]=borrow,0);for(;0!==borrow;){for(--quotientDigit,i=carry=0;i<l;i++)carry=(carry+=remainder[shift+i]-base+divisor[i])<0?(remainder[shift+i]=carry+base,0):(remainder[shift+i]=carry,1);borrow+=carry}result[shift]=quotientDigit}return remainder=divModSmall(remainder,lambda)[0],[arrayToSmall(result),arrayToSmall(remainder)]}:function(a,b){for(var guess,xlen,highx,highy,check,a_l=a.length,b_l=b.length,result=[],part=[],base=BASE;a_l;)if(part.unshift(a[--a_l]),trim(part),compareAbs(part,b)<0)result.push(0);else{for(highx=part[(xlen=part.length)-1]*base+part[xlen-2],highy=b[b_l-1]*base+b[b_l-2],b_l<xlen&&(highx=(highx+1)*base),guess=Math.ceil(highx/highy);!(compareAbs(check=multiplySmall(b,guess),part)<=0)&&--guess;);result.push(guess),part=subtract(part,check)}return result.reverse(),[arrayToSmall(result),arrayToSmall(part)]})(a,b))[0];abs=self.sign!==v.sign,remainder=value[1],a=self.sign;return[quotient="number"==typeof quotient?new SmallInteger(quotient=abs?-quotient:quotient):new BigInteger(quotient,abs),remainder="number"==typeof remainder?new SmallInteger(remainder=a?-remainder:remainder):new BigInteger(remainder,a)]}function compareAbs(a,b){if(a.length!==b.length)return a.length>b.length?1:-1;for(var i=a.length-1;0<=i;i--)if(a[i]!==b[i])return a[i]>b[i]?1:-1;return 0}function isBasicPrime(v){v=v.abs();return!v.isUnit()&&(!!(v.equals(2)||v.equals(3)||v.equals(5))||!(v.isEven()||v.isDivisibleBy(3)||v.isDivisibleBy(5))&&(!!v.lesser(49)||void 0))}function millerRabinTest(n,a){for(var d,i,x,nPrev=n.prev(),b=nPrev,r=0;b.isEven();)b=b.divide(2),r++;next:for(i=0;i<a.length;i++)if(!n.lesser(a[i])&&!(x=bigInt(a[i]).modPow(b,n)).isUnit()&&!x.equals(nPrev)){for(d=r-1;0!=d;d--){if((x=x.square().mod(n)).isUnit())return!1;if(x.equals(nPrev))continue next}return!1}return!0}BigInteger.prototype=Object.create(Integer.prototype),SmallInteger.prototype=Object.create(Integer.prototype),NativeBigInt.prototype=Object.create(Integer.prototype),BigInteger.prototype.plus=BigInteger.prototype.add=function(v){var a,b,v=parseValue(v);return this.sign!==v.sign?this.subtract(v.negate()):(a=this.value,b=v.value,v.isSmall?new BigInteger(addSmall(a,Math.abs(b)),this.sign):new BigInteger(addAny(a,b),this.sign))},SmallInteger.prototype.plus=SmallInteger.prototype.add=function(v){var v=parseValue(v),a=this.value;if(a<0!==v.sign)return this.subtract(v.negate());var b=v.value;if(v.isSmall){if(isPrecise(a+b))return new SmallInteger(a+b);b=smallToArray(Math.abs(b))}return new BigInteger(addSmall(b,Math.abs(a)),a<0)},NativeBigInt.prototype.plus=NativeBigInt.prototype.add=function(v){return new NativeBigInt(this.value+parseValue(v).value)},BigInteger.prototype.minus=BigInteger.prototype.subtract=function(v){var a,b,v=parseValue(v);return this.sign!==v.sign?this.add(v.negate()):(a=this.value,b=v.value,v.isSmall?subtractSmall(a,Math.abs(b),this.sign):function(a,b,sign){var value;return 0<=compareAbs(a,b)?value=subtract(a,b):(value=subtract(b,a),sign=!sign),"number"==typeof(value=arrayToSmall(value))?new SmallInteger(value=sign?-value:value):new BigInteger(value,sign)}(a,b,this.sign))},SmallInteger.prototype.minus=SmallInteger.prototype.subtract=function(v){var b,v=parseValue(v),a=this.value;return a<0!==v.sign?this.add(v.negate()):(b=v.value,v.isSmall?new SmallInteger(a-b):subtractSmall(b,Math.abs(a),0<=a))},NativeBigInt.prototype.minus=NativeBigInt.prototype.subtract=function(v){return new NativeBigInt(this.value-parseValue(v).value)},BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)},SmallInteger.prototype.negate=function(){var sign=this.sign,small=new SmallInteger(-this.value);return small.sign=!sign,small},NativeBigInt.prototype.negate=function(){return new NativeBigInt(-this.value)},BigInteger.prototype.abs=function(){return new BigInteger(this.value,!1)},SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))},NativeBigInt.prototype.abs=function(){return new NativeBigInt(0<=this.value?this.value:-this.value)},BigInteger.prototype.times=BigInteger.prototype.multiply=function(v){var l2,v=parseValue(v),a=this.value,b=v.value,sign=this.sign!==v.sign;if(v.isSmall){if(0===b)return Integer[0];if(1===b)return this;if(-1===b)return this.negate();if((v=Math.abs(b))<BASE)return new BigInteger(multiplySmall(a,v),sign);b=smallToArray(v)}return v=a.length,l2=b.length,new BigInteger((0<-.012*v-.012*l2+15e-6*v*l2?function multiplyKaratsuba(x,y){var n,d,ac,bd,b;return(n=Math.max(x.length,y.length))<=30?multiplyLong(x,y):(n=Math.ceil(n/2),b=x.slice(n),x=x.slice(0,n),d=y.slice(n),ac=multiplyKaratsuba(x,y=y.slice(0,n)),bd=multiplyKaratsuba(b,d),x=multiplyKaratsuba(addAny(x,b),addAny(y,d)),trim(b=addAny(addAny(ac,shiftLeft(subtract(subtract(x,ac),bd),n)),shiftLeft(bd,2*n))),b)}:multiplyLong)(a,b),sign)},SmallInteger.prototype._multiplyBySmall=function(a){return isPrecise(a.value*this.value)?new SmallInteger(a.value*this.value):multiplySmallAndArray(Math.abs(a.value),smallToArray(Math.abs(this.value)),this.sign!==a.sign)},BigInteger.prototype._multiplyBySmall=function(a){return 0===a.value?Integer[0]:1===a.value?this:-1===a.value?this.negate():multiplySmallAndArray(Math.abs(a.value),this.value,this.sign!==a.sign)},SmallInteger.prototype.times=SmallInteger.prototype.multiply=function(v){return parseValue(v)._multiplyBySmall(this)},NativeBigInt.prototype.times=NativeBigInt.prototype.multiply=function(v){return new NativeBigInt(this.value*parseValue(v).value)},BigInteger.prototype.square=function(){return new BigInteger(square(this.value),!1)},SmallInteger.prototype.square=function(){var value=this.value*this.value;return isPrecise(value)?new SmallInteger(value):new BigInteger(square(smallToArray(Math.abs(this.value))),!1)},NativeBigInt.prototype.square=function(v){return new NativeBigInt(this.value*this.value)},NativeBigInt.prototype.divmod=SmallInteger.prototype.divmod=BigInteger.prototype.divmod=function(v){v=divModAny(this,v);return{quotient:v[0],remainder:v[1]}},BigInteger.prototype.divide=function(v){return divModAny(this,v)[0]},NativeBigInt.prototype.over=NativeBigInt.prototype.divide=function(v){return new NativeBigInt(this.value/parseValue(v).value)},SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide,BigInteger.prototype.mod=function(v){return divModAny(this,v)[1]},NativeBigInt.prototype.mod=NativeBigInt.prototype.remainder=function(v){return new NativeBigInt(this.value%parseValue(v).value)},SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod,SmallInteger.prototype.pow=BigInteger.prototype.pow=function(v){var x,y,v=parseValue(v),a=this.value,b=v.value;if(0===b)return Integer[1];if(0===a)return Integer[0];if(1===a)return Integer[1];if(-1===a)return v.isEven()?Integer[1]:Integer[-1];if(v.sign)return Integer[0];if(!v.isSmall)throw new Error("The exponent "+v.toString()+" is too large.");if(this.isSmall&&isPrecise(v=Math.pow(a,b)))return new SmallInteger(truncate(v));for(x=this,y=Integer[1];;){if(!0&b&&(y=y.times(x),--b),0===b)break;b/=2,x=x.square()}return y},NativeBigInt.prototype.pow=function(v){var v=parseValue(v),a=this.value,b=v.value,_0=BigInt(0),_1=BigInt(1),_2=BigInt(2);if(b===_0)return Integer[1];if(a===_0)return Integer[0];if(a===_1)return Integer[1];if(a===BigInt(-1))return v.isEven()?Integer[1]:Integer[-1];if(v.isNegative())return new NativeBigInt(_0);for(var x=this,y=Integer[1];(b&_1)===_1&&(y=y.times(x),--b),b!==_0;)b/=_2,x=x.square();return y},NativeBigInt.prototype.modPow=SmallInteger.prototype.modPow=BigInteger.prototype.modPow=function(exp,mod){if(exp=parseValue(exp),(mod=parseValue(mod)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=Integer[1],base=this.mod(mod);for(exp.isNegative()&&(exp=exp.multiply(Integer[-1]),base=base.modInv(mod));exp.isPositive();){if(base.isZero())return Integer[0];exp.isOdd()&&(r=r.multiply(base).mod(mod)),exp=exp.divide(2),base=base.square().mod(mod)}return r},BigInteger.prototype.compareAbs=function(v){var v=parseValue(v),a=this.value,b=v.value;return v.isSmall?1:compareAbs(a,b)},SmallInteger.prototype.compareAbs=function(v){var v=parseValue(v),a=Math.abs(this.value),b=v.value;return v.isSmall?a===(b=Math.abs(b))?0:b<a?1:-1:-1},NativeBigInt.prototype.compareAbs=function(v){var a=this.value,v=parseValue(v).value;return(a=0<=a?a:-a)===(v=0<=v?v:-v)?0:v<a?1:-1},BigInteger.prototype.compareTo=BigInteger.prototype.compare=function(v){var a,b;return v===1/0?-1:v===-1/0?1:(v=parseValue(v),a=this.value,b=v.value,this.sign!==v.sign?v.sign?1:-1:v.isSmall?this.sign?-1:1:compareAbs(a,b)*(this.sign?-1:1))},SmallInteger.prototype.compareTo=SmallInteger.prototype.compare=function(v){var a,b;return v===1/0?-1:v===-1/0?1:(v=parseValue(v),a=this.value,b=v.value,v.isSmall?a==b?0:b<a?1:-1:a<0!==v.sign?a<0?-1:1:a<0?1:-1)},NativeBigInt.prototype.compareTo=NativeBigInt.prototype.compare=function(v){var a;return v===1/0?-1:v===-1/0?1:(a=this.value)===(v=parseValue(v).value)?0:v<a?1:-1},NativeBigInt.prototype.eq=NativeBigInt.prototype.equals=SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals=function(v){return 0===this.compare(v)},NativeBigInt.prototype.neq=NativeBigInt.prototype.notEquals=SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals=function(v){return 0!==this.compare(v)},NativeBigInt.prototype.gt=NativeBigInt.prototype.greater=SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater=function(v){return 0<this.compare(v)},NativeBigInt.prototype.lt=NativeBigInt.prototype.lesser=SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser=function(v){return this.compare(v)<0},NativeBigInt.prototype.geq=NativeBigInt.prototype.greaterOrEquals=SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals=function(v){return 0<=this.compare(v)},NativeBigInt.prototype.leq=NativeBigInt.prototype.lesserOrEquals=SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals=function(v){return this.compare(v)<=0},BigInteger.prototype.isEven=function(){return 0==(1&this.value[0])},SmallInteger.prototype.isEven=function(){return 0==(1&this.value)},NativeBigInt.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},BigInteger.prototype.isOdd=function(){return 1==(1&this.value[0])},SmallInteger.prototype.isOdd=function(){return 1==(1&this.value)},NativeBigInt.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},BigInteger.prototype.isPositive=function(){return!this.sign},NativeBigInt.prototype.isPositive=SmallInteger.prototype.isPositive=function(){return 0<this.value},BigInteger.prototype.isNegative=function(){return this.sign},NativeBigInt.prototype.isNegative=SmallInteger.prototype.isNegative=function(){return this.value<0},BigInteger.prototype.isUnit=function(){return!1},SmallInteger.prototype.isUnit=function(){return 1===Math.abs(this.value)},NativeBigInt.prototype.isUnit=function(){return this.abs().value===BigInt(1)},BigInteger.prototype.isZero=function(){return!1},SmallInteger.prototype.isZero=function(){return 0===this.value},NativeBigInt.prototype.isZero=function(){return this.value===BigInt(0)},NativeBigInt.prototype.isDivisibleBy=SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy=function(v){v=parseValue(v);return!v.isZero()&&(!!v.isUnit()||(0===v.compareAbs(2)?this.isEven():this.mod(v).isZero()))},NativeBigInt.prototype.isPrime=SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime=function(strict){var isPrime=isBasicPrime(this);if(void 0!==isPrime)return isPrime;var isPrime=this.abs(),bits=isPrime.bitLength();if(bits<=64)return millerRabinTest(isPrime,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var bits=Math.log(2)*bits.toJSNumber(),t=Math.ceil(!0===strict?2*Math.pow(bits,2):bits),a=[],i=0;i<t;i++)a.push(bigInt(i+2));return millerRabinTest(isPrime,a)},NativeBigInt.prototype.isProbablePrime=SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime=function(iterations,rng){var isPrime=isBasicPrime(this);if(void 0!==isPrime)return isPrime;for(var n=this.abs(),t=void 0===iterations?5:iterations,a=[],i=0;i<t;i++)a.push(bigInt.randBetween(2,n.minus(2),rng));return millerRabinTest(n,a)},NativeBigInt.prototype.modInv=SmallInteger.prototype.modInv=BigInteger.prototype.modInv=function(n){for(var q,lastT,lastR,t=bigInt.zero,newT=bigInt.one,r=parseValue(n),newR=this.abs();!newR.isZero();)q=r.divide(newR),lastT=t,lastR=r,t=newT,r=newR,newT=lastT.subtract(q.multiply(newT)),newR=lastR.subtract(q.multiply(newR));if(r.isUnit())return-1===t.compare(0)&&(t=t.add(n)),this.isNegative()?t.negate():t;throw new Error(this.toString()+" and "+n.toString()+" are not co-prime")},BigInteger.prototype.next=function(){var value=this.value;return this.sign?subtractSmall(value,1,this.sign):new BigInteger(addSmall(value,1),this.sign)},SmallInteger.prototype.next=function(){var value=this.value;return value+1<MAX_INT?new SmallInteger(value+1):new BigInteger(MAX_INT_ARR,!1)},NativeBigInt.prototype.next=function(){return new NativeBigInt(this.value+BigInt(1))},BigInteger.prototype.prev=function(){var value=this.value;return this.sign?new BigInteger(addSmall(value,1),!0):subtractSmall(value,1,this.sign)},SmallInteger.prototype.prev=function(){var value=this.value;return-MAX_INT<value-1?new SmallInteger(value-1):new BigInteger(MAX_INT_ARR,!0)},NativeBigInt.prototype.prev=function(){return new NativeBigInt(this.value-BigInt(1))};for(var powersOfTwo=[1];2*powersOfTwo[powersOfTwo.length-1]<=BASE;)powersOfTwo.push(2*powersOfTwo[powersOfTwo.length-1]);var powers2Length=powersOfTwo.length,highestPower2=powersOfTwo[powers2Length-1];function shift_isSmall(n){return Math.abs(n)<=BASE}function bitwise(x,y,fn){y=parseValue(y);for(var xSign=x.isNegative(),ySign=y.isNegative(),xRem=xSign?x.not():x,yRem=ySign?y.not():y,xDigit=0,yDigit=0,xDivMod=null,yDivMod=null,result=[];!xRem.isZero()||!yRem.isZero();)xDigit=(xDivMod=divModAny(xRem,highestPower2))[1].toJSNumber(),xSign&&(xDigit=highestPower2-1-xDigit),yDigit=(yDivMod=divModAny(yRem,highestPower2))[1].toJSNumber(),xRem=xDivMod[0],yRem=yDivMod[0],result.push(fn(xDigit,yDigit=ySign?highestPower2-1-yDigit:yDigit));for(var sum=0!==fn(xSign?1:0,ySign?1:0)?bigInt(-1):bigInt(0),i=result.length-1;0<=i;--i)sum=sum.multiply(highestPower2).add(bigInt(result[i]));return sum}NativeBigInt.prototype.shiftLeft=SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft=function(v){var n=parseValue(v).toJSNumber();if(!shift_isSmall(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftRight(-n);var result=this;if(result.isZero())return result;for(;powers2Length<=n;)result=result.multiply(highestPower2),n-=powers2Length-1;return result.multiply(powersOfTwo[n])},NativeBigInt.prototype.shiftRight=SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight=function(v){var remQuo,n=parseValue(v).toJSNumber();if(!shift_isSmall(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var result=this;powers2Length<=n;){if(result.isZero()||result.isNegative()&&result.isUnit())return result;result=(remQuo=divModAny(result,highestPower2))[1].isNegative()?remQuo[0].prev():remQuo[0],n-=powers2Length-1}return(remQuo=divModAny(result,powersOfTwo[n]))[1].isNegative()?remQuo[0].prev():remQuo[0]},NativeBigInt.prototype.not=SmallInteger.prototype.not=BigInteger.prototype.not=function(){return this.negate().prev()},NativeBigInt.prototype.and=SmallInteger.prototype.and=BigInteger.prototype.and=function(n){return bitwise(this,n,function(a,b){return a&b})},NativeBigInt.prototype.or=SmallInteger.prototype.or=BigInteger.prototype.or=function(n){return bitwise(this,n,function(a,b){return a|b})},NativeBigInt.prototype.xor=SmallInteger.prototype.xor=BigInteger.prototype.xor=function(n){return bitwise(this,n,function(a,b){return a^b})};var LOBMASK_I=1<<30,LOBMASK_BI=(BASE&-BASE)*(BASE&-BASE)|LOBMASK_I;function roughLOB(n){n=n.value,n="number"==typeof n?n|LOBMASK_I:"bigint"==typeof n?n|BigInt(LOBMASK_I):n[0]+n[1]*BASE|LOBMASK_BI;return n&-n}function max(a,b){return a=parseValue(a),b=parseValue(b),a.greater(b)?a:b}function min(a,b){return a=parseValue(a),b=parseValue(b),a.lesser(b)?a:b}function gcd(a,b){if(a=parseValue(a).abs(),b=parseValue(b).abs(),a.equals(b))return a;if(a.isZero())return b;if(b.isZero())return a;for(var d,t,c=Integer[1];a.isEven()&&b.isEven();)d=min(roughLOB(a),roughLOB(b)),a=a.divide(d),b=b.divide(d),c=c.multiply(d);for(;a.isEven();)a=a.divide(roughLOB(a));do{for(;b.isEven();)b=b.divide(roughLOB(b))}while(a.greater(b)&&(t=b,b=a,a=t),!(b=b.subtract(a)).isZero());return c.isUnit()?a:a.multiply(c)}NativeBigInt.prototype.bitLength=SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength=function(){var n=this;return 0===(n=n.compareTo(bigInt(0))<0?n.negate().subtract(bigInt(1)):n).compareTo(bigInt(0))?bigInt(0):bigInt(function integerLogarithm(value,base){var p,tmp;return base.compareTo(value)<=0?(p=(tmp=integerLogarithm(value,base.square(base))).p,tmp=tmp.e,(base=p.multiply(base)).compareTo(value)<=0?{p:base,e:2*tmp+1}:{p:p,e:2*tmp}):{p:bigInt(1),e:0}}(n,bigInt(2)).e).add(bigInt(1))};var parseBase=function(text,base,alphabet,caseSensitive){alphabet=alphabet||DEFAULT_ALPHABET,text=String(text),caseSensitive||(text=text.toLowerCase(),alphabet=alphabet.toLowerCase());for(var length=text.length,absBase=Math.abs(base),alphabetValues={},i=0;i<alphabet.length;i++)alphabetValues[alphabet[i]]=i;for(i=0;i<length;i++){var c=text[i];if("-"!==c&&(c in alphabetValues&&absBase<=alphabetValues[c]&&("1"!==c||1!==absBase)))throw new Error(c+" is not a valid digit in base "+base+".")}base=parseValue(base);var digits=[],caseSensitive="-"===text[0];for(i=caseSensitive?1:0;i<text.length;i++)if((c=text[i])in alphabetValues)digits.push(parseValue(alphabetValues[c]));else{if("<"!==c)throw new Error(c+" is not a valid character");for(var start=i;">"!==text[++i]&&i<text.length;);digits.push(parseValue(text.slice(start+1,i)))}return parseBaseFromArray(digits,base,caseSensitive)};function parseBaseFromArray(digits,base,isNegative){for(var val=Integer[0],pow=Integer[1],i=digits.length-1;0<=i;i--)val=val.add(digits[i].times(pow)),pow=pow.times(base);return isNegative?val.negate():val}function toBase(n,base){if((base=bigInt(base)).isZero()){if(n.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(base.equals(-1))return n.isZero()?{value:[0],isNegative:!1}:n.isNegative()?{value:[].concat.apply([],Array.apply(null,Array(-n.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1}:((arr=Array.apply(null,Array(n.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1])).unshift([1]),{value:[].concat.apply([],arr),isNegative:!1});var arr=!1;if(n.isNegative()&&base.isPositive()&&(arr=!0,n=n.abs()),base.isUnit())return n.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(n.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:arr};for(var out=[],left=n;left.isNegative()||0<=left.compareAbs(base);){var left=(divmod=left.divmod(base)).quotient,divmod=divmod.remainder;divmod.isNegative()&&(divmod=base.minus(divmod).abs(),left=left.next()),out.push(divmod.toJSNumber())}return out.push(left.toJSNumber()),{value:out.reverse(),isNegative:arr}}function toBaseString(n,base,alphabet){n=toBase(n,base);return(n.isNegative?"-":"")+n.value.map(function(x){return function(digit,alphabet){return digit<(alphabet=alphabet||DEFAULT_ALPHABET).length?alphabet[digit]:"<"+digit+">"}(x,alphabet)}).join("")}function parseStringValue(v){if(isPrecise(+v)){var x=+v;if(x===truncate(x))return supportsNativeBigInt?new NativeBigInt(BigInt(x)):new SmallInteger(x);throw new Error("Invalid integer: "+v)}var x="-"===v[0],split=(v=x?v.slice(1):v).split(/e/i);if(2<split.length)throw new Error("Invalid integer: "+split.join("e"));if(2===split.length){var exp=split[1];if((exp=+(exp="+"===exp[0]?exp.slice(1):exp))!==truncate(exp)||!isPrecise(exp))throw new Error("Invalid integer: "+exp+" is not a valid exponent.");var split=split[0],decimalPlace=split.indexOf(".");if(0<=decimalPlace&&(exp-=split.length-decimalPlace-1,split=split.slice(0,decimalPlace)+split.slice(decimalPlace+1)),exp<0)throw new Error("Cannot include negative exponent part for integers");v=split+=new Array(exp+1).join("0")}if(!/^([0-9][0-9]*)$/.test(v))throw new Error("Invalid integer: "+v);if(supportsNativeBigInt)return new NativeBigInt(BigInt(x?"-"+v:v));for(var r=[],max=v.length,l=LOG_BASE,min=max-l;0<max;)r.push(+v.slice(min,max)),(min-=l)<0&&(min=0),max-=l;return trim(r),new BigInteger(r,x)}function parseValue(v){return"number"==typeof v?function(v){if(supportsNativeBigInt)return new NativeBigInt(BigInt(v));if(isPrecise(v)){if(v!==truncate(v))throw new Error(v+" is not an integer.");return new SmallInteger(v)}return parseStringValue(v.toString())}(v):"string"==typeof v?parseStringValue(v):"bigint"==typeof v?new NativeBigInt(v):v}BigInteger.prototype.toArray=function(radix){return toBase(this,radix)},SmallInteger.prototype.toArray=function(radix){return toBase(this,radix)},NativeBigInt.prototype.toArray=function(radix){return toBase(this,radix)},BigInteger.prototype.toString=function(radix,alphabet){if(10!==(radix=void 0===radix?10:radix))return toBaseString(this,radix,alphabet);for(var digit,v=this.value,l=v.length,str=String(v[--l]);0<=--l;)digit=String(v[l]),str+="0000000".slice(digit.length)+digit;return(this.sign?"-":"")+str},NativeBigInt.prototype.toString=SmallInteger.prototype.toString=function(radix,alphabet){return 10!=(radix=void 0===radix?10:radix)?toBaseString(this,radix,alphabet):String(this.value)},NativeBigInt.prototype.toJSON=BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()},BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf=function(){return this.value},NativeBigInt.prototype.valueOf=NativeBigInt.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var i=0;i<1e3;i++)Integer[i]=parseValue(i),0<i&&(Integer[-i]=parseValue(-i));return Integer.one=Integer[1],Integer.zero=Integer[0],Integer.minusOne=Integer[-1],Integer.max=max,Integer.min=min,Integer.gcd=gcd,Integer.lcm=function(a,b){return a=parseValue(a).abs(),b=parseValue(b).abs(),a.divide(gcd(a,b)).multiply(b)},Integer.isInstance=function(x){return x instanceof BigInteger||x instanceof SmallInteger||x instanceof NativeBigInt},Integer.randBetween=function(a,b,rng){a=parseValue(a),b=parseValue(b);var usedRNG=rng||Math.random,rng=min(a,b);if((a=max(a,b).subtract(rng).add(1)).isSmall)return rng.add(Math.floor(usedRNG()*a));for(var digits=toBase(a,BASE).value,result=[],restricted=!0,i=0;i<digits.length;i++){var top=restricted?digits[i]+(i+1<digits.length?digits[i+1]/BASE:0):BASE,top=truncate(usedRNG()*top);result.push(top),top<digits[i]&&(restricted=!1)}return rng.add(Integer.fromArray(result,BASE,!1))},Integer.fromArray=function(digits,base,isNegative){return parseBaseFromArray(digits.map(parseValue),parseValue(base||10),isNegative)},Integer}();void 0!==module&&module.hasOwnProperty("exports")&&(module.exports=bigInt),"function"==typeof define&&define.amd&&define(function(){return bigInt})},{}],3:[function(require,module,exports){!function(process){!function(){exports.formatArgs=function(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),this.useColors){var c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,match=>{"%%"!==match&&(index++,"%c"===match)&&(lastC=index)}),args.splice(lastC,0,c)}},exports.save=function(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function(){let r;try{r=exports.storage.getItem("debug")}catch(error){}!r&&void 0!==process&&"env"in process&&(r=process.env.DEBUG);return r},exports.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function(){try{return localStorage}catch(error){}}(),exports.destroy=(()=>{let warned=!1;return()=>{warned||(warned=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],exports.log=console.debug||console.log||(()=>{}),module.exports=require("./common")(exports);var formatters=module.exports["formatters"];formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}.call(this)}.call(this,require("_process"))},{"./common":4,_process:11}],4:[function(require,module,exports){module.exports=function(env){function createDebug(namespace){let prevTime,enableOverride=null,namespacesCache,enabledCache;function debug(...args){if(debug.enabled){const self=debug;var curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(match,format)=>{if("%%"===match)return"%";index++;var val,format=createDebug.formatters[format];return"function"==typeof format&&(val=args[index],match=format.call(self,val),args.splice(index,1),index--),match}),createDebug.formatArgs.call(self,args),(self.log||createDebug.log).apply(self,args)}}return debug.namespace=namespace,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(namespace),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==enableOverride?enableOverride:(namespacesCache!==createDebug.namespaces&&(namespacesCache=createDebug.namespaces,enabledCache=createDebug.enabled(namespace)),enabledCache),set:v=>{enableOverride=v}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(namespace,delimiter){delimiter=createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace);return delimiter.log=this.log,delimiter}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}return((createDebug.debug=createDebug).default=createDebug).coerce=function(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function(){var namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(namespace=>"-"+namespace)].join(",");return createDebug.enable(""),namespaces},createDebug.enable=function(namespaces){createDebug.save(namespaces),createDebug.namespaces=namespaces,createDebug.names=[],createDebug.skips=[];let i;var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.slice(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")))},createDebug.enabled=function(name){if("*"===name[name.length-1])return!0;let i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=require("ms"),createDebug.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(env).forEach(key=>{createDebug[key]=env[key]}),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function(namespace){let hash=0;for(let i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},{ms:5}],5:[function(require,module,exports){var s=1e3,m=6e4,h=36e5,d=24*h;function plural(ms,msAbs,n,name){msAbs=1.5*n<=msAbs;return Math.round(ms/n)+" "+name+(msAbs?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"==type&&0<val.length)return function(str){if(!(100<(str=String(str)).length)){str=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(str){var n=parseFloat(str[1]);switch((str[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(val);if("number"==type&&isFinite(val))return(options.long?function(ms){var msAbs=Math.abs(ms);if(d<=msAbs)return plural(ms,msAbs,d,"day");if(h<=msAbs)return plural(ms,msAbs,h,"hour");if(m<=msAbs)return plural(ms,msAbs,m,"minute");if(s<=msAbs)return plural(ms,msAbs,s,"second");return ms+" ms"}:function(ms){var msAbs=Math.abs(ms);if(d<=msAbs)return Math.round(ms/d)+"d";if(h<=msAbs)return Math.round(ms/h)+"h";if(m<=msAbs)return Math.round(ms/m)+"m";if(s<=msAbs)return Math.round(ms/s)+"s";return ms+"ms"})(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validation=require("./validation.js");const CHARSET_INVERSE_INDEX={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};exports.default={encode:function(data){(0,_validation.validate)(data instanceof Uint8Array,"Invalid data: "+data+".");let base32="";for(let i=0;i<data.length;++i){var value=data[i];(0,_validation.validate)(0<=value&&value<32,"Invalid value: "+value+"."),base32+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[value]}return base32},decode:function(string){(0,_validation.validate)("string"==typeof string,"Invalid base32-encoded string: "+string+".");var data=new Uint8Array(string.length);for(let i=0;i<string.length;++i){var value=string[i];(0,_validation.validate)(value in CHARSET_INVERSE_INDEX,"Invalid value: "+value+"."),data[i]=CHARSET_INVERSE_INDEX[value]}return data}}},{"./validation.js":9}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeAddress=function(address){(0,_validation.validate)("string"==typeof address&&hasSingleCase(address),"Invalid address: "+address+".");var pieces=address.toLowerCase().split(":"),prefix=((0,_validation.validate)(2===pieces.length,"Missing prefix: "+address+"."),pieces[0]),pieces=_base.default.decode(pieces[1]),address=((0,_validation.validate)(function(prefix,payload){prefix=concat(prefixToUint5Array(prefix),new Uint8Array(1));return polymod(concat(prefix,payload)).equals(0)}(prefix,pieces),"Invalid checksum: "+address+"."),function(data){return(0,_convertBits.default)(data,5,8,!0)}(pieces.subarray(0,-8))),pieces=address[0],address=address.subarray(1),pieces=function(versionByte){switch(248&versionByte){case 0:return"P2PKH";case 8:return"SCRIPT";case 152:return"TEMPLATE";case 88:return"GROUP";default:throw new _validation.ValidationError("Invalid address type in version byte: "+versionByte+".")}}(pieces);return{prefix:prefix,type:pieces,hash:address}},exports.encodeAddress=function(prefix,type,hash){(0,_validation.validate)("string"==typeof prefix&&function(prefix){return hasSingleCase(prefix)&&-1!==VALID_PREFIXES.indexOf(prefix.toLowerCase())}(prefix),"Invalid prefix: "+prefix+"."),(0,_validation.validate)("string"==typeof type,"Invalid type: "+type+"."),(0,_validation.validate)(hash instanceof Uint8Array,"Invalid hash: "+hash+".");var prefixData=concat(prefixToUint5Array(prefix),new Uint8Array(1)),type=function(type){switch(type){case"P2PKH":return 0;case"SCRIPT":return 8;case"TEMPLATE":return 152;case"GROUP":return 88;default:throw new _validation.ValidationError("Invalid type: "+type+".")}}(type)+(hash.length,0),type=function(data){return(0,_convertBits.default)(data,8,5)}(concat(new Uint8Array([type]),hash)),hash=concat(concat(prefixData,type),new Uint8Array(8)),prefixData=concat(type,function(checksum){for(var result=new Uint8Array(8),i=0;i<8;++i)result[7-i]=checksum.and(31).toJSNumber(),checksum=checksum.shiftRight(5);return result}(polymod(hash)));return prefix+":"+_base.default.encode(prefixData)};var _base=_interopRequireDefault(require("./base32.js")),_bigInteger=_interopRequireDefault(require("big-integer")),_convertBits=_interopRequireDefault(require("./convertBits.js")),_validation=require("./validation.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const VALID_PREFIXES=["nexa","nexatest","nexareg"];function prefixToUint5Array(prefix){for(var result=new Uint8Array(prefix.length),i=0;i<prefix.length;++i)result[i]=31&prefix[i].charCodeAt(0);return result}function concat(a,b){var ab=new Uint8Array(a.length+b.length);return ab.set(a),ab.set(b,a.length),ab}function polymod(data){for(var GENERATOR=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],checksum=(0,_bigInteger.default)(1),i=0;i<data.length;++i)for(var value=data[i],topBits=checksum.shiftRight(35),checksum=checksum.and(34359738367).shiftLeft(5).xor(value),j=0;j<GENERATOR.length;++j)topBits.shiftRight(j).and(1).equals(1)&&(checksum=checksum.xor(GENERATOR[j]));return checksum.xor(1)}function hasSingleCase(string){return string===string.toLowerCase()||string===string.toUpperCase()}},{"./base32.js":6,"./convertBits.js":8,"./validation.js":9,"big-integer":2}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _validation=require("./validation.js");exports.default=function(data,from,to,strictMode){var length=strictMode?Math.floor(data.length*from/to):Math.ceil(data.length*from/to),mask=(1<<to)-1,result=new Uint8Array(length);let index=0,accumulator=0,bits=0;for(var i=0;i<data.length;++i){var value=data[i];for((0,_validation.validate)(0<=value&&value>>from==0,"Invalid value: "+value+"."),accumulator=accumulator<<from|value,bits+=from;bits>=to;)bits-=to,result[index]=accumulator>>bits&mask,++index}return strictMode?(0,_validation.validate)(bits<from&&0==(accumulator<<to-bits&mask),"Input cannot be converted to "+to+" bits without padding, but strict mode was used."):0<bits&&(result[index]=accumulator<<to-bits&mask,++index),result}},{"./validation.js":9}],9:[function(require,module,exports){"use strict";function ValidationError(message){var error=new Error;this.name=error.name="ValidationError",this.message=error.message=message,this.stack=error.stack}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValidationError=ValidationError,exports.validate=function(condition,message){if(!condition)throw new ValidationError(message)},ValidationError.prototype=Object.create(Error.prototype)},{}],10:[function(require,module,exports){"use strict";var R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}:function(target){return Object.getOwnPropertyNames(target)},NumberIsNaN=Number.isNaN||function(value){return value!=value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter,module.exports.once=function(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver),reject(err)}function resolver(){"function"==typeof emitter.removeListener&&emitter.removeListener("error",errorListener),resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:!0}),"error"!==name&&function(emitter,handler,flags){"function"==typeof emitter.on&&eventTargetAgnosticAddListener(emitter,"error",handler,flags)}(emitter,errorListener,{once:!0})})},(EventEmitter.EventEmitter=EventEmitter).prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(listener){if("function"!=typeof listener)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}function _getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var events,existing;return checkListener(listener),void 0===(events=target._events)?(events=target._events=Object.create(null),target._eventsCount=0):(void 0!==events.newListener&&(target.emit("newListener",type,listener.listener||listener),events=target._events),existing=events[type]),void 0===existing?(existing=events[type]=listener,++target._eventsCount):("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),0<(events=_getMaxListeners(target))&&existing.length>events&&!existing.warned&&(existing.warned=!0,(prepend=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",prepend.emitter=target,prepend.type=type,prepend.count=existing.length,listener=prepend,console)&&console.warn&&console.warn(listener)),target}function _onceWrap(target,type,listener){target={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},type=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(target);return type.listener=listener,target.wrapFn=type}function _listeners(target,type,unwrap){target=target._events;if(void 0===target)return[];target=target[type];if(void 0===target)return[];if("function"==typeof target)return unwrap?[target.listener||target]:[target];if(unwrap){for(var arr=target,ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}return arrayClone(target,target.length)}function listenerCount(type){var events=this._events;if(void 0!==events){events=events[type];if("function"==typeof events)return 1;if(void 0!==events)return events.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if("function"==typeof emitter.on)flags.once?emitter.once(name,listener):emitter.on(name,listener);else{if("function"!=typeof emitter.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter);emitter.addEventListener(name,function wrapListener(arg){flags.once&&emitter.removeEventListener(name,wrapListener),listener(arg)})}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||NumberIsNaN(arg))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".");defaultMaxListeners=arg}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(type){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);var doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){if((er=0<args.length?args[0]:er)instanceof Error)throw er;doError=new Error("Unhandled error."+(er?" ("+er.message+")":""));throw doError.context=er,doError}var er=events[type];if(void 0===er)return!1;if("function"==typeof er)ReflectApply(er,this,args);else for(var len=er.length,listeners=arrayClone(er,len),i=0;i<len;++i)ReflectApply(listeners[i],this,args);return!0},EventEmitter.prototype.on=EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){return checkListener(listener),this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){return checkListener(listener),this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if(checkListener(listener),void 0!==(events=this._events)&&void 0!==(list=events[type]))if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=Object.create(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;0<=i;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),void 0!==events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var listeners,events=this._events;if(void 0!==events)if(void 0===events.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[type]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[type]);else if(0===arguments.length){for(var key,keys=Object.keys(events),i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(void 0!==listeners)for(i=listeners.length-1;0<=i;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return 0<this._eventsCount?ReflectOwnKeys(this._events):[]}},{}],11:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,module=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return(cachedSetTimeout=setTimeout)(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length)&&drainQueue()}function drainQueue(){if(!draining){for(var timeout=runTimeout(cleanUpNextTick),len=(draining=!0,queue.length);len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,!function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return(cachedClearTimeout=clearTimeout)(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}module.nextTick=function(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},module.title="browser",module.browser=!0,module.env={},module.argv=[],module.version="",module.versions={},module.on=noop,module.addListener=noop,module.once=noop,module.off=noop,module.removeListener=noop,module.removeAllListeners=noop,module.emit=noop,module.prependListener=noop,module.prependOnceListener=noop,module.listeners=function(name){return[]},module.binding=function(name){throw new Error("process.binding is not supported")},module.cwd=function(){return"/"},module.chdir=function(dir){throw new Error("process.chdir is not supported")},module.umask=function(){return 0}},{}]},{},[1]);
