{"version":3,"file":"vendors-node_modules_theia_core_lib_common_index_js.js","mappings":"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EA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gBAAgB;AAC1D;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA,CAAC;;;;;;;;;;;;;;;;;;;;;;;AC9IqD;AACK;AACN;AACrD;AACA;AACA;AACA;AACA;AACA,wBAAwB,8EAAsC;AAC9D;AACA;AACA;AACA;AACA,4BAA4B,4DAAmB;AAC/C;AACA;AACA;AACA,wBAAwB,8EAAsC;AAC9D;AACA,4BAA4B,iEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA,wBAAwB,iEAAsB,+BAA+B,gBAAgB;AAC7F;AACA,4BAA4B,sEAA8B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B;AACzE,gCAAgC,sEAA8B;AAC9D;AACA;AACA,8EAA8E,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsE;;;;;;;;;;;;;;;;;;ACvFX;AAChB;AAC3C,aAAa,wDAAU,CAAC,gEAAuB;AAC7B;;;;;;;;;;;;;;;;;;;ACHoD;AACtB;AACU;AACnD;AACP;AACA;AACA;AACA;AACA,gCAAgC,kFAA2B;AAC3D;AACA,mBAAmB,uEAAqB,KAAK,wDAAQ;AACrD;AACA;AACA;;;;;;;;;;;;;;;;;;ACbuD;AACI;AAC3D;AACA;AACA,mCAAmC,iEAAwB;AAC3D,4BAA4B,kFAA2C;AACvE;AACA,wCAAwC,wEAA+B;AACvE,+BAA+B,iEAAwB;AACvD;AACA;AACA;AACsB;;;;;;;;;;;;;;;;ACZtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;;;ACT0B;AAChB;AAC3C,kBAAkB,wDAAU,CAAC,sEAA6B;AACnC;;;;;;;;;;;;;;;;;;;ACHoC;AACX;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ,CAAC,+DAAsB;AACpE;AACiB;;;;;;;;;;;;;;;;;;;ACN0C;AACX;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ,CAAC,kEAAyB;AACvE;AACoB;;;;;;;;;;;;;;;;;;;ACNmC;AACI;AACS;AACpE,oBAAoB,iFAAsB,CAAC,oEAA2B,EAAE,kFAA2C;AAC1F;;;;;;;;;;;;;;;;;;;ACJ8B;AACI;AACS;AACpE,iBAAiB,iFAAsB,CAAC,iEAAwB,EAAE,+EAAwC;AACpF;;;;;;;;;;;;;;;;;ACJ0B;AAChD;AACA;AACA;AACA,+BAA+B,wDAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;;;;;;ACZc;AACU;AAC1D;AACA,WAAW,uEAAqB,KAAK,wDAAQ;AAC7C;AACkB;;;;;;;;;;;;;;;;;;;ACLyC;AACX;AACC;AACjD;AACA;AACA,2BAA2B,wDAAQ,CAAC,8DAAqB;AACzD,QAAQ,8DAAY;AACpB;AACA;AACsB;;;;;;;;;;;;;;;;;;;ACTqC;AACX;AACC;AACjD;AACA;AACA,2BAA2B,wDAAQ,CAAC,mEAA0B;AAC9D,QAAQ,8DAAY;AACpB;AACA;AACqB;;;;;;;;;;;;;;;;;;ACT0D;AAC9C;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,oBAAoB,qEAAe;AACnC,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sEAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;ACnCZ;AACP;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACO;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACP;AACO;AACP;AACO;AACP;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACO;AACP;AACO;AACP;AACO;AACP;AACO;AACP;AACO;AACA;AACA;AACA,4DAA4D;AAC5D,yDAAyD;AACzD,6DAA6D;AAC7D;AACP;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;ACnDP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC6D;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBP,gBAAgB,SAAI,IAAI,SAAI;AAC5B;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AAC8C;AACQ;AACwB;AACnB;AACE;AACuB;AACnC;AACa;AACS;AACtC;AACqC;AACb;AACvB;AACgC;AAClE;AACA;AACA;AACA;AACA,iCAAiC,sFAA8C;AAC/E;AACA;AACA,mCAAmC,sEAAgB;AACnD;AACA,0CAA0C,sEAAgB;AAC1D,qCAAqC,sEAAgB;AACrD,qCAAqC,sEAAgB;AACrD,iCAAiC,0FAAkD;AACnF;AACA;AACA;AACA;AACA;AACA,iCAAiC,iGAAyD;AAC1F;AACA;AACA;AACA;AACA;AACA,iCAAiC,4FAAoD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,6CAAE;AACpB,sCAAsC,2CAAM;AAC5C;AACA;AACA,gCAAgC,2CAAM;AACtC,kCAAkC,2CAAM;AACxC;AACA,mCAAmC,qEAAc;AACjD,0CAA0C,2EAAqB;AAC/D;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,0HAA0H,OAAO,uEAAoB,oBAAoB;AACzK,gCAAgC,uEAAoB;AACpD;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,8CAA8C,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,iDAAiD,sEAAgB;AACjE,0BAA0B,sDAAO;AACjC;AACA,mBAAmB,sEAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,sCAAsC,2CAAM;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,sDAAsD,2CAAM;AAC5D;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,+DAAsB;AAC3E;AACA;AACA;AACA;AACA;AACA,4BAA4B,oEAAiB;AAC7C,iDAAiD,iCAAiC;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mEAAiB;AAC9C;AACA;AACA;AACA;AACA,4BAA4B,8EAAsC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,sEAAsE,oBAAoB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,iDAAiD,+DAAsB;AACvE;AACA;AACA,sDAAsD,+DAAsB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,+DAAsB;AAC1E;AACA;AACA,yDAAyD,+DAAsB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iEAAwB;AACxD,2CAA2C,iEAAwB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,wDAAS;AAC7B,mFAAmF,4GAA4G;AAC/L;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB;AACA;AACA;AACA;AACA;AACA,gCAAgC,wEAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wEAAgC;AAC5E;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,cAAc,yCAAyC,iBAAiB,cAAc,oEAAc,WAAW;AACpK;AACA;AACA;AACA,gCAAgC,4EAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,yEAA0B;AACtC,4BAA4B,+DAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uDAAI;AAC9B;AACA,yBAAyB,8DAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wDAAS;AACrB,4DAA4D,8CAA8C;AAC1G;AACA;AACA;AACA;AACA,gDAAgD,wBAAwB;AACxE;AACA;AACA,gBAAgB,wDAAS;AACzB,gCAAgC,wEAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,yCAAyC;AACxH;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB,SAAS,mFAA4B;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAS;AACzB,iDAAiD,kDAAkD;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACoB;;;;;;;;;;;;;;;;;;AClsBY;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,CAAC;AAC0B;AAC3B;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA,CAAC;AAC+B;;;;;;;;;;;;;;;;AChBhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC4B;;;;;;;;;;;;;;;;;;ACdyB;AACP;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,0CAA0C;AAC3H,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4BAA4B,gEAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB,2DAAU,uBAAuB;AAC/F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;;;;;ACvGgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAAM;AACrC,iCAAiC,2CAAM;AACvC;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;AChDjC;AACA;AACA;AACA,CAAC,gCAAgC;AACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJ4B;AAC3C,mBAAmB,qDAAI;AACoB;AAC4C;AACT;AAChB;AAChB;AACR;AACF;AACE;AACgC;AACwB;AACpD;AACE;AACK;AACF;AACM;AACN;AACM;AAC5B;AACqB;AACG;AAC4D;AAC/C;AACV;;;;;;;;;;;;;;;;;ACxB1B;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;;ACdwC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,+DAAsB;AAC/C;AACA;AACA;AACA,8BAA8B,oEAAoE;AAClG;AACA;AACA;AACA,CAAC;AACmB;;;;;;;;;;;;;;;;;AChBuC;AAC3D;AACA;AACA;AACA;AACA,4DAA4D,iEAAwB;AACpF,wDAAwD,4DAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,iEAAwB;AAChF;AACA;AACA;AACA,CAAC;AACyB;;;;;;;;;;;;;;;;AClB1B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPyC;AACH;AACuB;AAClB;AACG;AAC0G;AACpI;AACE;AACR;AACqE;AAC/D;AACF;AAClC;AACA;AACA;AACA;AACA,sCAAsC,sEAA6B,GAAG,gEAAuB;AAC7F,6BAA6B,+CAAQ;AACrC,qBAAqB,2CAAM;AAC3B;AACA,8BAA8B,+CAAQ;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iEAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,6CAAO;AACrC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iEAAY;AACzB;AACA;AACA;AACA;AACA,8CAA8C,kFAA4B;AAC1E,0BAA0B,iEAAyB;AACnD,uBAAuB,2EAAqB;AAC5C,uBAAuB,gGAA0C;AACjE;AACA;AACA,aAAa,iEAAY;AACzB;AACA,aAAa,iEAAY;AACzB;AACA;AACA,8CAA8C,kFAA4B;AAC1E,0BAA0B,kEAA0B;AACpD,uBAAuB,gGAA0C;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6CAAO;AAClC,0BAA0B,uCAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C,+BAA+B,kEAAe;AAC9C;AACA,+CAA+C,8EAA2B;AAC1E;AACA,gCAAgC,4EAAoC,CAAC,qEAAe;AACpF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,sBAAsB,8CAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2EAAuB;AACnC,YAAY,mFAA6B;AACzC;AACA;AACA;AACA;AACA;AACA,qBAAqB,2CAAM,CAAC,oEAAc,sCAAsC,+CAAQ;AACxF,sBAAsB,8CAAO;AAC7B,sBAAsB,6CAAO;AAC7B;AACA;AACyD;;;;;;;;;;;;;;;;AClJzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;;;;;;ACxB3B,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AAC8E;AACxB;AACM;AACD;AACF;AACvB;AAClC;AACA,0BAA0B,qEAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAAwC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sFAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,4EAAoC;AAC1D;AACA;AACA,yBAAyB,2CAAM,CAAC,oEAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAAwC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA,yBAAyB,2CAAM,CAAC,oEAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qEAAe;AACjD;AACA,kDAAkD,wCAAwC,iBAAiB,mEAA0B,GAAG,IAAI;AAC5I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kCAAkC,gEAAuB;AACzD,uCAAuC,sEAA6B;AACpE,sCAAsC,8DAAqB;AAC3D,qCAAqC,mEAA0B;AAC/D;AACA;AACyE;;;;;;;;;;;;;;;;;ACtIxC;AACjC;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACkB;;;;;;;;;;;;;;;;;;;;;ACrBwC;AAC1B;AAC6B;AACxB;AACe;AACrD;AACA;AACA,kBAAkB,6CAAE;AACpB;AACA;AACA,6DAA6D,0EAAoB;AACjF,wBAAwB,8DAAe;AACvC;AACA;AACA;AACA;AACA,+BAA+B,+CAAQ,CAAC,+DAAsB;AAC9D;AACA,0CAA0C,+CAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sEAA6B;AACxD;AACA;AACA,+BAA+B,sEAA6B;AAC5D;AACA;AACA,2BAA2B,+DAAsB;AACjD;AACA;AACA,wDAAwD,OAAO,yEAAgC,wBAAwB,8BAA8B,IAAI;AACzJ;AACA;AACA,+BAA+B,kEAAyB;AACxD;AACA;AACA;AACA,uDAAuD,iBAAiB,+DAAsB,GAAG;AACjG;AACA;AACA;AACA;AACA;AACA,8DAA8D,OAAO,yEAAgC,wBAAwB,8BAA8B,IAAI;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+DAAsB;AACrD;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACiB;;;;;;;;;;;;;;;;;;;;AChFlB,gBAAgB,SAAI,IAAI,SAAI;AAC5B;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,qBAAqB,SAAI,IAAI,SAAI;AACjC,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACyG;AAC3B;AACnB;AACY;AACvE;AACA;AACA;AACA;AACA,2BAA2B,oEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wEAA0B;AACjE;AACA;AACA,KAAK,IAAI,yFAAyF;AAClG;AACA;AACA;AACA;AACA;AACA,kEAAkE,eAAe,gBAAgB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,WAAW,sFAAsF;AACjL;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,yCAAyC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,QAAQ,uDAAS;AACjB,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oEAA2B;AACvD,uCAAuC,oEAA2B;AAClE;AACA;AACA;AACA;AACA;AACA,gCAAgC,2EAAoB;AACpD;AACA;AACA;AACA;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA,oFAAoF,sEAAgB;AACpG;AACA;AACA;AACA,wBAAwB,4EAAqB;AAC7C;AACA,4BAA4B,iEAAwB;AACpD,wBAAwB,wEAAiB;AACzC;AACA;AACA;AACA;AACA;AACA,QAAQ,uDAAS;AACjB,uDAAuD,gEAAgE;AACvH;AACA;AACA;AACA;AACA;AAC2B;;;;;;;;;;;;;;;;;;;;;;;;AC7L3B,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACsD;AACO;AACF;AACG;AACnB;AACkC;AACP;AACpB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uEAAiB;AAC1C,WAAW,kFAA+B,eAAe,uDAAuD,gBAAgB,iBAAiB,iFAAyC,qFAAqF;AAC/Q;AACA;AACA;AACA;AACA,IAAI,sEAAgB;AACpB;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B,qBAAqB,+DAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,6DAAe;AAChC;AACA;AACA;AACA;AACA,IAAI,yDAAW;AACf;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB,uDAAuD,mDAAmD;AAC1G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,kDAAkD,uEAAoB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;;;;;;;;;;;;;;;;;;;AC5MnB,iBAAiB,SAAI,IAAI,SAAI;AAC7B,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AAC8D;AACnB;AACpC;AACP,2BAA2B,sEAAgB;AAC3C;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA;AACO;AACP,0BAA0B,sEAAgB;AAC1C;AACA;AACA,0BAA0B,sEAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,uDAAS;AACjB;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;;;;;;;;;;;;;;;;;ACvF6D;AACC;AAC/D;AACA;AACA;AACA;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;ACpB2B;AACA;AACI;AAC1D;AACA;AACA;AACA,sCAAsC,mEAAiB;AACvD,oCAAoC,+DAAe;AACnD,oCAAoC,+DAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACgC;;;;;;;;;;;;;;;;;ACxEyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mEAAiB;AACpC;AACA;AACA;AACA,mBAAmB,mEAAiB;AACpC;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;;;ACf2B;AACyB;AACX;AACL;AAC/D;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,mBAAmB,6EAAqB;AACxC;AACA;AACA;AACA,iCAAiC,wEAAgC;AACjE;AACA;AACA;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA;AACA;AACA,mBAAmB,6EAAqB;AACxC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA;AACA,4BAA4B,2EAAmC;AAC/D;AACA;AACA,6BAA6B,qEAAe;AAC5C,8BAA8B,sEAAgB;AAC9C;AACA;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,4CAA4C;AAC5C;AACA;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,sCAAsC;AACtC;AACA,mBAAmB,wEAAmB;AACtC;AACA;AACA,6BAA6B,qEAAe;AAC5C;AACA,8BAA8B,sEAAgB;AAC9C,mBAAmB,wEAAmB;AACtC;AACA;AACA,iDAAiD,wCAAwC;AACzF;AACA;AACA,CAAC;AAC0B;;;;;;;;;;;;;;;;;;ACnF2B;AACI;AAC1D;AACA;AACA;AACA,sCAAsC,mEAAiB;AACvD,oCAAoC,+DAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAC8B;;;;;;;;;;;;;;;;;;AC7DuB;AACuD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,mCAAmC,oEAAe;AAClD,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,mCAAmC,qEAAgB;AACnD,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,mEAAc;AACrD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,oEAAe;AACtD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,qEAAgB;AACvD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,mEAAc;AACjF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,mEAAc;AAClF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,oEAAe;AAClF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,oEAAe;AACnF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB,UAAU,qEAAgB;AACnF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB,UAAU,qEAAgB;AACpF;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,uCAAuC,uEAAkB;AACzD;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA;AACA,wCAAwC,uEAAkB;AAC1D;AACA,mBAAmB,+DAAe;AAClC;AACA;AACA,CAAC;AAC4B;;;;;;;;;;;;;;;;;;;;;AClG8B;AACX;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,8BAA8B,wDAAQ;AACtC;AACA;AACA,uCAAuC,+DAAsB;AAC7D,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiF;;;;;;;;;;;;;;;;;AClCjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiD;;;;;;;;;;;;;;;;;;;;;;ACVqB;AAChB;AACO;AAChB;AACtC;AACP;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA,gDAAgD,8CAA8C;AAC9F;AACA;AACA;AACO;AACP;AACA;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA,aAAa,qEAAe;AAC5B;AACA;AACA;AACA;AACA,wCAAwC,kFAA4B;AACpE,wBAAwB,uEAA+B;AACvD;AACA;AACO;AACP;AACA,aAAa,qEAAe;AAC5B,qBAAqB,uCAAuC,sDAAW;AACvE,aAAa,qEAAe;AAC5B,qBAAqB,wCAAwC,sDAAW;AACxE,aAAa,qEAAe;AAC5B,qBAAqB,4CAA4C,sDAAW;AAC5E;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACsB;;;;;;;;;;;;;;;;;;ACNgC;AAC/C;AACP;AACA,0BAA0B,iEAAyB;AACnD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACfO;AACP;AACA;AACA;AACA;AACA,CAAC,kCAAkC;;;;;;;;;;;;;;;;ACLnC;AACA;AACA;AACA;AACc;;;;;;;;;;;;;;;;ACJP;AACP;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACZsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sEAA8B;AAC1D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiL;;;;;;;;;;;ACnGjL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;ACpBA,iBAAiB,mBAAO,CAAC,kGAAkC;;;;;;;;;;ACA3D,SAAS,mBAAO,CAAC,cAAI;AACrB,WAAW,mBAAO,CAAC,kBAAM;;AAEzB;AACA,qBAAqB,KAAyC,GAAG,OAAuB,GAAG,CAAO;;AAElG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uCAAuC,2DAA+B;AACtE;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAyC,oBAAoB,CAAE;AACnE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;;AAEf;;AAEA,kBAAkB,gBAAgB;AAClC;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAC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;;;;;;;;;;AChFE;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,yBAAyB;AAC3D,cAAc,mBAAO,CAAC,8DAAO;AAC7B,WAAW,mBAAO,CAAC,4DAAM;AACzB,iBAAiB,mBAAO,CAAC,oEAAU;AACnC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA,aAAa,YAAY;AACzB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AC/FlB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,4BAA4B,GAAG,kCAAkC,GAAG,oCAAoC,GAAG,2CAA2C,GAAG,sCAAsC,GAAG,0BAA0B,GAAG,uBAAuB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,4BAA4B,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,aAAa,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,qBAAqB;AACviB,cAAc,mBAAO,CAAC,8DAAO;AAC7B,WAAW,mBAAO,CAAC,4DAAM;AACzB,mBAAmB,mBAAO,CAAC,wEAAY;AACvC,oBAAoB,mBAAO,CAAC,0EAAa;AACzC,iBAAiB,mBAAO,CAAC,oEAAU;AACnC,uBAAuB,mBAAO,CAAC,gFAAgB;AAC/C;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD,kBAAkB;AAClB,oBAAoB;AACpB,mBAAmB;AACnB,mBAAmB;AACnB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C,2CAA2C,2CAA2C;AACjI;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC,mCAAmC,oCAAoC,oCAAoC;AAC5G;AACA;AACA;AACA;AACA,oEAAoE,IAAI;AACxE,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,UAAU,qBAAqB;AAC1K;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,uBAAuB,cAAc;AAChL;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB,uBAAuB,cAAc;AACxK;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA,8GAA8G,sBAAsB;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,oDAAoD;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,uBAAuB,yBAAyB,cAAc;AACxH;AACA;AACA,0DAA0D,uBAAuB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB,UAAU,qBAAqB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oCAAoC;AACtF;AACA;AACA;AACA;AACA,iEAAiE,gBAAgB;AACjF;AACA;AACA,iEAAiE,gBAAgB,UAAU,qBAAqB,sBAAsB,eAAe;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,eAAe,yBAAyB,cAAc;AAChH;AACA;AACA,0DAA0D,eAAe;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,iCAAiC;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,2CAA2C,gBAAgB,KAAK,WAAW;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,gDAAgD,eAAe;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ,KAAK,WAAW,8BAA8B,uBAAuB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,4CAA4C,gBAAgB,KAAK,WAAW;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uBAAuB,GAAG,mBAAmB;AAC/G,iDAAiD,wBAAwB,KAAK,WAAW,QAAQ,wCAAwC,KAAK,MAAM;AACpJ;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,+BAA+B;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC;AACzE;AACA;AACA;AACA,gDAAgD,oBAAoB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA;AACA,4DAA4D,eAAe;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4EAA4E,cAAc;AAC1F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,GAAG;AAC3G;AACA;AACA;AACA;AACA,+EAA+E,IAAI;AACnF,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,+BAA+B;AAC9G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+BAA+B;;;;;;;;;;;;AC3rClB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;;;;;;;;;;;;ACfzC;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,aAAa;AAC/B,cAAc,mBAAO,CAAC,8DAAO;AAC7B;AACA;AACA,0BAA0B;AAC1B,+BAA+B;AAC/B,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+CAA+C;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;;;;;;;;;;;AC/Ha;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,aAAa,GAAG,YAAY,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,GAAG,eAAe;AACtH;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mBAAmB;;;;;;;;;;;;AClCN;AACb;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,iBAAiB,GAAG,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;;;;;;AC7YH;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA,yFAAyF,OAAO;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;;;;;;ACvJhB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,6BAA6B,GAAG,qBAAqB;AAC3F,cAAc,mBAAO,CAAC,8DAAO;AAC7B,WAAW,mBAAO,CAAC,4DAAM;AACzB,iBAAiB,mBAAO,CAAC,oEAAU;AACnC,oBAAoB,mBAAO,CAAC,0EAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG,4CAA4C;AAChJ;AACA;AACA;AACA;AACA,+FAA+F,cAAc;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2CAA2C;AACrF;AACA;AACA,SAAS;AACT;AACA;AACA,mCAAmC;;;;;;;;;;;;ACpMtB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC,GAAG,6BAA6B,GAAG,qBAAqB;AAC5F,cAAc,mBAAO,CAAC,8DAAO;AAC7B,WAAW,mBAAO,CAAC,4DAAM;AACzB,oBAAoB,mBAAO,CAAC,0EAAa;AACzC,iBAAiB,mBAAO,CAAC,oEAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;;;;;;;;;;;AClHvB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,gCAAgC,GAAG,2BAA2B,GAAG,qBAAqB,GAAG,kBAAkB;AAC5qB,WAAW,mBAAO,CAAC,4DAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,cAAc,eAAe,eAAe;;;;;;;;;;;;ACjThC;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB;AACnB,kBAAe;;;;;;;;;;;;ACtBF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,cAAc,mBAAO,CAAC,8DAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wBAAwB;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;ACnEJ;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,iCAAiC;AACvE,uBAAuB,mBAAO,CAAC,gFAAgB;AAC/C;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;;;;;;;;;;;AC3EtB;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,mCAAmC,GAAG,mCAAmC,GAAG,iCAAiC,GAAG,iCAAiC,GAAG,8BAA8B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,wBAAwB;AAC1b;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,4DAAO;AAC7B;AACA;AACA,aAAa,mBAAO,CAAC,kBAAM;AAC3B,WAAW,mBAAO,CAAC,cAAI;AACvB,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,cAAc,mBAAO,CAAC,gBAAK;AAC3B,cAAc,mBAAO,CAAC,sEAAe;AACrC,aAAa,mBAAO,CAAC,sEAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,aAAa;AAC3D;AACA;AACA;AACA,0DAA0D,aAAa;AACvE;AACA;AACA,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA,kEAAkE,OAAO,mBAAmB,OAAO;AACnG;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC;AACrC,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qCAAqC;AACrC,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AChQlB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,kBAAM;AAC7B,cAAc,mBAAO,CAAC,sEAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB;AACnB,kBAAe;;;;;;;;;;;;AChKf;AACA;AACA;AACA;AACa;;AAEb,6GAA2C;;;;;;;;;;;ACN9B;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,gCAAgC;AACxD,aAAa,mBAAO,CAAC,sEAAgB;AACrC,aAAa,mBAAO,CAAC,+FAA6B;AAClD,aAAa,mBAAO,CAAC,wFAAY;AACjC,aAAa,mBAAO,CAAC,wFAAY;AACjC,mBAAmB,mBAAO,CAAC,4FAAc;AACzC,4DAA2D,EAAE,qCAAqC,iDAAiD,EAAC;AACpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;;;;;;;;;;;;AC5ElD;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC;AAChC,yBAAyB,mBAAO,CAAC,sEAAgB;AACjD;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,gCAAgC;;;;;;;;;;;;ACdnB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,iCAAiC,GAAG,2BAA2B,GAAG,4BAA4B,GAAG,wBAAwB,GAAG,wBAAwB;AACvL,yBAAyB,mBAAO,CAAC,sEAAgB;AACjD;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,gCAAgC;;;;;;;;;;;;AC3CnB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yCAAyC,GAAG,yCAAyC,GAAG,mCAAmC;AAC3H,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC,mCAAmC,mCAAmC;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,yCAAyC,yCAAyC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,yCAAyC,yCAAyC;;;;;;;;;;;;ACzC9G;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,4BAA4B;AAC/D,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA,yBAAyB,2BAA2B;AACpD,wBAAwB,2CAA2C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA,yBAAyB,+BAA+B;AACxD,wBAAwB,2CAA2C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;;;;;;;;;;;;AC/BnF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B;AAC5B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;;;;;;;;;;;;ACvBvE;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,4BAA4B,mBAAmB,qBAAqB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;;;;;;;;;;;;ACrBjE;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,kCAAkC,GAAG,iCAAiC,GAAG,oCAAoC,GAAG,wCAAwC;AAC3L,yBAAyB,mBAAO,CAAC,sEAAgB;AACjD,WAAW,mBAAO,CAAC,wFAAY;AAC/B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uCAAuC,wCAAwC,wCAAwC;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mCAAmC,oCAAoC,oCAAoC;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;;;;;;;;;;;;ACzEnF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,kCAAkC,GAAG,kCAAkC,GAAG,8BAA8B,GAAG,kCAAkC,GAAG,8BAA8B,GAAG,gCAAgC;AAClP,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AA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qCAAqC,oEAAoE,EAAC;AACnL,oCAAoC,mBAAO,CAAC,0HAA6B;AACzE,2DAA0D,EAAE,qCAAqC,+DAA+D,EAAC;AACjK;AACA;AACA;AACA;AACA,IAAI,0BAA0B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA,IAAI,8BAA8B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA,IAAI,sCAAsC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA,IAAI,uBAAuB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA,IAAI,iCAAiC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;AACnG;AACA;AACA,IAAI,uCAAuC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,uCAAuC,uCAAuC;AACrH;AACA;AACA,IAAI,+BAA+B;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA,sCAAsC;AACtC,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yCAAyC,0CAA0C,0CAA0C;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,uCAAuC,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,yCAAyC,yCAAyC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uCAAuC,wCAAwC,wCAAwC;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,uCAAuC,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uCAAuC,wCAAwC,wCAAwC;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2CAA2C,4CAA4C,4CAA4C;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,yCAAyC,yCAAyC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA,yBAAyB,4BAA4B;AACrD,eAAe,uCAAuC,IAAI;AAC1D;AACA;AACA,iDAAiD;AACjD,QAAQ,oDAAoD;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA,yBAAyB,sBAAsB;AAC/C,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA,yBAAyB,4BAA4B;AACrD,SAAS,aAAa;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA,0DAA0D;AAC1D,mCAAmC,kBAAkB;AACrD,IAAI,sBAAsB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA,SAAS,uBAAuB;AAChC,IAAI,2BAA2B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA,yBAAyB,yBAAyB;AAClD,+DAA+D;AAC/D,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA,yBAAyB,8BAA8B;AACvD,wBAAwB,6CAA6C;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA,yBAAyB,kBAAkB;AAC3C,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA,WAAW,4BAA4B;AACvC,YAAY,6CAA6C;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC,qCAAqC,qCAAqC;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA,yBAAyB,oBAAoB;AAC7C,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,uCAAuC,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,uCAAuC,uCAAuC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC,qCAAqC,qCAAqC;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;;;;;;;;;;;;AC96BtF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC;AACjC,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;;;;;;;;;;;;AClBtF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,mBAAmB,GAAG,uBAAuB;AACtE,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA,qCAAqC,iCAAiC;AACtE,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;;;;;;;;;;;;ACnErD;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4CAA4C,GAAG,2CAA2C,GAAG,6CAA6C,GAAG,+BAA+B,GAAG,2CAA2C,GAAG,4CAA4C,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,wBAAwB;AACjX,sCAAsC,mBAAO,CAAC,+FAA6B;AAC3E,WAAW,mBAAO,CAAC,wFAAY;AAC/B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA,CAAC,2CAA2C,4CAA4C,4CAA4C;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C,2CAA2C,2CAA2C;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C,6CAA6C,6CAA6C;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C,2CAA2C,2CAA2C;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2CAA2C,4CAA4C,4CAA4C;;;;;;;;;;;;ACrNvH;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0CAA0C,GAAG,qCAAqC,GAAG,wBAAwB;AAC7G,yBAAyB,mBAAO,CAAC,sEAAgB;AACjD,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC,qCAAqC,qCAAqC;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yCAAyC,0CAA0C,0CAA0C;;;;;;;;;;;;ACpCjH;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA,yBAAyB,2BAA2B;AACpD,wBAAwB,uCAAuC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;;;;;;;;;;;;ACnB1E;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC,GAAG,kCAAkC,GAAG,kCAAkC,GAAG,6BAA6B,GAAG,sCAAsC,GAAG,mBAAmB;AAC7M,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iCAAiC,kCAAkC,kCAAkC;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mCAAmC,oCAAoC,oCAAoC;;;;;;;;;;;;ACxD/F;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;;;;;;;;;;;;ACrBpE;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;;;;;;;;;;;;ACpB1E;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC,GAAG,sCAAsC,GAAG,mCAAmC;AACnH,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC,mCAAmC,mCAAmC;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mCAAmC,oCAAoC,oCAAoC;;;;;;;;;;;;ACzC/F;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6CAA6C,GAAG,+BAA+B;AAC/E,mBAAmB,mBAAO,CAAC,wFAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C,6CAA6C,6CAA6C;;;;;;;;;;;;AC1BvI;AACA;AACA;AACA;AACa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,aAAa,GAAG,YAAY,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,GAAG,eAAe;AACnK;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;;;;;;;;;;;AC7CR;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC;AAChC,eAAe,mBAAO,CAAC,kEAAqB;AAC5C,aAAa,mBAAO,CAAC,kEAAqB;AAC1C,aAAa,mBAAO,CAAC,sFAAe;AACpC;AACA;AACA;AACA,gCAAgC;;;;;;;;;;;AC3BhC;AACA,QAAQ,KAA0B;AAClC,wBAAwB,wFAAO;AAC/B;AACA;AACA,aAAa,IAA0C;AACvD,QAAQ,iCAAO,CAAC,mBAAS,EAAE,OAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AAC/C;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,mDAAmD,aAAa;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,wDAAwD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,gCAAgC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,4CAA4C;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,+CAA+C;AACpD;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,+CAA+C;AACpD;AACA;AACA,QAAQ,aAAa;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sCAAsC;AAC3C;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,+CAA+C;AACpD;AACA;AACA,QAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,oBAAoB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA,QAAQ,aAAa;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sCAAsC;AAC3C;AACA;AACA,QAAQ,wBAAwB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,wBAAwB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,wBAAwB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA,QAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,oBAAoB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA,QAAQ,oCAAoC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,oCAAoC;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2GAA2G;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,6EAA6E;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,8DAA8D;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,oEAAoE;AACzE;AACA;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kBAAkB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA,QAAQ,eAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,eAAe;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,4CAA4C;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS,gCAAgC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,+CAA+C;AACpD;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qGAAqG;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS,gCAAgC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK,8DAA8D;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,QAAQ,8BAA8B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,8BAA8B;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,yFAAyF;AAC9F;AACA;AACA,QAAQ,uCAAuC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,uCAAuC;AACpG;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,oHAAoH;AACzH;AACA;AACA,QAAQ,+CAA+C;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,+CAA+C;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,4IAA4I;AACjJ;AACA;AACA,QAAQ,wBAAwB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,wBAAwB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kBAAkB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA;AACA,2DAA2D,qBAAqB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,8DAA8D;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,6EAA6E;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uEAAuE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qGAAqG;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,yBAAyB;AACvE;AACA;AACA;AACA,2DAA2D,oBAAoB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA;AACA,2DAA2D,aAAa;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sCAAsC;AAC3C;AACA;AACA,QAAQ,4BAA4B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,6CAA6C,IAAI;AACtF;AACA;AACA,KAAK,mFAAmF;AACxF;AACA;AACA,QAAQ,4BAA4B;AACpC;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,mFAAmF;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sFAAsF;AAC3F;AACA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,kDAAkD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oCAAoC;AACxD,oBAAoB,oCAAoC;AACxD;AACA;AACA,KAAK,oEAAoE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,sBAAsB;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sFAAsF;AAC3F;AACA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qDAAqD;AAC1D;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,+CAA+C;AACpD;AACA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0EAA0E;AAC/E;AACA;AACA,QAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,oBAAoB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,6EAA6E;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,yFAAyF;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iEAAiE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,oEAAoE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,kGAAkG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,uHAAuH;AAC5H;AACA;AACA,QAAQ,0BAA0B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D,0BAA0B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,6EAA6E;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,8DAA8D;AACnE;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,6EAA6E;AAClF;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,kDAAkD;AACvD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,wDAAwD;AAC7D;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,mFAAmF;AACxF;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,mFAAmF;AACxF;AACA,yBAAyB,+DAA+D;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,wGAAwG;AAC7G;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,yFAAyF;AAC9F;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,KAAK,4FAA4F;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,oEAAoE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,qBAAqB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,gBAAgB;AACrB,CAAC;;;;;;;;;;;;;;;;;AC/tED;AACA;AACA;AACA;AACa;AACb,iBAAiB,SAAI,IAAI,SAAI;AAC7B;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,iJAAiJ;AAC1M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,YAAY;AAClF;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,0BAA0B,eAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACc;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mBAAmB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF;AACpF;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,2CAA2C;AACrG;;;;;;;;;;;;ACloBa;;AAEb,8CAA6C,EAAE,aAAa,EAAC;;AAE7D,aAAa,mBAAO,CAAC,sBAAQ;AAC7B,eAAe,mBAAO,CAAC,sBAAQ;;AAE/B;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,mBAAmB;AACnB;AACA,QAAQ;AACR,mBAAmB;AACnB;AACA,QAAQ;AACR;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,QAAQ,oHAAoH;AACvM;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,CAAC,mCAAmC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA,GAAG;AACH;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA,gCAAgC;AAChC;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,gBAAgB,SAAS;AACzB;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,oBAAoB,wCAAwC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,gDAAgD;AAChD;AACA;AACA;AACA;AACA,sCAAsC;AACtC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC;AAClC,wBAAwB;AACxB,oCAAoC;AACpC;AACA,wBAAwB;AACxB,kCAAkC;AAClC;AACA,QAAQ,OAAO;AACf,oCAAoC;AACpC,oCAAoC;AACpC;AACA,wBAAwB;AACxB;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,gCAAgC;AAChC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM,iCAAiC;AACvC;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA,QAAQ;AACR,iCAAiC,4BAA4B;AAC7D;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,sBAAsB,YAAY;AAClC;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,KAAK;AACL,sDAAsD;AACtD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA,IAAI;AACJ;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL;AACA,kCAAkC;AAClC,kCAAkC;AAClC;AACA;AACA,MAAM;AACN,kCAAkC;AAClC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,8BAA8B;AACvC;AACA;AACA;AACA,IAAI;AACJ;AACA,SAAS,8BAA8B;AACvC;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,SAAS,8BAA8B;AACvC;AACA;AACA;AACA,IAAI;AACJ;AACA,SAAS,8BAA8B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B,QAAQ,kBAAkB;AAC1B;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B;AACA;AACA,GAAG;AACH,QAAQ,mBAAmB;AAC3B;AACA;AACA;AACA,GAAG;AACH,QAAQ,+BAA+B;AACvC;AACA,8CAA8C;AAC9C;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,mBAAmB;AAC3B;AACA;AACA,GAAG;AACH,QAAQ,mBAAmB;AAC3B;AACA;AACA;AACA,GAAG;AACH,QAAQ,+BAA+B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA,QAAQ,4CAA4C;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,+CAA+C;AAC1D,WAAW,SAAS;AACpB,aAAa;AACb;AACA,+CAA+C;AAC/C;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,uDAAuD;AAClE,WAAW,QAAQ;AACnB,aAAa;AACb;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAA4B;AAClC,eAAe,mBAAO,CAAC,kEAAkB;AACzC;AACA,GAAG,EAA4P;AAC/P;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,cAAc;AACd,UAAU;AACV,mBAAmB;AACnB,qBAAqB;AACrB,eAAe;AACf,qBAAqB;AACrB,eAAe;AACf,qBAAqB;AACrB,uBAAuB;AACvB,aAAa;AACb,aAAa;AACb,mBAAmB;AACnB,eAAe;AACf,qBAAqB;AACrB,oBAAoB;AACpB,mBAAmB;AACnB,cAAc;AACd,kBAAkB;AAClB,cAAc;AACd,kBAAkB;AAClB,qBAAqB;AACrB,YAAY;AACZ,oBAAoB;AACpB,cAAc;AACd,sBAAsB;AACtB,kBAAkB","sources":["webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/application-package/src/environment.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/application-error.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/array-utils.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/cancellation.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/command.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/contribution-filter/contribution-filter-registry.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/contribution-filter/contribution-filter.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/contribution-filter/filter.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/contribution-filter/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/contribution-provider.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/disposable.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/event.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/i18n/localization.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/logger-protocol.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/logger-watcher.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/logger.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/lsp-types.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/action-menu-node.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/composite-menu-node.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/menu-adapter.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/menu-model-registry.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/menu/menu-types.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-rpc/channel.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-rpc/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-rpc/msg-pack-extension-manager.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-rpc/rpc-message-encoder.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-rpc/rpc-protocol.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-service-protocol.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/message-service.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/messaging/connection-error-handler.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/messaging/handler.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/messaging/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/messaging/proxy-factory.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/nls.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/numbers.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/objects.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/os.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/path.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/performance/index.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/performance/measurement-protocol.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/performance/measurement.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/performance/stopwatch.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/prioritizeable.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/progress-service-protocol.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/progress-service.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/promise-util.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/quick-pick-service.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/reference.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/resource.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/selection-service.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/selection.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/stream.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/strings.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/telemetry.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/types.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/uri.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/version.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/src/common/view-column.ts?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/@theia/core/shared/inversify/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/fuzzy/lib/fuzzy.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/decorator_utils.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/inject.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/inject_base.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/injectable.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/lazy_service_identifier.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/multi_inject.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/named.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/optional.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/post_construct.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/pre_destroy.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/property_event_decorator.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/tagged.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/target_name.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/annotation/unmanaged.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/bindings/binding.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/bindings/binding_count.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/constants/error_msgs.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/constants/literal_types.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/constants/metadata_keys.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/container/container.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/container/container_module.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/container/container_snapshot.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/container/lookup.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/container/module_activation_store.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/interfaces/interfaces.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/inversify.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/context.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/metadata.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/metadata_reader.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/plan.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/planner.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/queryable_string.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/reflection_utils.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/request.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/planning/target.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/resolution/instantiation.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/resolution/resolver.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/scope/scope.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_in_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_in_when_on_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_on_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_to_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_when_on_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/binding_when_syntax.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/syntax/constraint_helpers.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/async.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/binding_utils.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/clonable.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/exceptions.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/factory_type.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/id.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/js.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/inversify/es/utils/serialization.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/is-electron/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/msgpackr-extract/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/node-gyp-build-optional-packages/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/p-debounce/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/api.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/cancellation.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/connection.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/disposable.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/events.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/is.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/linkedMap.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/messageBuffer.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/messageReader.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/messageWriter.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/messages.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/ral.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/semaphore.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/node/main.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/lib/node/ril.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-jsonrpc/node.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/api.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/connection.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/messages.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/common/utils/is.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-protocol/lib/node/main.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-languageserver-types/lib/umd/main.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/vscode-uri/lib/esm/index.js?","webpack:////Workspace/avasdao/nexajs/studio-code/node_modules/msgpackr/dist/node.cjs?"],"sourcesContent":["// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nconst isElectron: () => boolean = require('is-electron');\n\n/**\n * The electron specific environment.\n */\nclass ElectronEnv {\n\n    /**\n     * Environment variable that can be accessed on the `process` to check if running in electron or not.\n     */\n    readonly THEIA_ELECTRON_VERSION = 'THEIA_ELECTRON_VERSION';\n\n    /**\n     * `true` if running in electron. Otherwise, `false`.\n     *\n     * Can be called from both the `main` and the render process. Also works for forked cluster workers.\n     */\n    is(): boolean {\n        return isElectron();\n    }\n\n    /**\n     * `true` if running in Electron in development mode. Otherwise, `false`.\n     *\n     * Cannot be used from the browser. From the browser, it is always `false`.\n     */\n    isDevMode(): boolean {\n        return this.is()\n            && typeof process !== 'undefined'\n            // `defaultApp` does not exist on the Node.js API, but on electron (`electron.d.ts`).\n            && ((process as any).defaultApp || /node_modules[/\\\\]electron[/\\\\]/.test(process.execPath)); // eslint-disable-line @typescript-eslint/no-explicit-any\n    }\n\n    /**\n     * Creates and return with a new environment object which always contains the `ELECTRON_RUN_AS_NODE: 1` property pair.\n     * This should be used to `spawn` and `fork` a new Node.js process from the Node.js shipped with Electron. Otherwise, a new Electron\n     * process will be spawned which [has side-effects](https://github.com/eclipse-theia/theia/issues/5385).\n     *\n     * If called from the backend and the `env` argument is not defined, it falls back to `process.env` such as Node.js behaves\n     * with the [`SpawnOptions`](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options).\n     * If `env` is defined, it will be shallow-copied.\n     *\n     * Calling this function from the frontend does not make any sense, hence throw an error.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    runAsNodeEnv(env?: any): any & { ELECTRON_RUN_AS_NODE: 1 } {\n        if (typeof process === 'undefined') {\n            throw new Error(\"'process' cannot be undefined.\");\n        }\n        return {\n            ...(env === undefined ? process.env : env),\n            ELECTRON_RUN_AS_NODE: 1\n        };\n    }\n\n}\n\nconst electron = new ElectronEnv();\nconst environment: Readonly<{ electron: ElectronEnv }> = { electron };\nexport { environment };\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport interface ApplicationError<C extends number, D> extends Error {\n    readonly code: C\n    readonly data: D\n    toJson(): ApplicationError.Literal<D>\n}\nexport namespace ApplicationError {\n    export interface Literal<D> {\n        message: string\n        data: D\n        stack?: string\n    }\n    export interface Constructor<C extends number, D> {\n        (...args: any[]): ApplicationError<C, D>;\n        code: C;\n        is(arg: object | undefined): arg is ApplicationError<C, D>\n    }\n    const codes = new Set<number>();\n    export function declare<C extends number, D>(code: C, factory: (...args: any[]) => Literal<D>): Constructor<C, D> {\n        if (codes.has(code)) {\n            throw new Error(`An application error for '${code}' code is already declared`);\n        }\n        codes.add(code);\n        const constructorOpt = Object.assign((...args: any[]) => new Impl(code, factory(...args), constructorOpt), {\n            code,\n            is(arg: object | undefined): arg is ApplicationError<C, D> {\n                return arg instanceof Impl && arg.code === code;\n            }\n        });\n        return constructorOpt;\n    }\n    export function is<C extends number, D>(arg: object | undefined): arg is ApplicationError<C, D> {\n        return arg instanceof Impl;\n    }\n    export function fromJson<C extends number, D>(code: C, raw: Literal<D>): ApplicationError<C, D> {\n        return new Impl(code, raw);\n    }\n    class Impl<C extends number, D> extends Error implements ApplicationError<C, D>  {\n        readonly data: D;\n        constructor(\n            readonly code: C,\n            raw: ApplicationError.Literal<D>,\n            constructorOpt?: Function\n        ) {\n            super(raw.message);\n            this.data = raw.data;\n            Object.setPrototypeOf(this, Impl.prototype);\n            if (raw.stack) {\n                this.stack = raw.stack;\n            } else if (Error.captureStackTrace && constructorOpt) {\n                Error.captureStackTrace(this, constructorOpt);\n            }\n        }\n        toJson(): ApplicationError.Literal<D> {\n            const { message, data, stack } = this;\n            return { message, data, stack };\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport namespace ArrayUtils {\n    export interface Head<T> extends Array<T> {\n        head(): T;\n    }\n\n    export interface Tail<T> extends Array<T> {\n        tail(): T;\n    }\n\n    export interface Children<T> extends Array<T> {\n        children(): Tail<T>\n    }\n\n    export const TailImpl = {\n        tail<T>(this: Array<T>): T {\n            return this[this.length - 1];\n        },\n    };\n\n    export const HeadAndChildrenImpl = {\n        head<T>(this: Array<T>): T {\n            return this[0];\n        },\n\n        children<T>(this: Array<T>): Tail<T> {\n            return Object.assign(this.slice(1), TailImpl);\n        }\n    };\n\n    export interface HeadAndTail<T> extends Head<T>, Tail<T>, Children<T> { }\n\n    export function asTail<T>(array: Array<T>): Tail<T> {\n        return Object.assign(array, TailImpl);\n    }\n\n    export function asHeadAndTail<T>(array: Array<T>): HeadAndTail<T> {\n        return Object.assign(array, HeadAndChildrenImpl, TailImpl);\n    }\n\n    export enum Sort {\n        LeftBeforeRight = -1,\n        RightBeforeLeft = 1,\n        Equal = 0,\n    }\n\n    // Copied from https://github.com/microsoft/vscode/blob/9c29becfad5f68270b9b23efeafb147722c5feba/src/vs/base/common/arrays.ts\n    /**\n     * Performs a binary search algorithm over a sorted collection. Useful for cases\n     * when we need to perform a binary search over something that isn't actually an\n     * array, and converting data to an array would defeat the use of binary search\n     * in the first place.\n     *\n     * @param length The collection length.\n     * @param compareToKey A function that takes an index of an element in the\n     *   collection and returns zero if the value at this index is equal to the\n     *   search key, a negative number if the value precedes the search key in the\n     *   sorting order, or a positive number if the search key precedes the value.\n     * @return A non-negative index of an element, if found. If not found, the\n     *   result is -(n+1) (or ~n, using bitwise notation), where n is the index\n     *   where the key should be inserted to maintain the sorting order.\n     */\n    export function binarySearch2(length: number, compareToKey: (index: number) => number): number {\n        let low = 0;\n        let high = length - 1;\n\n        while (low <= high) {\n            const mid = ((low + high) / 2) | 0;\n            const comp = compareToKey(mid);\n            if (comp < 0) {\n                low = mid + 1;\n            } else if (comp > 0) {\n                high = mid - 1;\n            } else {\n                return mid;\n            }\n        }\n        return -(low + 1);\n    }\n\n    export function partition<T>(array: T[], filter: (e: T, idx: number, arr: T[]) => boolean | undefined): [T[], T[]] {\n        const pass: T[] = [];\n        const fail: T[] = [];\n        array.forEach((e, idx, arr) => (filter(e, idx, arr) ? pass : fail).push(e));\n        return [pass, fail];\n    }\n\n    /**\n     * @returns New array with all falsy values removed. The original array IS NOT modified.\n     */\n    export function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n        return <T[]>array.filter(e => !!e);\n    }\n\n    /**\n     * groups array elements through a comparator function\n     * @param data array of elements to group\n     * @param compare comparator function: return of 0 means should group, anything above means not group\n     * @returns array of arrays with grouped elements\n     */\n    export function groupBy<T>(data: ReadonlyArray<T>, compare: (a: T, b: T) => number): T[][] {\n        const result: T[][] = [];\n        let currentGroup: T[] | undefined = undefined;\n        for (const element of data.slice(0).sort(compare)) {\n            if (!currentGroup || compare(currentGroup[0], element) !== 0) {\n                currentGroup = [element];\n                result.push(currentGroup);\n            } else {\n                currentGroup.push(element);\n            }\n        }\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\nimport { isBoolean, isObject } from './types';\nimport { Disposable } from './disposable';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n     * An event emitted when cancellation is requested\n     * @event\n     */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, {\n    get maxListeners(): number { return 0; },\n    set maxListeners(maxListeners: number) { }\n}));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n\n    export function is(value: unknown): value is CancellationToken {\n        return isObject<CancellationToken>(value) && (value === CancellationToken.None\n            || value === CancellationToken.Cancelled\n            || (isBoolean(value.isCancellationRequested) && !!value.onCancellationRequested));\n    }\n}\n\nexport class CancellationError extends Error {\n    constructor() {\n        super('Canceled');\n        this.name = this.message;\n    }\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n\n    public dispose(): void {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n    private _parentListener?: Disposable = undefined;\n\n    constructor(parent?: CancellationToken) {\n        this._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\n    }\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n        this._parentListener?.dispose();\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n\n        } else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { Event, Emitter, WaitUntilEvent } from './event';\nimport { Disposable, DisposableCollection } from './disposable';\nimport { ContributionProvider } from './contribution-provider';\nimport { nls } from './nls';\nimport debounce = require('p-debounce');\nimport { isObject } from './types';\n\n/**\n * A command is a unique identifier of a function\n * which can be executed by a user via a keyboard shortcut,\n * a menu action or directly.\n */\nexport interface Command {\n    /**\n     * A unique identifier of this command.\n     */\n    id: string;\n    /**\n     * A label of this command.\n     */\n    label?: string;\n    originalLabel?: string;\n    /**\n     * An icon class of this command.\n     */\n    iconClass?: string;\n    /**\n     * A category of this command.\n     */\n    category?: string;\n    originalCategory?: string;\n}\n\nexport namespace Command {\n    /* Determine whether object is a Command */\n    export function is(arg: unknown): arg is Command {\n        return isObject(arg) && 'id' in arg;\n    }\n\n    /** Utility function to easily translate commands */\n    export function toLocalizedCommand(command: Command, nlsLabelKey: string = command.id, nlsCategoryKey?: string): Command {\n        return {\n            ...command,\n            label: command.label && nls.localize(nlsLabelKey, command.label),\n            originalLabel: command.label,\n            category: nlsCategoryKey && command.category && nls.localize(nlsCategoryKey, command.category) || command.category,\n            originalCategory: command.category,\n        };\n    }\n\n    export function toDefaultLocalizedCommand(command: Command): Command {\n        return {\n            ...command,\n            label: command.label && nls.localizeByDefault(command.label),\n            originalLabel: command.label,\n            category: command.category && nls.localizeByDefault(command.category),\n            originalCategory: command.category,\n        };\n    }\n\n    /** Comparator function for when sorting commands */\n    export function compareCommands(a: Command, b: Command): number {\n        if (a.label && b.label) {\n            const aCommand = (a.category ? `${a.category}: ${a.label}` : a.label).toLowerCase();\n            const bCommand = (b.category ? `${b.category}: ${b.label}` : b.label).toLowerCase();\n            return (aCommand).localeCompare(bCommand);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Determine if two commands are equal.\n     *\n     * @param a the first command for comparison.\n     * @param b the second command for comparison.\n     */\n    export function equals(a: Command, b: Command): boolean {\n        return (\n            a.id === b.id &&\n            a.label === b.label &&\n            a.iconClass === b.iconClass &&\n            a.category === b.category\n        );\n    }\n}\n\n/**\n * A command handler is an implementation of a command.\n *\n * A command can have multiple handlers\n * but they should be active in different contexts,\n * otherwise first active will be executed.\n */\nexport interface CommandHandler {\n    /**\n     * Execute this handler.\n     *\n     * Don't call it directly, use `CommandService.executeCommand` instead.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    execute(...args: any[]): any;\n    /**\n     * Test whether this handler is enabled (active).\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled?(...args: any[]): boolean;\n    onDidChangeEnabled?: Event<void>;\n    /**\n     * Test whether menu items for this handler should be visible.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible?(...args: any[]): boolean;\n    /**\n     * Test whether menu items for this handler should be toggled.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled?(...args: any[]): boolean;\n}\n\nexport const CommandContribution = Symbol('CommandContribution');\n/**\n * The command contribution should be implemented to register custom commands and handler.\n */\nexport interface CommandContribution {\n    /**\n     * Register commands and handlers.\n     */\n    registerCommands(commands: CommandRegistry): void;\n}\n\nexport interface CommandEvent {\n    commandId: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args: any[]\n}\n\nexport interface WillExecuteCommandEvent extends WaitUntilEvent, CommandEvent {\n}\n\nexport const commandServicePath = '/services/commands';\nexport const CommandService = Symbol('CommandService');\n/**\n * The command service should be used to execute commands.\n */\nexport interface CommandService {\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    executeCommand<T>(command: string, ...args: any[]): Promise<T | undefined>;\n    /**\n     * An event is emitted when a command is about to be executed.\n     *\n     * It can be used to install or activate a command handler.\n     */\n    readonly onWillExecuteCommand: Event<WillExecuteCommandEvent>;\n    /**\n     * An event is emitted when a command was executed.\n     */\n    readonly onDidExecuteCommand: Event<CommandEvent>;\n}\n\n/**\n * The command registry manages commands and handlers.\n */\n@injectable()\nexport class CommandRegistry implements CommandService {\n\n    protected readonly _commands: { [id: string]: Command } = {};\n    protected readonly _handlers: { [id: string]: CommandHandler[] } = {};\n\n    protected readonly toUnregisterCommands = new Map<string, Disposable>();\n\n    // List of recently used commands.\n    protected _recent: string[] = [];\n\n    protected readonly onWillExecuteCommandEmitter = new Emitter<WillExecuteCommandEvent>();\n    readonly onWillExecuteCommand = this.onWillExecuteCommandEmitter.event;\n\n    protected readonly onDidExecuteCommandEmitter = new Emitter<CommandEvent>();\n    readonly onDidExecuteCommand = this.onDidExecuteCommandEmitter.event;\n\n    protected readonly onCommandsChangedEmitter = new Emitter<void>();\n    readonly onCommandsChanged = this.onCommandsChangedEmitter.event;\n\n    constructor(\n        @inject(ContributionProvider) @named(CommandContribution)\n        protected readonly contributionProvider: ContributionProvider<CommandContribution>\n    ) { }\n\n    onStart(): void {\n        const contributions = this.contributionProvider.getContributions();\n        for (const contrib of contributions) {\n            contrib.registerCommands(this);\n        }\n    }\n\n    *getAllCommands(): IterableIterator<Readonly<Command & { handlers: CommandHandler[] }>> {\n        for (const command of Object.values(this._commands)) {\n            yield { ...command, handlers: this._handlers[command.id] ?? [] };\n        }\n    }\n\n    /**\n     * Register the given command and handler if present.\n     *\n     * Throw if a command is already registered for the given command identifier.\n     */\n    registerCommand(command: Command, handler?: CommandHandler): Disposable {\n        if (this._commands[command.id]) {\n            console.warn(`A command ${command.id} is already registered.`);\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection(this.doRegisterCommand(command));\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler));\n        }\n        this.toUnregisterCommands.set(command.id, toDispose);\n        toDispose.push(Disposable.create(() => this.toUnregisterCommands.delete(command.id)));\n        return toDispose;\n    }\n\n    protected doRegisterCommand(command: Command): Disposable {\n        this._commands[command.id] = command;\n        return {\n            dispose: () => {\n                delete this._commands[command.id];\n            }\n        };\n    }\n\n    /**\n     * Unregister command from the registry\n     *\n     * @param command\n     */\n    unregisterCommand(command: Command): void;\n    /**\n     * Unregister command from the registry\n     *\n     * @param id\n     */\n    unregisterCommand(id: string): void;\n    unregisterCommand(commandOrId: Command | string): void {\n        const id = Command.is(commandOrId) ? commandOrId.id : commandOrId;\n        const toUnregister = this.toUnregisterCommands.get(id);\n        if (toUnregister) {\n            toUnregister.dispose();\n        }\n    }\n\n    /**\n     * Register the given handler for the given command identifier.\n     *\n     * If there is already a handler for the given command\n     * then the given handler is registered as more specific, and\n     * has higher priority during enablement, visibility and toggle state evaluations.\n     */\n    registerHandler(commandId: string, handler: CommandHandler): Disposable {\n        let handlers = this._handlers[commandId];\n        if (!handlers) {\n            this._handlers[commandId] = handlers = [];\n        }\n        handlers.unshift(handler);\n        this.fireDidChange();\n        return {\n            dispose: () => {\n                const idx = handlers.indexOf(handler);\n                if (idx >= 0) {\n                    handlers.splice(idx, 1);\n                    this.fireDidChange();\n                }\n            }\n        };\n    }\n\n    protected fireDidChange = debounce(() => this.doFireDidChange(), 0);\n\n    protected doFireDidChange(): void {\n        this.onCommandsChangedEmitter.fire();\n    }\n\n    /**\n     * Test whether there is an active handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled(command: string, ...args: any[]): boolean {\n        return typeof this.getActiveHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a visible handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible(command: string, ...args: any[]): boolean {\n        return typeof this.getVisibleHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a toggled handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled(command: string, ...args: any[]): boolean {\n        return typeof this.getToggledHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async executeCommand<T>(commandId: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.getActiveHandler(commandId, ...args);\n        if (handler) {\n            await this.fireWillExecuteCommand(commandId, args);\n            const result = await handler.execute(...args);\n            this.onDidExecuteCommandEmitter.fire({ commandId, args });\n            return result;\n        }\n        throw Object.assign(new Error(`The command '${commandId}' cannot be executed. There are no active handlers available for the command.`), { code: 'NO_ACTIVE_HANDLER' });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected async fireWillExecuteCommand(commandId: string, args: any[] = []): Promise<void> {\n        await WaitUntilEvent.fire(this.onWillExecuteCommandEmitter, { commandId, args }, 30000);\n    }\n\n    /**\n     * Get a visible handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getVisibleHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isVisible || handler.isVisible(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get an active handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getActiveHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isEnabled || handler.isEnabled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get a toggled handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getToggledHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (handler.isToggled && handler.isToggled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns with all handlers for the given command. If the command does not have any handlers,\n     * or the command is not registered, returns an empty array.\n     */\n    getAllHandlers(commandId: string): CommandHandler[] {\n        const handlers = this._handlers[commandId];\n        return handlers ? handlers.slice() : [];\n    }\n\n    /**\n     * Get all registered commands.\n     */\n    get commands(): Command[] {\n        return Object.values(this._commands);\n    }\n\n    /**\n     * Get a command for the given command identifier.\n     */\n    getCommand(id: string): Command | undefined {\n        return this._commands[id];\n    }\n\n    /**\n     * Get all registered commands identifiers.\n     */\n    get commandIds(): string[] {\n        return Object.keys(this._commands);\n    }\n\n    /**\n     * Get the list of recently used commands.\n     */\n    get recent(): Command[] {\n        const commands: Command[] = [];\n        for (const recentId of this._recent) {\n            const command = this.getCommand(recentId);\n            if (command) {\n                commands.push(command);\n            }\n        }\n        return commands;\n    }\n\n    /**\n     * Set the list of recently used commands.\n     * @param commands the list of recently used commands.\n     */\n    set recent(commands: Command[]) {\n        this._recent = Array.from(new Set(commands.map(e => e.id)));\n    }\n\n    /**\n     * Adds a command to recently used list.\n     * Prioritizes commands that were recently executed to be most recent.\n     *\n     * @param recent a recent command, or array of recent commands.\n     */\n    addRecentCommand(recent: Command | Command[]): void {\n        for (const recentCommand of Array.isArray(recent) ? recent : [recent]) {\n            // Determine if the command currently exists in the recently used list.\n            const index = this._recent.findIndex(commandId => commandId === recentCommand.id);\n            // If the command exists, remove it from the array so it can later be placed at the top.\n            if (index >= 0) { this._recent.splice(index, 1); }\n            // Add the recent command to the beginning of the array (most recent).\n            this._recent.unshift(recentCommand.id);\n        }\n    }\n\n    /**\n     * Clear the list of recently used commands.\n     */\n    clearCommandHistory(): void {\n        this.recent = [];\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, multiInject, optional } from 'inversify';\nimport { ContributionFilterRegistry, ContributionType, FilterContribution } from './contribution-filter';\nimport { Filter } from './filter';\n\n/**\n * Registry of contribution filters.\n *\n * Implement/bind to the `FilterContribution` interface/symbol to register your contribution filters.\n */\n@injectable()\nexport class ContributionFilterRegistryImpl implements ContributionFilterRegistry {\n\n    protected initialized = false;\n    protected genericFilters: Filter<Object>[] = [];\n    protected typeToFilters = new Map<ContributionType, Filter<Object>[]>();\n\n    constructor(\n        @multiInject(FilterContribution) @optional() contributions: FilterContribution[] = []\n    ) {\n        for (const contribution of contributions) {\n            contribution.registerContributionFilters(this);\n        }\n        this.initialized = true;\n    }\n\n    addFilters(types: '*' | ContributionType[], filters: Filter<Object>[]): void {\n        if (this.initialized) {\n            throw new Error('cannot add filters after initialization is done.');\n        } else if (types === '*') {\n            this.genericFilters.push(...filters);\n        } else {\n            for (const type of types) {\n                this.getOrCreate(type).push(...filters);\n            }\n        }\n    }\n\n    applyFilters<T extends Object>(toFilter: T[], type: ContributionType): T[] {\n        const filters = this.getFilters(type);\n        if (filters.length === 0) {\n            return toFilter;\n        }\n        return toFilter.filter(\n            object => filters.every(filter => filter(object))\n        );\n    }\n\n    protected getOrCreate(type: ContributionType): Filter<Object>[] {\n        let value = this.typeToFilters.get(type);\n        if (value === undefined) {\n            this.typeToFilters.set(type, value = []);\n        }\n        return value;\n    }\n\n    protected getFilters(type: ContributionType): Filter<Object>[] {\n        return [\n            ...this.typeToFilters.get(type) || [],\n            ...this.genericFilters\n        ];\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from 'inversify';\nimport { Filter } from './filter';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type ContributionType = interfaces.ServiceIdentifier<any>;\n\nexport const ContributionFilterRegistry = Symbol('ContributionFilterRegistry');\nexport interface ContributionFilterRegistry {\n\n    /**\n     * Add filters to be applied for every type of contribution.\n     */\n    addFilters(types: '*', filters: Filter<Object>[]): void;\n\n    /**\n     * Given a list of contribution types, register filters to apply.\n     * @param types types for which to register the filters.\n     */\n    addFilters(types: ContributionType[], filters: Filter<Object>[]): void;\n\n    /**\n     * Applies the filters for the given contribution type. Generic filters will be applied on any given type.\n     * @param toFilter the elements to filter\n     * @param type the contribution type for which potentially filters were registered\n     * @returns the filtered elements\n     */\n    applyFilters<T extends Object>(toFilter: T[], type: ContributionType): T[]\n}\n\nexport const FilterContribution = Symbol('FilterContribution');\n/**\n * Register filters to remove contributions.\n */\nexport interface FilterContribution {\n    /**\n     * Use the registry to register your contribution filters.\n     */\n    registerContributionFilters(registry: ContributionFilterRegistry): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const Filter = Symbol('Filter');\n\n/**\n * @param toTest Object that should be tested\n * @returns `true` if the object passes the test, `false` otherwise.\n */\nexport type Filter<T extends Object> = (toTest: T) => boolean;\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './contribution-filter';\nexport * from './contribution-filter-registry';\nexport * from './filter';\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from 'inversify';\nimport { ContributionFilterRegistry } from './contribution-filter';\n\nexport const ContributionProvider = Symbol('ContributionProvider');\n\nexport interface ContributionProvider<T extends object> {\n\n    /**\n     * @param recursive `true` if the contributions should be collected from the parent containers as well. Otherwise, `false`. It is `false` by default.\n     */\n    getContributions(recursive?: boolean): T[]\n}\n\nclass ContainerBasedContributionProvider<T extends object> implements ContributionProvider<T> {\n\n    protected services: T[] | undefined;\n\n    constructor(\n        protected readonly serviceIdentifier: interfaces.ServiceIdentifier<T>,\n        protected readonly container: interfaces.Container\n    ) { }\n\n    getContributions(recursive?: boolean): T[] {\n        if (this.services === undefined) {\n            const currentServices: T[] = [];\n            let filterRegistry: ContributionFilterRegistry | undefined;\n            let currentContainer: interfaces.Container | null = this.container;\n            // eslint-disable-next-line no-null/no-null\n            while (currentContainer !== null) {\n                if (currentContainer.isBound(this.serviceIdentifier)) {\n                    try {\n                        currentServices.push(...currentContainer.getAll(this.serviceIdentifier));\n                    } catch (error) {\n                        console.error(error);\n                    }\n                }\n                if (filterRegistry === undefined && currentContainer.isBound(ContributionFilterRegistry)) {\n                    filterRegistry = currentContainer.get(ContributionFilterRegistry);\n                }\n                // eslint-disable-next-line no-null/no-null\n                currentContainer = recursive === true ? currentContainer.parent : null;\n            }\n\n            this.services = filterRegistry ? filterRegistry.applyFilters(currentServices, this.serviceIdentifier) : currentServices;\n\n        }\n        return this.services;\n    }\n}\n\nexport type Bindable = interfaces.Bind | interfaces.Container;\nexport namespace Bindable {\n    export function isContainer(arg: Bindable): arg is interfaces.Container {\n        return typeof arg !== 'function'\n            // https://github.com/eclipse-theia/theia/issues/3204#issue-371029654\n            // In InversifyJS `4.14.0` containers no longer have a property `guid`.\n            && ('guid' in arg || 'parent' in arg);\n    }\n}\n\nexport function bindContributionProvider(bindable: Bindable, id: symbol): void {\n    const bindingToSyntax = (Bindable.isContainer(bindable) ? bindable.bind(ContributionProvider) : bindable(ContributionProvider));\n    bindingToSyntax\n        .toDynamicValue(ctx => new ContainerBasedContributionProvider(id, ctx.container))\n        .inSingletonScope().whenTargetNamed(id);\n}\n\n/**\n * Helper function to bind a service to a list of contributions easily.\n * @param bindable a Container or the bind function directly.\n * @param service an already bound service to refer the contributions to.\n * @param contributions array of contribution identifiers to bind the service to.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function bindContribution(bindable: Bindable, service: interfaces.ServiceIdentifier<any>, contributions: interfaces.ServiceIdentifier<any>[]): void {\n    const bind: interfaces.Bind = Bindable.isContainer(bindable) ? bindable.bind.bind(bindable) : bindable;\n    for (const contribution of contributions) {\n        bind(contribution).toService(service);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Event, Emitter } from './event';\nimport { isFunction, isObject } from './types';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function is(arg: unknown): arg is Disposable {\n        return isObject<Disposable>(arg) && isFunction(arg.dispose);\n    }\n    export function create(func: () => void): Disposable {\n        return { dispose: func };\n    }\n    /** Always provides a reference to a new disposable. */\n    export declare const NULL: Disposable;\n}\n\n/**\n * Ensures that every reference to {@link Disposable.NULL} returns a new object,\n * as sharing a disposable between multiple {@link DisposableCollection} can have unexpected side effects\n */\nObject.defineProperty(Disposable, 'NULL', {\n    configurable: false,\n    enumerable: true,\n    get(): Disposable {\n        return { dispose: () => { } };\n    }\n});\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    /**\n     * This event is fired only once\n     * on first dispose of not empty collection.\n     */\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n            this.onDisposeEmitter.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            disposable.dispose = originalDispose;\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n\nexport type DisposableGroup = { push(disposable: Disposable): void } | { add(disposable: Disposable): void };\nexport namespace DisposableGroup {\n    export function canPush(candidate?: DisposableGroup): candidate is { push(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { push(): void }).push);\n    }\n    export function canAdd(candidate?: DisposableGroup): candidate is { add(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { add(): void }).add);\n    }\n}\n\nexport function disposableTimeout(...args: Parameters<typeof setTimeout>): Disposable {\n    const handle = setTimeout(...args);\n    return { dispose: () => clearTimeout(handle) };\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable, DisposableGroup, DisposableCollection } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup): Disposable;\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export function getMaxListeners(event: Event<unknown>): number {\n        const { maxListeners } = event as any;\n        return typeof maxListeners === 'number' ? maxListeners : 0;\n    }\n    export function setMaxListeners<N extends number>(event: Event<unknown>, maxListeners: N): N {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners = maxListeners;\n        }\n        return maxListeners;\n    }\n    export function addMaxListeners(event: Event<unknown>, add: number): number {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners += add;\n        }\n        return add;\n    }\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event, returns another event which only fires once.\n     */\n    export function once<T>(event: Event<T>): Event<T> {\n        return (listener, thisArgs = undefined, disposables?) => {\n            // we need this, in case the event fires during the listener call\n            let didFire = false;\n            let result: Disposable | undefined = undefined;\n            result = event(e => {\n                if (didFire) {\n                    return;\n                } else if (result) {\n                    result.dispose();\n                } else {\n                    didFire = true;\n                }\n\n                return listener.call(thisArgs, e);\n            }, undefined, disposables);\n\n            if (didFire) {\n                result.dispose();\n            }\n\n            return result;\n        };\n    }\n\n    export function toPromise<T>(event: Event<T>): Promise<T> {\n        return new Promise(resolve => once(event)(resolve));\n    }\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            get maxListeners(): number { return 0; },\n            set maxListeners(maxListeners: number) { }\n        });\n    }\n\n    /**\n     * Given a collection of events, returns a single event which emits whenever any of the provided events emit.\n     */\n    export function any<T>(...events: Event<T>[]): Event<T>;\n    export function any(...events: Event<any>[]): Event<void>;\n    export function any<T>(...events: Event<T>[]): Event<T> {\n        return (listener, thisArgs = undefined, disposables?: Disposable[]) =>\n            new DisposableCollection(...events.map(event => event(e => listener.call(thisArgs, e), undefined, disposables)));\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static LEAK_WARNING_THRESHHOLD = 175;\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    protected _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    private _leakingStacks: Map<string, number> | undefined;\n    private _leakWarnCountdown = 0;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const removeMaxListenersCheck = this.checkMaxListeners(Event.getMaxListeners(this._event));\n\n                const result: Disposable = {\n                    dispose: () => {\n                        if (removeMaxListenersCheck) {\n                            removeMaxListenersCheck();\n                        }\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (DisposableGroup.canPush(disposables)) {\n                    disposables.push(result);\n                } else if (DisposableGroup.canAdd(disposables)) {\n                    disposables.add(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: Emitter.LEAK_WARNING_THRESHHOLD\n            });\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): (() => void) | undefined {\n        if (maxListeners === 0 || !this._callbacks) {\n            return undefined;\n        }\n        const listenerCount = this._callbacks.length;\n        if (listenerCount <= maxListeners) {\n            return undefined;\n        }\n\n        const popStack = this.pushLeakingStack();\n\n        this._leakWarnCountdown -= 1;\n        if (this._leakWarnCountdown <= 0) {\n            // only warn on first exceed and then every time the limit\n            // is exceeded by 50% again\n            this._leakWarnCountdown = maxListeners * 0.5;\n\n            let topStack: string;\n            let topCount = 0;\n            this._leakingStacks!.forEach((stackCount, stack) => {\n                if (!topStack || topCount < stackCount) {\n                    topStack = stack;\n                    topCount = stackCount;\n                }\n            });\n\n            // eslint-disable-next-line max-len\n            console.warn(`Possible Emitter memory leak detected. ${listenerCount} listeners added. Use event.maxListeners to increase the limit (${maxListeners}). MOST frequent listener (${topCount}):`);\n            console.warn(topStack!);\n        }\n\n        return popStack;\n    }\n\n    protected pushLeakingStack(): () => void {\n        if (!this._leakingStacks) {\n            this._leakingStacks = new Map();\n        }\n        const stack = new Error().stack!.split('\\n').slice(3).join('\\n');\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count + 1);\n        return () => this.popLeakingStack(stack);\n    }\n\n    protected popLeakingStack(stack: string): void {\n        if (!this._leakingStacks) {\n            return;\n        }\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count - 1);\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            return this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._leakingStacks) {\n            this._leakingStacks.clear();\n            this._leakingStacks = undefined;\n        }\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport type WaitUntilData<T> = Omit<T, 'waitUntil' | 'token'>;\n\nexport interface WaitUntilEvent {\n    /**\n     * A cancellation token.\n     */\n    token: CancellationToken;\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n}\nexport namespace WaitUntilEvent {\n    /**\n     * Fire all listeners in the same tick.\n     *\n     * Use `AsyncEmitter.fire` to fire listeners async one after another.\n     */\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: WaitUntilData<T>,\n        timeout?: number,\n        token = CancellationToken.None\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            token,\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete (asyncEvent as any)['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n\nimport { CancellationToken } from './cancellation';\n\nexport class AsyncEmitter<T extends WaitUntilEvent> extends Emitter<T> {\n\n    protected deliveryQueue: Promise<void> | undefined;\n\n    /**\n     * Fire listeners async one after another.\n     */\n    override fire(event: WaitUntilData<T>, token: CancellationToken = CancellationToken.None,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        const callbacks = this._callbacks;\n        if (!callbacks) {\n            return Promise.resolve();\n        }\n        const listeners = [...callbacks];\n        if (this.deliveryQueue) {\n            return this.deliveryQueue = this.deliveryQueue.then(() => this.deliver(listeners, event, token, promiseJoin));\n        }\n        return this.deliveryQueue = this.deliver(listeners, event, token, promiseJoin);\n    }\n\n    protected async deliver(listeners: Callback[], event: WaitUntilData<T>, token: CancellationToken,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        for (const listener of listeners) {\n            if (token.isCancellationRequested) {\n                return;\n            }\n            const waitables: Promise<void>[] = [];\n            const asyncEvent = Object.assign(event, {\n                token,\n                waitUntil: (thenable: Promise<any>) => {\n                    if (Object.isFrozen(waitables)) {\n                        throw new Error('waitUntil cannot be called asynchronously.');\n                    }\n                    if (promiseJoin) {\n                        thenable = promiseJoin(thenable, listener);\n                    }\n                    waitables.push(thenable);\n                }\n            }) as T;\n            try {\n                listener(event);\n                // Asynchronous calls to `waitUntil` should fail.\n                Object.freeze(waitables);\n            } catch (e) {\n                console.error(e);\n            } finally {\n                delete (asyncEvent as any)['waitUntil'];\n            }\n            if (!waitables.length) {\n                return;\n            }\n            try {\n                await Promise.all(waitables);\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const localizationPath = '/services/i18n';\n\nexport const AsyncLocalizationProvider = Symbol('AsyncLocalizationProvider');\nexport interface AsyncLocalizationProvider {\n    getCurrentLanguage(): Promise<string>\n    setCurrentLanguage(languageId: string): Promise<void>\n    getAvailableLanguages(): Promise<LanguageInfo[]>\n    loadLocalization(languageId: string): Promise<Localization>\n}\n\nexport interface Localization extends LanguageInfo {\n    translations: { [key: string]: string };\n}\n\nexport interface LanguageInfo {\n    languageId: string;\n    languageName?: string;\n    languagePack?: boolean;\n    localizedLanguageName?: string;\n}\n\nexport type FormatType = string | number | boolean | undefined;\n\nexport namespace Localization {\n\n    const formatRegexp = /{([^}]+)}/g;\n\n    export function format(message: string, args: FormatType[]): string;\n    export function format(message: string, args: Record<string | number, FormatType>): string;\n    export function format(message: string, args: Record<string | number, FormatType> | FormatType[]): string {\n        return message.replace(formatRegexp, (match, group) => (args[group] ?? match) as string);\n    }\n\n    export function localize(localization: Localization | undefined, key: string, defaultValue: string, ...args: FormatType[]): string {\n        let value = defaultValue;\n        if (localization) {\n            const translation = localization.translations[key];\n            if (translation) {\n                value = normalize(translation);\n            }\n        }\n        return format(value, args);\n    }\n\n    /**\n     * This function normalizes values from VSCode's localizations, which often contain additional mnemonics (`&&`).\n     * The normalization removes the mnemonics from the input string.\n     *\n     * @param value Localization value coming from VSCode\n     * @returns A normalized localized value\n     */\n    export function normalize(value: string): string {\n        return value.replace(/&&/g, '');\n    }\n\n    export function transformKey(key: string): string {\n        let nlsKey = key;\n        const keySlashIndex = key.lastIndexOf('/');\n        if (keySlashIndex >= 0) {\n            nlsKey = key.substring(keySlashIndex + 1);\n        }\n        return nlsKey;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport { environment } from '@theia/application-package/lib/environment';\nexport * from './application-error';\nexport * from './cancellation';\nexport * from './command';\nexport * from './contribution-filter';\nexport * from './contribution-provider';\nexport * from './disposable';\nexport * from './event';\nexport * from './logger';\nexport * from './lsp-types';\nexport * from './menu';\nexport * from './message-rpc';\nexport * from './message-service';\nexport * from './message-service-protocol';\nexport * from './messaging';\nexport * from './nls';\nexport * from './numbers';\nexport * from './objects';\nexport * from './os';\nexport * from './path';\nexport * from './performance';\nexport * from './progress-service';\nexport * from './progress-service-protocol';\nexport * from './quick-pick-service';\nexport * from './reference';\nexport * from './resource';\nexport * from './selection';\nexport * from './selection-service';\nexport * from './strings';\nexport * from './telemetry';\nexport * from './types';\nexport { default as URI } from './uri';\nexport * from './view-column';\nexport * from './version';\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { RpcServer } from './messaging/proxy-factory';\n\nexport const ILoggerServer = Symbol('ILoggerServer');\n\nexport const loggerPath = '/services/logger';\n\nexport interface ILoggerServer extends RpcServer<ILoggerClient> {\n    setLogLevel(name: string, logLevel: number): Promise<void>;\n    getLogLevel(name: string): Promise<number>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(name: string, logLevel: number, message: any, params: any[]): Promise<void>;\n    child(name: string): Promise<void>;\n}\n\nexport const ILoggerClient = Symbol('ILoggerClient');\n\nexport interface ILogLevelChangedEvent {\n    loggerName: string;\n    newLogLevel: number;\n}\n\nexport interface ILoggerClient {\n    onLogLevelChanged(event: ILogLevelChangedEvent): void;\n    onLogConfigChanged(): void;\n}\n\n@injectable()\nexport class DispatchingLoggerClient implements ILoggerClient {\n\n    readonly clients = new Set<ILoggerClient>();\n\n    onLogLevelChanged(event: ILogLevelChangedEvent): void {\n        this.clients.forEach(client => client.onLogLevelChanged(event));\n    }\n\n    onLogConfigChanged(): void {\n        this.clients.forEach(client => client.onLogConfigChanged());\n    }\n}\n\nexport const rootLoggerName = 'root';\n\nexport enum LogLevel {\n    FATAL = 60,\n    ERROR = 50,\n    WARN = 40,\n    INFO = 30,\n    DEBUG = 20,\n    TRACE = 10\n}\nexport namespace LogLevel {\n    export const strings = new Map<LogLevel, string>([\n        [LogLevel.FATAL, 'fatal'],\n        [LogLevel.ERROR, 'error'],\n        [LogLevel.WARN, 'warn'],\n        [LogLevel.INFO, 'info'],\n        [LogLevel.DEBUG, 'debug'],\n        [LogLevel.TRACE, 'trace']\n    ]);\n\n    export function toString(level: LogLevel): string | undefined {\n        return strings.get(level);\n    }\n\n    export function fromString(levelStr: string): LogLevel | undefined {\n        for (const pair of strings) {\n            if (pair[1] === levelStr) {\n                return pair[0];\n            }\n        }\n\n        return undefined;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport namespace ConsoleLogger {\n    type Console = (message?: any, ...optionalParams: any[]) => void;\n    const originalConsoleLog = console.log;\n    const consoles = new Map<LogLevel, Console>([\n        [LogLevel.FATAL, console.error],\n        [LogLevel.ERROR, console.error],\n        [LogLevel.WARN, console.warn],\n        [LogLevel.INFO, console.info],\n        [LogLevel.DEBUG, console.debug],\n        [LogLevel.TRACE, console.trace]\n    ]);\n    export function reset(): void {\n        console.error = consoles.get(LogLevel.ERROR)!;\n        console.warn = consoles.get(LogLevel.WARN)!;\n        console.info = consoles.get(LogLevel.INFO)!;\n        console.debug = consoles.get(LogLevel.DEBUG)!;\n        console.trace = consoles.get(LogLevel.TRACE)!;\n        console.log = originalConsoleLog;\n    }\n    export function log(name: string, logLevel: number, message: string, params: any[]): void {\n        const console = consoles.get(logLevel) || originalConsoleLog;\n        const severity = (LogLevel.strings.get(logLevel) || 'unknown').toUpperCase();\n        const now = new Date();\n        console(`${now.toISOString()} ${name} ${severity} ${message}`, ...params);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from './event';\nimport { ILoggerClient, ILogLevelChangedEvent } from './logger-protocol';\n\n@injectable()\nexport class LoggerWatcher {\n\n    getLoggerClient(): ILoggerClient {\n        const logLevelEmitter = this.onLogLevelChangedEmitter;\n        const logConfigEmitter = this.onLogConfigChangedEmitter;\n        return {\n            onLogLevelChanged(event: ILogLevelChangedEvent): void {\n                logLevelEmitter.fire(event);\n            },\n            onLogConfigChanged(): void {\n                logConfigEmitter.fire();\n            },\n        };\n    }\n\n    protected onLogLevelChangedEmitter = new Emitter<ILogLevelChangedEvent>();\n\n    get onLogLevelChanged(): Event<ILogLevelChangedEvent> {\n        return this.onLogLevelChangedEmitter.event;\n    }\n\n    protected onLogConfigChangedEmitter = new Emitter<void>();\n\n    get onLogConfigChanged(): Event<void> {\n        return this.onLogConfigChangedEmitter.event;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { LoggerWatcher } from './logger-watcher';\nimport { ILoggerServer, LogLevel, ConsoleLogger, rootLoggerName } from './logger-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport {\n    LogLevel, rootLoggerName\n};\n\n/* This is to be initialized from container composition root. It can be used outside of the inversify context.  */\nexport let logger: ILogger;\n\n/**\n * Counterpart of the `#setRootLogger(ILogger)`. Restores the `console.xxx` bindings to the original one.\n * Invoking has no side-effect if `setRootLogger` was not called before. Multiple function invocation has\n * no side-effect either.\n */\nexport function unsetRootLogger(): void {\n    if (logger !== undefined) {\n        ConsoleLogger.reset();\n        (<any>logger) = undefined;\n    }\n}\n\nexport function setRootLogger(aLogger: ILogger): void {\n    logger = aLogger;\n    const log = (logLevel: number, message?: any, ...optionalParams: any[]) =>\n        logger.log(logLevel, message, ...optionalParams);\n\n    console.error = log.bind(undefined, LogLevel.ERROR);\n    console.warn = log.bind(undefined, LogLevel.WARN);\n    console.info = log.bind(undefined, LogLevel.INFO);\n    console.debug = log.bind(undefined, LogLevel.DEBUG);\n    console.trace = log.bind(undefined, LogLevel.TRACE);\n    console.log = log.bind(undefined, LogLevel.INFO);\n}\n\nexport type Log = (message: any, ...params: any[]) => void;\nexport type Loggable = (log: Log) => void;\n\nexport const LoggerFactory = Symbol('LoggerFactory');\nexport type LoggerFactory = (name: string) => ILogger;\n\nexport const LoggerName = Symbol('LoggerName');\n\nexport const ILogger = Symbol('ILogger');\n\nexport interface ILogger {\n    /**\n     * Set the log level.\n     *\n     * @param loglevel - The loglevel to set. see Logger.LogLevel for\n     * possible options.\n     */\n    setLogLevel(logLevel: number): Promise<void>\n    /**\n     * Get the log level.\n     *\n     * @returns a Promise to the log level.\n     */\n    getLogLevel(): Promise<number>;\n\n    /**\n     * Test whether the given log level is enabled.\n     */\n    isEnabled(logLevel: number): Promise<boolean>;\n    /**\n     * Resolve if the given log is enabled.\n     */\n    ifEnabled(logLevel: number): Promise<void>;\n    /**\n     * Log a loggable with the given level if it is enabled.\n     */\n    log(logLevel: number, loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the given level if it is enabled.\n     *\n     * @param logLevel - The loglevel to use.\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    log(logLevel: number, message: any, ...params: any[]): void;\n\n    /**\n     * Test whether the trace level is enabled.\n     */\n    isTrace(): Promise<boolean>;\n    /**\n     * Resolve if the trace level is enabled.\n     */\n    ifTrace(): Promise<void>;\n    /**\n     * Log a loggable with the trace level if it is enabled.\n     */\n    trace(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the trace level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    trace(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the debug level is enabled.\n     */\n    isDebug(): Promise<boolean>;\n    /**\n     * Resolve if the debug level is enabled.\n     */\n    ifDebug(): Promise<void>;\n    /**\n     * Log a loggable with the debug level if it is enabled.\n     */\n    debug(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the debug level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    debug(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the info level is enabled.\n     */\n    isInfo(): Promise<boolean>;\n    /**\n     * Resolve if the info level is enabled.\n     */\n    ifInfo(): Promise<void>;\n    /**\n     * Log a loggable with the info level if it is enabled.\n     */\n    info(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the info level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    info(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the warn level is enabled.\n     */\n    isWarn(): Promise<boolean>;\n    /**\n     * Resolve if the warn level is enabled.\n     */\n    ifWarn(): Promise<void>;\n    /**\n     * Log a loggable with the warn level if it is enabled.\n     */\n    warn(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the warn level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    warn(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the error level is enabled.\n     */\n    isError(): Promise<boolean>;\n    /**\n     * Resolve if the error level is enabled.\n     */\n    ifError(): Promise<void>;\n    /**\n     * Log a loggable with the error level if it is enabled.\n     */\n    error(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the error level.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    error(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the fatal level is enabled.\n     */\n    isFatal(): Promise<boolean>;\n    /**\n     * Resolve if the fatal level is enabled.\n     */\n    ifFatal(): Promise<void>;\n    /**\n     * Log a loggable with the fatal level if it is enabled.\n     */\n    fatal(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the fatal level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    fatal(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Create a child logger from this logger.\n     *\n     * @param name - The name of the child logger.\n     */\n    child(name: string): ILogger;\n}\n\n@injectable()\nexport class Logger implements ILogger {\n\n    /* Log level for the logger.  */\n    protected _logLevel: Promise<number>;\n\n    /* A promise resolved when the logger has been created by the backend.  */\n    protected created: Promise<void>;\n\n    @inject(ILoggerServer) protected readonly server: ILoggerServer;\n    @inject(LoggerWatcher) protected readonly loggerWatcher: LoggerWatcher;\n    @inject(LoggerFactory) protected readonly factory: LoggerFactory;\n    @inject(LoggerName) protected name: string;\n\n    @postConstruct()\n    protected init(): void {\n        if (this.name !== rootLoggerName) {\n            /* Creating a child logger.  */\n            this.created = this.server.child(this.name);\n        } else {\n            /* Creating the root logger (it already exists at startup).  */\n            this.created = Promise.resolve();\n        }\n\n        /* Fetch the log level so it's cached in the frontend.  */\n        this._logLevel = this.created.then(_ => this.server.getLogLevel(this.name));\n\n        /* Update the log level if it changes in the backend. */\n        this.loggerWatcher.onLogLevelChanged(event => {\n            this.created.then(() => {\n                if (event.loggerName === this.name) {\n                    this._logLevel = Promise.resolve(event.newLogLevel);\n                }\n            });\n        });\n\n        /* Refetch log level if overall config in backend changed. */\n        this.loggerWatcher.onLogConfigChanged(() => {\n            this._logLevel = this.created.then(_ => this.server.getLogLevel(this.name));\n        });\n    }\n\n    setLogLevel(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.created.then(() => {\n                this._logLevel.then(oldLevel => {\n                    this.server.setLogLevel(this.name, logLevel).then(() => {\n                        this._logLevel = Promise.resolve(logLevel);\n                        resolve();\n                    });\n                });\n            });\n        });\n    }\n    getLogLevel(): Promise<number> {\n        return this._logLevel;\n    }\n\n    isEnabled(logLevel: number): Promise<boolean> {\n        return this._logLevel.then(level =>\n            logLevel >= level\n        );\n    }\n    ifEnabled(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve =>\n            this.isEnabled(logLevel).then(enabled => {\n                if (enabled) {\n                    resolve();\n                }\n            })\n        );\n    }\n    log(logLevel: number, arg2: any | Loggable, ...params: any[]): Promise<void> {\n        return this.getLog(logLevel).then(log => {\n            if (typeof arg2 === 'function') {\n                const loggable = arg2;\n                loggable(log);\n            } else if (arg2) {\n                log(arg2, ...params);\n            }\n        });\n    }\n    protected getLog(logLevel: number): Promise<Log> {\n        return this.ifEnabled(logLevel).then(() =>\n            this.created.then(() =>\n                (message: any, ...params: any[]) =>\n                    this.server.log(this.name, logLevel, this.format(message), params.map(p => this.format(p)))\n            )\n        );\n    }\n    protected format(value: any): any {\n        if (value instanceof Error) {\n            return value.stack || value.toString();\n        }\n        return value;\n    }\n\n    isTrace(): Promise<boolean> {\n        return this.isEnabled(LogLevel.TRACE);\n    }\n    ifTrace(): Promise<void> {\n        return this.ifEnabled(LogLevel.TRACE);\n    }\n    trace(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.TRACE, arg, ...params);\n    }\n\n    isDebug(): Promise<boolean> {\n        return this.isEnabled(LogLevel.DEBUG);\n    }\n    ifDebug(): Promise<void> {\n        return this.ifEnabled(LogLevel.DEBUG);\n    }\n    debug(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.DEBUG, arg, ...params);\n    }\n\n    isInfo(): Promise<boolean> {\n        return this.isEnabled(LogLevel.INFO);\n    }\n    ifInfo(): Promise<void> {\n        return this.ifEnabled(LogLevel.INFO);\n    }\n    info(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.INFO, arg, ...params);\n    }\n\n    isWarn(): Promise<boolean> {\n        return this.isEnabled(LogLevel.WARN);\n    }\n    ifWarn(): Promise<void> {\n        return this.ifEnabled(LogLevel.WARN);\n    }\n    warn(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.WARN, arg, ...params);\n    }\n\n    isError(): Promise<boolean> {\n        return this.isEnabled(LogLevel.ERROR);\n    }\n    ifError(): Promise<void> {\n        return this.ifEnabled(LogLevel.ERROR);\n    }\n    error(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.ERROR, arg, ...params);\n    }\n\n    isFatal(): Promise<boolean> {\n        return this.isEnabled(LogLevel.FATAL);\n    }\n    ifFatal(): Promise<void> {\n        return this.ifEnabled(LogLevel.FATAL);\n    }\n    fatal(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.FATAL, arg, ...params);\n    }\n\n    child(name: string): ILogger {\n        return this.factory(name);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Range } from 'vscode-languageserver-protocol';\nimport { isNumber, isObject, isString, isUndefined } from './types';\n\nexport interface TextDocumentContentChangeDelta {\n    readonly range: Range;\n    readonly rangeLength?: number;\n    readonly text: string;\n}\nexport namespace TextDocumentContentChangeDelta {\n\n    export function is(arg: unknown): arg is TextDocumentContentChangeDelta {\n        return isObject<TextDocumentContentChangeDelta>(arg)\n            && isString(arg.text)\n            && (isNumber(arg.rangeLength) || isUndefined(arg.rangeLength))\n            && Range.is(arg.range);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { CommandRegistry } from '../command';\nimport { AlternativeHandlerMenuNode, CommandMenuNode, MenuAction, MenuNode } from './menu-types';\n\n/**\n * Node representing an action in the menu tree structure.\n * It's based on {@link MenuAction} for which it tries to determine the\n * best label, icon and sortString with the given data.\n */\nexport class ActionMenuNode implements MenuNode, CommandMenuNode, Partial<AlternativeHandlerMenuNode> {\n\n    readonly altNode: ActionMenuNode | undefined;\n\n    constructor(\n        protected readonly action: MenuAction,\n        protected readonly commands: CommandRegistry,\n    ) {\n        if (action.alt) {\n            this.altNode = new ActionMenuNode({ commandId: action.alt }, commands);\n        }\n    }\n\n    get command(): string { return this.action.commandId; };\n\n    get when(): string | undefined { return this.action.when; }\n\n    get id(): string { return this.action.commandId; }\n\n    get label(): string {\n        if (this.action.label) {\n            return this.action.label;\n        }\n        const cmd = this.commands.getCommand(this.action.commandId);\n        if (!cmd) {\n            console.debug(`No label for action menu node: No command \"${this.action.commandId}\" exists.`);\n            return '';\n        }\n        return cmd.label || cmd.id;\n    }\n\n    get icon(): string | undefined {\n        if (this.action.icon) {\n            return this.action.icon;\n        }\n        const command = this.commands.getCommand(this.action.commandId);\n        return command && command.iconClass;\n    }\n\n    get sortString(): string { return this.action.order || this.label; }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from '../disposable';\nimport { CompoundMenuNode, CompoundMenuNodeRole, MenuNode, MutableCompoundMenuNode, SubMenuOptions } from './menu-types';\n\n/**\n * Node representing a (sub)menu in the menu tree structure.\n */\nexport class CompositeMenuNode implements MutableCompoundMenuNode {\n    protected readonly _children: MenuNode[] = [];\n    public iconClass?: string;\n    public order?: string;\n    protected _when?: string;\n    protected _role?: CompoundMenuNodeRole;\n\n    constructor(\n        public readonly id: string,\n        public label?: string,\n        options?: SubMenuOptions,\n        readonly parent?: MenuNode & CompoundMenuNode,\n    ) {\n        this.updateOptions(options);\n    }\n\n    get when(): string | undefined { return this._when; }\n    get icon(): string | undefined { return this.iconClass; }\n    get children(): ReadonlyArray<MenuNode> { return this._children; }\n    get role(): CompoundMenuNodeRole { return this._role ?? (this.label ? CompoundMenuNodeRole.Submenu : CompoundMenuNodeRole.Group); }\n\n    addNode(node: MenuNode): Disposable {\n        this._children.push(node);\n        this._children.sort(CompoundMenuNode.sortChildren);\n        return {\n            dispose: () => {\n                const idx = this._children.indexOf(node);\n                if (idx >= 0) {\n                    this._children.splice(idx, 1);\n                }\n            }\n        };\n    }\n\n    removeNode(id: string): void {\n        const idx = this._children.findIndex(n => n.id === id);\n        if (idx >= 0) {\n            this._children.splice(idx, 1);\n        }\n    }\n\n    updateOptions(options?: SubMenuOptions): void {\n        if (options) {\n            this.iconClass ??= options.icon ?? options.iconClass;\n            this.label ??= options.label;\n            this.order ??= options.order;\n            this._role ??= options.role;\n            this._when ??= options.when;\n        }\n    }\n\n    get sortString(): string {\n        return this.order || this.id;\n    }\n\n    get isSubmenu(): boolean {\n        return Boolean(this.label);\n    }\n\n    /** @deprecated @since 1.28 use CompoundMenuNode.isNavigationGroup instead */\n    static isNavigationGroup = CompoundMenuNode.isNavigationGroup;\n}\n\nexport class CompositeMenuNodeWrapper implements MutableCompoundMenuNode {\n    constructor(protected readonly wrapped: Readonly<MutableCompoundMenuNode>, readonly parent: CompoundMenuNode, protected readonly options?: SubMenuOptions) { }\n\n    get id(): string { return this.wrapped.id; }\n\n    get label(): string | undefined { return this.wrapped.label; }\n\n    get sortString(): string { return this.options?.order || this.wrapped.sortString; }\n\n    get isSubmenu(): boolean { return Boolean(this.label); }\n\n    get role(): CompoundMenuNodeRole { return this.options?.role ?? this.wrapped.role; }\n\n    get icon(): string | undefined { return this.iconClass; }\n\n    get iconClass(): string | undefined { return this.options?.iconClass ?? this.wrapped.icon; }\n\n    get order(): string | undefined { return this.sortString; }\n\n    get when(): string | undefined { return this.options?.when ?? this.wrapped.when; }\n\n    get children(): ReadonlyArray<MenuNode> { return this.wrapped.children; }\n\n    addNode(node: MenuNode): Disposable { return this.wrapped.addNode(node); }\n\n    removeNode(id: string): void { return this.wrapped.removeNode(id); }\n\n    updateOptions(options: SubMenuOptions): void { return this.wrapped.updateOptions(options); }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './action-menu-node';\nexport * from './composite-menu-node';\nexport * from './menu-adapter';\nexport * from './menu-model-registry';\nexport * from './menu-types';\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from 'inversify';\nimport { CommandRegistry } from '../command';\nimport { Disposable } from '../disposable';\nimport { MenuPath } from './menu-types';\n\nexport type MenuCommandArguments = [menuPath: MenuPath, command: string, ...commandArgs: unknown[]];\n\nexport const MenuCommandExecutor = Symbol('MenuCommandExecutor');\nexport interface MenuCommandExecutor {\n    isVisible(...args: MenuCommandArguments): boolean;\n    isEnabled(...args: MenuCommandArguments): boolean;\n    isToggled(...args: MenuCommandArguments): boolean;\n    executeCommand(...args: MenuCommandArguments): Promise<unknown>;\n};\n\nexport const MenuCommandAdapter = Symbol('MenuCommandAdapter');\nexport interface MenuCommandAdapter extends MenuCommandExecutor {\n    /** Return values less than or equal to 0 are treated as rejections. */\n    canHandle(...args: MenuCommandArguments): number;\n}\n\nexport const MenuCommandAdapterRegistry = Symbol('MenuCommandAdapterRegistry');\nexport interface MenuCommandAdapterRegistry {\n    registerAdapter(adapter: MenuCommandAdapter): Disposable;\n    getAdapterFor(...args: MenuCommandArguments): MenuCommandAdapter | undefined;\n}\n\n@injectable()\nexport class MenuCommandExecutorImpl implements MenuCommandExecutor {\n    @inject(MenuCommandAdapterRegistry) protected readonly adapterRegistry: MenuCommandAdapterRegistry;\n    @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry;\n\n    executeCommand(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): Promise<unknown> {\n        return this.delegate(menuPath, command, commandArgs, 'executeCommand');\n    }\n\n    isVisible(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isVisible');\n    }\n\n    isEnabled(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isEnabled');\n    }\n\n    isToggled(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isToggled');\n    }\n\n    protected delegate<T extends keyof MenuCommandExecutor>(menuPath: MenuPath, command: string, commandArgs: unknown[], method: T): ReturnType<MenuCommandExecutor[T]> {\n        const adapter = this.adapterRegistry.getAdapterFor(menuPath, command, commandArgs);\n        return (adapter\n            ? adapter[method](menuPath, command, ...commandArgs)\n            : this.commandRegistry[method](command, ...commandArgs)) as ReturnType<MenuCommandExecutor[T]>;\n    }\n}\n\n@injectable()\nexport class MenuCommandAdapterRegistryImpl implements MenuCommandAdapterRegistry {\n    protected readonly adapters = new Array<MenuCommandAdapter>();\n\n    registerAdapter(adapter: MenuCommandAdapter): Disposable {\n        if (!this.adapters.includes(adapter)) {\n            this.adapters.push(adapter);\n            return Disposable.create(() => {\n                const index = this.adapters.indexOf(adapter);\n                if (index !== -1) {\n                    this.adapters.splice(index, 1);\n                }\n            });\n        }\n        return Disposable.NULL;\n    }\n\n    getAdapterFor(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): MenuCommandAdapter | undefined {\n        let bestAdapter: MenuCommandAdapter | undefined = undefined;\n        let bestScore = 0;\n        let currentScore = 0;\n        for (const adapter of this.adapters) {\n            // Greater than or equal: favor later registrations over earlier.\n            if ((currentScore = adapter.canHandle(menuPath, command, ...commandArgs)) >= bestScore) {\n                bestScore = currentScore;\n                bestAdapter = adapter;\n            }\n        }\n        return bestAdapter;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { Disposable } from '../disposable';\nimport { CommandRegistry, Command } from '../command';\nimport { ContributionProvider } from '../contribution-provider';\nimport { CompositeMenuNode, CompositeMenuNodeWrapper } from './composite-menu-node';\nimport { CompoundMenuNode, MenuAction, MenuNode, MenuPath, MutableCompoundMenuNode, SubMenuOptions } from './menu-types';\nimport { ActionMenuNode } from './action-menu-node';\n\nexport const MenuContribution = Symbol('MenuContribution');\n\n/**\n * Representation of a menu contribution.\n *\n * Note that there are also convenience classes which combine multiple contributions into one.\n * For example to register a view together with a menu and keybinding you could use\n * {@link AbstractViewContribution} instead.\n *\n * ### Example usage\n *\n * ```ts\n * import { MenuContribution, MenuModelRegistry, MAIN_MENU_BAR } from '@theia/core';\n *\n * @injectable()\n * export class NewMenuContribution implements MenuContribution {\n *    registerMenus(menus: MenuModelRegistry): void {\n *         const menuPath = [...MAIN_MENU_BAR, '99_mymenu'];\n *         menus.registerSubmenu(menuPath, 'My Menu');\n *\n *         menus.registerMenuAction(menuPath, {\n *            commandId: MyCommand.id,\n *            label: 'My Action'\n *         });\n *     }\n * }\n * ```\n */\nexport interface MenuContribution {\n    /**\n     * Registers menus.\n     * @param menus the menu model registry.\n     */\n    registerMenus(menus: MenuModelRegistry): void;\n}\n\n/**\n * The MenuModelRegistry allows to register and unregister menus, submenus and actions\n * via strings and {@link MenuAction}s without the need to access the underlying UI\n * representation.\n */\n@injectable()\nexport class MenuModelRegistry {\n    protected readonly root = new CompositeMenuNode('');\n    protected readonly independentSubmenus = new Map<string, MutableCompoundMenuNode>();\n\n    constructor(\n        @inject(ContributionProvider) @named(MenuContribution)\n        protected readonly contributions: ContributionProvider<MenuContribution>,\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry\n    ) { }\n\n    onStart(): void {\n        for (const contrib of this.contributions.getContributions()) {\n            contrib.registerMenus(this);\n        }\n    }\n\n    /**\n     * Adds the given menu action to the menu denoted by the given path.\n     *\n     * @returns a disposable which, when called, will remove the menu action again.\n     */\n    registerMenuAction(menuPath: MenuPath, item: MenuAction): Disposable {\n        const menuNode = new ActionMenuNode(item, this.commands);\n        return this.registerMenuNode(menuPath, menuNode);\n    }\n\n    /**\n     * Adds the given menu node to the menu denoted by the given path.\n     *\n     * @returns a disposable which, when called, will remove the menu node again.\n     */\n    registerMenuNode(menuPath: MenuPath | string, menuNode: MenuNode, group?: string): Disposable {\n        const parent = this.getMenuNode(menuPath, group);\n        return parent.addNode(menuNode);\n    }\n\n    getMenuNode(menuPath: MenuPath | string, group?: string): MutableCompoundMenuNode {\n        if (typeof menuPath === 'string') {\n            const target = this.independentSubmenus.get(menuPath);\n            if (!target) { throw new Error(`Could not find submenu with id ${menuPath}`); }\n            if (group) {\n                return this.findSubMenu(target, group);\n            }\n            return target;\n        } else {\n            return this.findGroup(group ? menuPath.concat(group) : menuPath);\n        }\n    }\n\n    /**\n     * Register a new menu at the given path with the given label.\n     * (If the menu already exists without a label, iconClass or order this method can be used to set them.)\n     *\n     * @param menuPath the path for which a new submenu shall be registered.\n     * @param label the label to be used for the new submenu.\n     * @param options optionally allows to set an icon class and specify the order of the new menu.\n     *\n     * @returns if the menu was successfully created a disposable will be returned which,\n     * when called, will remove the menu again. If the menu already existed a no-op disposable\n     * will be returned.\n     *\n     * Note that if the menu already existed and was registered with a different label an error\n     * will be thrown.\n     */\n    registerSubmenu(menuPath: MenuPath, label: string, options?: SubMenuOptions): Disposable {\n        if (menuPath.length === 0) {\n            throw new Error('The sub menu path cannot be empty.');\n        }\n        const index = menuPath.length - 1;\n        const menuId = menuPath[index];\n        const groupPath = index === 0 ? [] : menuPath.slice(0, index);\n        const parent = this.findGroup(groupPath, options);\n        let groupNode = this.findSubMenu(parent, menuId, options);\n        if (!groupNode) {\n            groupNode = new CompositeMenuNode(menuId, label, options, parent);\n            return parent.addNode(groupNode);\n        } else {\n            groupNode.updateOptions({ ...options, label });\n            return Disposable.NULL;\n        }\n    }\n\n    registerIndependentSubmenu(id: string, label: string, options?: SubMenuOptions): Disposable {\n        if (this.independentSubmenus.has(id)) {\n            console.debug(`Independent submenu with path ${id} registered, but given ID already exists.`);\n        }\n        this.independentSubmenus.set(id, new CompositeMenuNode(id, label, options));\n        return { dispose: () => this.independentSubmenus.delete(id) };\n    }\n\n    linkSubmenu(parentPath: MenuPath | string, childId: string | MenuPath, options?: SubMenuOptions, group?: string): Disposable {\n        const child = this.getMenuNode(childId);\n        const parent = this.getMenuNode(parentPath, group);\n        const wrapper = new CompositeMenuNodeWrapper(child, parent, options);\n        return parent.addNode(wrapper);\n    }\n\n    /**\n     * Unregister all menu nodes with the same id as the given menu action.\n     *\n     * @param item the item whose id will be used.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(item: MenuAction, menuPath?: MenuPath): void;\n    /**\n     * Unregister all menu nodes with the same id as the given command.\n     *\n     * @param command the command whose id will be used.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(command: Command, menuPath?: MenuPath): void;\n    /**\n     * Unregister all menu nodes with the given id.\n     *\n     * @param id the id which shall be removed.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(id: string, menuPath?: MenuPath): void;\n    unregisterMenuAction(itemOrCommandOrId: MenuAction | Command | string, menuPath?: MenuPath): void {\n        const id = MenuAction.is(itemOrCommandOrId) ? itemOrCommandOrId.commandId\n            : Command.is(itemOrCommandOrId) ? itemOrCommandOrId.id\n                : itemOrCommandOrId;\n\n        if (menuPath) {\n            const parent = this.findGroup(menuPath);\n            parent.removeNode(id);\n            return;\n        }\n\n        this.unregisterMenuNode(id);\n    }\n\n    /**\n     * Recurse all menus, removing any menus matching the `id`.\n     *\n     * @param id technical identifier of the `MenuNode`.\n     */\n    unregisterMenuNode(id: string): void {\n        const recurse = (root: MutableCompoundMenuNode) => {\n            root.children.forEach(node => {\n                if (CompoundMenuNode.isMutable(node)) {\n                    node.removeNode(id);\n                    recurse(node);\n                }\n            });\n        };\n        recurse(this.root);\n    }\n\n    /**\n     * Finds a submenu as a descendant of the `root` node.\n     * See {@link MenuModelRegistry.findSubMenu findSubMenu}.\n     */\n    protected findGroup(menuPath: MenuPath, options?: SubMenuOptions): MutableCompoundMenuNode {\n        let currentMenu: MutableCompoundMenuNode = this.root;\n        for (const segment of menuPath) {\n            currentMenu = this.findSubMenu(currentMenu, segment, options);\n        }\n        return currentMenu;\n    }\n\n    /**\n     * Finds or creates a submenu as an immediate child of `current`.\n     * @throws if a node with the given `menuId` exists but is not a {@link MutableCompoundMenuNode}.\n     */\n    protected findSubMenu(current: MutableCompoundMenuNode, menuId: string, options?: SubMenuOptions): MutableCompoundMenuNode {\n        const sub = current.children.find(e => e.id === menuId);\n        if (CompoundMenuNode.isMutable(sub)) {\n            return sub;\n        }\n        if (sub) {\n            throw new Error(`'${menuId}' is not a menu group.`);\n        }\n        const newSub = new CompositeMenuNode(menuId, undefined, options, current);\n        current.addNode(newSub);\n        return newSub;\n    }\n\n    /**\n     * Returns the menu at the given path.\n     *\n     * @param menuPath the path specifying the menu to return. If not given the empty path will be used.\n     *\n     * @returns the root menu when `menuPath` is empty. If `menuPath` is not empty the specified menu is\n     * returned if it exists, otherwise an error is thrown.\n     */\n    getMenu(menuPath: MenuPath = []): MutableCompoundMenuNode {\n        return this.findGroup(menuPath);\n    }\n\n    /**\n     * Checks the given menu model whether it will show a menu with a single submenu.\n     *\n     * @param fullMenuModel the menu model to analyze\n     * @param menuPath the menu's path\n     * @returns if the menu will show a single submenu this returns a menu that will show the child elements of the submenu,\n     * otherwise the given `fullMenuModel` is return\n     */\n    removeSingleRootNode(fullMenuModel: MutableCompoundMenuNode, menuPath: MenuPath): CompoundMenuNode {\n        // check whether all children are compound menus and that there is only one child that has further children\n        if (!this.allChildrenCompound(fullMenuModel.children)) {\n            return fullMenuModel;\n        }\n        let nonEmptyNode = undefined;\n        for (const child of fullMenuModel.children) {\n            if (!this.isEmpty(child.children || [])) {\n                if (nonEmptyNode === undefined) {\n                    nonEmptyNode = child;\n                } else {\n                    return fullMenuModel;\n                }\n            }\n        }\n\n        if (CompoundMenuNode.is(nonEmptyNode) && nonEmptyNode.children.length === 1 && CompoundMenuNode.is(nonEmptyNode.children[0])) {\n            nonEmptyNode = nonEmptyNode.children[0];\n        }\n\n        return CompoundMenuNode.is(nonEmptyNode) ? nonEmptyNode : fullMenuModel;\n    }\n\n    protected allChildrenCompound(children: ReadonlyArray<MenuNode>): boolean {\n        return children.every(CompoundMenuNode.is);\n    }\n\n    protected isEmpty(children: ReadonlyArray<MenuNode>): boolean {\n        if (children.length === 0) {\n            return true;\n        }\n        if (!this.allChildrenCompound(children)) {\n            return false;\n        }\n        for (const child of children) {\n            if (!this.isEmpty(child.children || [])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Returns the {@link MenuPath path} at which a given menu node can be accessed from this registry, if it can be determined.\n     * Returns `undefined` if the `parent` of any node in the chain is unknown.\n     */\n    getPath(node: MenuNode): MenuPath | undefined {\n        const identifiers = [];\n        const visited: MenuNode[] = [];\n        let next: MenuNode | undefined = node;\n\n        while (next && !visited.includes(next)) {\n            if (next === this.root) {\n                return identifiers.reverse();\n            }\n            visited.push(next);\n            identifiers.push(next.id);\n            next = next.parent;\n        }\n        return undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from '../disposable';\nimport { isObject } from '../types';\n\nexport type MenuPath = string[];\nexport const MAIN_MENU_BAR: MenuPath = ['menubar'];\nexport const MANAGE_MENU: MenuPath = ['manage_menu'];\nexport const ACCOUNTS_MENU: MenuPath = ['accounts_menu'];\nexport const ACCOUNTS_SUBMENU = [...ACCOUNTS_MENU, '1_accounts_submenu'];\n\n/**\n * @internal For most use cases, refer to {@link MenuAction} or {@link MenuNode}\n */\nexport interface MenuNodeMetadata {\n    /**\n     * technical identifier.\n     */\n    readonly id: string;\n    /**\n     * Menu nodes are sorted in ascending order based on their `sortString`.\n     */\n    readonly sortString: string;\n    /**\n     * Condition under which the menu node should be rendered.\n     * See https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts\n     */\n    readonly when?: string;\n    /**\n     * A reference to the parent node - useful for determining the menu path by which the node can be accessed.\n     */\n    readonly parent?: MenuNode;\n}\n\n/**\n * Metadata for the visual presentation of a node.\n * @internal For most uses cases, refer to {@link MenuNode}, {@link CommandMenuNode}, or {@link CompoundMenuNode}\n */\nexport interface MenuNodeRenderingData {\n    /**\n     * Optional label. Will be rendered as text of the menu item.\n     */\n    readonly label?: string;\n    /**\n     * Icon classes for the menu node. If present, these will produce an icon to the left of the label in browser-style menus.\n     */\n    readonly icon?: string;\n}\n\n/** @internal For most use cases refer to {@link MenuNode}, {@link CommandMenuNode}, or {@link CompoundMenuNode} */\nexport interface MenuNodeBase extends MenuNodeMetadata, MenuNodeRenderingData { }\n\n/**\n * A menu entry representing an action, e.g. \"New File\".\n */\nexport interface MenuAction extends MenuNodeRenderingData, Pick<MenuNodeMetadata, 'when'> {\n    /**\n     * The command to execute.\n     */\n    commandId: string;\n    /**\n     * In addition to the mandatory command property, an alternative command can be defined.\n     * It will be shown and invoked when pressing Alt while opening a menu.\n     */\n    alt?: string;\n    /**\n     * Menu entries are sorted in ascending order based on their `order` strings. If omitted the determined\n     * label will be used instead.\n     */\n    order?: string;\n}\n\nexport namespace MenuAction {\n    /* Determine whether object is a MenuAction */\n    export function is(arg: unknown): arg is MenuAction {\n        return isObject(arg) && 'commandId' in arg;\n    }\n}\n\n/**\n * Additional options when creating a new submenu.\n */\nexport interface SubMenuOptions extends Pick<MenuAction, 'order'>, Pick<MenuNodeMetadata, 'when'>, Partial<Pick<CompoundMenuNode, 'role' | 'label' | 'icon'>> {\n    /**\n     * The class to use for the submenu icon.\n     * @deprecated use `icon` instead;\n     */\n    iconClass?: string;\n}\n\nexport const enum CompoundMenuNodeRole {\n    /** Indicates that the node should be rendered as submenu that opens a new menu on hover */\n    Submenu,\n    /** Indicates that the node's children should be rendered as group separated from other items by a separator */\n    Group,\n    /** Indicates that the node's children should be treated as though they were direct children of the node's parent */\n    Flat,\n}\n\nexport interface CompoundMenuNode extends MenuNodeBase {\n    /**\n     * Items that are grouped under this menu.\n     */\n    readonly children: ReadonlyArray<MenuNode>\n    /**\n     * @deprecated @since 1.28 use `role` instead.\n     * Whether the item should be rendered as a submenu.\n     */\n    readonly isSubmenu: boolean;\n    /**\n     * How the node and its children should be rendered. See {@link CompoundMenuNodeRole}.\n     */\n    readonly role: CompoundMenuNodeRole;\n}\n\nexport interface MutableCompoundMenuNode extends CompoundMenuNode {\n    /**\n     * Inserts the given node at the position indicated by `sortString`.\n     *\n     * @returns a disposable which, when called, will remove the given node again.\n     */\n    addNode(node: MenuNode): Disposable;\n    /**\n     * Removes the first node with the given id.\n     *\n     * @param id node id.\n     */\n    removeNode(id: string): void;\n\n    /**\n     * Fills any `undefined` fields with the values from the {@link options}.\n     */\n    updateOptions(options: SubMenuOptions): void;\n}\n\nexport namespace CompoundMenuNode {\n    export function is(node?: MenuNode): node is CompoundMenuNode { return !!node && Array.isArray(node.children); }\n    export function getRole(node: MenuNode): CompoundMenuNodeRole | undefined {\n        if (!is(node)) { return undefined; }\n        return node.role ?? (node.label ? CompoundMenuNodeRole.Submenu : CompoundMenuNodeRole.Group);\n    }\n    export function sortChildren(m1: MenuNode, m2: MenuNode): number {\n        // The navigation group is special as it will always be sorted to the top/beginning of a menu.\n        if (isNavigationGroup(m1)) {\n            return -1;\n        }\n        if (isNavigationGroup(m2)) {\n            return 1;\n        }\n        return m1.sortString.localeCompare(m2.sortString);\n    }\n\n    /** Collapses the children of any subemenus with role {@link CompoundMenuNodeRole Flat} and sorts */\n    export function getFlatChildren(children: ReadonlyArray<MenuNode>): MenuNode[] {\n        const childrenToMerge: ReadonlyArray<MenuNode>[] = [];\n        return children.filter(child => {\n            if (getRole(child) === CompoundMenuNodeRole.Flat) {\n                childrenToMerge.push((child as CompoundMenuNode).children);\n                return false;\n            }\n            return true;\n        }).concat(...childrenToMerge).sort(sortChildren);\n    }\n\n    /**\n     * Indicates whether the given node is the special `navigation` menu.\n     *\n     * @param node the menu node to check.\n     * @returns `true` when the given node is a {@link CompoundMenuNode} with id `navigation`,\n     * `false` otherwise.\n     */\n    export function isNavigationGroup(node: MenuNode): node is CompoundMenuNode {\n        return is(node) && node.id === 'navigation';\n    }\n\n    export function isMutable(node?: MenuNode): node is MutableCompoundMenuNode {\n        const candidate = node as MutableCompoundMenuNode;\n        return is(candidate) && typeof candidate.addNode === 'function' && typeof candidate.removeNode === 'function';\n    }\n}\n\nexport interface CommandMenuNode extends MenuNodeBase {\n    command: string;\n}\n\nexport namespace CommandMenuNode {\n    export function is(candidate?: MenuNode): candidate is CommandMenuNode { return Boolean(candidate?.command); }\n    export function hasAltHandler(candidate?: MenuNode): candidate is AlternativeHandlerMenuNode {\n        const asAltNode = candidate as AlternativeHandlerMenuNode;\n        return is(asAltNode) && is(asAltNode?.altNode);\n    }\n}\n\nexport interface AlternativeHandlerMenuNode extends CommandMenuNode {\n    altNode: CommandMenuNode;\n}\n\n/**\n * Base interface of the nodes used in the menu tree structure.\n */\nexport type MenuNode = MenuNodeMetadata\n    & MenuNodeRenderingData\n    & Partial<CompoundMenuNode>\n    & Partial<CommandMenuNode>\n    & Partial<AlternativeHandlerMenuNode>;\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable, DisposableCollection } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { ReadBuffer, WriteBuffer } from './message-buffer';\n\n/**\n * A channel is a bidirectional communications channel with lifecycle and\n * error signalling. Note that creation of channels is specific to particular\n * implementations and thus not part of the protocol.\n */\nexport interface Channel {\n\n    /**\n     * The remote side has closed the channel\n     */\n    onClose: Event<ChannelCloseEvent>;\n\n    /**\n     * An error has occurred while writing to or reading from the channel\n     */\n    onError: Event<unknown>;\n\n    /**\n     * A message has arrived and can be read  by listeners using a {@link MessageProvider}.\n     */\n    onMessage: Event<MessageProvider>;\n\n    /**\n     * Obtain a {@link WriteBuffer} to write a message to the channel.\n     */\n    getWriteBuffer(): WriteBuffer;\n\n    /**\n     * Close this channel. No {@link onClose} event should be sent\n     */\n    close(): void;\n}\n\n/**\n * The event that is emitted when a channel is closed from the remote side.\n */\nexport interface ChannelCloseEvent {\n    reason: string,\n    code?: number\n};\n\n/**\n * The `MessageProvider` is emitted when a channel receives a new message.\n * Listeners can invoke the provider to obtain a new {@link ReadBuffer} for the received message.\n * This ensures that each listener has its own isolated {@link ReadBuffer} instance.\n *\n */\nexport type MessageProvider = () => ReadBuffer;\n\n/**\n *  Reusable abstract {@link Channel} implementation that sets up\n *  the basic channel event listeners and offers a generic close method.\n */\nexport abstract class AbstractChannel implements Channel {\n\n    onCloseEmitter: Emitter<ChannelCloseEvent> = new Emitter();\n    get onClose(): Event<ChannelCloseEvent> {\n        return this.onCloseEmitter.event;\n    };\n\n    onErrorEmitter: Emitter<unknown> = new Emitter();\n    get onError(): Event<unknown> {\n        return this.onErrorEmitter.event;\n    };\n\n    onMessageEmitter: Emitter<MessageProvider> = new Emitter();\n    get onMessage(): Event<MessageProvider> {\n        return this.onMessageEmitter.event;\n    };\n\n    protected toDispose: DisposableCollection = new DisposableCollection();\n\n    constructor() {\n        this.toDispose.pushAll([this.onCloseEmitter, this.onErrorEmitter, this.onMessageEmitter]);\n    }\n\n    close(): void {\n        this.toDispose.dispose();\n    }\n\n    abstract getWriteBuffer(): WriteBuffer;\n}\n\n/**\n * A very basic {@link AbstractChannel} implementation which takes a function\n * for retrieving the {@link WriteBuffer} as constructor argument.\n */\nexport class BasicChannel extends AbstractChannel {\n\n    constructor(protected writeBufferProvider: () => WriteBuffer) {\n        super();\n    }\n\n    getWriteBuffer(): WriteBuffer {\n        return this.writeBufferProvider();\n    }\n}\n\n/**\n * Helper class to implement the single channels on a {@link ChannelMultiplexer}. Simply forwards write requests to\n * the given write buffer source i.e. the main channel of the {@link ChannelMultiplexer}.\n */\nexport class ForwardingChannel extends AbstractChannel {\n\n    constructor(readonly id: string, protected readonly closeHandler: () => void, protected readonly writeBufferSource: () => WriteBuffer) {\n        super();\n    }\n\n    getWriteBuffer(): WriteBuffer {\n        return this.writeBufferSource();\n    }\n\n    override close(): void {\n        super.close();\n        this.closeHandler();\n    }\n}\n\n/**\n * The different message types used in the messaging protocol of the {@link ChannelMultiplexer}\n */\nexport enum MessageTypes {\n    Open = 1,\n    Close = 2,\n    AckOpen = 3,\n    Data = 4\n}\n\n/**\n * The write buffers in this implementation immediately write to the underlying\n * channel, so we rely on writers to the multiplexed channels to always commit their\n * messages and always in one go.\n */\nexport class ChannelMultiplexer implements Disposable {\n    protected pendingOpen: Map<string, (channel: ForwardingChannel) => void> = new Map();\n    protected openChannels: Map<string, ForwardingChannel> = new Map();\n\n    protected readonly onOpenChannelEmitter = new Emitter<{ id: string, channel: Channel }>();\n    get onDidOpenChannel(): Event<{ id: string, channel: Channel }> {\n        return this.onOpenChannelEmitter.event;\n    }\n\n    protected toDispose = new DisposableCollection();\n\n    constructor(protected readonly underlyingChannel: Channel) {\n        this.toDispose.pushAll([\n            this.underlyingChannel.onMessage(buffer => this.handleMessage(buffer())),\n            this.underlyingChannel.onClose(event => this.onUnderlyingChannelClose(event)),\n            this.underlyingChannel.onError(error => this.handleError(error)),\n            this.onOpenChannelEmitter\n        ]);\n    }\n\n    protected handleError(error: unknown): void {\n        this.openChannels.forEach(channel => {\n            channel.onErrorEmitter.fire(error);\n        });\n    }\n\n    onUnderlyingChannelClose(event?: ChannelCloseEvent): void {\n        if (!this.toDispose.disposed) {\n            this.toDispose.push(Disposable.create(() => {\n                this.pendingOpen.clear();\n                this.openChannels.forEach(channel => {\n                    channel.onCloseEmitter.fire(event ?? { reason: 'Multiplexer main channel has been closed from the remote side!' });\n                });\n\n                this.openChannels.clear();\n            }));\n            this.dispose();\n        }\n\n    }\n\n    protected handleMessage(buffer: ReadBuffer): void {\n        const type = buffer.readUint8();\n        const id = buffer.readString();\n        switch (type) {\n            case MessageTypes.AckOpen: {\n                return this.handleAckOpen(id);\n            }\n            case MessageTypes.Open: {\n                return this.handleOpen(id);\n            }\n            case MessageTypes.Close: {\n                return this.handleClose(id);\n            }\n            case MessageTypes.Data: {\n                return this.handleData(id, buffer);\n            }\n        }\n    }\n\n    protected handleAckOpen(id: string): void {\n        // edge case: both side try to open a channel at the same time.\n        const resolve = this.pendingOpen.get(id);\n        if (resolve) {\n            const channel = this.createChannel(id);\n            this.pendingOpen.delete(id);\n            this.openChannels.set(id, channel);\n            resolve(channel);\n            this.onOpenChannelEmitter.fire({ id, channel });\n        }\n    }\n\n    protected handleOpen(id: string): void {\n        if (!this.openChannels.has(id)) {\n            const channel = this.createChannel(id);\n            this.openChannels.set(id, channel);\n            const resolve = this.pendingOpen.get(id);\n            if (resolve) {\n                // edge case: both side try to open a channel at the same time.\n                resolve(channel);\n            }\n            this.underlyingChannel.getWriteBuffer().writeUint8(MessageTypes.AckOpen).writeString(id).commit();\n            this.onOpenChannelEmitter.fire({ id, channel });\n        }\n    }\n\n    protected handleClose(id: string): void {\n        const channel = this.openChannels.get(id);\n        if (channel) {\n            channel.onCloseEmitter.fire({ reason: 'Channel has been closed from the remote side' });\n            this.openChannels.delete(id);\n        }\n    }\n\n    protected handleData(id: string, data: ReadBuffer): void {\n        const channel = this.openChannels.get(id);\n        if (channel) {\n            channel.onMessageEmitter.fire(() => data.sliceAtReadPosition());\n        }\n    }\n\n    protected createChannel(id: string): ForwardingChannel {\n        return new ForwardingChannel(id, () => this.closeChannel(id), () => this.prepareWriteBuffer(id));\n    }\n\n    // Prepare the write buffer for the channel with the give, id. The channel id has to be encoded\n    // and written to the buffer before the actual message.\n    protected prepareWriteBuffer(id: string): WriteBuffer {\n        const underlying = this.underlyingChannel.getWriteBuffer();\n        underlying.writeUint8(MessageTypes.Data);\n        underlying.writeString(id);\n        return underlying;\n    }\n\n    protected closeChannel(id: string): void {\n        this.underlyingChannel.getWriteBuffer()\n            .writeUint8(MessageTypes.Close)\n            .writeString(id)\n            .commit();\n\n        this.openChannels.delete(id);\n    }\n\n    open(id: string): Promise<Channel> {\n        if (this.openChannels.has(id)) {\n            throw new Error(`Another channel with the id '${id}' is already open.`);\n        }\n        const result = new Promise<Channel>((resolve, reject) => {\n            this.pendingOpen.set(id, resolve);\n        });\n        this.underlyingChannel.getWriteBuffer().writeUint8(MessageTypes.Open).writeString(id).commit();\n        return result;\n    }\n\n    getOpenChannel(id: string): Channel | undefined {\n        return this.openChannels.get(id);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nexport { AbstractChannel, Channel, ChannelCloseEvent, MessageProvider } from './channel';\nexport { ReadBuffer, WriteBuffer } from './message-buffer';\nexport { RequestHandler, RpcProtocol, RpcProtocolOptions } from './rpc-protocol';\n\nimport { registerMsgPackExtensions } from './rpc-message-encoder';\n\nregisterMsgPackExtensions();\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { addExtension } from 'msgpackr';\n\n/**\n * Handles the global registration of custom MsgPackR extensions\n * required for the default RPC communication. MsgPackR extensions\n * are installed globally on both ends of the communication channel.\n * (frontend-backend, pluginExt-pluginMain).\n * Is implemented as singleton as it is  also used in plugin child processes which have no access to inversify.\n */\nexport class MsgPackExtensionManager {\n    private static readonly INSTANCE = new MsgPackExtensionManager();\n    public static getInstance(): MsgPackExtensionManager {\n        return this.INSTANCE;\n    }\n\n    private extensions = new Map<number, MsgPackExtension>();\n\n    private constructor() {\n    }\n\n    registerExtensions(...extensions: MsgPackExtension[]): void {\n        extensions.forEach(extension => {\n            if (extension.tag < 1 || extension.tag > 100) {\n                // MsgPackR reserves the tag range 1-100 for custom extensions.\n                throw new Error(`MsgPack extension tag should be a number from 1-100 but was '${extension.tag}'`);\n            }\n            if (this.extensions.has(extension.tag)) {\n                throw new Error(`Another MsgPack extension with the tag '${extension.tag}' is already registered`);\n            }\n            this.extensions.set(extension.tag, extension);\n            addExtension({\n                Class: extension.class,\n                type: extension.tag,\n                write: extension.serialize,\n                read: extension.deserialize\n            });\n        });\n    }\n\n    getExtension(tag: number): MsgPackExtension | undefined {\n        return this.extensions.get(tag);\n    }\n}\n\nexport interface MsgPackExtension {\n    class: Function,\n    tag: number,\n    serialize(instance: unknown): unknown,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    deserialize(serialized: any): unknown\n}\n\nexport type Constructor<T> = new (...params: unknown[]) => T;\n\n","// *****************************************************************************\n// Copyright (C) 2022 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Packr as MsgPack } from 'msgpackr';\nimport { ReadBuffer, WriteBuffer } from './message-buffer';\nimport { MsgPackExtensionManager } from './msg-pack-extension-manager';\n\n/**\n * This code lets you encode rpc protocol messages (request/reply/notification/error/cancel)\n * into a channel write buffer and decode the same messages from a read buffer.\n * Custom encoders/decoders can be registered to specially handling certain types of values\n * to be encoded. Clients are responsible for ensuring that the set of tags for encoders\n * is distinct and the same at both ends of a channel.\n */\n\nexport type RpcMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage | NotificationMessage;\n\nexport const enum RpcMessageType {\n    Request = 1,\n    Notification = 2,\n    Reply = 3,\n    ReplyErr = 4,\n    Cancel = 5,\n}\n\nexport interface CancelMessage {\n    type: RpcMessageType.Cancel;\n    id: number;\n}\n\nexport interface RequestMessage {\n    type: RpcMessageType.Request;\n    id: number;\n    method: string;\n    args: any[];\n}\n\nexport interface NotificationMessage {\n    type: RpcMessageType.Notification;\n    id?: number;\n    method: string;\n    args: any[];\n}\n\nexport interface ReplyMessage {\n    type: RpcMessageType.Reply;\n    id: number;\n    res: any;\n}\n\nexport interface ReplyErrMessage {\n    type: RpcMessageType.ReplyErr;\n    id: number;\n    err: any;\n}\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\n/**\n * A special error that can be returned in case a request\n * has failed. Provides additional information i.e. an error code\n * and additional error data.\n */\nexport class ResponseError extends Error {\n    constructor(readonly code: number, message: string, readonly data: any) {\n        super(message);\n    }\n}\n\n/**\n * Custom error thrown by the {@link RpcMessageEncoder} if an error occurred during the encoding and the\n * object could not be written to the given {@link WriteBuffer}\n */\nexport class EncodingError extends Error {\n    constructor(msg: string, public cause?: Error) {\n        super(msg);\n    }\n}\n\n/**\n * A `RpcMessageDecoder` parses a a binary message received via {@link ReadBuffer} into a {@link RpcMessage}\n */\nexport interface RpcMessageDecoder {\n    parse(buffer: ReadBuffer): RpcMessage;\n}\n\n/**\n * A `RpcMessageEncoder` writes {@link RpcMessage} objects to a {@link WriteBuffer}. Note that it is\n * up to clients to commit the message. This allows for multiple messages being\n * encoded before sending.\n */\nexport interface RpcMessageEncoder {\n    cancel(buf: WriteBuffer, requestId: number): void;\n\n    notification(buf: WriteBuffer, method: string, args: any[], id?: number): void\n\n    request(buf: WriteBuffer, requestId: number, method: string, args: any[]): void\n\n    replyOK(buf: WriteBuffer, requestId: number, res: any): void\n\n    replyErr(buf: WriteBuffer, requestId: number, err: any): void\n\n}\n\nexport const defaultMsgPack = new MsgPack({ moreTypes: true, encodeUndefinedAsNil: false, bundleStrings: false });\n\nexport class MsgPackMessageEncoder implements RpcMessageEncoder {\n\n    constructor(protected readonly msgPack: MsgPack = defaultMsgPack) { }\n\n    cancel(buf: WriteBuffer, requestId: number): void {\n        this.encode<CancelMessage>(buf, { type: RpcMessageType.Cancel, id: requestId });\n    }\n    notification(buf: WriteBuffer, method: string, args: any[], id?: number): void {\n        this.encode<NotificationMessage>(buf, { type: RpcMessageType.Notification, method, args, id });\n    }\n    request(buf: WriteBuffer, requestId: number, method: string, args: any[]): void {\n        this.encode<RequestMessage>(buf, { type: RpcMessageType.Request, id: requestId, method, args });\n    }\n    replyOK(buf: WriteBuffer, requestId: number, res: any): void {\n        this.encode<ReplyMessage>(buf, { type: RpcMessageType.Reply, id: requestId, res });\n    }\n    replyErr(buf: WriteBuffer, requestId: number, err: any): void {\n        this.encode<ReplyErrMessage>(buf, { type: RpcMessageType.ReplyErr, id: requestId, err });\n    }\n\n    encode<T = unknown>(buf: WriteBuffer, value: T): void {\n        try {\n            buf.writeBytes(this.msgPack.encode(value));\n        } catch (err) {\n            if (err instanceof Error) {\n                throw new EncodingError(`Error during encoding: '${err.message}'`, err);\n            }\n            throw err;\n        }\n    }\n}\n\nexport class MsgPackMessageDecoder implements RpcMessageDecoder {\n    constructor(protected readonly msgPack: MsgPack = defaultMsgPack) { }\n\n    decode<T = any>(buf: ReadBuffer): T {\n        const bytes = buf.readBytes();\n        return this.msgPack.decode(bytes);\n    }\n\n    parse(buffer: ReadBuffer): RpcMessage {\n        return this.decode(buffer);\n    }\n}\n\nexport function registerMsgPackExtensions(): void {\n    // Register custom msgPack extension for Errors.\n    MsgPackExtensionManager.getInstance().registerExtensions({\n        class: Error,\n        tag: 1,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        serialize: (error: any) => {\n            const { code, data, message, name } = error;\n            const stack = error.stacktrace ?? error.stack;\n            const isResponseError = error instanceof ResponseError;\n            return { code, data, message, name, stack, isResponseError };\n        },\n        deserialize: data => {\n            const error = data.isResponseError ? new ResponseError(data.code, data.message, data.data) : new Error(data.message);\n            error.name = data.name;\n            error.stack = data.stack;\n            return error;\n        }\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { CancellationToken, CancellationTokenSource } from '../cancellation';\nimport { Disposable, DisposableCollection } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { Deferred } from '../promise-util';\nimport { Channel } from './channel';\nimport { MsgPackMessageDecoder, MsgPackMessageEncoder, RpcMessage, RpcMessageDecoder, RpcMessageEncoder, RpcMessageType } from './rpc-message-encoder';\n\n/**\n * Handles request messages received by the {@link RPCProtocol}.\n */\nexport type RequestHandler = (method: string, args: any[]) => Promise<any>;\n\n/**\n * Initialization options for a {@link RpcProtocol}.\n */\nexport interface RpcProtocolOptions {\n    /**\n     * The message encoder that should be used. If `undefined` the default {@link RpcMessageEncoder} will be used.\n     */\n    encoder?: RpcMessageEncoder,\n    /**\n     * The message decoder that should be used. If `undefined` the default {@link RpcMessageDecoder} will be used.\n     */\n    decoder?: RpcMessageDecoder,\n    /**\n     * The runtime mode determines whether the RPC protocol is bi-directional (default) or acts as a client or server only.\n     */\n    mode?: 'default' | 'clientOnly' | 'serverOnly'\n}\n\n/**\n * Establish a RPC protocol on top of a given channel. By default the rpc protocol is bi-directional, meaning it is possible to send\n * requests and notifications to the remote side (i.e. acts as client) as well as receiving requests and notifications from the remote side (i.e. acts as a server).\n * Clients can get a promise for a remote request result that will be either resolved or\n * rejected depending on the success of the request. Keeps track of outstanding requests and matches replies to the appropriate request\n * Currently, there is no timeout handling for long running requests implemented.\n * The bi-directional mode can be reconfigured using the {@link RpcProtocolOptions} to construct an RPC protocol instance that acts only as client or server instead.\n */\nexport class RpcProtocol {\n    static readonly CANCELLATION_TOKEN_KEY = 'add.cancellation.token';\n\n    protected readonly pendingRequests: Map<number, Deferred<any>> = new Map();\n\n    protected nextMessageId: number = 0;\n\n    protected readonly encoder: RpcMessageEncoder;\n    protected readonly decoder: RpcMessageDecoder;\n    protected readonly mode: 'default' | 'clientOnly' | 'serverOnly';\n\n    protected readonly onNotificationEmitter: Emitter<{ method: string; args: any[]; }> = new Emitter();\n    protected readonly cancellationTokenSources = new Map<number, CancellationTokenSource>();\n\n    get onNotification(): Event<{ method: string; args: any[]; }> {\n        return this.onNotificationEmitter.event;\n    }\n\n    protected toDispose = new DisposableCollection();\n\n    constructor(public readonly channel: Channel, public readonly requestHandler: RequestHandler | undefined, options: RpcProtocolOptions = {}) {\n        this.encoder = options.encoder ?? new MsgPackMessageEncoder();\n        this.decoder = options.decoder ?? new MsgPackMessageDecoder();\n        this.toDispose.push(this.onNotificationEmitter);\n        channel.onClose(event => {\n            this.pendingRequests.forEach(pending => pending.reject(new Error(event.reason)));\n            this.pendingRequests.clear();\n            this.toDispose.dispose();\n        });\n        this.toDispose.push(channel.onMessage(readBuffer => this.handleMessage(this.decoder.parse(readBuffer()))));\n        this.mode = options.mode ?? 'default';\n\n        if (this.mode !== 'clientOnly' && requestHandler === undefined) {\n            console.error('RPCProtocol was initialized without a request handler but was not set to clientOnly mode.');\n        }\n    }\n\n    handleMessage(message: RpcMessage): void {\n        if (this.mode !== 'clientOnly') {\n            switch (message.type) {\n                case RpcMessageType.Cancel: {\n                    this.handleCancel(message.id);\n                    return;\n                }\n                case RpcMessageType.Request: {\n                    this.handleRequest(message.id, message.method, message.args);\n                    return;\n                }\n                case RpcMessageType.Notification: {\n                    this.handleNotify(message.method, message.args, message.id);\n                    return;\n                }\n            }\n        }\n        if (this.mode !== 'serverOnly') {\n            switch (message.type) {\n                case RpcMessageType.Reply: {\n                    this.handleReply(message.id, message.res);\n                    return;\n                }\n                case RpcMessageType.ReplyErr: {\n                    this.handleReplyErr(message.id, message.err);\n                    return;\n                }\n            }\n        }\n        // If the message was not handled until here, it is incompatible with the mode.\n        console.warn(`Received message incompatible with this RPCProtocol's mode '${this.mode}'. Type: ${message.type}. ID: ${message.id}.`);\n    }\n\n    protected handleReply(id: number, value: any): void {\n        const replyHandler = this.pendingRequests.get(id);\n        if (replyHandler) {\n            this.pendingRequests.delete(id);\n            replyHandler.resolve(value);\n        } else {\n            throw new Error(`No reply handler for reply with id: ${id}`);\n        }\n    }\n\n    protected handleReplyErr(id: number, error: any): void {\n        const replyHandler = this.pendingRequests.get(id);\n        if (replyHandler) {\n            this.pendingRequests.delete(id);\n            replyHandler.reject(error);\n        } else {\n            throw new Error(`No reply handler for error reply with id: ${id}`);\n        }\n    }\n\n    sendRequest<T>(method: string, args: any[]): Promise<T> {\n        // The last element of the request args might be a cancellation token. As these tokens are not serializable we have to remove it from the\n        // args array and the `CANCELLATION_TOKEN_KEY` string instead.\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n\n        const id = this.nextMessageId++;\n        const reply = new Deferred<T>();\n\n        if (cancellationToken) {\n            args.push(RpcProtocol.CANCELLATION_TOKEN_KEY);\n        }\n\n        this.pendingRequests.set(id, reply);\n\n        const output = this.channel.getWriteBuffer();\n        this.encoder.request(output, id, method, args);\n        output.commit();\n\n        if (cancellationToken?.isCancellationRequested) {\n            this.sendCancel(id);\n        } else {\n            cancellationToken?.onCancellationRequested(() => this.sendCancel(id));\n        }\n\n        return reply.promise;\n    }\n\n    sendNotification(method: string, args: any[]): void {\n        // If the notification supports a CancellationToken, it needs to be treated like a request\n        // because cancellation does not work with the simplified \"fire and forget\" approach of simple notifications.\n        if (args.length && CancellationToken.is(args[args.length - 1])) {\n            this.sendRequest(method, args);\n            return;\n        }\n\n        const output = this.channel.getWriteBuffer();\n        this.encoder.notification(output, method, args, this.nextMessageId++);\n        output.commit();\n    }\n\n    sendCancel(requestId: number): void {\n        const output = this.channel.getWriteBuffer();\n        this.encoder.cancel(output, requestId);\n        output.commit();\n    }\n\n    protected handleCancel(id: number): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    protected async handleRequest(id: number, method: string, args: any[]): Promise<void> {\n        const output = this.channel.getWriteBuffer();\n\n        // Check if the last argument of the received args is the key for indicating that a cancellation token should be used\n        // If so remove the key from the args and create a new cancellation token.\n        const addToken = args.length && args[args.length - 1] === RpcProtocol.CANCELLATION_TOKEN_KEY ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(id, tokenSource);\n            args.push(tokenSource.token);\n        }\n\n        try {\n            const result = await this.requestHandler!(method, args);\n            this.cancellationTokenSources.delete(id);\n            this.encoder.replyOK(output, id, result);\n            output.commit();\n        } catch (err) {\n            // In case of an error the output buffer might already contains parts of an message.\n            // => Dispose the current buffer and retrieve a new, clean one for writing the response error.\n            if (Disposable.is(output)) {\n                output.dispose();\n            }\n            const errorOutput = this.channel.getWriteBuffer();\n            this.cancellationTokenSources.delete(id);\n            this.encoder.replyErr(errorOutput, id, err);\n            errorOutput.commit();\n        }\n    }\n\n    protected async handleNotify(method: string, args: any[], id?: number): Promise<void> {\n        if (this.toDispose.disposed) {\n            return;\n        }\n        this.onNotificationEmitter.fire({ method, args });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { CancellationToken } from './cancellation';\nimport { nls } from './nls';\n\nexport const messageServicePath = '/services/messageService';\n\nexport enum MessageType {\n    Error = 1,\n    Warning = 2,\n    Info = 3,\n    Log = 4,\n    Progress = 5\n}\n\nexport interface Message {\n    /**\n     * Type of the message, i.e. error, warning, info, etc.\n     */\n    readonly type?: MessageType;\n    /**\n     * Message text.\n     */\n    readonly text: string;\n    /**\n     * Actions offered to the user in the context of the message.\n     */\n    readonly actions?: string[];\n    /**\n     * Additional options.\n     */\n    readonly options?: MessageOptions;\n    readonly source?: string;\n}\n\nexport interface ProgressMessage extends Message {\n    readonly type?: MessageType.Progress;\n    readonly options?: ProgressMessageOptions;\n}\nexport namespace ProgressMessage {\n    export const Cancel = nls.localizeByDefault('Cancel');\n    export function isCancelable(message: ProgressMessage): boolean {\n        return !!message.options?.cancelable;\n    }\n}\n\nexport interface MessageOptions {\n    /**\n     * Timeout in milliseconds.\n     * `0` and negative values are treated as no timeout.\n     */\n    readonly timeout?: number;\n}\n\nexport interface ProgressMessageOptions extends MessageOptions {\n    /**\n     * Default: `false`\n     */\n    readonly cancelable?: boolean;\n    /**\n     * Known values: `notification` | `window` | `scm`\n     */\n    readonly location?: string;\n}\n\nexport interface Progress {\n    /**\n     * Unique progress id.\n     */\n    readonly id: string;\n    /**\n     * Update the current progress.\n     *\n     * @param update the data to update.\n     */\n    readonly report: (update: ProgressUpdate) => void;\n    /**\n     * Cancel or complete the current progress.\n     */\n    readonly cancel: () => void;\n    /**\n     * Result of the progress.\n     *\n     * @returns a promise which resolves to either 'Cancel', an alternative action or `undefined`.\n     */\n    readonly result: Promise<string | undefined>;\n}\n\nexport interface ProgressUpdate {\n    /**\n     * Updated message for the progress.\n     */\n    readonly message?: string;\n    /**\n     * Updated ratio between steps done so far and total number of steps.\n     */\n    readonly work?: { done: number, total: number };\n}\n\n@injectable()\nexport class MessageClient {\n\n    /**\n     * Show a message of the given type and possible actions to the user.\n     * Resolve to a chosen action.\n     * Never reject.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showMessage(message: Message): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Show a progress message with possible actions to user.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Update a previously created progress message.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void> {\n        return Promise.resolve(undefined);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from 'inversify';\nimport {\n    MessageClient,\n    MessageType,\n    MessageOptions,\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\n\n/**\n * Service to log and categorize messages, show progress information and offer actions.\n *\n * The messages are processed by this service and forwarded to an injected {@link MessageClient}.\n * For example \"@theia/messages\" provides such a client, rendering messages as notifications\n * in the frontend.\n *\n * ### Example usage\n *\n * ```typescript\n *   @inject(MessageService)\n *   protected readonly messageService: MessageService;\n *\n *   messageService.warn(\"Typings not available\");\n *\n *   messageService.error(\"Could not restore state\", [\"Rollback\", \"Ignore\"])\n *   .then(action => action === \"Rollback\" && rollback());\n * ```\n */\n@injectable()\nexport class MessageService {\n\n    constructor(\n        @inject(MessageClient) protected readonly client: MessageClient\n    ) { }\n\n    /**\n     * Logs the message and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    log<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    log<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Log, message, args);\n    }\n\n    /**\n     * Logs the message as \"info\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    info<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"info\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    info<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Info, message, args);\n    }\n\n    /**\n     * Logs the message as \"warning\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    warn<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"warning\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    warn<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    warn(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Warning, message, args);\n    }\n\n    /**\n     * Logs the message as \"error\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    error<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"error\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    error<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Error, message, args);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected processMessage(type: MessageType, text: string, args?: any[]): Promise<string | undefined> {\n        if (!!args && args.length > 0) {\n            const first = args[0];\n            const actions = Array.from(new Set<string>(args.filter(a => typeof a === 'string')));\n            const options = (typeof first === 'object' && !Array.isArray(first))\n                ? <MessageOptions>first\n                : undefined;\n            return this.client.showMessage({ type, options, text, actions });\n        }\n        return this.client.showMessage({ type, text });\n    }\n\n    /**\n     * Shows the given message as a progress.\n     *\n     * @param message the message to show for the progress.\n     * @param onDidCancel an optional callback which will be invoked if the progress indicator was canceled.\n     *\n     * @returns a promise resolving to a {@link Progress} object with which the progress can be updated.\n     *\n     * ### Example usage\n     *\n     * ```typescript\n     *   @inject(MessageService)\n     *   protected readonly messageService: MessageService;\n     *\n     *   // this will show \"Progress\" as a cancelable message\n     *   this.messageService.showProgress({text: 'Progress'});\n     *\n     *   // this will show \"Rolling back\" with \"Cancel\" and an additional \"Skip\" action\n     *   this.messageService.showProgress({\n     *     text: `Rolling back`,\n     *     actions: [\"Skip\"],\n     *   },\n     *   () => console.log(\"canceled\"))\n     *   .then((progress) => {\n     *     // register if interested in the result (only necessary for custom actions)\n     *     progress.result.then((result) => {\n     *       // will be 'Cancel', 'Skip' or `undefined`\n     *       console.log(\"result is\", result);\n     *     });\n     *     progress.report({message: \"Cleaning references\", work: {done: 10, total: 100}});\n     *     progress.report({message: \"Restoring previous state\", work: {done: 80, total: 100}});\n     *     progress.report({message: \"Complete\", work: {done: 100, total: 100}});\n     *     // we are done so we can cancel the progress message, note that this will also invoke `onDidCancel`\n     *     progress.cancel();\n     *   });\n     * ```\n     */\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const type = message.type ?? MessageType.Progress;\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, type, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ILogger } from '../../common';\n\nexport interface ResolvedConnectionErrorHandlerOptions {\n    readonly serverName: string\n    readonly logger: ILogger\n    /**\n     * The maximum amount of errors allowed before stopping the server.\n     */\n    readonly maxErrors: number\n    /**\n     * The minimum amount of restarts allowed in the restart interval.\n     */\n    readonly maxRestarts: number\n    /**\n     * In minutes.\n     */\n    readonly restartInterval: number\n}\n\nexport type ConnectionErrorHandlerOptions = Partial<ResolvedConnectionErrorHandlerOptions> & {\n    readonly serverName: string\n    readonly logger: ILogger\n};\n\nexport class ConnectionErrorHandler {\n\n    protected readonly options: ResolvedConnectionErrorHandlerOptions;\n    constructor(options: ConnectionErrorHandlerOptions) {\n        this.options = {\n            maxErrors: 3,\n            maxRestarts: 5,\n            restartInterval: 3,\n            ...options\n        };\n    }\n\n    shouldStop(error: Error, count?: number): boolean {\n        return !count || count > this.options.maxErrors;\n    }\n\n    protected readonly restarts: number[] = [];\n    shouldRestart(): boolean {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.options.maxRestarts) {\n            return true;\n        }\n        const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n        if (diff <= this.options.restartInterval * 60 * 1000) {\n            // eslint-disable-next-line max-len\n            this.options.logger.error(`The ${this.options.serverName} server crashed ${this.options.maxRestarts} times in the last ${this.options.restartInterval} minutes. The server will not be restarted.`);\n            return false;\n        }\n        this.restarts.shift();\n        return true;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Channel } from '../message-rpc/channel';\n\nexport const ConnectionHandler = Symbol('ConnectionHandler');\n\nexport interface ConnectionHandler {\n    readonly path: string;\n    onConnection(connection: Channel): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './handler';\nexport * from './proxy-factory';\nexport * from './connection-error-handler';\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { ResponseError } from '../message-rpc/rpc-message-encoder';\nimport { ApplicationError } from '../application-error';\nimport { Disposable } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { Channel } from '../message-rpc/channel';\nimport { RequestHandler, RpcProtocol } from '../message-rpc/rpc-protocol';\nimport { ConnectionHandler } from './handler';\nimport { Deferred } from '../promise-util';\nimport { decorate, injectable, unmanaged } from '../../../shared/inversify';\n\nexport type RpcServer<Client> = Disposable & {\n    /**\n     * If this server is a proxy to a remote server then\n     * a client is used as a local object\n     * to handle RPC messages from the remote server.\n     */\n    setClient(client: Client | undefined): void;\n    getClient?(): Client | undefined;\n};\n\nexport interface RpcConnectionEventEmitter {\n    readonly onDidOpenConnection: Event<void>;\n    readonly onDidCloseConnection: Event<void>;\n}\nexport type RpcProxy<T> = T & RpcConnectionEventEmitter;\n\nexport class RpcConnectionHandler<T extends object> implements ConnectionHandler {\n    constructor(\n        readonly path: string,\n        readonly targetFactory: (proxy: RpcProxy<T>) => any,\n        readonly factoryConstructor: new () => RpcProxyFactory<T> = RpcProxyFactory\n    ) { }\n\n    onConnection(connection: Channel): void {\n        const factory = new this.factoryConstructor();\n        const proxy = factory.createProxy();\n        factory.target = this.targetFactory(proxy);\n        factory.listen(connection);\n    }\n}\n/**\n * Factory for creating a new {@link RpcProtocol} for a given chanel and {@link RequestHandler}.\n */\nexport type RpcProtocolFactory = (channel: Channel, requestHandler: RequestHandler) => RpcProtocol;\n\nconst defaultRpcProtocolFactory: RpcProtocolFactory = (channel, requestHandler) => new RpcProtocol(channel, requestHandler);\n\n/**\n * Factory for RPC proxy objects.\n *\n * A RPC proxy exposes the programmatic interface of an object through\n * Theia's RPC protocol. This allows remote programs to call methods of this objects by\n * sending RPC requests. This takes place over a bi-directional stream,\n * where both ends can expose an object and both can call methods on each other'\n * exposed object.\n *\n * For example, assuming we have an object of the following type on one end:\n *\n *     class Foo {\n *         bar(baz: number): number { return baz + 1 }\n *     }\n *\n * which we want to expose through a RPC interface.  We would do:\n *\n *     let target = new Foo()\n *     let factory = new RpcProxyFactory<Foo>('/foo', target)\n *     factory.onConnection(connection)\n *\n * The party at the other end of the `connection`, in order to remotely call\n * methods on this object would do:\n *\n *     let factory = new RpcProxyFactory<Foo>('/foo')\n *     factory.onConnection(connection)\n *     let proxy = factory.createProxy();\n *     let result = proxy.bar(42)\n *     // result is equal to 43\n *\n * One the wire, it would look like this:\n *\n *     --> { \"type\":\"1\", \"id\": 1, \"method\": \"bar\", \"args\": [42]}\n *     <-- { \"type\":\"3\", \"id\": 1, \"res\": 43}\n *\n * Note that in the code of the caller, we didn't pass a target object to\n * RpcProxyFactory, because we don't want/need to expose an object.\n * If we had passed a target object, the other side could've called methods on\n * it.\n *\n * @param <T> - The type of the object to expose to RPC.\n */\n\nexport class RpcProxyFactory<T extends object> implements ProxyHandler<T> {\n\n    protected readonly onDidOpenConnectionEmitter = new Emitter<void>();\n    protected readonly onDidCloseConnectionEmitter = new Emitter<void>();\n\n    protected rpcDeferred: Deferred<RpcProtocol>;\n\n    /**\n     * Build a new RpcProxyFactory.\n     *\n     * @param target - The object to expose to RPC methods calls.  If this\n     *   is omitted, the proxy won't be able to handle requests, only send them.\n     */\n    constructor(public target?: any, protected rpcProtocolFactory = defaultRpcProtocolFactory) {\n        this.waitForConnection();\n    }\n\n    protected waitForConnection(): void {\n        this.rpcDeferred = new Deferred<RpcProtocol>();\n        this.rpcDeferred.promise.then(protocol => {\n            protocol.channel.onClose(() => {\n                this.onDidCloseConnectionEmitter.fire(undefined);\n                // Wait for connection in case the backend reconnects\n                this.waitForConnection();\n            });\n            this.onDidOpenConnectionEmitter.fire(undefined);\n        });\n    }\n\n    /**\n     * Connect a {@link Channel} to the factory by creating an {@link RpcProtocol} on top of it.\n     *\n     * This protocol will be used to send/receive RPC requests and\n     * responses.\n     */\n    listen(channel: Channel): void {\n        const protocol = this.rpcProtocolFactory(channel, (meth, args) => this.onRequest(meth, ...args));\n        protocol.onNotification(event => this.onNotification(event.method, ...event.args));\n\n        this.rpcDeferred.resolve(protocol);\n    }\n\n    /**\n     * Process an incoming RPC method call.\n     *\n     * onRequest is called when the RPC connection received a method call\n     * request.  It calls the corresponding method on [[target]].\n     *\n     * The return value is a Promise object that is resolved with the return\n     * value of the method call, if it is successful.  The promise is rejected\n     * if the called method does not exist or if it throws.\n     *\n     * @returns A promise of the method call completion.\n     */\n    protected async onRequest(method: string, ...args: any[]): Promise<any> {\n        try {\n            if (this.target) {\n                return await this.target[method](...args);\n            } else {\n                throw new Error(`no target was set to handle ${method}`);\n            }\n        } catch (error) {\n            const e = this.serializeError(error);\n            if (e instanceof ResponseError) {\n                throw e;\n            }\n            const reason = e.message || '';\n            const stack = e.stack || '';\n            console.error(`Request ${method} failed with error: ${reason}`, stack);\n            throw e;\n        }\n    }\n\n    /**\n     * Process an incoming RPC notification.\n     *\n     * Same as [[onRequest]], but called on incoming notifications rather than\n     * methods calls.\n     */\n    protected onNotification(method: string, ...args: any[]): void {\n        if (this.target) {\n            this.target[method](...args);\n        }\n    }\n\n    /**\n     * Create a Proxy exposing the interface of an object of type T.  This Proxy\n     * can be used to do RPC method calls on the remote target object as\n     * if it was local.\n     *\n     * If `T` implements `RpcServer` then a client is used as a target object for a remote target object.\n     */\n    createProxy(): RpcProxy<T> {\n        const result = new Proxy<T>(this as any, this);\n        return result as any;\n    }\n\n    /**\n     * Get a callable object that executes a RPC method call.\n     *\n     * Getting a property on the Proxy object returns a callable that, when\n     * called, executes a RPC call.  The name of the property defines the\n     * method to be called.  The callable takes a variable number of arguments,\n     * which are passed in the RPC method call.\n     *\n     * For example, if you have a Proxy object:\n     *\n     *     let fooProxyFactory = RpcProxyFactory<Foo>('/foo')\n     *     let fooProxy = fooProxyFactory.createProxy()\n     *\n     * accessing `fooProxy.bar` will return a callable that, when called,\n     * executes a RPC method call to method `bar`.  Therefore, doing\n     * `fooProxy.bar()` will call the `bar` method on the remote Foo object.\n     *\n     * @param target - unused.\n     * @param p - The property accessed on the Proxy object.\n     * @param receiver - unused.\n     * @returns A callable that executes the RPC call.\n     */\n    get(target: T, p: PropertyKey, receiver: any): any {\n        if (p === 'setClient') {\n            return (client: any) => {\n                this.target = client;\n            };\n        }\n        if (p === 'getClient') {\n            return () => this.target;\n        }\n        if (p === 'onDidOpenConnection') {\n            return this.onDidOpenConnectionEmitter.event;\n        }\n        if (p === 'onDidCloseConnection') {\n            return this.onDidCloseConnectionEmitter.event;\n        }\n        if (p === 'then') {\n            // Prevent inversify from identifying this proxy as a promise object.\n            return undefined;\n        }\n        const isNotify = this.isNotification(p);\n        return (...args: any[]) => {\n            const method = p.toString();\n            const capturedError = new Error(`Request '${method}' failed`);\n            return this.rpcDeferred.promise.then(connection =>\n                new Promise<void>((resolve, reject) => {\n                    try {\n                        if (isNotify) {\n                            connection.sendNotification(method, args);\n                            resolve(undefined);\n                        } else {\n                            const resultPromise = connection.sendRequest(method, args) as Promise<any>;\n                            resultPromise\n                                .catch((err: any) => reject(this.deserializeError(capturedError, err)))\n                                .then((result: any) => resolve(result));\n                        }\n                    } catch (err) {\n                        reject(err);\n                    }\n                })\n            );\n        };\n    }\n\n    /**\n     * Return whether the given property represents a notification.\n     *\n     * A property leads to a notification rather than a method call if its name\n     * begins with `notify` or `on`.\n     *\n     * @param p - The property being called on the proxy.\n     * @return Whether `p` represents a notification.\n     */\n    protected isNotification(p: PropertyKey): boolean {\n        return p.toString().startsWith('notify') || p.toString().startsWith('on');\n    }\n\n    protected serializeError(e: any): any {\n        if (ApplicationError.is(e)) {\n            return new ResponseError(e.code, '',\n                Object.assign({ kind: 'application' }, e.toJson())\n            );\n        }\n        return e;\n    }\n    protected deserializeError(capturedError: Error, e: any): any {\n        if (e instanceof ResponseError) {\n            const capturedStack = capturedError.stack || '';\n            if (e.data && e.data.kind === 'application') {\n                const { stack, data, message } = e.data;\n                return ApplicationError.fromJson(e.code, {\n                    message: message || capturedError.message,\n                    data,\n                    stack: `${capturedStack}\\nCaused by: ${stack}`\n                });\n            }\n            e.stack = capturedStack;\n        }\n        return e;\n    }\n\n}\n\n/**\n * @deprecated since 1.39.0 use `RpcConnectionEventEmitter` instead\n */\nexport type JsonRpcConnectionEventEmitter = RpcConnectionEventEmitter;\n\n/**\n * @deprecated since 1.39.0 use `RpcServer` instead\n */\nexport type JsonRpcServer<Client> = RpcServer<Client>;\n\n/**\n * @deprecated since 1.39.0 use `RpcProxy` instead\n */\nexport type JsonRpcProxy<T> = RpcProxy<T>;\n\n/**\n * @deprecated since 1.39.0 use `RpcConnectionHandler` instead\n */\nexport class JsonRpcConnectionHandler<T extends object> extends RpcConnectionHandler<T> {\n\n}\n\n/**\n * @deprecated since 1.39.0 use `RpcProxyFactory` instead\n */\nexport class JsonRpcProxyFactory<T extends object> extends RpcProxyFactory<T> {\n\n}\n\n// eslint-disable-next-line deprecation/deprecation\ndecorate(injectable(), JsonRpcProxyFactory);\n// eslint-disable-next-line deprecation/deprecation\ndecorate(unmanaged(), JsonRpcProxyFactory, 0);\n\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { FormatType, Localization } from './i18n/localization';\n\nexport namespace nls {\n\n    export let localization: Localization | undefined;\n\n    export const defaultLocale = 'en';\n\n    export const localeId = 'localeId';\n\n    export const locale = typeof window === 'object' && window && window.localStorage.getItem(localeId) || undefined;\n\n    let keyProvider: LocalizationKeyProvider | undefined;\n\n    /**\n     * Automatically localizes a text if that text also exists in the vscode repository.\n     */\n    export function localizeByDefault(defaultValue: string, ...args: FormatType[]): string {\n        if (localization) {\n            const key = getDefaultKey(defaultValue);\n            if (key) {\n                return localize(key, defaultValue, ...args);\n            } else {\n                console.warn(`Could not find translation key for default value: \"${defaultValue}\"`);\n            }\n        }\n        return Localization.format(defaultValue, args);\n    }\n\n    export function getDefaultKey(defaultValue: string): string {\n        if (!keyProvider) {\n            keyProvider = new LocalizationKeyProvider();\n        }\n        const key = keyProvider.get(defaultValue);\n        if (key) {\n            return key;\n        }\n        return '';\n    }\n\n    export function localize(key: string, defaultValue: string, ...args: FormatType[]): string {\n        return Localization.localize(localization, key, defaultValue, ...args);\n    }\n\n    export function isSelectedLocale(id: string): boolean {\n        if (locale === undefined && id === defaultLocale) {\n            return true;\n        }\n        return locale === id;\n    }\n\n    export function setLocale(id: string): void {\n        window.localStorage.setItem(localeId, id);\n    }\n}\n\ninterface NlsKeys {\n    [key: string]: (string | NlsInfo)[]\n}\n\ninterface NlsInfo {\n    key: string\n    comment: string[]\n}\n\nclass LocalizationKeyProvider {\n\n    private data = this.buildData();\n\n    get(defaultValue: string): string | undefined {\n        const normalized = Localization.normalize(defaultValue);\n        return this.data.get(normalized) || this.data.get(normalized.toUpperCase());\n    }\n\n    /**\n     * Transforms the data coming from the `nls.metadata.json` file into a map.\n     * The original data contains arrays of keys and messages.\n     * The result is a map that matches each message to the key that belongs to it.\n     *\n     * This allows us to skip the key in the localization process and map the original english default values to their translations in different languages.\n     */\n    private buildData(): Map<string, string> {\n        const bundles = require('../../src/common/i18n/nls.metadata.json');\n        const keys: NlsKeys = bundles.keys;\n        const messages: Record<string, string[]> = bundles.messages;\n        const data = new Map<string, string>();\n        const keysAndMessages = this.buildKeyMessageTuples(keys, messages);\n        for (const { key, message } of keysAndMessages) {\n            data.set(message, key);\n        }\n        // Second pass adds each message again in upper case, if the message doesn't already exist in upper case\n        // The second pass is needed to not accidentally override any translations which actually use the upper case message\n        for (const { key, message } of keysAndMessages) {\n            const upperMessage = message.toUpperCase();\n            if (!data.has(upperMessage)) {\n                data.set(upperMessage, key);\n            }\n        }\n        return data;\n    }\n\n    private buildKeyMessageTuples(keys: NlsKeys, messages: Record<string, string[]>): { key: string, message: string }[] {\n        const list: { key: string, message: string }[] = [];\n        for (const [fileKey, messageBundle] of Object.entries(messages)) {\n            const keyBundle = keys[fileKey];\n            for (let i = 0; i < messageBundle.length; i++) {\n                const message = Localization.normalize(messageBundle[i]);\n                const key = keyBundle[i];\n                const localizationKey = this.buildKey(typeof key === 'string' ? key : key.key, fileKey);\n                list.push({\n                    key: localizationKey,\n                    message\n                });\n            }\n        }\n        return list;\n    }\n\n    private buildKey(key: string, filepath: string): string {\n        return `vscode/${Localization.transformKey(filepath)}/${key}`;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * The maximum safe integer (`2^32-1`) is used as a placeholder for large numbers which are not allowed to be floats.\n * For example as line/column arguments for monaco-ranges.\n */\nexport const MAX_SAFE_INTEGER = 2147483647;\n","// *****************************************************************************\n// Copyright (C) 2018 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { isObject, isUndefined, isUndefinedOrNull } from './types';\n\nexport function deepClone<T>(obj: T): T {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    if (obj instanceof RegExp) {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result: any = Array.isArray(obj) ? [] : {};\n    Object.keys(obj).forEach((key: string) => {\n        const prop = obj[key];\n        if (isObject(prop)) {\n            result[key] = deepClone(prop);\n        } else {\n            result[key] = prop;\n        }\n    });\n    return result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const stack: any[] = [obj];\n    while (stack.length > 0) {\n        const objectToFreeze = stack.shift();\n        Object.freeze(objectToFreeze);\n        for (const key in objectToFreeze) {\n            if (_hasOwnProperty.call(objectToFreeze, key)) {\n                const prop = objectToFreeze[key];\n                if (isObject(prop) && !Object.isFrozen(prop)) {\n                    stack.push(prop);\n                }\n            }\n        }\n    }\n    return obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function notEmpty<T>(arg: T | undefined | null): arg is T {\n    // eslint-disable-next-line no-null/no-null\n    return arg !== undefined && arg !== null;\n}\n\n/**\n * `true` if the argument is an empty object. Otherwise, `false`.\n */\nexport function isEmpty(arg: Object): boolean {\n    return Object.keys(arg).length === 0 && arg.constructor === Object;\n}\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Copied from https://github.com/microsoft/vscode/blob/1.72.2/src/vs/base/common/objects.ts\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (!isUndefined(changed)) {\n        return changed;\n    }\n\n    if (Array.isArray(obj)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (const i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport const EOL = isWindows ? '\\r\\n' : '\\n';\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n    export const backend = {\n        type,\n        isWindows,\n        isOSX,\n        EOL\n    };\n\n}\n\nexport const OSBackendProviderPath = '/os';\n\nexport const OSBackendProvider = Symbol('OSBackendProvider');\n\nexport interface OSBackendProvider {\n    getBackendOS(): Promise<OS.Type>;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * On POSIX:\n * ┌──────────────────────┬────────────┐\n * │          dir         │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /     home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n *\n * On Windows:\n * ┌──────────────────────┬────────────┐\n * │           dir        │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /c: / home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n */\n\nimport { OS } from './os';\n\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substring(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substring(2)}`; // \"c:\".length === 2\n            }\n            if (path.charCodeAt(0) !== 47 /* '/' */) {\n                path = `${String.fromCharCode(47)}${path}`;\n            }\n        }\n        return path;\n    }\n    /**\n     * Normalize path separator to use Path.separator\n     * @param Path candidate to normalize\n     * @returns Normalized string path\n     */\n    static normalizePathSeparator(path: string): string {\n        return path.split(/[\\\\]/).join(Path.separator);\n    }\n\n    /**\n     * Creates a windows path from the given path string.\n     * A windows path uses an upper case drive letter and backwards slashes.\n     * @param path The input path\n     * @returns Windows style path\n     */\n    static windowsPath(path: string): string {\n        const offset = path.charAt(0) === '/' ? 1 : 0;\n        if (path.charAt(offset + 1) === ':') {\n            const driveLetter = path.charAt(offset).toUpperCase();\n            const substring = path.substring(offset + 2).replace(/\\//g, '\\\\');\n            return `${driveLetter}:${substring || '\\\\'}`;\n        }\n        return path.replace(/\\//g, '\\\\');\n    }\n\n    /**\n     * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static tildify(resourcePath: string, home: string): string {\n        const path = new Path(resourcePath);\n        const isWindows = path.root && Path.isDrive(path.root.base);\n\n        if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n            return resourcePath.replace(`${home}/`, '~/');\n        }\n\n        return resourcePath;\n    }\n\n    /**\n     * Untildify path, replacing `~` with `home` if `~` present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static untildify(resourcePath: string, home: string): string {\n        if (resourcePath.startsWith('~')) {\n            const untildifiedResource = resourcePath.replace(/^~/, home);\n            const untildifiedPath = new Path(untildifiedResource);\n            const isWindows = untildifiedPath.root && Path.isDrive(untildifiedPath.root.base);\n            if (!isWindows && home && untildifiedResource.startsWith(`${home}`)) {\n                return untildifiedResource;\n            }\n        }\n        return resourcePath;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        raw = Path.normalizePathSeparator(raw);\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = this.raw.indexOf(Path.separator);\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? this.raw : this.raw.substring(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substring(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substring(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substring(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substring(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substring(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    /**\n     *\n     * @param paths portions of a path\n     * @returns a new Path if an absolute path can be computed from the segments passed in + this.raw\n     * If no absolute path can be computed, returns undefined.\n     *\n     * Processes the path segments passed in from right to left (reverse order) concatenating until an\n     * absolute path is found.\n     */\n    resolve(...paths: string[]): Path | undefined {\n        const segments = paths.slice().reverse(); // Don't mutate the caller's array.\n        segments.push(this.raw);\n        let result = new Path('');\n        for (const segment of segments) {\n            if (segment) {\n                const next = new Path(segment).join(result.raw);\n                if (next.isAbsolute) {\n                    return next.normalize();\n                }\n                result = next;\n            }\n        }\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    /**\n     * Converts the current path into a file system path.\n     * @param format Determines the format of the path.\n     * If `undefined`, the format will be determined by the `OS.backend.type` value.\n     * @returns A file system path.\n     */\n    fsPath(format?: Path.Format): string {\n        if (format === Path.Format.Windows || (format === undefined && OS.backend.isWindows)) {\n            return Path.windowsPath(this.raw);\n        } else {\n            return this.raw;\n        }\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substring(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n\nexport namespace Path {\n    export enum Format {\n        Posix,\n        Windows\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './measurement';\nexport * from './stopwatch';\nexport * from './measurement-protocol';\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inject, injectable } from 'inversify';\nimport { Measurement, MeasurementOptions } from './measurement';\nimport { Stopwatch } from './stopwatch';\n\nexport const BackendStopwatch = Symbol('BackendStopwatch');\n\n/** API path of the stopwatch service that exposes the back-end stopwatch to clients. */\nexport const stopwatchPath = '/services/stopwatch';\n\n/** Token representing a remote measurement in the {@link BackendStopwatch} protocol. */\nexport type RemoteMeasurement = number;\n\nexport const BackendStopwatchOptions = Symbol('BackendStopwatchOptions');\n\n/**\n * A service that exposes the back-end's {@link Stopwatch} to clients\n * via the remote API. If you do not need this service then bind or re-bind\n * the {@link NullBackendStopwatch} implementation to this service interface.\n */\nexport interface BackendStopwatch {\n\n    /**\n     * Create a {@link Measurement} that will compute the time that elapsed on the back-end when logged.\n     *\n     * @param name the {@link Measurement.name measurement name}\n     * @param options optional configuration of the new measurement\n     * @returns a token identifying an unique self-timing measurement relative to the back-end's timeline\n     */\n    start(name: string, options?: MeasurementOptions): Promise<RemoteMeasurement>;\n\n    /**\n     * Stop a measurement previously {@link start started} and log in the back-end a measurement of\n     * its duration relative to the back-end's timeline.\n     *\n     * @param measurement token identifying a measurement previously {@link start started}\n     * @param message a message to log\n     * @param messageArgs optional arguments to the `message`\n     */\n    stop(measurement: RemoteMeasurement, message: string, messageArgs: any[]): Promise<void>;\n\n}\n\n/**\n * Default implementation of the (remote) back-end stopwatch service.\n */\n@injectable()\nexport class DefaultBackendStopwatch {\n\n    readonly measurements = new Map<number, Measurement>();\n\n    protected idSequence: number = 0;\n\n    @inject(Stopwatch)\n    protected readonly stopwatch: Stopwatch;\n\n    start(name: string, options?: MeasurementOptions): RemoteMeasurement {\n        const result = ++this.idSequence;\n        this.measurements.set(result, this.stopwatch.start(name, options));\n        return result;\n    }\n\n    stop(measurementToken: RemoteMeasurement, message: string, messageArgs: any[]): void {\n        const measurement = this.measurements.get(measurementToken);\n        if (measurement) {\n            this.measurements.delete(measurementToken);\n            measurement.log(message, ...messageArgs);\n        }\n    }\n\n}\n\n/**\n * No-op implementation of the (remote) back-end stopwatch service.\n */\n@injectable()\nexport class NullBackendStopwatch implements BackendStopwatch {\n\n    start(): Promise<RemoteMeasurement> {\n        return Promise.resolve(0);\n    }\n\n    stop(): Promise<void> {\n        return Promise.resolve();\n    }\n\n}\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { LogLevel } from '../logger';\n\n/**\n * A `Measurement` counts the time elapsed between its creation when the {@link Stopwatch}\n * is {@link Stopwatch.start started} and when it is {@link stop stopped}.\n */\nexport interface Measurement {\n    /**\n     * Compute the elapsed time, in milliseconds, if not already done (only has effect on the first invocation).\n     * A `NaN` result indicates that the watch was stopped but failed to make a measurement.\n     */\n    stop(): number;\n\n    /** The measurement name. This may show up in the performance measurement framework appropriate to the application context. */\n    name: string;\n\n    /**\n     * The elapsed time measured, if it has been {@link stop stopped} and measured, or `NaN` if the platform disabled\n     * performance measurement.\n     */\n    elapsed?: number;\n\n    /**\n     * Compute the elapsed time and log a message annotated with that timing information.\n     * The message is logged at the level determined by the {@link MeasurementOptions}.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    log(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log a debug message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    debug(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log an info message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    info(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log a warning message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    warn(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log an error message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    error(detail: string, ...optionalArgs: any[]): void;\n}\n\n/**\n * Optional configuration of a {@link Measurement} specified at the time of its creation.\n */\nexport interface MeasurementOptions {\n    /**\n     * A specific context of the application in which an activity was measured.\n     * Results in logs being emitted with a \"[<context>]\" qualified at the head.\n     */\n    context?: string;\n\n    /** An optional logging level at which to emit the log message. The default value is {@link LogLevel.INFO}. */\n    defaultLogLevel?: LogLevel;\n\n    /**\n     * Some measurements are measured against a threshold (in millis) that they should not exceed.\n     * If omitted, the implied threshold is unlimited time (no threshold).\n     *\n     * @see {@link Stopwatch.startAsync}\n     * @see {@link thresholdLogLevel}\n     */\n    thresholdMillis?: number;\n\n    /**\n     * Flag to indicate whether the stopwatch should store measurement results for later retrieval.\n     * For example the cache can be used to retrieve measurements which were taken during startup before a listener had a chance to register.\n     */\n    storeResults?: boolean\n}\n\n/**\n * Captures the result of a {@link Measurement} in a serializable format.\n */\nexport interface MeasurementResult {\n    /** The measurement name. This may show up in the performance measurement framework appropriate to the application context. */\n    name: string;\n\n    /** The time when the measurement recording has been started */\n    startTime: number;\n\n    /**\n     * The elapsed time measured, if it has been {@link stop stopped} and measured, or `NaN` if the platform disabled\n     * performance measurement.\n     */\n    elapsed: number;\n\n    /** An optional label for the application the start of which (in real time) is the basis of all measurements. */\n    owner?: string;\n}\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inject, injectable } from 'inversify';\nimport { ILogger, LogLevel } from '../logger';\nimport { MaybePromise } from '../types';\nimport { Measurement, MeasurementOptions, MeasurementResult } from './measurement';\nimport { Emitter, Event } from '../event';\n\n/** The default log level for measurements that are not otherwise configured with a default. */\nconst DEFAULT_LOG_LEVEL = LogLevel.INFO;\n\n/**\n * Configuration of the log messages written by a {@link Measurement}.\n */\ninterface LogOptions extends MeasurementOptions {\n    /** A function that computes the current time, in millis, since the start of the application. */\n    now: () => number;\n\n    /** An optional label for the application the start of which (in real time) is the basis of all measurements. */\n    owner?: string;\n\n    /** An optional log level to override any default or dynamic log level for a specific log message. */\n    levelOverride?: LogLevel;\n\n    /** Optional arguments to the log message. The 'optionalArgs' coming in from the {@link Measurement} API are slotted in here. */\n    arguments?: any[];\n}\n\n/**\n * A factory of {@link Measurement}s for performance logging.\n */\n@injectable()\nexport abstract class Stopwatch {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    protected _storedMeasurements: MeasurementResult[] = [];\n\n    protected onDidAddMeasurementResultEmitter = new Emitter<MeasurementResult>();\n    get onDidAddMeasurementResult(): Event<MeasurementResult> {\n        return this.onDidAddMeasurementResultEmitter.event;\n    }\n\n    constructor(protected readonly defaultLogOptions: LogOptions) {\n        if (!defaultLogOptions.defaultLogLevel) {\n            defaultLogOptions.defaultLogLevel = DEFAULT_LOG_LEVEL;\n        }\n        if (defaultLogOptions.storeResults === undefined) {\n            defaultLogOptions.storeResults = true;\n        }\n    }\n\n    /**\n     * Create a {@link Measurement} that will compute its elapsed time when logged.\n     *\n     * @param name the {@link Measurement.name measurement name}\n     * @param options optional configuration of the new measurement\n     * @returns a self-timing measurement\n     */\n    public abstract start(name: string, options?: MeasurementOptions): Measurement;\n\n    /**\n     * Wrap an asynchronous function in a {@link Measurement} that logs itself on completion.\n     * If obtaining and awaiting the `computation` runs too long according to the threshold\n     * set in the `options`, then the log message is a warning, otherwise a debug log.\n     *\n     * @param name the {@link Measurement.name name of the measurement} to wrap around the function\n     * @param description a description of what the function does, to be included in the log\n     * @param computation a supplier of the asynchronous function to wrap\n     * @param options optional addition configuration as for {@link measure}\n     * @returns the wrapped `computation`\n     *\n     * @see {@link MeasurementOptions.thresholdMillis}\n     */\n    public async startAsync<T>(name: string, description: string, computation: () => MaybePromise<T>, options?: MeasurementOptions): Promise<T> {\n        const threshold = options?.thresholdMillis ?? Number.POSITIVE_INFINITY;\n\n        const measure = this.start(name, options);\n        const result = await computation();\n        if (measure.stop() > threshold) {\n            measure.warn(`${description} took longer than the expected maximum ${threshold} milliseconds`);\n        } else {\n            measure.log(description);\n        }\n        return result;\n    }\n\n    protected createMeasurement(name: string, measure: () => { startTime: number, duration: number }, options?: MeasurementOptions): Measurement {\n        const logOptions = this.mergeLogOptions(options);\n\n        const measurement: Measurement = {\n            name,\n            stop: () => {\n                if (measurement.elapsed === undefined) {\n                    const { startTime, duration } = measure();\n                    measurement.elapsed = duration;\n                    const result: MeasurementResult = {\n                        name,\n                        elapsed: duration,\n                        startTime,\n                        owner: logOptions.owner\n                    };\n                    if (logOptions.storeResults) {\n                        this._storedMeasurements.push(result);\n                    }\n                    this.onDidAddMeasurementResultEmitter.fire(result);\n                }\n                return measurement.elapsed;\n            },\n            log: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, undefined, optionalArgs)),\n            debug: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.DEBUG, optionalArgs)),\n            info: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.INFO, optionalArgs)),\n            warn: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.WARN, optionalArgs)),\n            error: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.ERROR, optionalArgs)),\n        };\n\n        return measurement;\n    }\n\n    protected mergeLogOptions(logOptions?: Partial<LogOptions>): LogOptions {\n        const result: LogOptions = { ...this.defaultLogOptions };\n        if (logOptions) {\n            Object.assign(result, logOptions);\n        }\n        return result;\n    }\n\n    protected atLevel(logOptions: LogOptions, levelOverride?: LogLevel, optionalArgs?: any[]): LogOptions {\n        return { ...logOptions, levelOverride, arguments: optionalArgs };\n    }\n\n    protected logLevel(elapsed: number, options?: Partial<LogOptions>): LogLevel {\n        if (options?.levelOverride) {\n            return options.levelOverride;\n        }\n\n        return options?.defaultLogLevel ?? this.defaultLogOptions.defaultLogLevel ?? DEFAULT_LOG_LEVEL;\n    }\n\n    protected log(measurement: Measurement, activity: string, options: LogOptions): void {\n        const elapsed = measurement.stop();\n        const level = this.logLevel(elapsed, options);\n\n        if (Number.isNaN(elapsed)) {\n            switch (level) {\n                case LogLevel.ERROR:\n                case LogLevel.FATAL:\n                    // Always log errors, even if NaN duration from native API preventing a measurement\n                    break;\n                default:\n                    // Measurement was prevented by native API, do not log NaN duration\n                    return;\n            }\n        }\n\n        const start = options.owner ? `${options.owner} start` : 'start';\n        const timeFromStart = `Finished ${(options.now() / 1000).toFixed(3)} s after ${start}`;\n        const whatWasMeasured = options.context ? `[${options.context}] ${activity}` : activity;\n        this.logger.log(level, `${whatWasMeasured}: ${elapsed.toFixed(1)} ms [${timeFromStart}]`, ...(options.arguments ?? []));\n    }\n\n    get storedMeasurements(): ReadonlyArray<MeasurementResult> {\n        return this._storedMeasurements;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2023 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport type { MaybeArray, MaybePromise } from './types';\n\nexport interface Prioritizeable<T> {\n    readonly priority: number;\n    readonly value: T;\n}\nexport namespace Prioritizeable {\n    export type GetPriority<T> = (value: T) => MaybePromise<number>;\n    export type GetPrioritySync<T> = (value: T) => number;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>, getPriority: GetPriority<T>): Promise<Prioritizeable<T>>;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]>;\n    export async function toPrioritizeable<T>(rawValue: MaybeArray<MaybePromise<T>>, getPriority: GetPriority<T>): Promise<MaybeArray<Prioritizeable<T>>> {\n        if (rawValue instanceof Array) {\n            return Promise.all(\n                rawValue.map(v => toPrioritizeable(v, getPriority))\n            );\n        }\n        const value = await rawValue;\n        const priority = await getPriority(value);\n        return { priority, value };\n    }\n    export function toPrioritizeableSync<T>(rawValue: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        return rawValue.map(v => ({\n            value: v,\n            priority: getPriority(v)\n        }));\n    }\n    export function prioritizeAllSync<T>(values: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        const prioritizeable = toPrioritizeableSync(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export async function prioritizeAll<T>(values: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]> {\n        const prioritizeable = await toPrioritizeable(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export function isValid<T>(p: Prioritizeable<T>): boolean {\n        return p.priority > 0;\n    }\n    export function compare<T>(p: Prioritizeable<T>, p2: Prioritizeable<T>): number {\n        return p2.priority - p.priority;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationToken } from './cancellation';\n\nexport const ProgressClient = Symbol('ProgressClient');\nexport interface ProgressClient {\n\n    /**\n     * Show a progress message with possible actions to user.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined>;\n\n    /**\n     * Update a previously created progress message.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void>;\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from 'inversify';\nimport {\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\nimport { ProgressClient } from './progress-service-protocol';\nimport { MessageService } from './message-service';\n\n@injectable()\nexport class ProgressService {\n\n    @inject(ProgressClient) protected readonly client: ProgressClient;\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        if (this.shouldDelegate(message)) {\n            return this.messageService.showProgress(message, onDidCancel);\n        }\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n    protected shouldDelegate(message: ProgressMessage): boolean {\n        const location = message.options && message.options.location;\n        return location === 'notification';\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n\n    async withProgress<T>(text: string, locationId: string, task: () => Promise<T>, onDidCancel?: () => void): Promise<T> {\n        const progress = await this.showProgress({ text, options: { cancelable: true, location: locationId } }, onDidCancel);\n        try {\n            return await task();\n        } finally {\n            progress.cancel();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from './disposable';\nimport { Event } from './event';\nimport { CancellationToken, CancellationError, cancelled } from './cancellation';\nimport { isFunction, isObject } from './types';\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T = void> {\n    state: 'resolved' | 'rejected' | 'unresolved' = 'unresolved';\n    resolve: (value: T | PromiseLike<T>) => void;\n    reject: (err?: unknown) => void;\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    }).then(\n        res => (this.setState('resolved'), res),\n        err => (this.setState('rejected'), Promise.reject(err)),\n    );\n\n    protected setState(state: 'resolved' | 'rejected'): void {\n        if (this.state === 'unresolved') {\n            this.state = state;\n        }\n    }\n}\n\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\nexport function timeout(ms: number, token = CancellationToken.None): Promise<void> {\n    const deferred = new Deferred<void>();\n    const handle = setTimeout(() => deferred.resolve(), ms);\n    token.onCancellationRequested(() => {\n        clearTimeout(handle);\n        deferred.reject(cancelled());\n    });\n    return deferred.promise;\n}\n\n/**\n * Creates a promise that is rejected after the given amount of time. A typical use case is to wait for another promise until a specified timeout using:\n * ```\n * Promise.race([ promiseToPerform, timeoutReject(timeout, 'Timeout error message') ]);\n * ```\n *\n * @param ms timeout in milliseconds\n * @param message error message on promise rejection\n * @returns rejection promise\n */\nexport function timeoutReject<T>(ms: number, message?: string): Promise<T> {\n    const deferred = new Deferred<T>();\n    setTimeout(() => deferred.reject(new Error(message)), ms);\n    return deferred.promise;\n}\n\nexport async function retry<T>(task: () => Promise<T>, retryDelay: number, retries: number): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await task();\n        } catch (error) {\n            lastError = error;\n\n            await timeout(retryDelay);\n        }\n    }\n\n    throw lastError;\n}\n\n/**\n * A function to allow a promise resolution to be delayed by a number of milliseconds. Usage is as follows:\n *\n * `const stringValue = await myPromise.then(delay(600)).then(value => value.toString());`\n *\n * @param ms the number of millisecond to delay\n * @returns a function that returns a promise that returns the given value, but delayed\n */\nexport function delay<T>(ms: number): (value: T) => Promise<T> {\n    return value => new Promise((resolve, reject) => { setTimeout(() => resolve(value), ms); });\n}\n\n/**\n * Constructs a promise that will resolve after a given delay.\n * @param ms the number of milliseconds to wait\n */\nexport async function wait(ms: number): Promise<void> {\n    await delay(ms)(undefined);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function waitForEvent<T>(event: Event<T>, ms: number, thisArg?: any, disposables?: Disposable[]): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const registration = setTimeout(() => {\n            listener.dispose();\n            reject(new CancellationError());\n        }, ms);\n\n        const listener = event((evt: T) => {\n            clearTimeout(registration);\n            listener.dispose();\n            resolve(evt);\n        }, thisArg, disposables);\n\n    });\n}\n\nexport function isThenable<T>(obj: unknown): obj is Promise<T> {\n    return isObject<Promise<unknown>>(obj) && isFunction(obj.then);\n}\n\n/**\n * Returns with a promise that waits until the first promise resolves to `true`.\n */\n// Based on https://stackoverflow.com/a/51160727/5529090\nexport function firstTrue(...promises: readonly Promise<boolean>[]): Promise<boolean> {\n    const newPromises = promises.map(promise => new Promise<boolean>(\n        (resolve, reject) => promise.then(result => result && resolve(true), reject)\n    ));\n    newPromises.push(Promise.all(promises).then(() => false));\n    return Promise.race(newPromises);\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from './uri';\nimport * as fuzzy from 'fuzzy';\nimport { Event } from './event';\nimport { KeySequence } from './keys';\nimport { CancellationToken } from './cancellation';\nimport { URI as Uri } from 'vscode-uri';\n\nexport const quickPickServicePath = '/services/quickPick';\nexport const QuickPickService = Symbol('QuickPickService');\nexport interface QuickPickService {\n    show<T extends QuickPickItem>(items: Array<T | QuickPickSeparator>, options?: QuickPickOptions<T>): Promise<T | undefined>;\n    setItems<T extends QuickPickItem>(items: Array<T>): void;\n    hide(): void\n    readonly onDidHide: Event<void>;\n    readonly onDidAccept: Event<void>;\n    readonly onDidChangeValue: Event<{ quickPick: QuickPick<QuickPickItem>, filter: string }>;\n    readonly onDidChangeActive: Event<{ quickPick: QuickPick<QuickPickItem>, activeItems: Array<QuickPickItem> }>;\n    readonly onDidChangeSelection: Event<{ quickPick: QuickPick<QuickPickItem>, selectedItems: Array<QuickPickItem> }>;\n    readonly onDidTriggerButton: Event<QuickInputButtonHandle>;\n}\n\nexport interface Match {\n    start: number;\n    end: number;\n}\nexport interface QuickPickItemHighlights {\n    label?: Match[];\n    description?: Match[];\n    detail?: Match[];\n}\n\nexport interface QuickPickItem {\n    type?: 'item';\n    id?: string;\n    label: string;\n    meta?: string;\n    ariaLabel?: string;\n    description?: string;\n    detail?: string;\n    keySequence?: KeySequence;\n    iconPath?: URI | Uri | { light?: URI | Uri; dark: URI | Uri } | { id: string };\n    iconClasses?: string[];\n    alwaysShow?: boolean;\n    highlights?: QuickPickItemHighlights;\n    buttons?: readonly QuickInputButton[];\n    execute?: () => void;\n}\n\nexport interface QuickPickSeparator {\n    type: 'separator';\n    label?: string;\n}\n\nexport type QuickPickItemOrSeparator = QuickPickItem | QuickPickSeparator;\nexport type QuickPickInput<T = QuickPickItem> = T | QuickPickSeparator;\n\nexport namespace QuickPickItem {\n    export function is(item: QuickPickSeparator | QuickPickItem): item is QuickPickItem {\n        // if it's not a separator, it's an item\n        return item.type !== 'separator';\n    }\n}\n\nexport interface QuickPickSeparator {\n    type: 'separator';\n    label?: string;\n}\n\nexport namespace QuickPickSeparator {\n    export function is(item: QuickPickItemOrSeparator): item is QuickPickSeparator {\n        return item.type === 'separator';\n    }\n}\n\nexport type QuickPicks = (QuickPickSeparator | QuickPickItem)[];\n\nexport interface QuickPickValue<V> extends QuickPickItem {\n    value: V\n}\n\nexport interface QuickInputButton {\n    iconPath?: URI | Uri | { light?: URI | Uri; dark: URI | Uri } | { id: string };\n    iconClass?: string;\n    tooltip?: string;\n    /**\n     * Whether the button should be visible even when the user is not hovering.\n     */\n    alwaysVisible?: boolean;\n}\n\nexport interface NormalizedQuickInputButton extends QuickInputButton {\n    iconPath?: { light?: Uri, dark: Uri };\n}\n\nexport namespace QuickInputButton {\n    export function normalize(button: undefined): undefined;\n    export function normalize(button: QuickInputButton): NormalizedQuickInputButton;\n    export function normalize(button?: QuickInputButton): NormalizedQuickInputButton | undefined {\n        if (!button) {\n            return button;\n        }\n        let iconPath: NormalizedQuickInputButton['iconPath'] = undefined;\n        if (button.iconPath instanceof URI) {\n            iconPath = { dark: button.iconPath['codeUri'] };\n        } else if (button.iconPath && 'dark' in button.iconPath) {\n            const dark = Uri.isUri(button.iconPath.dark) ? button.iconPath.dark : button.iconPath.dark['codeUri'];\n            const light = Uri.isUri(button.iconPath.light) ? button.iconPath.light : button.iconPath.light?.['codeUri'];\n            iconPath = { dark, light };\n        }\n        return {\n            ...button,\n            iconPath,\n        };\n    }\n}\n\nexport interface QuickInputButtonHandle extends QuickInputButton {\n    index: number; // index of where they are in buttons array if QuickInputButton or -1 if QuickInputButtons.Back\n}\n\nexport enum QuickInputHideReason {\n    /**\n     * Focus was moved away from the input, but the user may not have explicitly closed it.\n     */\n    Blur = 1,\n    /**\n     * An explicit close gesture, like striking the Escape key\n     */\n    Gesture = 2,\n    /**\n     * Any other reason\n     */\n    Other = 3,\n}\n\nexport interface QuickInput {\n    readonly onDidHide: Event<{ reason: QuickInputHideReason }>;\n    readonly onDispose: Event<void>;\n    title: string | undefined;\n    description: string | undefined;\n    step: number | undefined;\n    totalSteps: number | undefined;\n    enabled: boolean;\n    contextKey: string | undefined;\n    busy: boolean;\n    ignoreFocusOut: boolean;\n    show(): void;\n    hide(): void;\n    dispose(): void;\n}\n\nexport interface InputBox extends QuickInput {\n    value: string | undefined;\n    valueSelection: Readonly<[number, number]> | undefined;\n    placeholder: string | undefined;\n    password: boolean;\n    readonly onDidChangeValue: Event<string>;\n    readonly onDidAccept: Event<void>;\n    buttons: ReadonlyArray<QuickInputButton>;\n    readonly onDidTriggerButton: Event<QuickInputButton>;\n    prompt: string | undefined;\n    validationMessage: string | undefined;\n}\n\nexport interface QuickPick<T extends QuickPickItemOrSeparator> extends QuickInput {\n    value: string;\n    placeholder: string | undefined;\n    items: ReadonlyArray<T | QuickPickSeparator>;\n    activeItems: ReadonlyArray<T>;\n    selectedItems: ReadonlyArray<T>;\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    keepScrollPosition: boolean;\n    readonly onDidAccept: Event<{ inBackground: boolean } | undefined>;\n    readonly onDidChangeValue: Event<string>;\n    readonly onDidTriggerButton: Event<QuickInputButton>;\n    readonly onDidTriggerItemButton: Event<QuickPickItemButtonEvent<T>>;\n    readonly onDidChangeActive: Event<T[]>;\n    readonly onDidChangeSelection: Event<T[]>;\n}\n\nexport interface PickOptions<T extends QuickPickItem> {\n    title?: string;\n    placeHolder?: string;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    matchOnLabel?: boolean;\n    autoFocusOnList?: boolean;\n    ignoreFocusLost?: boolean;\n    canPickMany?: boolean;\n    contextKey?: string;\n    activeItem?: Promise<T> | T;\n    onDidFocus?: (entry: T) => void;\n}\n\nexport interface InputOptions {\n    title?: string;\n    value?: string;\n    valueSelection?: [number, number];\n    prompt?: string;\n    placeHolder?: string;\n    password?: boolean;\n    ignoreFocusLost?: boolean;\n    validateInput?(input: string): Promise<string | { content: string; severity: number; } | null | undefined> | undefined;\n}\n\nexport interface QuickPickItemButtonEvent<T extends QuickPickItemOrSeparator> {\n    button: QuickInputButton;\n    item: T;\n}\n\nexport interface QuickPickItemButtonContext<T extends QuickPickItemOrSeparator> extends QuickPickItemButtonEvent<T> {\n    removeItem(): void;\n}\n\nexport interface QuickPickOptions<T extends QuickPickItemOrSeparator> {\n    busy?: boolean;\n    enabled?: boolean;\n    title?: string;\n    description?: string;\n    value?: string;\n    filterValue?: (value: string) => string;\n    ariaLabel?: string;\n    buttons?: Array<QuickInputButton>;\n    placeholder?: string;\n    canAcceptInBackground?: boolean;\n    customButton?: boolean;\n    customLabel?: string;\n    customHover?: string;\n    canSelectMany?: boolean;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    matchOnLabel?: boolean;\n    sortByLabel?: boolean;\n    keepScrollPosition?: boolean;\n    autoFocusOnList?: boolean;\n    ignoreFocusOut?: boolean;\n    valueSelection?: Readonly<[number, number]>;\n    validationMessage?: string;\n    hideInput?: boolean;\n    hideCheckAll?: boolean;\n    runIfSingle?: boolean\n    contextKey?: string;\n    activeItem?: T,\n    step?: number;\n    totalSteps?: number;\n\n    onDidAccept?: () => void,\n    onDidChangeActive?: (quickPick: QuickPick<T>, activeItems: Array<T>) => void,\n    onDidChangeSelection?: (quickPick: QuickPick<T>, selectedItems: Array<T>) => void,\n    onDidChangeValue?: (quickPick: QuickPick<T>, filter: string) => void,\n    onDidCustom?: () => void,\n    onDidHide?: () => void;\n    onDidTriggerButton?: (button: QuickInputButton) => void,\n    onDidTriggerItemButton?: (ItemButtonEvent: QuickPickItemButtonContext<T>) => void\n}\n\nexport const quickInputServicePath = '/services/quickInput';\nexport const QuickInputService = Symbol('QuickInputService');\nexport interface QuickInputService {\n    readonly backButton: QuickInputButton;\n    readonly onShow: Event<void>;\n    readonly onHide: Event<void>;\n    open(filter: string): void;\n    createInputBox(): InputBox;\n    input(options?: InputOptions, token?: CancellationToken): Promise<string | undefined>;\n    pick<T extends QuickPickItem, O extends PickOptions<T>>(picks: Promise<QuickPickInput<T>[]> | QuickPickInput<T>[], options?: O, token?: CancellationToken):\n        Promise<(O extends { canPickMany: true } ? T[] : T) | undefined>;\n    showQuickPick<T extends QuickPickItem>(items: Array<T | QuickPickSeparator>, options?: QuickPickOptions<T>): Promise<T | undefined>;\n    hide(): void;\n    /**\n     * Provides raw access to the quick pick controller.\n     */\n    createQuickPick<T extends QuickPickItem>(): QuickPick<T>;\n}\n\n/**\n * Filter the list of quick pick items based on the provided filter.\n * Items are filtered based on if:\n * - their `label` satisfies the filter using `fuzzy`.\n * - their `description` satisfies the filter using `fuzzy`.\n * - their `detail` satisfies the filter using `fuzzy`.\n * Filtered items are also updated to display proper highlights based on how they were filtered.\n * @param items the list of quick pick items.\n * @param filter the filter to search for.\n * @returns the list of quick pick items that satisfy the filter.\n */\nexport function filterItems(items: QuickPickItemOrSeparator[], filter: string): QuickPickItemOrSeparator[] {\n    filter = filter.trim().toLowerCase();\n\n    if (filter.length === 0) {\n        for (const item of items) {\n            if (item.type !== 'separator') {\n                item.highlights = undefined; // reset highlights from previous filtering.\n            }\n        }\n        return items;\n    }\n\n    const filteredItems: QuickPickItemOrSeparator[] = [];\n    for (const item of items) {\n        if (item.type === 'separator') {\n            filteredItems.push(item);\n        } else if (\n            fuzzy.test(filter, item.label) ||\n            (item.description && fuzzy.test(filter, item.description)) ||\n            (item.detail && fuzzy.test(filter, item.detail))\n        ) {\n            item.highlights = {\n                label: findMatches(item.label, filter),\n                description: item.description ? findMatches(item.description, filter) : undefined,\n                detail: item.detail ? findMatches(item.detail, filter) : undefined\n            };\n            filteredItems.push(item);\n        }\n    }\n    return filteredItems;\n}\n\n/**\n * Find match highlights when testing a word against a pattern.\n * @param word the word to test.\n * @param pattern the word to match against.\n * @returns the list of highlights if present.\n */\nexport function findMatches(word: string, pattern: string): Array<{ start: number, end: number }> | undefined {\n    word = word.toLocaleLowerCase();\n    pattern = pattern.toLocaleLowerCase();\n\n    if (pattern.trim().length === 0) {\n        return undefined;\n    }\n\n    const delimiter = '\\u0000'; // null byte that shouldn't appear in the input and is used to denote matches.\n    const matchResult = fuzzy.match(pattern.replace(/\\u0000/gu, ''), word, { pre: delimiter, post: delimiter });\n    if (!matchResult) {\n        return undefined;\n    }\n\n    const match = matchResult.rendered;\n    const highlights: { start: number, end: number }[] = [];\n\n    let lastIndex = 0;\n    /** We need to account for the extra markers by removing them from the range */\n    let offset = 0;\n\n    while (true) {\n        const start = match.indexOf(delimiter, lastIndex);\n        if (start === -1) { break; }\n        const end = match.indexOf(delimiter, start + 1);\n        if (end === -1) { break; }\n        highlights.push({\n            start: start - offset++,\n            end: end - offset++\n        });\n        lastIndex = end + 1;\n    }\n\n    return highlights.length > 0 ? highlights : undefined;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable, DisposableCollection } from './disposable';\nimport { Emitter, Event } from './event';\nimport { MaybePromise } from './types';\n\nexport interface Reference<T> extends Disposable {\n    readonly object: T\n}\n\nexport abstract class AbstractReferenceCollection<K, V extends Disposable> implements Disposable {\n\n    protected readonly _keys = new Map<string, K>();\n    protected readonly _values = new Map<string, V>();\n    protected readonly references = new Map<string, DisposableCollection>();\n\n    protected readonly onDidCreateEmitter = new Emitter<V>();\n    readonly onDidCreate: Event<V> = this.onDidCreateEmitter.event;\n\n    protected readonly onWillDisposeEmitter = new Emitter<V>();\n    readonly onWillDispose: Event<V> = this.onWillDisposeEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor() {\n        this.toDispose.push(this.onDidCreateEmitter);\n        this.toDispose.push(this.onWillDisposeEmitter);\n        this.toDispose.push(Disposable.create(() => this.clear()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    clear(): void {\n        for (const value of this._values.values()) {\n            try {\n                value.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n    has(args: K): boolean {\n        const key = this.toKey(args);\n        return this.references.has(key);\n    }\n\n    keys(): K[] {\n        return [...this._keys.values()];\n    }\n\n    values(): V[] {\n        return [...this._values.values()];\n    }\n\n    get(args: K): V | undefined {\n        const key = this.toKey(args);\n        return this._values.get(key);\n    }\n\n    abstract acquire(args: K): MaybePromise<Reference<V>>;\n\n    protected doAcquire(key: string, object: V): Reference<V> {\n        const references = this.references.get(key) || this.createReferences(key, object);\n        const reference: Reference<V> = {\n            object,\n            dispose: () => { }\n        };\n        references.push(reference);\n        return reference;\n    }\n\n    protected toKey(args: K): string {\n        return JSON.stringify(args);\n    }\n\n    protected createReferences(key: string, value: V): DisposableCollection {\n        const references = new DisposableCollection();\n        references.onDispose(() => value.dispose());\n        const disposeObject = value.dispose.bind(value);\n        value.dispose = () => {\n            this.onWillDisposeEmitter.fire(value);\n            disposeObject();\n            this._values.delete(key);\n            this._keys.delete(key);\n            this.references.delete(key);\n            references!.dispose();\n        };\n        this.references.set(key, references);\n        return references;\n    }\n\n}\n\nexport class ReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => MaybePromise<V>) {\n        super();\n    }\n\n    async acquire(args: K): Promise<Reference<V>> {\n        const key = this.toKey(args);\n        const existing = this._values.get(key);\n        if (existing) {\n            return this.doAcquire(key, existing);\n        }\n        const object = await this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected readonly pendingValues = new Map<string, MaybePromise<V>>();\n    protected async getOrCreateValue(key: string, args: K): Promise<V> {\n        const existing = this.pendingValues.get(key);\n        if (existing) {\n            return existing;\n        }\n        const pending = this.factory(args);\n        this._keys.set(key, args);\n        this.pendingValues.set(key, pending);\n        try {\n            const value = await pending;\n            this._values.set(key, value);\n            this.onDidCreateEmitter.fire(value);\n            return value;\n        } catch (e) {\n            this._keys.delete(key);\n            throw e;\n        } finally {\n            this.pendingValues.delete(key);\n        }\n    }\n\n}\n\nexport class SyncReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => V) {\n        super();\n    }\n\n    acquire(args: K): Reference<V> {\n        const key = this.toKey(args);\n        const object = this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected getOrCreateValue(key: string, args: K): V {\n        const existing = this._values.get(key);\n        if (existing) {\n            return existing;\n        }\n        const value = this.factory(args);\n        this._keys.set(key, args);\n        this._values.set(key, value);\n        this.onDidCreateEmitter.fire(value);\n        return value;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport URI from '../common/uri';\nimport { ContributionProvider } from './contribution-provider';\nimport { Event, Emitter } from './event';\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\nimport { CancellationToken } from './cancellation';\nimport { ApplicationError } from './application-error';\nimport { ReadableStream, Readable } from './stream';\nimport { SyncReferenceCollection, Reference } from './reference';\n\nexport interface ResourceVersion {\n}\n\nexport interface ResourceReadOptions {\n    encoding?: string\n}\n\nexport interface ResourceSaveOptions {\n    encoding?: string\n    overwriteEncoding?: boolean\n    version?: ResourceVersion\n}\n\nexport interface Resource extends Disposable {\n    readonly uri: URI;\n    /**\n     * Latest read version of this resource.\n     *\n     * Optional if a resource does not support versioning, check with `in` operator`.\n     * Undefined if a resource did not read content yet.\n     */\n    readonly version?: ResourceVersion | undefined;\n    /**\n     * Latest read encoding of this resource.\n     *\n     * Optional if a resource does not support encoding, check with `in` operator`.\n     * Undefined if a resource did not read content yet.\n     */\n    readonly encoding?: string | undefined;\n    readonly isReadonly?: boolean;\n    /**\n     * Reads latest content of this resource.\n     *\n     * If a resource supports versioning it updates version to latest.\n     * If a resource supports encoding it updates encoding to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found\n     */\n    readContents(options?: ResourceReadOptions): Promise<string>;\n    /**\n     * Stream latest content of this resource.\n     *\n     * If a resource supports versioning it updates version to latest.\n     * If a resource supports encoding it updates encoding to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found\n     */\n    readStream?(options?: ResourceReadOptions): Promise<ReadableStream<string>>;\n    /**\n     * Rewrites the complete content for this resource.\n     * If a resource does not exist it will be created.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     *\n     * It updates version and encoding to latest.\n     *\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveContents?(content: string, options?: ResourceSaveOptions): Promise<void>;\n    /**\n     * Rewrites the complete content for this resource.\n     * If a resource does not exist it will be created.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     *\n     * It updates version and encoding to latest.\n     *\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveStream?(content: Readable<string>, options?: ResourceSaveOptions): Promise<void>;\n    /**\n     * Applies incremental content changes to this resource.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     * It updates version to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found or was not read yet\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveContentChanges?(changes: TextDocumentContentChangeEvent[], options?: ResourceSaveOptions): Promise<void>;\n    readonly onDidChangeContents?: Event<void>;\n    guessEncoding?(): Promise<string | undefined>\n}\nexport namespace Resource {\n    export interface SaveContext {\n        contentLength: number\n        content: string | Readable<string>\n        changes?: TextDocumentContentChangeEvent[]\n        options?: ResourceSaveOptions\n    }\n    export async function save(resource: Resource, context: SaveContext, token?: CancellationToken): Promise<void> {\n        if (!resource.saveContents) {\n            return;\n        }\n        if (await trySaveContentChanges(resource, context)) {\n            return;\n        }\n        if (token && token.isCancellationRequested) {\n            return;\n        }\n        if (typeof context.content !== 'string' && resource.saveStream) {\n            await resource.saveStream(context.content, context.options);\n        } else {\n            const content = typeof context.content === 'string' ? context.content : Readable.toString(context.content);\n            await resource.saveContents(content, context.options);\n        }\n    }\n    export async function trySaveContentChanges(resource: Resource, context: SaveContext): Promise<boolean> {\n        if (!context.changes || !resource.saveContentChanges || shouldSaveContent(resource, context)) {\n            return false;\n        }\n        try {\n            await resource.saveContentChanges(context.changes, context.options);\n            return true;\n        } catch (e) {\n            if (!ResourceError.NotFound.is(e) && !ResourceError.OutOfSync.is(e)) {\n                console.error(`Failed to apply incremental changes to '${resource.uri.toString()}':`, e);\n            }\n            return false;\n        }\n    }\n    export function shouldSaveContent(resource: Resource, { contentLength, changes }: SaveContext): boolean {\n        if (!changes || (resource.saveStream && contentLength > 32 * 1024 * 1024)) {\n            return true;\n        }\n        let contentChangesLength = 0;\n        for (const change of changes) {\n            contentChangesLength += JSON.stringify(change).length;\n            if (contentChangesLength > contentLength) {\n                return true;\n            }\n        }\n        return contentChangesLength > contentLength;\n    }\n}\n\nexport namespace ResourceError {\n    export const NotFound = ApplicationError.declare(-40000, (raw: ApplicationError.Literal<{ uri: URI }>) => raw);\n    export const OutOfSync = ApplicationError.declare(-40001, (raw: ApplicationError.Literal<{ uri: URI }>) => raw);\n}\n\nexport const ResourceResolver = Symbol('ResourceResolver');\nexport interface ResourceResolver {\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    resolve(uri: URI): MaybePromise<Resource>;\n}\n\nexport const ResourceProvider = Symbol('ResourceProvider');\nexport type ResourceProvider = (uri: URI) => Promise<Resource>;\n\n@injectable()\nexport class DefaultResourceProvider {\n\n    constructor(\n        @inject(ContributionProvider) @named(ResourceResolver)\n        protected readonly resolversProvider: ContributionProvider<ResourceResolver>\n    ) { }\n\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    async get(uri: URI): Promise<Resource> {\n        const resolvers = this.resolversProvider.getContributions();\n        for (const resolver of resolvers) {\n            try {\n                return await resolver.resolve(uri);\n            } catch (err) {\n                // no-op\n            }\n        }\n        return Promise.reject(new Error(`A resource provider for '${uri.toString()}' is not registered.`));\n    }\n\n}\n\nexport class MutableResource implements Resource {\n    private contents: string = '';\n\n    constructor(readonly uri: URI) {\n    }\n\n    dispose(): void { }\n\n    async readContents(): Promise<string> {\n        return this.contents;\n    }\n\n    async saveContents(contents: string): Promise<void> {\n        this.contents = contents;\n        this.fireDidChangeContents();\n    }\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    readonly onDidChangeContents = this.onDidChangeContentsEmitter.event;\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n}\nexport class ReferenceMutableResource implements Resource {\n    constructor(protected reference: Reference<MutableResource>) { }\n\n    get uri(): URI {\n        return this.reference.object.uri;\n    }\n\n    get onDidChangeContents(): Event<void> {\n        return this.reference.object.onDidChangeContents;\n    }\n\n    dispose(): void {\n        this.reference.dispose();\n    }\n\n    readContents(): Promise<string> {\n        return this.reference.object.readContents();\n    }\n\n    saveContents(contents: string): Promise<void> {\n        return this.reference.object.saveContents(contents);\n    }\n}\n\n@injectable()\nexport class InMemoryResources implements ResourceResolver {\n\n    protected readonly resources = new SyncReferenceCollection<string, MutableResource>(uri => new MutableResource(new URI(uri)));\n\n    add(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        if (this.resources.has(resourceUri)) {\n            throw new Error(`Cannot add already existing in-memory resource '${resourceUri}'`);\n        }\n        const resource = this.acquire(resourceUri);\n        resource.saveContents(contents);\n        return resource;\n    }\n\n    update(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        const resource = this.resources.get(resourceUri);\n        if (!resource) {\n            throw new Error(`Cannot update non-existed in-memory resource '${resourceUri}'`);\n        }\n        resource.saveContents(contents);\n        return resource;\n    }\n\n    resolve(uri: URI): Resource {\n        const uriString = uri.toString();\n        if (!this.resources.has(uriString)) {\n            throw new Error(`In memory '${uriString}' resource does not exist.`);\n        }\n        return this.acquire(uriString);\n    }\n\n    protected acquire(uri: string): ReferenceMutableResource {\n        const reference = this.resources.acquire(uri);\n        return new ReferenceMutableResource(reference);\n    }\n}\n\nexport const MEMORY_TEXT = 'mem-txt';\n\n/**\n * Resource implementation for 'mem-txt' URI scheme where content is saved in URI query.\n */\nexport class InMemoryTextResource implements Resource {\n    constructor(readonly uri: URI) { }\n\n    async readContents(options?: { encoding?: string | undefined; } | undefined): Promise<string> {\n        return this.uri.query;\n    }\n    dispose(): void { }\n}\n\n/**\n * ResourceResolver implementation for 'mem-txt' URI scheme.\n */\n@injectable()\nexport class InMemoryTextResourceResolver implements ResourceResolver {\n    resolve(uri: URI): MaybePromise<Resource> {\n        if (uri.scheme !== MEMORY_TEXT) {\n            throw new Error(`Expected a URI with ${MEMORY_TEXT} scheme. Was: ${uri}.`);\n        }\n        return new InMemoryTextResource(uri);\n    }\n}\n\nexport const UNTITLED_SCHEME = 'untitled';\n\nlet untitledResourceSequenceIndex = 0;\n\n@injectable()\nexport class UntitledResourceResolver implements ResourceResolver {\n\n    protected readonly resources = new Map<string, UntitledResource>();\n\n    has(uri: URI): boolean {\n        if (uri.scheme !== UNTITLED_SCHEME) {\n            throw new Error('The given uri is not untitled file uri: ' + uri);\n        } else {\n            return this.resources.has(uri.toString());\n        }\n    }\n\n    async resolve(uri: URI): Promise<UntitledResource> {\n        if (uri.scheme !== UNTITLED_SCHEME) {\n            throw new Error('The given uri is not untitled file uri: ' + uri);\n        } else {\n            const untitledResource = this.resources.get(uri.toString());\n            if (!untitledResource) {\n                return this.createUntitledResource('', '', uri);\n            } else {\n                return untitledResource;\n            }\n        }\n    }\n\n    async createUntitledResource(content?: string, extension?: string, uri?: URI): Promise<UntitledResource> {\n        if (!uri) {\n            uri = this.createUntitledURI(extension);\n        }\n        return new UntitledResource(this.resources, uri, content);\n    }\n\n    createUntitledURI(extension?: string, parent?: URI): URI {\n        let counter = 1; // vscode starts at 1\n        let untitledUri;\n        do {\n            const name = `Untitled-${counter}${extension ?? ''}`;\n            if (parent) {\n                untitledUri = parent.resolve(name).withScheme(UNTITLED_SCHEME);\n            }\n            untitledUri = new URI().resolve(name).withScheme(UNTITLED_SCHEME);\n            counter++;\n        } while (this.has(untitledUri));\n        return untitledUri;\n    }\n}\n\nexport class UntitledResource implements Resource {\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    get onDidChangeContents(): Event<void> {\n        return this.onDidChangeContentsEmitter.event;\n    }\n\n    constructor(private resources: Map<string, UntitledResource>, public uri: URI, private content?: string) {\n        this.resources.set(this.uri.toString(), this);\n    }\n\n    dispose(): void {\n        this.resources.delete(this.uri.toString());\n        this.onDidChangeContentsEmitter.dispose();\n    }\n\n    async readContents(options?: { encoding?: string | undefined; } | undefined): Promise<string> {\n        if (this.content) {\n            return this.content;\n        } else {\n            return '';\n        }\n    }\n\n    async saveContents(content: string, options?: { encoding?: string, overwriteEncoding?: boolean }): Promise<void> {\n        // This function must exist to ensure readOnly is false for the Monaco editor.\n        // However it should not be called because saving 'untitled' is always processed as 'Save As'.\n        throw Error('Untitled resources cannot be saved.');\n    }\n\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n\n    get version(): ResourceVersion | undefined {\n        return undefined;\n    }\n\n    get encoding(): string | undefined {\n        return undefined;\n    }\n}\n\n/**\n * @deprecated Since 1.27.0. Please use `UntitledResourceResolver.createUntitledURI` instead.\n */\nexport function createUntitledURI(extension?: string, parent?: URI): URI {\n    const name = `Untitled-${untitledResourceSequenceIndex++}${extension ?? ''}`;\n    if (parent) {\n        return parent.resolve(name).withScheme(UNTITLED_SCHEME);\n    }\n    return new URI().resolve(name).withScheme(UNTITLED_SCHEME);\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from '../common/event';\n\n/**\n * `SelectionProvider` is implemented by services to notify listeners about selection changes.\n */\nexport interface SelectionProvider<T> {\n    onSelectionChanged: Event<T | undefined>;\n}\n\n/**\n * Singleton service that is used to share the current selection globally in a Theia application.\n * On each change of selection, subscribers are notified and receive the updated selection object.\n */\n@injectable()\nexport class SelectionService implements SelectionProvider<Object | undefined> {\n\n    private currentSelection: Object | undefined;\n\n    protected readonly onSelectionChangedEmitter = new Emitter<any>();\n    readonly onSelectionChanged: Event<any> = this.onSelectionChangedEmitter.event;\n\n    get selection(): Object | undefined {\n        return this.currentSelection;\n    }\n\n    set selection(selection: Object | undefined) {\n        this.currentSelection = selection;\n        this.onSelectionChangedEmitter.fire(this.currentSelection);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { isObject } from './types';\nimport URI from './uri';\n\nexport interface UriSelection {\n    readonly uri: URI\n}\n\nexport namespace UriSelection {\n\n    export function is(arg: unknown): arg is UriSelection {\n        return isObject<UriSelection>(arg) && arg.uri instanceof URI;\n    }\n\n    export function getUri(selection: unknown): URI | undefined {\n        if (is(selection)) {\n            return selection.uri;\n        }\n        if (Array.isArray(selection) && is(selection[0])) {\n            return selection[0].uri;\n        }\n        return undefined;\n    }\n\n    export function getUris(selection: unknown): URI[] {\n        if (is(selection)) {\n            return [selection.uri];\n        }\n        if (Array.isArray(selection)) {\n            return selection.filter(is).map(s => s.uri);\n        }\n        return [];\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/stream.ts\n\n/* eslint-disable max-len */\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface ReadableStreamEvents<T> {\n\n    /**\n     * The 'data' event is emitted whenever the stream is\n     * relinquishing ownership of a chunk of data to a consumer.\n     */\n    on(event: 'data', callback: (data: T) => void): void;\n\n    /**\n     * Emitted when any error occurs.\n     */\n    on(event: 'error', callback: (err: Error) => void): void;\n\n    /**\n     * The 'end' event is emitted when there is no more data\n     * to be consumed from the stream. The 'end' event will\n     * not be emitted unless the data is completely consumed.\n     */\n    on(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in desktop and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n    /**\n     * Stops emitting any events until resume() is called.\n     */\n    pause(): void;\n\n    /**\n     * Starts emitting events again after pause() was called.\n     */\n    resume(): void;\n\n    /**\n     * Destroys the stream and stops emitting any event.\n     */\n    destroy(): void;\n\n    /**\n     * Allows to remove a listener that was previously added.\n     */\n    removeListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in desktop and web environments.\n */\nexport interface Readable<T> {\n\n    /**\n     * Read data from the underlying source. Will return\n     * null to indicate that no more data can be read.\n     */\n    read(): T | null;\n}\nexport namespace Readable {\n    export function fromString(value: string): Readable<string> {\n        let done = false;\n\n        return {\n            read(): string | null {\n                if (!done) {\n                    done = true;\n\n                    return value;\n                }\n\n                return null;\n            }\n        };\n    }\n    export function toString(readable: Readable<string>): string {\n        let result = '';\n        let chunk: string | null;\n        while ((chunk = readable.read()) != null) {\n            result += chunk;\n        }\n        return result;\n    }\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in desktop and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n    /**\n     * Writing data to the stream will trigger the on('data')\n     * event listener if the stream is flowing and buffer the\n     * data otherwise until the stream is flowing.\n     *\n     * If a `highWaterMark` is configured and writing to the\n     * stream reaches this mark, a promise will be returned\n     * that should be awaited on before writing more data.\n     * Otherwise there is a risk of buffering a large number\n     * of data chunks without consumer.\n     */\n    write(data: T): void | Promise<void>;\n\n    /**\n     * Signals an error to the consumer of the stream via the\n     * on('error') handler if the stream is flowing.\n     */\n    error(error: Error): void;\n\n    /**\n     * Signals the end of the stream to the consumer. If the\n     * result is not an error, will trigger the on('data') event\n     * listener if the stream is flowing and buffer the data\n     * otherwise until the stream is flowing.\n     *\n     * In case of an error, the on('error') event will be used\n     * if the stream is flowing.\n     */\n    end(result?: T | Error): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n    /**\n     * The original stream that is being read.\n     */\n    stream: ReadableStream<T>;\n\n    /**\n     * An array of chunks already read from this stream.\n     */\n    buffer: T[];\n\n    /**\n     * Signals if the stream has ended or not. If not, consumers\n     * should continue to read from the stream until consumed.\n     */\n    ended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n    const candidate = obj as ReadableStream<T>;\n\n    return candidate && [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n    const candidate = obj as ReadableBufferedStream<T>;\n\n    return candidate && isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface Reducer<T> {\n    (data: T[]): T;\n}\n\nexport interface DataTransformer<Original, Transformed> {\n    (data: Original): Transformed;\n}\n\nexport interface ErrorTransformer {\n    (error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n    data: DataTransformer<Original, Transformed>;\n    error?: ErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: Reducer<T>, options?: WriteableStreamOptions): WriteableStream<T> {\n    return new WriteableStreamImpl<T>(reducer);\n}\n\nexport interface WriteableStreamOptions {\n\n    /**\n     * The number of objects to buffer before WriteableStream#write()\n     * signals back that the buffer is full. Can be used to reduce\n     * the memory pressure when the stream is not flowing.\n     */\n    highWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n    private readonly state = {\n        flowing: false,\n        ended: false,\n        destroyed: false\n    };\n\n    private readonly buffer = {\n        data: [] as T[],\n        error: [] as Error[]\n    };\n\n    private readonly listeners = {\n        data: [] as { (data: T): void }[],\n        error: [] as { (error: Error): void }[],\n        end: [] as { (): void }[]\n    };\n\n    private readonly pendingWritePromises: Function[] = [];\n\n    constructor(private reducer: Reducer<T>, private options?: WriteableStreamOptions) { }\n\n    pause(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        this.state.flowing = false;\n    }\n\n    resume(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        if (!this.state.flowing) {\n            this.state.flowing = true;\n\n            // emit buffered events\n            this.flowData();\n            this.flowErrors();\n            this.flowEnd();\n        }\n    }\n\n    write(data: T): void | Promise<void> {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the data to listeners\n        if (this.state.flowing) {\n            this.listeners.data.forEach(listener => listener(data));\n        }\n\n        // not yet flowing: buffer data until flowing\n        else {\n            this.buffer.data.push(data);\n\n            // highWaterMark: if configured, signal back when buffer reached limits\n            if (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n                return new Promise(resolve => this.pendingWritePromises.push(resolve));\n            }\n        }\n    }\n\n    error(error: Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the error to listeners\n        if (this.state.flowing) {\n            this.listeners.error.forEach(listener => listener(error));\n        }\n\n        // not yet flowing: buffer errors until flowing\n        else {\n            this.buffer.error.push(error);\n        }\n    }\n\n    end(result?: T | Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // end with data or error if provided\n        if (result instanceof Error) {\n            this.error(result);\n        } else if (result) {\n            this.write(result);\n        }\n\n        // flowing: send end event to listeners\n        if (this.state.flowing) {\n            this.listeners.end.forEach(listener => listener());\n\n            this.destroy();\n        }\n\n        // not yet flowing: remember state\n        else {\n            this.state.ended = true;\n        }\n    }\n\n    on(event: 'data', callback: (data: T) => void): void;\n    on(event: 'error', callback: (err: Error) => void): void;\n    on(event: 'end', callback: () => void): void;\n    on(event: 'data' | 'error' | 'end', callback: (arg0?: any) => void): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        switch (event) {\n            case 'data':\n                this.listeners.data.push(callback);\n\n                // switch into flowing mode as soon as the first 'data'\n                // listener is added and we are not yet in flowing mode\n                this.resume();\n\n                break;\n\n            case 'end':\n                this.listeners.end.push(callback);\n\n                // emit 'end' event directly if we are flowing\n                // and the end has already been reached\n                //\n                // finish() when it went through\n                if (this.state.flowing && this.flowEnd()) {\n                    this.destroy();\n                }\n\n                break;\n\n            case 'error':\n                this.listeners.error.push(callback);\n\n                // emit buffered 'error' events unless done already\n                // now that we know that we have at least one listener\n                if (this.state.flowing) {\n                    this.flowErrors();\n                }\n\n                break;\n        }\n    }\n\n    removeListener(event: string, callback: Function): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        let listeners: unknown[] | undefined = undefined;\n\n        switch (event) {\n            case 'data':\n                listeners = this.listeners.data;\n                break;\n\n            case 'end':\n                listeners = this.listeners.end;\n                break;\n\n            case 'error':\n                listeners = this.listeners.error;\n                break;\n        }\n\n        if (listeners) {\n            const index = listeners.indexOf(callback);\n            if (index >= 0) {\n                listeners.splice(index, 1);\n            }\n        }\n    }\n\n    private flowData(): void {\n        if (this.buffer.data.length > 0) {\n            const fullDataBuffer = this.reducer(this.buffer.data);\n\n            this.listeners.data.forEach(listener => listener(fullDataBuffer));\n\n            this.buffer.data.length = 0;\n\n            // When the buffer is empty, resolve all pending writers\n            const pendingWritePromises = [...this.pendingWritePromises];\n            this.pendingWritePromises.length = 0;\n            pendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n        }\n    }\n\n    private flowErrors(): void {\n        if (this.listeners.error.length > 0) {\n            for (const error of this.buffer.error) {\n                this.listeners.error.forEach(listener => listener(error));\n            }\n\n            this.buffer.error.length = 0;\n        }\n    }\n\n    private flowEnd(): boolean {\n        if (this.state.ended) {\n            this.listeners.end.forEach(listener => listener());\n\n            return this.listeners.end.length > 0;\n        }\n\n        return false;\n    }\n\n    destroy(): void {\n        if (!this.state.destroyed) {\n            this.state.destroyed = true;\n            this.state.ended = true;\n\n            this.buffer.data.length = 0;\n            this.buffer.error.length = 0;\n\n            this.listeners.data.length = 0;\n            this.listeners.error.length = 0;\n            this.listeners.end.length = 0;\n\n            this.pendingWritePromises.length = 0;\n        }\n    }\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: Reducer<T>): T {\n    const chunks: T[] = [];\n\n    let chunk: T | null;\n    while ((chunk = readable.read()) !== null) {\n        chunks.push(chunk);\n    }\n\n    return reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function consumeReadableWithLimit<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to fully read a T stream into a T.\n */\nexport function consumeStream<T>(stream: ReadableStream<T>, reducer: Reducer<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        stream.on('data', data => chunks.push(data));\n        stream.on('error', error => reject(error));\n        stream.on('end', () => resolve(reducer(chunks)));\n    });\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n    return new Promise((resolve, reject) => {\n        const streamListeners = new DisposableCollection();\n\n        // Data Listener\n        const buffer: T[] = [];\n        const dataListener = (chunk: T) => {\n\n            // Add to buffer\n            buffer.push(chunk);\n\n            // We reached maxChunks and thus need to return\n            if (buffer.length > maxChunks) {\n\n                // Dispose any listeners and ensure to pause the\n                // stream so that it can be consumed again by caller\n                streamListeners.dispose();\n                stream.pause();\n\n                return resolve({ stream, buffer, ended: false });\n            }\n        };\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('data', dataListener)));\n        stream.on('data', dataListener);\n\n        // Error Listener\n        const errorListener = (error: Error) => reject(error);\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('error', errorListener)));\n        stream.on('error', errorListener);\n\n        const endListener = () => resolve({ stream, buffer, ended: true });\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('end', endListener)));\n        stream.on('end', endListener);\n    });\n}\n\n/**\n * Helper to read a T stream up to a maximum of chunks. If the limit is\n * reached, will return a stream instead to ensure all data can still\n * be read.\n */\nexport function consumeStreamWithLimit<T>(stream: ReadableStream<T>, reducer: Reducer<T>, maxChunks: number): Promise<T | ReadableStream<T>> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        let wrapperStream: WriteableStream<T> | undefined = undefined;\n\n        stream.on('data', data => {\n\n            // If we reach maxChunks, we start to return a stream\n            // and make sure that any data we have already read\n            // is in it as well\n            if (!wrapperStream && chunks.length === maxChunks) {\n                wrapperStream = newWriteableStream(reducer);\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.write(data);\n\n                return resolve(wrapperStream);\n            }\n\n            if (wrapperStream) {\n                wrapperStream.write(data);\n            } else {\n                chunks.push(data);\n            }\n        });\n\n        stream.on('error', error => {\n            if (wrapperStream) {\n                wrapperStream.error(error);\n            } else {\n                return reject(error);\n            }\n        });\n\n        stream.on('end', () => {\n            if (wrapperStream) {\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.end();\n            } else {\n                return resolve(reducer(chunks));\n            }\n        });\n    });\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: Reducer<T>): ReadableStream<T> {\n    const stream = newWriteableStream<T>(reducer);\n\n    stream.end(t);\n\n    return stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n    let consumed = false;\n\n    return {\n        read: () => {\n            if (consumed) {\n                return null;\n            }\n\n            consumed = true;\n\n            return t;\n        }\n    };\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: Reducer<Transformed>): ReadableStream<Transformed> {\n    const target = newWriteableStream<Transformed>(reducer);\n\n    stream.on('data', data => target.write(transformer.data(data)));\n    stream.on('end', () => target.end());\n    stream.on('error', error => target.error(transformer.error ? transformer.error(error) : error));\n\n    return target;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/strings.ts\n\nimport { CharCode } from './char-code';\n\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n    let i: number;\n    const len = Math.min(a.length, b.length);\n\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\n            return i;\n        }\n    }\n\n    return len;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n\nexport function compare(a: string, b: string): number {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n        if (codeA < codeB) {\n            return -1;\n        } else if (codeA > codeB) {\n            return 1;\n        }\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n    return compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n\n        if (codeA === codeB) {\n            // equal\n            continue;\n        }\n\n        const diff = codeA - codeB;\n        if (diff === 32 && isUpperAsciiLetter(codeB)) { // codeB =[65-90] && codeA =[97-122]\n            continue;\n\n        } else if (diff === -32 && isUpperAsciiLetter(codeA)) {  // codeB =[97-122] && codeA =[65-90]\n            continue;\n        }\n\n        if (isLowerAsciiLetter(codeA) && isLowerAsciiLetter(codeB)) {\n            //\n            return diff;\n\n        } else {\n            return compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n        }\n    }\n\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n\n    return 0;\n}\n\n// Copied from https://github.com/microsoft/vscode/blob/1.72.2/src/vs/base/common/strings.ts\n\nexport function regExpFlags(regexp: RegExp): string {\n    return (regexp.global ? 'g' : '')\n        + (regexp.ignoreCase ? 'i' : '')\n        + (regexp.multiline ? 'm' : '')\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        + ((regexp as any /* standalone editor compilation */).unicode ? 'u' : '');\n}\n\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport class TelemetryTrustedValue<T> {\n    readonly value: T;\n\n    constructor(value: T) {\n        this.value = value;\n    }\n}\n\nexport interface TelemetryLogger {\n    readonly sender: TelemetrySender;\n    readonly options: TelemetryLoggerOptions | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logUsage(eventName: string, data?: Record<string, any | TelemetryTrustedValue<any>>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logError(eventNameOrException: string | Error, data?: Record<string, any | TelemetryTrustedValue<any>>): void;\n\n    dispose(): void;\n}\n\ninterface TelemetrySender {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendEventData(eventName: string, data?: Record<string, any>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendErrorData(error: Error, data?: Record<string, any>): void;\n    flush?(): void | Thenable<void>;\n}\n\ninterface TelemetryLoggerOptions {\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport { ArrayUtils } from './array-utils';\nexport { Prioritizeable } from './prioritizeable';\n\ntype UnknownObject<T extends object> = Record<string | number | symbol, unknown> & { [K in keyof T]: unknown };\n\nexport type Deferred<T> = { [P in keyof T]: Promise<T[P]> };\nexport type MaybeArray<T> = T | T[];\nexport type MaybeNull<T> = { [P in keyof T]: T[P] | null };\nexport type MaybePromise<T> = T | PromiseLike<T>;\nexport type MaybeUndefined<T> = { [P in keyof T]?: T[P] | undefined };\nexport type Mutable<T> = { -readonly [P in keyof T]: T[P] };\nexport type RecursivePartial<T> = {\n    [P in keyof T]?: T[P] extends (infer I)[]\n    ? RecursivePartial<I>[]\n    : RecursivePartial<T[P]>;\n};\n\nexport function isBoolean(value: unknown): value is boolean {\n    return value === true || value === false;\n}\n\nexport function isString(value: unknown): value is string {\n    return typeof value === 'string' || value instanceof String;\n}\n\nexport function isNumber(value: unknown): value is number {\n    return typeof value === 'number' || value instanceof Number;\n}\n\nexport function isError(value: unknown): value is Error {\n    return value instanceof Error;\n}\n\nexport function isErrorLike(value: unknown): value is Error {\n    return isObject(value) && isString(value.name) && isString(value.message) && (isUndefined(value.stack) || isString(value.stack));\n}\n\n// eslint-disable-next-line space-before-function-paren\nexport function isFunction<T extends (...args: unknown[]) => unknown>(value: unknown): value is T {\n    return typeof value === 'function';\n}\n\n/**\n * @returns whether the provided parameter is an empty JavaScript Object or not.\n */\nexport function isEmptyObject(obj: unknown): obj is object {\n    if (!isObject(obj)) {\n        return false;\n    }\n\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport function isObject<T extends object>(value: unknown): value is UnknownObject<T> {\n    // eslint-disable-next-line no-null/no-null\n    return typeof value === 'object' && value !== null;\n}\n\nexport function isUndefined(value: unknown): value is undefined {\n    return typeof value === 'undefined';\n}\n\n/**\n * @param value value to check.\n * @param every optional predicate ran on every element of the array.\n * @param thisArg value to substitute `this` with when invoking in the predicate.\n * @returns whether or not `value` is an array.\n */\nexport function isArray<T>(value: unknown, every?: (value: unknown) => unknown, thisArg?: unknown): value is T[] {\n    return Array.isArray(value) && (!isFunction(every) || value.every(every, thisArg));\n}\n\nexport function isStringArray(value: unknown): value is string[] {\n    return isArray(value, isString);\n}\n\n/**\n * Creates a shallow copy with all ownkeys of the original object that are `null` made `undefined`\n */\nexport function nullToUndefined<T>(nullable: MaybeNull<T>): MaybeUndefined<T> {\n    const undefinable = { ...nullable } as MaybeUndefined<T>;\n    for (const key in nullable) {\n        // eslint-disable-next-line no-null/no-null\n        if (nullable[key] === null && Object.prototype.hasOwnProperty.call(nullable, key)) {\n            undefinable[key] = undefined;\n        }\n    }\n    return undefinable;\n}\n\n/**\n * Throws when called and statically makes sure that all variants of a type were consumed.\n */\nexport function unreachable(_never: never, message: string = 'unhandled case'): never {\n    throw new Error(message);\n}\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Copied from https://github.com/microsoft/vscode/blob/1.72.2/src/vs/base/common/types.ts\n\n/**\n * @returns whether the provided parameter is defined.\n */\nexport function isDefined<T>(arg: T | null | undefined): arg is T {\n    return !isUndefinedOrNull(arg);\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: unknown): obj is undefined | null {\n    // eslint-disable-next-line no-null/no-null\n    return (isUndefined(obj) || obj === null);\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI as Uri } from 'vscode-uri';\nimport { Path } from './path';\n\nexport class URI {\n\n    public static fromComponents(components: UriComponents): URI {\n        return new URI(Uri.revive(components));\n    }\n\n    public static fromFilePath(path: string): URI {\n        return new URI(Uri.file(path));\n    }\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.fsPath();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * @returns a new, absolute URI if one can be computed from the path segments passed in.\n     */\n    resolveToAbsolute(...pathSegments: Array<string | Path>): URI | undefined {\n        const absolutePath = this.path.resolve(...pathSegments.map(path => path.toString()));\n        if (absolutePath) {\n            return this.withPath(absolutePath);\n        }\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqual(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n\n        return caseSensitive\n            ? this.toString() === uri.toString()\n            : this.toString().toLowerCase() === uri.toString().toLowerCase();\n    }\n\n    isEqualOrParent(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n        let left = this.path;\n        let right = uri.path;\n        if (!caseSensitive) {\n            left = new Path(left.toString().toLowerCase());\n            right = new Path(right.toString().toLowerCase());\n        }\n        return left.isEqualOrParent(right);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n    private hasSameOrigin(uri: URI): boolean {\n        return (this.authority === uri.authority) && (this.scheme === uri.scheme);\n    }\n\n    toComponents(): UriComponents {\n        return {\n            scheme: this.scheme,\n            authority: this.authority,\n            path: this.path.toString(),\n            query: this.query,\n            fragment: this.fragment\n        };\n    }\n}\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\nexport default URI;\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const THEIA_VERSION: string = require('../../package.json').version;\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n","module.exports = require('inversify');\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { getFirstArrayDuplicate } from '../utils/js';\r\nfunction targetIsConstructorFunction(target) {\r\n    return target.prototype !== undefined;\r\n}\r\nfunction _throwIfMethodParameter(parameterName) {\r\n    if (parameterName !== undefined) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n}\r\nfunction tagParameter(annotationTarget, parameterName, parameterIndex, metadata) {\r\n    _throwIfMethodParameter(parameterName);\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED, annotationTarget, parameterIndex.toString(), metadata);\r\n}\r\nfunction tagProperty(annotationTarget, propertyName, metadata) {\r\n    if (targetIsConstructorFunction(annotationTarget)) {\r\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\r\n    }\r\n    _tagParameterOrProperty(METADATA_KEY.TAGGED_PROP, annotationTarget.constructor, propertyName, metadata);\r\n}\r\nfunction _ensureNoMetadataKeyDuplicates(metadata) {\r\n    var metadatas = [];\r\n    if (Array.isArray(metadata)) {\r\n        metadatas = metadata;\r\n        var duplicate = getFirstArrayDuplicate(metadatas.map(function (md) { return md.key; }));\r\n        if (duplicate !== undefined) {\r\n            throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + duplicate.toString());\r\n        }\r\n    }\r\n    else {\r\n        metadatas = [metadata];\r\n    }\r\n    return metadatas;\r\n}\r\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, key, metadata) {\r\n    var metadatas = _ensureNoMetadataKeyDuplicates(metadata);\r\n    var paramsOrPropertiesMetadata = {};\r\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\r\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\r\n    }\r\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\r\n    if (paramOrPropertyMetadata === undefined) {\r\n        paramOrPropertyMetadata = [];\r\n    }\r\n    else {\r\n        var _loop_1 = function (m) {\r\n            if (metadatas.some(function (md) { return md.key === m.key; })) {\r\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\r\n            }\r\n        };\r\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\r\n            var m = paramOrPropertyMetadata_1[_i];\r\n            _loop_1(m);\r\n        }\r\n    }\r\n    paramOrPropertyMetadata.push.apply(paramOrPropertyMetadata, metadatas);\r\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\r\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\r\n}\r\nfunction createTaggedDecorator(metadata) {\r\n    return function (target, targetKey, indexOrPropertyDescriptor) {\r\n        if (typeof indexOrPropertyDescriptor === 'number') {\r\n            tagParameter(target, targetKey, indexOrPropertyDescriptor, metadata);\r\n        }\r\n        else {\r\n            tagProperty(target, targetKey, metadata);\r\n        }\r\n    };\r\n}\r\nfunction _decorate(decorators, target) {\r\n    Reflect.decorate(decorators, target);\r\n}\r\nfunction _param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); };\r\n}\r\nfunction decorate(decorator, target, parameterIndexOrProperty) {\r\n    if (typeof parameterIndexOrProperty === 'number') {\r\n        _decorate([_param(parameterIndexOrProperty, decorator)], target);\r\n    }\r\n    else if (typeof parameterIndexOrProperty === 'string') {\r\n        Reflect.decorate([decorator], target, parameterIndexOrProperty);\r\n    }\r\n    else {\r\n        _decorate([decorator], target);\r\n    }\r\n}\r\nexport { decorate, tagParameter, tagProperty, createTaggedDecorator };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { injectBase } from './inject_base';\r\nvar inject = injectBase(METADATA_KEY.INJECT_TAG);\r\nexport { inject };\r\n","import { UNDEFINED_INJECT_ANNOTATION } from '../constants/error_msgs';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nexport function injectBase(metadataKey) {\r\n    return function (serviceIdentifier) {\r\n        return function (target, targetKey, indexOrPropertyDescriptor) {\r\n            if (serviceIdentifier === undefined) {\r\n                var className = typeof target === 'function' ? target.name : target.constructor.name;\r\n                throw new Error(UNDEFINED_INJECT_ANNOTATION(className));\r\n            }\r\n            return createTaggedDecorator(new Metadata(metadataKey, serviceIdentifier))(target, targetKey, indexOrPropertyDescriptor);\r\n        };\r\n    };\r\n}\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nfunction injectable() {\r\n    return function (target) {\r\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\r\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\r\n        }\r\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\r\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\r\n        return target;\r\n    };\r\n}\r\nexport { injectable };\r\n","var LazyServiceIdentifier = (function () {\r\n    function LazyServiceIdentifier(cb) {\r\n        this._cb = cb;\r\n    }\r\n    LazyServiceIdentifier.prototype.unwrap = function () {\r\n        return this._cb();\r\n    };\r\n    return LazyServiceIdentifier;\r\n}());\r\nexport { LazyServiceIdentifier };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { injectBase } from './inject_base';\r\nvar multiInject = injectBase(METADATA_KEY.MULTI_INJECT_TAG);\r\nexport { multiInject };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction named(name) {\r\n    return createTaggedDecorator(new Metadata(METADATA_KEY.NAMED_TAG, name));\r\n}\r\nexport { named };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction optional() {\r\n    return createTaggedDecorator(new Metadata(METADATA_KEY.OPTIONAL_TAG, true));\r\n}\r\nexport { optional };\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { propertyEventDecorator } from './property_event_decorator';\r\nvar postConstruct = propertyEventDecorator(METADATA_KEY.POST_CONSTRUCT, ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\r\nexport { postConstruct };\r\n","import * as ERRORS_MSGS from '../constants/error_msgs';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { propertyEventDecorator } from './property_event_decorator';\r\nvar preDestroy = propertyEventDecorator(METADATA_KEY.PRE_DESTROY, ERRORS_MSGS.MULTIPLE_PRE_DESTROY_METHODS);\r\nexport { preDestroy };\r\n","import { Metadata } from '../planning/metadata';\r\nfunction propertyEventDecorator(eventKey, errorMessage) {\r\n    return function () {\r\n        return function (target, propertyKey) {\r\n            var metadata = new Metadata(eventKey, propertyKey);\r\n            if (Reflect.hasOwnMetadata(eventKey, target.constructor)) {\r\n                throw new Error(errorMessage);\r\n            }\r\n            Reflect.defineMetadata(eventKey, metadata, target.constructor);\r\n        };\r\n    };\r\n}\r\nexport { propertyEventDecorator };\r\n","import { Metadata } from '../planning/metadata';\r\nimport { createTaggedDecorator } from './decorator_utils';\r\nfunction tagged(metadataKey, metadataValue) {\r\n    return createTaggedDecorator(new Metadata(metadataKey, metadataValue));\r\n}\r\nexport { tagged };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { tagParameter } from './decorator_utils';\r\nfunction targetName(name) {\r\n    return function (target, targetKey, index) {\r\n        var metadata = new Metadata(METADATA_KEY.NAME_TAG, name);\r\n        tagParameter(target, targetKey, index, metadata);\r\n    };\r\n}\r\nexport { targetName };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nimport { tagParameter } from './decorator_utils';\r\nfunction unmanaged() {\r\n    return function (target, targetKey, index) {\r\n        var metadata = new Metadata(METADATA_KEY.UNMANAGED_TAG, true);\r\n        tagParameter(target, targetKey, index, metadata);\r\n    };\r\n}\r\nexport { unmanaged };\r\n","import { BindingScopeEnum, BindingTypeEnum } from '../constants/literal_types';\r\nimport { id } from '../utils/id';\r\nvar Binding = (function () {\r\n    function Binding(serviceIdentifier, scope) {\r\n        this.id = id();\r\n        this.activated = false;\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        this.scope = scope;\r\n        this.type = BindingTypeEnum.Invalid;\r\n        this.constraint = function (request) { return true; };\r\n        this.implementationType = null;\r\n        this.cache = null;\r\n        this.factory = null;\r\n        this.provider = null;\r\n        this.onActivation = null;\r\n        this.onDeactivation = null;\r\n        this.dynamicValue = null;\r\n    }\r\n    Binding.prototype.clone = function () {\r\n        var clone = new Binding(this.serviceIdentifier, this.scope);\r\n        clone.activated = (clone.scope === BindingScopeEnum.Singleton) ? this.activated : false;\r\n        clone.implementationType = this.implementationType;\r\n        clone.dynamicValue = this.dynamicValue;\r\n        clone.scope = this.scope;\r\n        clone.type = this.type;\r\n        clone.factory = this.factory;\r\n        clone.provider = this.provider;\r\n        clone.constraint = this.constraint;\r\n        clone.onActivation = this.onActivation;\r\n        clone.onDeactivation = this.onDeactivation;\r\n        clone.cache = this.cache;\r\n        return clone;\r\n    };\r\n    return Binding;\r\n}());\r\nexport { Binding };\r\n","export var BindingCount = {\r\n    MultipleBindingsAvailable: 2,\r\n    NoBindingsAvailable: 0,\r\n    OnlyOneBindingAvailable: 1\r\n};\r\n","export var DUPLICATED_INJECTABLE_DECORATOR = 'Cannot apply @injectable decorator multiple times.';\r\nexport var DUPLICATED_METADATA = 'Metadata key was used more than once in a parameter:';\r\nexport var NULL_ARGUMENT = 'NULL argument';\r\nexport var KEY_NOT_FOUND = 'Key Not Found';\r\nexport var AMBIGUOUS_MATCH = 'Ambiguous match found for serviceIdentifier:';\r\nexport var CANNOT_UNBIND = 'Could not unbind serviceIdentifier:';\r\nexport var NOT_REGISTERED = 'No matching bindings found for serviceIdentifier:';\r\nexport var MISSING_INJECTABLE_ANNOTATION = 'Missing required @injectable annotation in:';\r\nexport var MISSING_INJECT_ANNOTATION = 'Missing required @inject or @multiInject annotation in:';\r\nexport var UNDEFINED_INJECT_ANNOTATION = function (name) {\r\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\r\n        'a circular dependency problem. You can use a LazyServiceIdentifier to  ' +\r\n        'overcome this limitation.';\r\n};\r\nexport var CIRCULAR_DEPENDENCY = 'Circular dependency found:';\r\nexport var NOT_IMPLEMENTED = 'Sorry, this feature is not fully implemented yet.';\r\nexport var INVALID_BINDING_TYPE = 'Invalid binding type:';\r\nexport var NO_MORE_SNAPSHOTS_AVAILABLE = 'No snapshot available to restore.';\r\nexport var INVALID_MIDDLEWARE_RETURN = 'Invalid return type in middleware. Middleware must return!';\r\nexport var INVALID_FUNCTION_BINDING = 'Value provided to function binding must be a function!';\r\nexport var LAZY_IN_SYNC = function (key) { return \"You are attempting to construct '\" + key + \"' in a synchronous way\\n but it has asynchronous dependencies.\"; };\r\nexport var INVALID_TO_SELF_VALUE = 'The toSelf function can only be applied when a constructor is ' +\r\n    'used as service identifier';\r\nexport var INVALID_DECORATOR_OPERATION = 'The @inject @multiInject @tagged and @named decorators ' +\r\n    'must be applied to the parameters of a class constructor or a class property.';\r\nexport var ARGUMENTS_LENGTH_MISMATCH = function () {\r\n    var values = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        values[_i] = arguments[_i];\r\n    }\r\n    return 'The number of constructor arguments in the derived class ' +\r\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\r\n};\r\nexport var CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = 'Invalid Container constructor argument. Container options ' +\r\n    'must be an object.';\r\nexport var CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = 'Invalid Container option. Default scope must ' +\r\n    'be a string (\"singleton\" or \"transient\").';\r\nexport var CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = 'Invalid Container option. Auto bind injectable must ' +\r\n    'be a boolean';\r\nexport var CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = 'Invalid Container option. Skip base check must ' +\r\n    'be a boolean';\r\nexport var MULTIPLE_PRE_DESTROY_METHODS = 'Cannot apply @preDestroy decorator multiple times in the same class';\r\nexport var MULTIPLE_POST_CONSTRUCT_METHODS = 'Cannot apply @postConstruct decorator multiple times in the same class';\r\nexport var ASYNC_UNBIND_REQUIRED = 'Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)';\r\nexport var POST_CONSTRUCT_ERROR = function (clazz, errorMessage) { return \"@postConstruct error in class \" + clazz + \": \" + errorMessage; };\r\nexport var PRE_DESTROY_ERROR = function (clazz, errorMessage) { return \"@preDestroy error in class \" + clazz + \": \" + errorMessage; };\r\nexport var ON_DEACTIVATION_ERROR = function (clazz, errorMessage) { return \"onDeactivation() error in class \" + clazz + \": \" + errorMessage; };\r\nexport var CIRCULAR_DEPENDENCY_IN_FACTORY = function (factoryType, serviceIdentifier) {\r\n    return \"It looks like there is a circular dependency in one of the '\" + factoryType + \"' bindings. Please investigate bindings with \" +\r\n        (\"service identifier '\" + serviceIdentifier + \"'.\");\r\n};\r\nexport var STACK_OVERFLOW = 'Maximum call stack size exceeded';\r\n","var BindingScopeEnum = {\r\n    Request: 'Request',\r\n    Singleton: 'Singleton',\r\n    Transient: 'Transient'\r\n};\r\nvar BindingTypeEnum = {\r\n    ConstantValue: 'ConstantValue',\r\n    Constructor: 'Constructor',\r\n    DynamicValue: 'DynamicValue',\r\n    Factory: 'Factory',\r\n    Function: 'Function',\r\n    Instance: 'Instance',\r\n    Invalid: 'Invalid',\r\n    Provider: 'Provider'\r\n};\r\nvar TargetTypeEnum = {\r\n    ClassProperty: 'ClassProperty',\r\n    ConstructorArgument: 'ConstructorArgument',\r\n    Variable: 'Variable'\r\n};\r\nexport { BindingScopeEnum, BindingTypeEnum, TargetTypeEnum };\r\n","export var NAMED_TAG = 'named';\r\nexport var NAME_TAG = 'name';\r\nexport var UNMANAGED_TAG = 'unmanaged';\r\nexport var OPTIONAL_TAG = 'optional';\r\nexport var INJECT_TAG = 'inject';\r\nexport var MULTI_INJECT_TAG = 'multi_inject';\r\nexport var TAGGED = 'inversify:tagged';\r\nexport var TAGGED_PROP = 'inversify:tagged_props';\r\nexport var PARAM_TYPES = 'inversify:paramtypes';\r\nexport var DESIGN_PARAM_TYPES = 'design:paramtypes';\r\nexport var POST_CONSTRUCT = 'post_construct';\r\nexport var PRE_DESTROY = 'pre_destroy';\r\nfunction getNonCustomTagKeys() {\r\n    return [\r\n        INJECT_TAG,\r\n        MULTI_INJECT_TAG,\r\n        NAME_TAG,\r\n        UNMANAGED_TAG,\r\n        NAMED_TAG,\r\n        OPTIONAL_TAG,\r\n    ];\r\n}\r\nexport var NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { Binding } from '../bindings/binding';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingScopeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { MetadataReader } from '../planning/metadata_reader';\r\nimport { createMockRequest, getBindingDictionary, plan } from '../planning/planner';\r\nimport { resolve } from '../resolution/resolver';\r\nimport { BindingToSyntax } from '../syntax/binding_to_syntax';\r\nimport { isPromise, isPromiseOrContainsPromise } from '../utils/async';\r\nimport { id } from '../utils/id';\r\nimport { getServiceIdentifierAsString } from '../utils/serialization';\r\nimport { ContainerSnapshot } from './container_snapshot';\r\nimport { Lookup } from './lookup';\r\nimport { ModuleActivationStore } from './module_activation_store';\r\nvar Container = (function () {\r\n    function Container(containerOptions) {\r\n        var options = containerOptions || {};\r\n        if (typeof options !== 'object') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\r\n        }\r\n        if (options.defaultScope === undefined) {\r\n            options.defaultScope = BindingScopeEnum.Transient;\r\n        }\r\n        else if (options.defaultScope !== BindingScopeEnum.Singleton &&\r\n            options.defaultScope !== BindingScopeEnum.Transient &&\r\n            options.defaultScope !== BindingScopeEnum.Request) {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\r\n        }\r\n        if (options.autoBindInjectable === undefined) {\r\n            options.autoBindInjectable = false;\r\n        }\r\n        else if (typeof options.autoBindInjectable !== 'boolean') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\r\n        }\r\n        if (options.skipBaseClassChecks === undefined) {\r\n            options.skipBaseClassChecks = false;\r\n        }\r\n        else if (typeof options.skipBaseClassChecks !== 'boolean') {\r\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\r\n        }\r\n        this.options = {\r\n            autoBindInjectable: options.autoBindInjectable,\r\n            defaultScope: options.defaultScope,\r\n            skipBaseClassChecks: options.skipBaseClassChecks\r\n        };\r\n        this.id = id();\r\n        this._bindingDictionary = new Lookup();\r\n        this._snapshots = [];\r\n        this._middleware = null;\r\n        this._activations = new Lookup();\r\n        this._deactivations = new Lookup();\r\n        this.parent = null;\r\n        this._metadataReader = new MetadataReader();\r\n        this._moduleActivationStore = new ModuleActivationStore();\r\n    }\r\n    Container.merge = function (container1, container2) {\r\n        var containers = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            containers[_i - 2] = arguments[_i];\r\n        }\r\n        var container = new Container();\r\n        var targetContainers = __spreadArray([container1, container2], containers, true).map(function (targetContainer) { return getBindingDictionary(targetContainer); });\r\n        var bindingDictionary = getBindingDictionary(container);\r\n        function copyDictionary(origin, destination) {\r\n            origin.traverse(function (_key, value) {\r\n                value.forEach(function (binding) {\r\n                    destination.add(binding.serviceIdentifier, binding.clone());\r\n                });\r\n            });\r\n        }\r\n        targetContainers.forEach(function (targetBindingDictionary) {\r\n            copyDictionary(targetBindingDictionary, bindingDictionary);\r\n        });\r\n        return container;\r\n    };\r\n    Container.prototype.load = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        var getHelpers = this._getContainerModuleHelpersFactory();\r\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\r\n            var currentModule = modules_1[_a];\r\n            var containerModuleHelpers = getHelpers(currentModule.id);\r\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction);\r\n        }\r\n    };\r\n    Container.prototype.loadAsync = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        getHelpers = this._getContainerModuleHelpersFactory();\r\n                        _a = 0, modules_2 = modules;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_a < modules_2.length)) return [3, 4];\r\n                        currentModule = modules_2[_a];\r\n                        containerModuleHelpers = getHelpers(currentModule.id);\r\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction, containerModuleHelpers.unbindAsyncFunction, containerModuleHelpers.onActivationFunction, containerModuleHelpers.onDeactivationFunction)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _a++;\r\n                        return [3, 1];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unload = function () {\r\n        var _this = this;\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        modules.forEach(function (module) {\r\n            var deactivations = _this._removeModuleBindings(module.id);\r\n            _this._deactivateSingletons(deactivations);\r\n            _this._removeModuleHandlers(module.id);\r\n        });\r\n    };\r\n    Container.prototype.unloadAsync = function () {\r\n        var modules = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            modules[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, modules_3, module_1, deactivations;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = 0, modules_3 = modules;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_a < modules_3.length)) return [3, 4];\r\n                        module_1 = modules_3[_a];\r\n                        deactivations = this._removeModuleBindings(module_1.id);\r\n                        return [4, this._deactivateSingletonsAsync(deactivations)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        this._removeModuleHandlers(module_1.id);\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _a++;\r\n                        return [3, 1];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.bind = function (serviceIdentifier) {\r\n        var scope = this.options.defaultScope || BindingScopeEnum.Transient;\r\n        var binding = new Binding(serviceIdentifier, scope);\r\n        this._bindingDictionary.add(serviceIdentifier, binding);\r\n        return new BindingToSyntax(binding);\r\n    };\r\n    Container.prototype.rebind = function (serviceIdentifier) {\r\n        this.unbind(serviceIdentifier);\r\n        return this.bind(serviceIdentifier);\r\n    };\r\n    Container.prototype.rebindAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, this.unbindAsync(serviceIdentifier)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2, this.bind(serviceIdentifier)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unbind = function (serviceIdentifier) {\r\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\r\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\r\n            this._deactivateSingletons(bindings);\r\n        }\r\n        this._removeServiceFromDictionary(serviceIdentifier);\r\n    };\r\n    Container.prototype.unbindAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var bindings;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._bindingDictionary.hasKey(serviceIdentifier)) return [3, 2];\r\n                        bindings = this._bindingDictionary.get(serviceIdentifier);\r\n                        return [4, this._deactivateSingletonsAsync(bindings)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        this._removeServiceFromDictionary(serviceIdentifier);\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.unbindAll = function () {\r\n        var _this = this;\r\n        this._bindingDictionary.traverse(function (_key, value) {\r\n            _this._deactivateSingletons(value);\r\n        });\r\n        this._bindingDictionary = new Lookup();\r\n    };\r\n    Container.prototype.unbindAllAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        this._bindingDictionary.traverse(function (_key, value) {\r\n                            promises.push(_this._deactivateSingletonsAsync(value));\r\n                        });\r\n                        return [4, Promise.all(promises)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this._bindingDictionary = new Lookup();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.onActivation = function (serviceIdentifier, onActivation) {\r\n        this._activations.add(serviceIdentifier, onActivation);\r\n    };\r\n    Container.prototype.onDeactivation = function (serviceIdentifier, onDeactivation) {\r\n        this._deactivations.add(serviceIdentifier, onDeactivation);\r\n    };\r\n    Container.prototype.isBound = function (serviceIdentifier) {\r\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\r\n        if (!bound && this.parent) {\r\n            bound = this.parent.isBound(serviceIdentifier);\r\n        }\r\n        return bound;\r\n    };\r\n    Container.prototype.isCurrentBound = function (serviceIdentifier) {\r\n        return this._bindingDictionary.hasKey(serviceIdentifier);\r\n    };\r\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\r\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\r\n        var bound = false;\r\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\r\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\r\n            var request_1 = createMockRequest(this, serviceIdentifier, key, value);\r\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\r\n        }\r\n        if (!bound && this.parent) {\r\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\r\n        }\r\n        return bound;\r\n    };\r\n    Container.prototype.snapshot = function () {\r\n        this._snapshots.push(ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware, this._activations.clone(), this._deactivations.clone(), this._moduleActivationStore.clone()));\r\n    };\r\n    Container.prototype.restore = function () {\r\n        var snapshot = this._snapshots.pop();\r\n        if (snapshot === undefined) {\r\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\r\n        }\r\n        this._bindingDictionary = snapshot.bindings;\r\n        this._activations = snapshot.activations;\r\n        this._deactivations = snapshot.deactivations;\r\n        this._middleware = snapshot.middleware;\r\n        this._moduleActivationStore = snapshot.moduleActivationStore;\r\n    };\r\n    Container.prototype.createChild = function (containerOptions) {\r\n        var child = new Container(containerOptions || this.options);\r\n        child.parent = this;\r\n        return child;\r\n    };\r\n    Container.prototype.applyMiddleware = function () {\r\n        var middlewares = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            middlewares[_i] = arguments[_i];\r\n        }\r\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\r\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\r\n    };\r\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\r\n        this._metadataReader = metadataReader;\r\n    };\r\n    Container.prototype.get = function (serviceIdentifier) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, false);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAsync = function (serviceIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getArgs;\r\n            return __generator(this, function (_a) {\r\n                getArgs = this._getNotAllArgs(serviceIdentifier, false);\r\n                return [2, this._get(getArgs)];\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getTaggedAsync = function (serviceIdentifier, key, value) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var getArgs;\r\n            return __generator(this, function (_a) {\r\n                getArgs = this._getNotAllArgs(serviceIdentifier, false, key, value);\r\n                return [2, this._get(getArgs)];\r\n            });\r\n        });\r\n    };\r\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\r\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getNamedAsync = function (serviceIdentifier, named) {\r\n        return this.getTaggedAsync(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getAll = function (serviceIdentifier) {\r\n        var getArgs = this._getAllArgs(serviceIdentifier);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAllAsync = function (serviceIdentifier) {\r\n        var getArgs = this._getAllArgs(serviceIdentifier);\r\n        return this._getAll(getArgs);\r\n    };\r\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);\r\n        return this._getButThrowIfAsync(getArgs);\r\n    };\r\n    Container.prototype.getAllTaggedAsync = function (serviceIdentifier, key, value) {\r\n        var getArgs = this._getNotAllArgs(serviceIdentifier, true, key, value);\r\n        return this._getAll(getArgs);\r\n    };\r\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\r\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.getAllNamedAsync = function (serviceIdentifier, named) {\r\n        return this.getAllTaggedAsync(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\r\n    };\r\n    Container.prototype.resolve = function (constructorFunction) {\r\n        var isBound = this.isBound(constructorFunction);\r\n        if (!isBound) {\r\n            this.bind(constructorFunction).toSelf();\r\n        }\r\n        var resolved = this.get(constructorFunction);\r\n        if (!isBound) {\r\n            this.unbind(constructorFunction);\r\n        }\r\n        return resolved;\r\n    };\r\n    Container.prototype._preDestroy = function (constructor, instance) {\r\n        var _a, _b;\r\n        if (Reflect.hasMetadata(METADATA_KEY.PRE_DESTROY, constructor)) {\r\n            var data = Reflect.getMetadata(METADATA_KEY.PRE_DESTROY, constructor);\r\n            return (_b = (_a = instance)[data.value]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n    };\r\n    Container.prototype._removeModuleHandlers = function (moduleId) {\r\n        var moduleActivationsHandlers = this._moduleActivationStore.remove(moduleId);\r\n        this._activations.removeIntersection(moduleActivationsHandlers.onActivations);\r\n        this._deactivations.removeIntersection(moduleActivationsHandlers.onDeactivations);\r\n    };\r\n    Container.prototype._removeModuleBindings = function (moduleId) {\r\n        return this._bindingDictionary.removeByCondition(function (binding) { return binding.moduleId === moduleId; });\r\n    };\r\n    Container.prototype._deactivate = function (binding, instance) {\r\n        var _this = this;\r\n        var constructor = Object.getPrototypeOf(instance).constructor;\r\n        try {\r\n            if (this._deactivations.hasKey(binding.serviceIdentifier)) {\r\n                var result = this._deactivateContainer(instance, this._deactivations.get(binding.serviceIdentifier).values());\r\n                if (isPromise(result)) {\r\n                    return this._handleDeactivationError(result.then(function () { return _this._propagateContainerDeactivationThenBindingAndPreDestroyAsync(binding, instance, constructor); }), constructor);\r\n                }\r\n            }\r\n            var propagateDeactivationResult = this._propagateContainerDeactivationThenBindingAndPreDestroy(binding, instance, constructor);\r\n            if (isPromise(propagateDeactivationResult)) {\r\n                return this._handleDeactivationError(propagateDeactivationResult, constructor);\r\n            }\r\n        }\r\n        catch (ex) {\r\n            if (ex instanceof Error) {\r\n                throw new Error(ERROR_MSGS.ON_DEACTIVATION_ERROR(constructor.name, ex.message));\r\n            }\r\n        }\r\n    };\r\n    Container.prototype._handleDeactivationError = function (asyncResult, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4, asyncResult];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3, 3];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        if (ex_1 instanceof Error) {\r\n                            throw new Error(ERROR_MSGS.ON_DEACTIVATION_ERROR(constructor.name, ex_1.message));\r\n                        }\r\n                        return [3, 3];\r\n                    case 3: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._deactivateContainer = function (instance, deactivationsIterator) {\r\n        var _this = this;\r\n        var deactivation = deactivationsIterator.next();\r\n        while (deactivation.value) {\r\n            var result = deactivation.value(instance);\r\n            if (isPromise(result)) {\r\n                return result.then(function () {\r\n                    return _this._deactivateContainerAsync(instance, deactivationsIterator);\r\n                });\r\n            }\r\n            deactivation = deactivationsIterator.next();\r\n        }\r\n    };\r\n    Container.prototype._deactivateContainerAsync = function (instance, deactivationsIterator) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var deactivation;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        deactivation = deactivationsIterator.next();\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!deactivation.value) return [3, 3];\r\n                        return [4, deactivation.value(instance)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        deactivation = deactivationsIterator.next();\r\n                        return [3, 1];\r\n                    case 3: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._getContainerModuleHelpersFactory = function () {\r\n        var _this = this;\r\n        var setModuleId = function (bindingToSyntax, moduleId) {\r\n            bindingToSyntax._binding.moduleId = moduleId;\r\n        };\r\n        var getBindFunction = function (moduleId) {\r\n            return function (serviceIdentifier) {\r\n                var bindingToSyntax = _this.bind(serviceIdentifier);\r\n                setModuleId(bindingToSyntax, moduleId);\r\n                return bindingToSyntax;\r\n            };\r\n        };\r\n        var getUnbindFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.unbind(serviceIdentifier);\r\n            };\r\n        };\r\n        var getUnbindAsyncFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.unbindAsync(serviceIdentifier);\r\n            };\r\n        };\r\n        var getIsboundFunction = function () {\r\n            return function (serviceIdentifier) {\r\n                return _this.isBound(serviceIdentifier);\r\n            };\r\n        };\r\n        var getRebindFunction = function (moduleId) {\r\n            return function (serviceIdentifier) {\r\n                var bindingToSyntax = _this.rebind(serviceIdentifier);\r\n                setModuleId(bindingToSyntax, moduleId);\r\n                return bindingToSyntax;\r\n            };\r\n        };\r\n        var getOnActivationFunction = function (moduleId) {\r\n            return function (serviceIdentifier, onActivation) {\r\n                _this._moduleActivationStore.addActivation(moduleId, serviceIdentifier, onActivation);\r\n                _this.onActivation(serviceIdentifier, onActivation);\r\n            };\r\n        };\r\n        var getOnDeactivationFunction = function (moduleId) {\r\n            return function (serviceIdentifier, onDeactivation) {\r\n                _this._moduleActivationStore.addDeactivation(moduleId, serviceIdentifier, onDeactivation);\r\n                _this.onDeactivation(serviceIdentifier, onDeactivation);\r\n            };\r\n        };\r\n        return function (mId) { return ({\r\n            bindFunction: getBindFunction(mId),\r\n            isboundFunction: getIsboundFunction(),\r\n            onActivationFunction: getOnActivationFunction(mId),\r\n            onDeactivationFunction: getOnDeactivationFunction(mId),\r\n            rebindFunction: getRebindFunction(mId),\r\n            unbindFunction: getUnbindFunction(),\r\n            unbindAsyncFunction: getUnbindAsyncFunction()\r\n        }); };\r\n    };\r\n    Container.prototype._getAll = function (getArgs) {\r\n        return Promise.all(this._get(getArgs));\r\n    };\r\n    Container.prototype._get = function (getArgs) {\r\n        var planAndResolveArgs = __assign(__assign({}, getArgs), { contextInterceptor: function (context) { return context; }, targetType: TargetTypeEnum.Variable });\r\n        if (this._middleware) {\r\n            var middlewareResult = this._middleware(planAndResolveArgs);\r\n            if (middlewareResult === undefined || middlewareResult === null) {\r\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\r\n            }\r\n            return middlewareResult;\r\n        }\r\n        return this._planAndResolve()(planAndResolveArgs);\r\n    };\r\n    Container.prototype._getButThrowIfAsync = function (getArgs) {\r\n        var result = this._get(getArgs);\r\n        if (isPromiseOrContainsPromise(result)) {\r\n            throw new Error(ERROR_MSGS.LAZY_IN_SYNC(getArgs.serviceIdentifier));\r\n        }\r\n        return result;\r\n    };\r\n    Container.prototype._getAllArgs = function (serviceIdentifier) {\r\n        var getAllArgs = {\r\n            avoidConstraints: true,\r\n            isMultiInject: true,\r\n            serviceIdentifier: serviceIdentifier,\r\n        };\r\n        return getAllArgs;\r\n    };\r\n    Container.prototype._getNotAllArgs = function (serviceIdentifier, isMultiInject, key, value) {\r\n        var getNotAllArgs = {\r\n            avoidConstraints: false,\r\n            isMultiInject: isMultiInject,\r\n            serviceIdentifier: serviceIdentifier,\r\n            key: key,\r\n            value: value,\r\n        };\r\n        return getNotAllArgs;\r\n    };\r\n    Container.prototype._planAndResolve = function () {\r\n        var _this = this;\r\n        return function (args) {\r\n            var context = plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\r\n            context = args.contextInterceptor(context);\r\n            var result = resolve(context);\r\n            return result;\r\n        };\r\n    };\r\n    Container.prototype._deactivateIfSingleton = function (binding) {\r\n        var _this = this;\r\n        if (!binding.activated) {\r\n            return;\r\n        }\r\n        if (isPromise(binding.cache)) {\r\n            return binding.cache.then(function (resolved) { return _this._deactivate(binding, resolved); });\r\n        }\r\n        return this._deactivate(binding, binding.cache);\r\n    };\r\n    Container.prototype._deactivateSingletons = function (bindings) {\r\n        for (var _i = 0, bindings_1 = bindings; _i < bindings_1.length; _i++) {\r\n            var binding = bindings_1[_i];\r\n            var result = this._deactivateIfSingleton(binding);\r\n            if (isPromise(result)) {\r\n                throw new Error(ERROR_MSGS.ASYNC_UNBIND_REQUIRED);\r\n            }\r\n        }\r\n    };\r\n    Container.prototype._deactivateSingletonsAsync = function (bindings) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4, Promise.all(bindings.map(function (b) { return _this._deactivateIfSingleton(b); }))];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroy = function (binding, instance, constructor) {\r\n        if (this.parent) {\r\n            return this._deactivate.bind(this.parent)(binding, instance);\r\n        }\r\n        else {\r\n            return this._bindingDeactivationAndPreDestroy(binding, instance, constructor);\r\n        }\r\n    };\r\n    Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync = function (binding, instance, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.parent) return [3, 2];\r\n                        return [4, this._deactivate.bind(this.parent)(binding, instance)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3, 4];\r\n                    case 2: return [4, this._bindingDeactivationAndPreDestroyAsync(binding, instance, constructor)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Container.prototype._removeServiceFromDictionary = function (serviceIdentifier) {\r\n        try {\r\n            this._bindingDictionary.remove(serviceIdentifier);\r\n        }\r\n        catch (e) {\r\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + getServiceIdentifierAsString(serviceIdentifier));\r\n        }\r\n    };\r\n    Container.prototype._bindingDeactivationAndPreDestroy = function (binding, instance, constructor) {\r\n        var _this = this;\r\n        if (typeof binding.onDeactivation === 'function') {\r\n            var result = binding.onDeactivation(instance);\r\n            if (isPromise(result)) {\r\n                return result.then(function () { return _this._preDestroy(constructor, instance); });\r\n            }\r\n        }\r\n        return this._preDestroy(constructor, instance);\r\n    };\r\n    Container.prototype._bindingDeactivationAndPreDestroyAsync = function (binding, instance, constructor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(typeof binding.onDeactivation === 'function')) return [3, 2];\r\n                        return [4, binding.onDeactivation(instance)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [4, this._preDestroy(constructor, instance)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Container;\r\n}());\r\nexport { Container };\r\n","import { id } from '../utils/id';\r\nvar ContainerModule = (function () {\r\n    function ContainerModule(registry) {\r\n        this.id = id();\r\n        this.registry = registry;\r\n    }\r\n    return ContainerModule;\r\n}());\r\nexport { ContainerModule };\r\nvar AsyncContainerModule = (function () {\r\n    function AsyncContainerModule(registry) {\r\n        this.id = id();\r\n        this.registry = registry;\r\n    }\r\n    return AsyncContainerModule;\r\n}());\r\nexport { AsyncContainerModule };\r\n","var ContainerSnapshot = (function () {\r\n    function ContainerSnapshot() {\r\n    }\r\n    ContainerSnapshot.of = function (bindings, middleware, activations, deactivations, moduleActivationStore) {\r\n        var snapshot = new ContainerSnapshot();\r\n        snapshot.bindings = bindings;\r\n        snapshot.middleware = middleware;\r\n        snapshot.deactivations = deactivations;\r\n        snapshot.activations = activations;\r\n        snapshot.moduleActivationStore = moduleActivationStore;\r\n        return snapshot;\r\n    };\r\n    return ContainerSnapshot;\r\n}());\r\nexport { ContainerSnapshot };\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { isClonable } from '../utils/clonable';\r\nvar Lookup = (function () {\r\n    function Lookup() {\r\n        this._map = new Map();\r\n    }\r\n    Lookup.prototype.getMap = function () {\r\n        return this._map;\r\n    };\r\n    Lookup.prototype.add = function (serviceIdentifier, value) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        if (value === null || value === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        var entry = this._map.get(serviceIdentifier);\r\n        if (entry !== undefined) {\r\n            entry.push(value);\r\n        }\r\n        else {\r\n            this._map.set(serviceIdentifier, [value]);\r\n        }\r\n    };\r\n    Lookup.prototype.get = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        var entry = this._map.get(serviceIdentifier);\r\n        if (entry !== undefined) {\r\n            return entry;\r\n        }\r\n        else {\r\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\r\n        }\r\n    };\r\n    Lookup.prototype.remove = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        if (!this._map.delete(serviceIdentifier)) {\r\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\r\n        }\r\n    };\r\n    Lookup.prototype.removeIntersection = function (lookup) {\r\n        var _this = this;\r\n        this.traverse(function (serviceIdentifier, value) {\r\n            var lookupActivations = lookup.hasKey(serviceIdentifier) ? lookup.get(serviceIdentifier) : undefined;\r\n            if (lookupActivations !== undefined) {\r\n                var filteredValues = value.filter(function (lookupValue) {\r\n                    return !lookupActivations.some(function (moduleActivation) { return lookupValue === moduleActivation; });\r\n                });\r\n                _this._setValue(serviceIdentifier, filteredValues);\r\n            }\r\n        });\r\n    };\r\n    Lookup.prototype.removeByCondition = function (condition) {\r\n        var _this = this;\r\n        var removals = [];\r\n        this._map.forEach(function (entries, key) {\r\n            var updatedEntries = [];\r\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                var entry = entries_1[_i];\r\n                var remove = condition(entry);\r\n                if (remove) {\r\n                    removals.push(entry);\r\n                }\r\n                else {\r\n                    updatedEntries.push(entry);\r\n                }\r\n            }\r\n            _this._setValue(key, updatedEntries);\r\n        });\r\n        return removals;\r\n    };\r\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\r\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\r\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\r\n        }\r\n        return this._map.has(serviceIdentifier);\r\n    };\r\n    Lookup.prototype.clone = function () {\r\n        var copy = new Lookup();\r\n        this._map.forEach(function (value, key) {\r\n            value.forEach(function (b) { return copy.add(key, isClonable(b) ? b.clone() : b); });\r\n        });\r\n        return copy;\r\n    };\r\n    Lookup.prototype.traverse = function (func) {\r\n        this._map.forEach(function (value, key) {\r\n            func(key, value);\r\n        });\r\n    };\r\n    Lookup.prototype._setValue = function (serviceIdentifier, value) {\r\n        if (value.length > 0) {\r\n            this._map.set(serviceIdentifier, value);\r\n        }\r\n        else {\r\n            this._map.delete(serviceIdentifier);\r\n        }\r\n    };\r\n    return Lookup;\r\n}());\r\nexport { Lookup };\r\n","import { Lookup } from './lookup';\r\nvar ModuleActivationStore = (function () {\r\n    function ModuleActivationStore() {\r\n        this._map = new Map();\r\n    }\r\n    ModuleActivationStore.prototype.remove = function (moduleId) {\r\n        if (this._map.has(moduleId)) {\r\n            var handlers = this._map.get(moduleId);\r\n            this._map.delete(moduleId);\r\n            return handlers;\r\n        }\r\n        return this._getEmptyHandlersStore();\r\n    };\r\n    ModuleActivationStore.prototype.addDeactivation = function (moduleId, serviceIdentifier, onDeactivation) {\r\n        this._getModuleActivationHandlers(moduleId)\r\n            .onDeactivations.add(serviceIdentifier, onDeactivation);\r\n    };\r\n    ModuleActivationStore.prototype.addActivation = function (moduleId, serviceIdentifier, onActivation) {\r\n        this._getModuleActivationHandlers(moduleId)\r\n            .onActivations.add(serviceIdentifier, onActivation);\r\n    };\r\n    ModuleActivationStore.prototype.clone = function () {\r\n        var clone = new ModuleActivationStore();\r\n        this._map.forEach(function (handlersStore, moduleId) {\r\n            clone._map.set(moduleId, {\r\n                onActivations: handlersStore.onActivations.clone(),\r\n                onDeactivations: handlersStore.onDeactivations.clone(),\r\n            });\r\n        });\r\n        return clone;\r\n    };\r\n    ModuleActivationStore.prototype._getModuleActivationHandlers = function (moduleId) {\r\n        var moduleActivationHandlers = this._map.get(moduleId);\r\n        if (moduleActivationHandlers === undefined) {\r\n            moduleActivationHandlers = this._getEmptyHandlersStore();\r\n            this._map.set(moduleId, moduleActivationHandlers);\r\n        }\r\n        return moduleActivationHandlers;\r\n    };\r\n    ModuleActivationStore.prototype._getEmptyHandlersStore = function () {\r\n        var handlersStore = {\r\n            onActivations: new Lookup(),\r\n            onDeactivations: new Lookup()\r\n        };\r\n        return handlersStore;\r\n    };\r\n    return ModuleActivationStore;\r\n}());\r\nexport { ModuleActivationStore };\r\n","var interfaces;\r\n(function (interfaces) {\r\n    ;\r\n})(interfaces || (interfaces = {}));\r\nexport { interfaces };\r\n","import * as keys from './constants/metadata_keys';\r\nexport var METADATA_KEY = keys;\r\nexport { Container } from './container/container';\r\nexport { BindingScopeEnum, BindingTypeEnum, TargetTypeEnum } from './constants/literal_types';\r\nexport { AsyncContainerModule, ContainerModule } from './container/container_module';\r\nexport { createTaggedDecorator } from './annotation/decorator_utils';\r\nexport { injectable } from './annotation/injectable';\r\nexport { tagged } from './annotation/tagged';\r\nexport { named } from './annotation/named';\r\nexport { inject } from './annotation/inject';\r\nexport { LazyServiceIdentifier } from './annotation/lazy_service_identifier';\r\nexport { LazyServiceIdentifier as LazyServiceIdentifer } from './annotation/lazy_service_identifier';\r\nexport { optional } from './annotation/optional';\r\nexport { unmanaged } from './annotation/unmanaged';\r\nexport { multiInject } from './annotation/multi_inject';\r\nexport { targetName } from './annotation/target_name';\r\nexport { postConstruct } from './annotation/post_construct';\r\nexport { preDestroy } from './annotation/pre_destroy';\r\nexport { MetadataReader } from './planning/metadata_reader';\r\nexport { id } from './utils/id';\r\nexport { interfaces } from './interfaces/interfaces';\r\nexport { decorate } from './annotation/decorator_utils';\r\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint } from './syntax/constraint_helpers';\r\nexport { getServiceIdentifierAsString } from './utils/serialization';\r\nexport { multiBindToService } from './utils/binding_utils';\r\n","import { id } from '../utils/id';\r\nvar Context = (function () {\r\n    function Context(container) {\r\n        this.id = id();\r\n        this.container = container;\r\n    }\r\n    Context.prototype.addPlan = function (plan) {\r\n        this.plan = plan;\r\n    };\r\n    Context.prototype.setCurrentRequest = function (currentRequest) {\r\n        this.currentRequest = currentRequest;\r\n    };\r\n    return Context;\r\n}());\r\nexport { Context };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nvar Metadata = (function () {\r\n    function Metadata(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n    }\r\n    Metadata.prototype.toString = function () {\r\n        if (this.key === METADATA_KEY.NAMED_TAG) {\r\n            return \"named: \" + String(this.value).toString() + \" \";\r\n        }\r\n        else {\r\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + String(this.value) + \" }\";\r\n        }\r\n    };\r\n    return Metadata;\r\n}());\r\nexport { Metadata };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nvar MetadataReader = (function () {\r\n    function MetadataReader() {\r\n    }\r\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\r\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\r\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\r\n        return {\r\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\r\n            userGeneratedMetadata: userGeneratedMetadata || {}\r\n        };\r\n    };\r\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\r\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\r\n        return userGeneratedMetadata;\r\n    };\r\n    return MetadataReader;\r\n}());\r\nexport { MetadataReader };\r\n","var Plan = (function () {\r\n    function Plan(parentContext, rootRequest) {\r\n        this.parentContext = parentContext;\r\n        this.rootRequest = rootRequest;\r\n    }\r\n    return Plan;\r\n}());\r\nexport { Plan };\r\n","import { BindingCount } from '../bindings/binding_count';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { isStackOverflowExeption } from '../utils/exceptions';\r\nimport { circularDependencyToException, getServiceIdentifierAsString, listMetadataForTarget, listRegisteredBindingsForServiceIdentifier } from '../utils/serialization';\r\nimport { Context } from './context';\r\nimport { Metadata } from './metadata';\r\nimport { Plan } from './plan';\r\nimport { getBaseClassDependencyCount, getDependencies, getFunctionName } from './reflection_utils';\r\nimport { Request } from './request';\r\nimport { Target } from './target';\r\nfunction getBindingDictionary(cntnr) {\r\n    return cntnr._bindingDictionary;\r\n}\r\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\r\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\r\n    var injectMetadata = new Metadata(metadataKey, serviceIdentifier);\r\n    var target = new Target(targetType, name, serviceIdentifier, injectMetadata);\r\n    if (key !== undefined) {\r\n        var tagMetadata = new Metadata(key, value);\r\n        target.metadata.push(tagMetadata);\r\n    }\r\n    return target;\r\n}\r\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\r\n    var bindings = getBindings(context.container, target.serviceIdentifier);\r\n    var activeBindings = [];\r\n    if (bindings.length === BindingCount.NoBindingsAvailable &&\r\n        context.container.options.autoBindInjectable &&\r\n        typeof target.serviceIdentifier === 'function' &&\r\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\r\n        context.container.bind(target.serviceIdentifier).toSelf();\r\n        bindings = getBindings(context.container, target.serviceIdentifier);\r\n    }\r\n    if (!avoidConstraints) {\r\n        activeBindings = bindings.filter(function (binding) {\r\n            var request = new Request(binding.serviceIdentifier, context, parentRequest, binding, target);\r\n            return binding.constraint(request);\r\n        });\r\n    }\r\n    else {\r\n        activeBindings = bindings;\r\n    }\r\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\r\n    return activeBindings;\r\n}\r\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\r\n    switch (bindings.length) {\r\n        case BindingCount.NoBindingsAvailable:\r\n            if (target.isOptional()) {\r\n                return bindings;\r\n            }\r\n            else {\r\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\r\n                var msg = ERROR_MSGS.NOT_REGISTERED;\r\n                msg += listMetadataForTarget(serviceIdentifierString, target);\r\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\r\n                throw new Error(msg);\r\n            }\r\n        case BindingCount.OnlyOneBindingAvailable:\r\n            return bindings;\r\n        case BindingCount.MultipleBindingsAvailable:\r\n        default:\r\n            if (!target.isArray()) {\r\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\r\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\r\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\r\n                throw new Error(msg);\r\n            }\r\n            else {\r\n                return bindings;\r\n            }\r\n    }\r\n}\r\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\r\n    var activeBindings;\r\n    var childRequest;\r\n    if (parentRequest === null) {\r\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\r\n        childRequest = new Request(serviceIdentifier, context, null, activeBindings, target);\r\n        var thePlan = new Plan(context, childRequest);\r\n        context.addPlan(thePlan);\r\n    }\r\n    else {\r\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\r\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\r\n    }\r\n    activeBindings.forEach(function (binding) {\r\n        var subChildRequest = null;\r\n        if (target.isArray()) {\r\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\r\n        }\r\n        else {\r\n            if (binding.cache) {\r\n                return;\r\n            }\r\n            subChildRequest = childRequest;\r\n        }\r\n        if (binding.type === BindingTypeEnum.Instance && binding.implementationType !== null) {\r\n            var dependencies = getDependencies(metadataReader, binding.implementationType);\r\n            if (!context.container.options.skipBaseClassChecks) {\r\n                var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, binding.implementationType);\r\n                if (dependencies.length < baseClassDependencyCount) {\r\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(getFunctionName(binding.implementationType));\r\n                    throw new Error(error);\r\n                }\r\n            }\r\n            dependencies.forEach(function (dependency) {\r\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\r\n            });\r\n        }\r\n    });\r\n}\r\nfunction getBindings(container, serviceIdentifier) {\r\n    var bindings = [];\r\n    var bindingDictionary = getBindingDictionary(container);\r\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\r\n        bindings = bindingDictionary.get(serviceIdentifier);\r\n    }\r\n    else if (container.parent !== null) {\r\n        bindings = getBindings(container.parent, serviceIdentifier);\r\n    }\r\n    return bindings;\r\n}\r\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\r\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\r\n    var context = new Context(container);\r\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, '', key, value);\r\n    try {\r\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\r\n        return context;\r\n    }\r\n    catch (error) {\r\n        if (isStackOverflowExeption(error)) {\r\n            circularDependencyToException(context.plan.rootRequest);\r\n        }\r\n        throw error;\r\n    }\r\n}\r\nfunction createMockRequest(container, serviceIdentifier, key, value) {\r\n    var target = new Target(TargetTypeEnum.Variable, '', serviceIdentifier, new Metadata(key, value));\r\n    var context = new Context(container);\r\n    var request = new Request(serviceIdentifier, context, null, [], target);\r\n    return request;\r\n}\r\nexport { plan, createMockRequest, getBindingDictionary };\r\n","var QueryableString = (function () {\r\n    function QueryableString(str) {\r\n        this.str = str;\r\n    }\r\n    QueryableString.prototype.startsWith = function (searchString) {\r\n        return this.str.indexOf(searchString) === 0;\r\n    };\r\n    QueryableString.prototype.endsWith = function (searchString) {\r\n        var reverseString = '';\r\n        var reverseSearchString = searchString.split('').reverse().join('');\r\n        reverseString = this.str.split('').reverse().join('');\r\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\r\n    };\r\n    QueryableString.prototype.contains = function (searchString) {\r\n        return (this.str.indexOf(searchString) !== -1);\r\n    };\r\n    QueryableString.prototype.equals = function (compareString) {\r\n        return this.str === compareString;\r\n    };\r\n    QueryableString.prototype.value = function () {\r\n        return this.str;\r\n    };\r\n    return QueryableString;\r\n}());\r\nexport { QueryableString };\r\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { LazyServiceIdentifier } from '../annotation/lazy_service_identifier';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { getFunctionName } from '../utils/serialization';\r\nimport { Target } from './target';\r\nfunction getDependencies(metadataReader, func) {\r\n    var constructorName = getFunctionName(func);\r\n    return getTargets(metadataReader, constructorName, func, false);\r\n}\r\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\r\n    var metadata = metadataReader.getConstructorMetadata(func);\r\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\r\n    if (serviceIdentifiers === undefined) {\r\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\r\n        throw new Error(msg);\r\n    }\r\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\r\n    var keys = Object.keys(constructorArgsMetadata);\r\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\r\n    var hasOptionalParameters = keys.length > func.length;\r\n    var iterations = (hasUserDeclaredUnknownInjections || hasOptionalParameters) ? keys.length : func.length;\r\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\r\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func, constructorName);\r\n    var targets = __spreadArray(__spreadArray([], constructorTargets, true), propertyTargets, true);\r\n    return targets;\r\n}\r\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\r\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\r\n    var metadata = formatTargetMetadata(targetMetadata);\r\n    var isManaged = metadata.unmanaged !== true;\r\n    var serviceIdentifier = serviceIdentifiers[index];\r\n    var injectIdentifier = metadata.inject || metadata.multiInject;\r\n    serviceIdentifier = (injectIdentifier ? injectIdentifier : serviceIdentifier);\r\n    if (serviceIdentifier instanceof LazyServiceIdentifier) {\r\n        serviceIdentifier = serviceIdentifier.unwrap();\r\n    }\r\n    if (isManaged) {\r\n        var isObject = serviceIdentifier === Object;\r\n        var isFunction = serviceIdentifier === Function;\r\n        var isUndefined = serviceIdentifier === undefined;\r\n        var isUnknownType = isObject || isFunction || isUndefined;\r\n        if (!isBaseClass && isUnknownType) {\r\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\r\n            throw new Error(msg);\r\n        }\r\n        var target = new Target(TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\r\n        target.metadata = targetMetadata;\r\n        return target;\r\n    }\r\n    return null;\r\n}\r\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\r\n    var targets = [];\r\n    for (var i = 0; i < iterations; i++) {\r\n        var index = i;\r\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\r\n        if (target !== null) {\r\n            targets.push(target);\r\n        }\r\n    }\r\n    return targets;\r\n}\r\nfunction _getServiceIdentifierForProperty(inject, multiInject, propertyName, className) {\r\n    var serviceIdentifier = (inject || multiInject);\r\n    if (serviceIdentifier === undefined) {\r\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" for property \" + String(propertyName) + \" in class \" + className + \".\";\r\n        throw new Error(msg);\r\n    }\r\n    return serviceIdentifier;\r\n}\r\nfunction getClassPropsAsTargets(metadataReader, constructorFunc, constructorName) {\r\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\r\n    var targets = [];\r\n    var symbolKeys = Object.getOwnPropertySymbols(classPropsMetadata);\r\n    var stringKeys = Object.keys(classPropsMetadata);\r\n    var keys = stringKeys.concat(symbolKeys);\r\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n        var key = keys_1[_i];\r\n        var targetMetadata = classPropsMetadata[key];\r\n        var metadata = formatTargetMetadata(targetMetadata);\r\n        var identifier = metadata.targetName || key;\r\n        var serviceIdentifier = _getServiceIdentifierForProperty(metadata.inject, metadata.multiInject, key, constructorName);\r\n        var target = new Target(TargetTypeEnum.ClassProperty, identifier, serviceIdentifier);\r\n        target.metadata = targetMetadata;\r\n        targets.push(target);\r\n    }\r\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\r\n    if (baseConstructor !== Object) {\r\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor, constructorName);\r\n        targets = __spreadArray(__spreadArray([], targets, true), baseTargets, true);\r\n    }\r\n    return targets;\r\n}\r\nfunction getBaseClassDependencyCount(metadataReader, func) {\r\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\r\n    if (baseConstructor !== Object) {\r\n        var baseConstructorName = getFunctionName(baseConstructor);\r\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\r\n        var metadata = targets.map(function (t) { return t.metadata.filter(function (m) { return m.key === METADATA_KEY.UNMANAGED_TAG; }); });\r\n        var unmanagedCount = [].concat.apply([], metadata).length;\r\n        var dependencyCount = targets.length - unmanagedCount;\r\n        if (dependencyCount > 0) {\r\n            return dependencyCount;\r\n        }\r\n        else {\r\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\r\n        }\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\nfunction formatTargetMetadata(targetMetadata) {\r\n    var targetMetadataMap = {};\r\n    targetMetadata.forEach(function (m) {\r\n        targetMetadataMap[m.key.toString()] = m.value;\r\n    });\r\n    return {\r\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\r\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\r\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\r\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\r\n    };\r\n}\r\nexport { getDependencies, getBaseClassDependencyCount, getFunctionName };\r\n","import { id } from '../utils/id';\r\nvar Request = (function () {\r\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\r\n        this.id = id();\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        this.parentContext = parentContext;\r\n        this.parentRequest = parentRequest;\r\n        this.target = target;\r\n        this.childRequests = [];\r\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\r\n        this.requestScope = parentRequest === null\r\n            ? new Map()\r\n            : null;\r\n    }\r\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\r\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\r\n        this.childRequests.push(child);\r\n        return child;\r\n    };\r\n    return Request;\r\n}());\r\nexport { Request };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { id } from '../utils/id';\r\nimport { getSymbolDescription } from '../utils/serialization';\r\nimport { Metadata } from './metadata';\r\nimport { QueryableString } from './queryable_string';\r\nvar Target = (function () {\r\n    function Target(type, identifier, serviceIdentifier, namedOrTagged) {\r\n        this.id = id();\r\n        this.type = type;\r\n        this.serviceIdentifier = serviceIdentifier;\r\n        var queryableName = typeof identifier === 'symbol' ? getSymbolDescription(identifier) : identifier;\r\n        this.name = new QueryableString(queryableName || '');\r\n        this.identifier = identifier;\r\n        this.metadata = new Array();\r\n        var metadataItem = null;\r\n        if (typeof namedOrTagged === 'string') {\r\n            metadataItem = new Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\r\n        }\r\n        else if (namedOrTagged instanceof Metadata) {\r\n            metadataItem = namedOrTagged;\r\n        }\r\n        if (metadataItem !== null) {\r\n            this.metadata.push(metadataItem);\r\n        }\r\n    }\r\n    Target.prototype.hasTag = function (key) {\r\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\r\n            var m = _a[_i];\r\n            if (m.key === key) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Target.prototype.isArray = function () {\r\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\r\n    };\r\n    Target.prototype.matchesArray = function (name) {\r\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\r\n    };\r\n    Target.prototype.isNamed = function () {\r\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\r\n    };\r\n    Target.prototype.isTagged = function () {\r\n        return this.metadata.some(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\r\n    };\r\n    Target.prototype.isOptional = function () {\r\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\r\n    };\r\n    Target.prototype.getNamedTag = function () {\r\n        if (this.isNamed()) {\r\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\r\n        }\r\n        return null;\r\n    };\r\n    Target.prototype.getCustomTags = function () {\r\n        if (this.isTagged()) {\r\n            return this.metadata.filter(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    Target.prototype.matchesNamedTag = function (name) {\r\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\r\n    };\r\n    Target.prototype.matchesTag = function (key) {\r\n        var _this = this;\r\n        return function (value) {\r\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\r\n                var m = _a[_i];\r\n                if (m.key === key && m.value === value) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n    };\r\n    return Target;\r\n}());\r\nexport { Target };\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { ON_DEACTIVATION_ERROR, POST_CONSTRUCT_ERROR, PRE_DESTROY_ERROR } from '../constants/error_msgs';\r\nimport { BindingScopeEnum, TargetTypeEnum } from '../constants/literal_types';\r\nimport * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { isPromise, isPromiseOrContainsPromise } from '../utils/async';\r\nfunction _resolveRequests(childRequests, resolveRequest) {\r\n    return childRequests.reduce(function (resolvedRequests, childRequest) {\r\n        var injection = resolveRequest(childRequest);\r\n        var targetType = childRequest.target.type;\r\n        if (targetType === TargetTypeEnum.ConstructorArgument) {\r\n            resolvedRequests.constructorInjections.push(injection);\r\n        }\r\n        else {\r\n            resolvedRequests.propertyRequests.push(childRequest);\r\n            resolvedRequests.propertyInjections.push(injection);\r\n        }\r\n        if (!resolvedRequests.isAsync) {\r\n            resolvedRequests.isAsync = isPromiseOrContainsPromise(injection);\r\n        }\r\n        return resolvedRequests;\r\n    }, { constructorInjections: [], propertyInjections: [], propertyRequests: [], isAsync: false });\r\n}\r\nfunction _createInstance(constr, childRequests, resolveRequest) {\r\n    var result;\r\n    if (childRequests.length > 0) {\r\n        var resolved = _resolveRequests(childRequests, resolveRequest);\r\n        var createInstanceWithInjectionsArg = __assign(__assign({}, resolved), { constr: constr });\r\n        if (resolved.isAsync) {\r\n            result = createInstanceWithInjectionsAsync(createInstanceWithInjectionsArg);\r\n        }\r\n        else {\r\n            result = createInstanceWithInjections(createInstanceWithInjectionsArg);\r\n        }\r\n    }\r\n    else {\r\n        result = new constr();\r\n    }\r\n    return result;\r\n}\r\nfunction createInstanceWithInjections(args) {\r\n    var _a;\r\n    var instance = new ((_a = args.constr).bind.apply(_a, __spreadArray([void 0], args.constructorInjections, false)))();\r\n    args.propertyRequests.forEach(function (r, index) {\r\n        var property = r.target.identifier;\r\n        var injection = args.propertyInjections[index];\r\n        if (!r.target.isOptional() || injection !== undefined) {\r\n            instance[property] = injection;\r\n        }\r\n    });\r\n    return instance;\r\n}\r\nfunction createInstanceWithInjectionsAsync(args) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var constructorInjections, propertyInjections;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4, possiblyWaitInjections(args.constructorInjections)];\r\n                case 1:\r\n                    constructorInjections = _a.sent();\r\n                    return [4, possiblyWaitInjections(args.propertyInjections)];\r\n                case 2:\r\n                    propertyInjections = _a.sent();\r\n                    return [2, createInstanceWithInjections(__assign(__assign({}, args), { constructorInjections: constructorInjections, propertyInjections: propertyInjections }))];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction possiblyWaitInjections(possiblePromiseinjections) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var injections, _i, possiblePromiseinjections_1, injection;\r\n        return __generator(this, function (_a) {\r\n            injections = [];\r\n            for (_i = 0, possiblePromiseinjections_1 = possiblePromiseinjections; _i < possiblePromiseinjections_1.length; _i++) {\r\n                injection = possiblePromiseinjections_1[_i];\r\n                if (Array.isArray(injection)) {\r\n                    injections.push(Promise.all(injection));\r\n                }\r\n                else {\r\n                    injections.push(injection);\r\n                }\r\n            }\r\n            return [2, Promise.all(injections)];\r\n        });\r\n    });\r\n}\r\nfunction _getInstanceAfterPostConstruct(constr, result) {\r\n    var postConstructResult = _postConstruct(constr, result);\r\n    if (isPromise(postConstructResult)) {\r\n        return postConstructResult.then(function () { return result; });\r\n    }\r\n    else {\r\n        return result;\r\n    }\r\n}\r\nfunction _postConstruct(constr, instance) {\r\n    var _a, _b;\r\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\r\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\r\n        try {\r\n            return (_b = (_a = instance)[data.value]) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw new Error(POST_CONSTRUCT_ERROR(constr.name, e.message));\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _validateInstanceResolution(binding, constr) {\r\n    if (binding.scope !== BindingScopeEnum.Singleton) {\r\n        _throwIfHandlingDeactivation(binding, constr);\r\n    }\r\n}\r\nfunction _throwIfHandlingDeactivation(binding, constr) {\r\n    var scopeErrorMessage = \"Class cannot be instantiated in \" + (binding.scope === BindingScopeEnum.Request ?\r\n        'request' :\r\n        'transient') + \" scope.\";\r\n    if (typeof binding.onDeactivation === 'function') {\r\n        throw new Error(ON_DEACTIVATION_ERROR(constr.name, scopeErrorMessage));\r\n    }\r\n    if (Reflect.hasMetadata(METADATA_KEY.PRE_DESTROY, constr)) {\r\n        throw new Error(PRE_DESTROY_ERROR(constr.name, scopeErrorMessage));\r\n    }\r\n}\r\nfunction resolveInstance(binding, constr, childRequests, resolveRequest) {\r\n    _validateInstanceResolution(binding, constr);\r\n    var result = _createInstance(constr, childRequests, resolveRequest);\r\n    if (isPromise(result)) {\r\n        return result.then(function (resolvedResult) { return _getInstanceAfterPostConstruct(constr, resolvedResult); });\r\n    }\r\n    else {\r\n        return _getInstanceAfterPostConstruct(constr, result);\r\n    }\r\n}\r\nexport { resolveInstance };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum } from '../constants/literal_types';\r\nimport { getBindingDictionary } from '../planning/planner';\r\nimport { saveToScope, tryGetFromScope } from '../scope/scope';\r\nimport { isPromise } from '../utils/async';\r\nimport { getFactoryDetails, ensureFullyBound } from '../utils/binding_utils';\r\nimport { tryAndThrowErrorIfStackOverflow } from '../utils/exceptions';\r\nimport { resolveInstance } from './instantiation';\r\nvar _resolveRequest = function (requestScope) {\r\n    return function (request) {\r\n        request.parentContext.setCurrentRequest(request);\r\n        var bindings = request.bindings;\r\n        var childRequests = request.childRequests;\r\n        var targetIsAnArray = request.target && request.target.isArray();\r\n        var targetParentIsNotAnArray = !request.parentRequest ||\r\n            !request.parentRequest.target ||\r\n            !request.target ||\r\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\r\n        if (targetIsAnArray && targetParentIsNotAnArray) {\r\n            return childRequests.map(function (childRequest) {\r\n                var _f = _resolveRequest(requestScope);\r\n                return _f(childRequest);\r\n            });\r\n        }\r\n        else {\r\n            if (request.target.isOptional() && bindings.length === 0) {\r\n                return undefined;\r\n            }\r\n            var binding = bindings[0];\r\n            return _resolveBinding(requestScope, request, binding);\r\n        }\r\n    };\r\n};\r\nvar _resolveFactoryFromBinding = function (binding, context) {\r\n    var factoryDetails = getFactoryDetails(binding);\r\n    return tryAndThrowErrorIfStackOverflow(function () { return factoryDetails.factory.bind(binding)(context); }, function () { return new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryDetails.factoryType, context.currentRequest.serviceIdentifier.toString())); });\r\n};\r\nvar _getResolvedFromBinding = function (requestScope, request, binding) {\r\n    var result;\r\n    var childRequests = request.childRequests;\r\n    ensureFullyBound(binding);\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.ConstantValue:\r\n        case BindingTypeEnum.Function:\r\n            result = binding.cache;\r\n            break;\r\n        case BindingTypeEnum.Constructor:\r\n            result = binding.implementationType;\r\n            break;\r\n        case BindingTypeEnum.Instance:\r\n            result = resolveInstance(binding, binding.implementationType, childRequests, _resolveRequest(requestScope));\r\n            break;\r\n        default:\r\n            result = _resolveFactoryFromBinding(binding, request.parentContext);\r\n    }\r\n    return result;\r\n};\r\nvar _resolveInScope = function (requestScope, binding, resolveFromBinding) {\r\n    var result = tryGetFromScope(requestScope, binding);\r\n    if (result !== null) {\r\n        return result;\r\n    }\r\n    result = resolveFromBinding();\r\n    saveToScope(requestScope, binding, result);\r\n    return result;\r\n};\r\nvar _resolveBinding = function (requestScope, request, binding) {\r\n    return _resolveInScope(requestScope, binding, function () {\r\n        var result = _getResolvedFromBinding(requestScope, request, binding);\r\n        if (isPromise(result)) {\r\n            result = result.then(function (resolved) { return _onActivation(request, binding, resolved); });\r\n        }\r\n        else {\r\n            result = _onActivation(request, binding, result);\r\n        }\r\n        return result;\r\n    });\r\n};\r\nfunction _onActivation(request, binding, resolved) {\r\n    var result = _bindingActivation(request.parentContext, binding, resolved);\r\n    var containersIterator = _getContainersIterator(request.parentContext.container);\r\n    var container;\r\n    var containersIteratorResult = containersIterator.next();\r\n    do {\r\n        container = containersIteratorResult.value;\r\n        var context_1 = request.parentContext;\r\n        var serviceIdentifier = request.serviceIdentifier;\r\n        var activationsIterator = _getContainerActivationsForService(container, serviceIdentifier);\r\n        if (isPromise(result)) {\r\n            result = _activateContainerAsync(activationsIterator, context_1, result);\r\n        }\r\n        else {\r\n            result = _activateContainer(activationsIterator, context_1, result);\r\n        }\r\n        containersIteratorResult = containersIterator.next();\r\n    } while (containersIteratorResult.done !== true && !getBindingDictionary(container).hasKey(request.serviceIdentifier));\r\n    return result;\r\n}\r\nvar _bindingActivation = function (context, binding, previousResult) {\r\n    var result;\r\n    if (typeof binding.onActivation === 'function') {\r\n        result = binding.onActivation(context, previousResult);\r\n    }\r\n    else {\r\n        result = previousResult;\r\n    }\r\n    return result;\r\n};\r\nvar _activateContainer = function (activationsIterator, context, result) {\r\n    var activation = activationsIterator.next();\r\n    while (!activation.done) {\r\n        result = activation.value(context, result);\r\n        if (isPromise(result)) {\r\n            return _activateContainerAsync(activationsIterator, context, result);\r\n        }\r\n        activation = activationsIterator.next();\r\n    }\r\n    return result;\r\n};\r\nvar _activateContainerAsync = function (activationsIterator, context, resultPromise) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, activation;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4, resultPromise];\r\n            case 1:\r\n                result = _a.sent();\r\n                activation = activationsIterator.next();\r\n                _a.label = 2;\r\n            case 2:\r\n                if (!!activation.done) return [3, 4];\r\n                return [4, activation.value(context, result)];\r\n            case 3:\r\n                result = _a.sent();\r\n                activation = activationsIterator.next();\r\n                return [3, 2];\r\n            case 4: return [2, result];\r\n        }\r\n    });\r\n}); };\r\nvar _getContainerActivationsForService = function (container, serviceIdentifier) {\r\n    var activations = container._activations;\r\n    return activations.hasKey(serviceIdentifier) ? activations.get(serviceIdentifier).values() : [].values();\r\n};\r\nvar _getContainersIterator = function (container) {\r\n    var containersStack = [container];\r\n    var parent = container.parent;\r\n    while (parent !== null) {\r\n        containersStack.push(parent);\r\n        parent = parent.parent;\r\n    }\r\n    var getNextContainer = function () {\r\n        var nextContainer = containersStack.pop();\r\n        if (nextContainer !== undefined) {\r\n            return { done: false, value: nextContainer };\r\n        }\r\n        else {\r\n            return { done: true, value: undefined };\r\n        }\r\n    };\r\n    var containersIterator = {\r\n        next: getNextContainer,\r\n    };\r\n    return containersIterator;\r\n};\r\nfunction resolve(context) {\r\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\r\n    return _f(context.plan.rootRequest);\r\n}\r\nexport { resolve };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { BindingScopeEnum } from '../constants/literal_types';\r\nimport { isPromise } from '../utils/async';\r\nexport var tryGetFromScope = function (requestScope, binding) {\r\n    if ((binding.scope === BindingScopeEnum.Singleton) && binding.activated) {\r\n        return binding.cache;\r\n    }\r\n    if (binding.scope === BindingScopeEnum.Request &&\r\n        requestScope.has(binding.id)) {\r\n        return requestScope.get(binding.id);\r\n    }\r\n    return null;\r\n};\r\nexport var saveToScope = function (requestScope, binding, result) {\r\n    if (binding.scope === BindingScopeEnum.Singleton) {\r\n        _saveToSingletonScope(binding, result);\r\n    }\r\n    if (binding.scope === BindingScopeEnum.Request) {\r\n        _saveToRequestScope(requestScope, binding, result);\r\n    }\r\n};\r\nvar _saveToRequestScope = function (requestScope, binding, result) {\r\n    if (!requestScope.has(binding.id)) {\r\n        requestScope.set(binding.id, result);\r\n    }\r\n};\r\nvar _saveToSingletonScope = function (binding, result) {\r\n    binding.cache = result;\r\n    binding.activated = true;\r\n    if (isPromise(result)) {\r\n        void _saveAsyncResultToSingletonScope(binding, result);\r\n    }\r\n};\r\nvar _saveAsyncResultToSingletonScope = function (binding, asyncResult) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, ex_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 2, , 3]);\r\n                return [4, asyncResult];\r\n            case 1:\r\n                result = _a.sent();\r\n                binding.cache = result;\r\n                return [3, 3];\r\n            case 2:\r\n                ex_1 = _a.sent();\r\n                binding.cache = null;\r\n                binding.activated = false;\r\n                throw ex_1;\r\n            case 3: return [2];\r\n        }\r\n    });\r\n}); };\r\n","import { BindingScopeEnum } from '../constants/literal_types';\r\nimport { BindingWhenOnSyntax } from './binding_when_on_syntax';\r\nvar BindingInSyntax = (function () {\r\n    function BindingInSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingInSyntax.prototype.inRequestScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Request;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingInSyntax.prototype.inSingletonScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingInSyntax.prototype.inTransientScope = function () {\r\n        this._binding.scope = BindingScopeEnum.Transient;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    return BindingInSyntax;\r\n}());\r\nexport { BindingInSyntax };\r\n","import { BindingInSyntax } from './binding_in_syntax';\r\nimport { BindingOnSyntax } from './binding_on_syntax';\r\nimport { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingInWhenOnSyntax = (function () {\r\n    function BindingInWhenOnSyntax(binding) {\r\n        this._binding = binding;\r\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\r\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\r\n        this._bindingInSyntax = new BindingInSyntax(binding);\r\n    }\r\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\r\n        return this._bindingInSyntax.inRequestScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\r\n        return this._bindingInSyntax.inSingletonScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\r\n        return this._bindingInSyntax.inTransientScope();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\r\n        return this._bindingWhenSyntax.when(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenTargetNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\r\n        return this._bindingWhenSyntax.whenTargetIsDefault();\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\r\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenParentNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\r\n        return this._bindingOnSyntax.onActivation(handler);\r\n    };\r\n    BindingInWhenOnSyntax.prototype.onDeactivation = function (handler) {\r\n        return this._bindingOnSyntax.onDeactivation(handler);\r\n    };\r\n    return BindingInWhenOnSyntax;\r\n}());\r\nexport { BindingInWhenOnSyntax };\r\n","import { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingOnSyntax = (function () {\r\n    function BindingOnSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingOnSyntax.prototype.onActivation = function (handler) {\r\n        this._binding.onActivation = handler;\r\n        return new BindingWhenSyntax(this._binding);\r\n    };\r\n    BindingOnSyntax.prototype.onDeactivation = function (handler) {\r\n        this._binding.onDeactivation = handler;\r\n        return new BindingWhenSyntax(this._binding);\r\n    };\r\n    return BindingOnSyntax;\r\n}());\r\nexport { BindingOnSyntax };\r\n","import * as ERROR_MSGS from \"../constants/error_msgs\";\r\nimport { BindingScopeEnum, BindingTypeEnum } from \"../constants/literal_types\";\r\nimport { BindingInWhenOnSyntax } from \"./binding_in_when_on_syntax\";\r\nimport { BindingWhenOnSyntax } from \"./binding_when_on_syntax\";\r\nvar BindingToSyntax = (function () {\r\n    function BindingToSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingToSyntax.prototype.to = function (constructor) {\r\n        this._binding.type = BindingTypeEnum.Instance;\r\n        this._binding.implementationType = constructor;\r\n        return new BindingInWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toSelf = function () {\r\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\r\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\r\n        }\r\n        var self = this._binding.serviceIdentifier;\r\n        return this.to(self);\r\n    };\r\n    BindingToSyntax.prototype.toConstantValue = function (value) {\r\n        this._binding.type = BindingTypeEnum.ConstantValue;\r\n        this._binding.cache = value;\r\n        this._binding.dynamicValue = null;\r\n        this._binding.implementationType = null;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\r\n        this._binding.type = BindingTypeEnum.DynamicValue;\r\n        this._binding.cache = null;\r\n        this._binding.dynamicValue = func;\r\n        this._binding.implementationType = null;\r\n        return new BindingInWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\r\n        this._binding.type = BindingTypeEnum.Constructor;\r\n        this._binding.implementationType = constructor;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toFactory = function (factory) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = factory;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toFunction = function (func) {\r\n        if (typeof func !== \"function\") {\r\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\r\n        }\r\n        var bindingWhenOnSyntax = this.toConstantValue(func);\r\n        this._binding.type = BindingTypeEnum.Function;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return bindingWhenOnSyntax;\r\n    };\r\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = function (context) {\r\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\r\n            return autofactory;\r\n        };\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toAutoNamedFactory = function (serviceIdentifier) {\r\n        this._binding.type = BindingTypeEnum.Factory;\r\n        this._binding.factory = function (context) {\r\n            return function (named) { return context.container.getNamed(serviceIdentifier, named); };\r\n        };\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toProvider = function (provider) {\r\n        this._binding.type = BindingTypeEnum.Provider;\r\n        this._binding.provider = provider;\r\n        this._binding.scope = BindingScopeEnum.Singleton;\r\n        return new BindingWhenOnSyntax(this._binding);\r\n    };\r\n    BindingToSyntax.prototype.toService = function (service) {\r\n        this.toDynamicValue(function (context) { return context.container.get(service); });\r\n    };\r\n    return BindingToSyntax;\r\n}());\r\nexport { BindingToSyntax };\r\n","import { BindingOnSyntax } from './binding_on_syntax';\r\nimport { BindingWhenSyntax } from './binding_when_syntax';\r\nvar BindingWhenOnSyntax = (function () {\r\n    function BindingWhenOnSyntax(binding) {\r\n        this._binding = binding;\r\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\r\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\r\n    }\r\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\r\n        return this._bindingWhenSyntax.when(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenTargetNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\r\n        return this._bindingWhenSyntax.whenTargetIsDefault();\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\r\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenParentNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\r\n    };\r\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\r\n        return this._bindingOnSyntax.onActivation(handler);\r\n    };\r\n    BindingWhenOnSyntax.prototype.onDeactivation = function (handler) {\r\n        return this._bindingOnSyntax.onDeactivation(handler);\r\n    };\r\n    return BindingWhenOnSyntax;\r\n}());\r\nexport { BindingWhenOnSyntax };\r\n","import { BindingOnSyntax } from './binding_on_syntax';\r\nimport { namedConstraint, taggedConstraint, traverseAncerstors, typeConstraint } from './constraint_helpers';\r\nvar BindingWhenSyntax = (function () {\r\n    function BindingWhenSyntax(binding) {\r\n        this._binding = binding;\r\n    }\r\n    BindingWhenSyntax.prototype.when = function (constraint) {\r\n        this._binding.constraint = constraint;\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\r\n        this._binding.constraint = namedConstraint(name);\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\r\n        this._binding.constraint = function (request) {\r\n            if (request === null) {\r\n                return false;\r\n            }\r\n            var targetIsDefault = (request.target !== null) &&\r\n                (!request.target.isNamed()) &&\r\n                (!request.target.isTagged());\r\n            return targetIsDefault;\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\r\n        this._binding.constraint = taggedConstraint(tag)(value);\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && typeConstraint(parent)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && namedConstraint(name)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && taggedConstraint(tag)(value)(request.parentRequest);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, typeConstraint(ancestor));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, typeConstraint(ancestor));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, namedConstraint(name));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, namedConstraint(name));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, taggedConstraint(tag)(value));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, taggedConstraint(tag)(value));\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && traverseAncerstors(request, constraint);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\r\n        this._binding.constraint = function (request) {\r\n            return request !== null && !traverseAncerstors(request, constraint);\r\n        };\r\n        return new BindingOnSyntax(this._binding);\r\n    };\r\n    return BindingWhenSyntax;\r\n}());\r\nexport { BindingWhenSyntax };\r\n","import * as METADATA_KEY from '../constants/metadata_keys';\r\nimport { Metadata } from '../planning/metadata';\r\nvar traverseAncerstors = function (request, constraint) {\r\n    var parent = request.parentRequest;\r\n    if (parent !== null) {\r\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n};\r\nvar taggedConstraint = function (key) { return function (value) {\r\n    var constraint = function (request) {\r\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\r\n    };\r\n    constraint.metaData = new Metadata(key, value);\r\n    return constraint;\r\n}; };\r\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\r\nvar typeConstraint = function (type) { return function (request) {\r\n    var binding = null;\r\n    if (request !== null) {\r\n        binding = request.bindings[0];\r\n        if (typeof type === 'string') {\r\n            var serviceIdentifier = binding.serviceIdentifier;\r\n            return serviceIdentifier === type;\r\n        }\r\n        else {\r\n            var constructor = request.bindings[0].implementationType;\r\n            return type === constructor;\r\n        }\r\n    }\r\n    return false;\r\n}; };\r\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint };\r\n","function isPromise(object) {\r\n    var isObjectOrFunction = (typeof object === 'object' && object !== null) || typeof object === 'function';\r\n    return isObjectOrFunction && typeof object.then === \"function\";\r\n}\r\nfunction isPromiseOrContainsPromise(object) {\r\n    if (isPromise(object)) {\r\n        return true;\r\n    }\r\n    return Array.isArray(object) && object.some(isPromise);\r\n}\r\nexport { isPromise, isPromiseOrContainsPromise };\r\n","import { getServiceIdentifierAsString } from '../utils/serialization';\r\nimport * as ERROR_MSGS from '../constants/error_msgs';\r\nimport { BindingTypeEnum } from '../constants/literal_types';\r\nimport { FactoryType } from './factory_type';\r\nexport var multiBindToService = function (container) {\r\n    return function (service) {\r\n        return function () {\r\n            var types = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                types[_i] = arguments[_i];\r\n            }\r\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\r\n        };\r\n    };\r\n};\r\nexport var ensureFullyBound = function (binding) {\r\n    var boundValue = null;\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.ConstantValue:\r\n        case BindingTypeEnum.Function:\r\n            boundValue = binding.cache;\r\n            break;\r\n        case BindingTypeEnum.Constructor:\r\n        case BindingTypeEnum.Instance:\r\n            boundValue = binding.implementationType;\r\n            break;\r\n        case BindingTypeEnum.DynamicValue:\r\n            boundValue = binding.dynamicValue;\r\n            break;\r\n        case BindingTypeEnum.Provider:\r\n            boundValue = binding.provider;\r\n            break;\r\n        case BindingTypeEnum.Factory:\r\n            boundValue = binding.factory;\r\n            break;\r\n    }\r\n    if (boundValue === null) {\r\n        var serviceIdentifierAsString = getServiceIdentifierAsString(binding.serviceIdentifier);\r\n        throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifierAsString);\r\n    }\r\n};\r\nexport var getFactoryDetails = function (binding) {\r\n    switch (binding.type) {\r\n        case BindingTypeEnum.Factory:\r\n            return { factory: binding.factory, factoryType: FactoryType.Factory };\r\n        case BindingTypeEnum.Provider:\r\n            return { factory: binding.provider, factoryType: FactoryType.Provider };\r\n        case BindingTypeEnum.DynamicValue:\r\n            return { factory: binding.dynamicValue, factoryType: FactoryType.DynamicValue };\r\n        default:\r\n            throw new Error(\"Unexpected factory type \" + binding.type);\r\n    }\r\n};\r\n","function isClonable(obj) {\r\n    return (typeof obj === 'object')\r\n        && (obj !== null)\r\n        && ('clone' in obj)\r\n        && typeof obj.clone === 'function';\r\n}\r\nexport { isClonable };\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nexport function isStackOverflowExeption(error) {\r\n    return (error instanceof RangeError ||\r\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\r\n}\r\nexport var tryAndThrowErrorIfStackOverflow = function (fn, errorCallback) {\r\n    try {\r\n        return fn();\r\n    }\r\n    catch (error) {\r\n        if (isStackOverflowExeption(error)) {\r\n            error = errorCallback();\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n","export var FactoryType;\r\n(function (FactoryType) {\r\n    FactoryType[\"DynamicValue\"] = \"toDynamicValue\";\r\n    FactoryType[\"Factory\"] = \"toFactory\";\r\n    FactoryType[\"Provider\"] = \"toProvider\";\r\n})(FactoryType || (FactoryType = {}));\r\n","var idCounter = 0;\r\nfunction id() {\r\n    return idCounter++;\r\n}\r\nexport { id };\r\n","export function getFirstArrayDuplicate(array) {\r\n    var seenValues = new Set();\r\n    for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {\r\n        var entry = array_1[_i];\r\n        if (seenValues.has(entry)) {\r\n            return entry;\r\n        }\r\n        else {\r\n            seenValues.add(entry);\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n","import * as ERROR_MSGS from '../constants/error_msgs';\r\nfunction getServiceIdentifierAsString(serviceIdentifier) {\r\n    if (typeof serviceIdentifier === 'function') {\r\n        var _serviceIdentifier = serviceIdentifier;\r\n        return _serviceIdentifier.name;\r\n    }\r\n    else if (typeof serviceIdentifier === 'symbol') {\r\n        return serviceIdentifier.toString();\r\n    }\r\n    else {\r\n        var _serviceIdentifier = serviceIdentifier;\r\n        return _serviceIdentifier;\r\n    }\r\n}\r\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\r\n    var registeredBindingsList = '';\r\n    var registeredBindings = getBindings(container, serviceIdentifier);\r\n    if (registeredBindings.length !== 0) {\r\n        registeredBindingsList = '\\nRegistered bindings:';\r\n        registeredBindings.forEach(function (binding) {\r\n            var name = 'Object';\r\n            if (binding.implementationType !== null) {\r\n                name = getFunctionName(binding.implementationType);\r\n            }\r\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\r\n            if (binding.constraint.metaData) {\r\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\r\n            }\r\n        });\r\n    }\r\n    return registeredBindingsList;\r\n}\r\nfunction alreadyDependencyChain(request, serviceIdentifier) {\r\n    if (request.parentRequest === null) {\r\n        return false;\r\n    }\r\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\r\n        return true;\r\n    }\r\n    else {\r\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\r\n    }\r\n}\r\nfunction dependencyChainToString(request) {\r\n    function _createStringArr(req, result) {\r\n        if (result === void 0) { result = []; }\r\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\r\n        result.push(serviceIdentifier);\r\n        if (req.parentRequest !== null) {\r\n            return _createStringArr(req.parentRequest, result);\r\n        }\r\n        return result;\r\n    }\r\n    var stringArr = _createStringArr(request);\r\n    return stringArr.reverse().join(' --> ');\r\n}\r\nfunction circularDependencyToException(request) {\r\n    request.childRequests.forEach(function (childRequest) {\r\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\r\n            var services = dependencyChainToString(childRequest);\r\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\r\n        }\r\n        else {\r\n            circularDependencyToException(childRequest);\r\n        }\r\n    });\r\n}\r\nfunction listMetadataForTarget(serviceIdentifierString, target) {\r\n    if (target.isTagged() || target.isNamed()) {\r\n        var m_1 = '';\r\n        var namedTag = target.getNamedTag();\r\n        var otherTags = target.getCustomTags();\r\n        if (namedTag !== null) {\r\n            m_1 += namedTag.toString() + '\\n';\r\n        }\r\n        if (otherTags !== null) {\r\n            otherTags.forEach(function (tag) {\r\n                m_1 += tag.toString() + '\\n';\r\n            });\r\n        }\r\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\r\n    }\r\n    else {\r\n        return \" \" + serviceIdentifierString;\r\n    }\r\n}\r\nfunction getFunctionName(func) {\r\n    if (func.name) {\r\n        return func.name;\r\n    }\r\n    else {\r\n        var name_1 = func.toString();\r\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\r\n        return match ? match[1] : \"Anonymous function: \" + name_1;\r\n    }\r\n}\r\nfunction getSymbolDescription(symbol) {\r\n    return symbol.toString().slice(7, -1);\r\n}\r\nexport { getFunctionName, getServiceIdentifierAsString, listRegisteredBindingsForServiceIdentifier, listMetadataForTarget, circularDependencyToException, getSymbolDescription };\r\n","// https://github.com/electron/electron/issues/2288\nfunction isElectron() {\n    // Renderer process\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n        return true;\n    }\n\n    // Main process\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n        return true;\n    }\n\n    // Detect the user agent when the `nodeIntegration` option is set to false\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n\nmodule.exports = isElectron;\n","module.exports = require('node-gyp-build-optional-packages')(__dirname);","var fs = require('fs')\nvar path = require('path')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = process.arch\nvar platform = process.platform\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n  var packageName\n  try {\n    packageName = runtimeRequire(path.join(dir, 'package.json')).name\n    var varName = packageName.toUpperCase().replace(/-/g, '_') + '_PREBUILD'\n    if (process.env[varName]) dir = process.env[varName]\n  } catch (err) {}\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var platformPackage = (packageName[0] == '@' ? '' : '@' + packageName + '/') + packageName + '-' + platform + '-' + arch\n  try {\n    var prebuildPackage = path.dirname(require('module').createRequire(path.join(dir, 'package.json')).resolve(platformPackage))\n    return resolveFile(prebuildPackage)\n  } catch(error) {}\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + ' and package: ' + platformPackage + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n    return resolveFile(path.join(dir, 'prebuilds', tuple.name))\n  }\n  function resolveFile (prebuilds) {\n    // Find most specific flavor first\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples","'use strict';\n\nconst pDebounce = (fn, wait, options = {}) => {\n\tif (!Number.isFinite(wait)) {\n\t\tthrow new TypeError('Expected `wait` to be a finite number');\n\t}\n\n\tlet leadingValue;\n\tlet timer;\n\tlet resolveList = [];\n\n\treturn function (...arguments_) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst runImmediately = options.leading && !timer;\n\n\t\t\tclearTimeout(timer);\n\n\t\t\ttimer = setTimeout(() => {\n\t\t\t\ttimer = null;\n\n\t\t\t\tconst result = options.leading ? leadingValue : fn.apply(this, arguments_);\n\n\t\t\t\tfor (resolve of resolveList) {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\n\t\t\t\tresolveList = [];\n\t\t\t}, wait);\n\n\t\t\tif (runImmediately) {\n\t\t\t\tleadingValue = fn.apply(this, arguments_);\n\t\t\t\tresolve(leadingValue);\n\t\t\t} else {\n\t\t\t\tresolveList.push(resolve);\n\t\t\t}\n\t\t});\n\t};\n};\n\nmodule.exports = pDebounce;\n// TODO: Remove this for the next major release\nmodule.exports.default = pDebounce;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues || (exports.TraceValues = TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.PortMessageWriter = exports.PortMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        const eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass PortMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this.onData = new api_1.Emitter;\n        port.on('close', () => this.fireClose);\n        port.on('error', (error) => this.fireError(error));\n        port.on('message', (message) => {\n            this.onData.fire(message);\n        });\n    }\n    listen(callback) {\n        return this.onData.event(callback);\n    }\n}\nexports.PortMessageReader = PortMessageReader;\nclass PortMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.on('close', () => this.fireClose());\n        port.on('error', (error) => this.fireError(error));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.PortMessageWriter = PortMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readable, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readable), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length > limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return api_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = void 0;\nexports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__exportStar(require(\"vscode-jsonrpc/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(input, output, logger, options) {\n    return (0, node_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","(function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        var v = factory(require, exports);\n        if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === \"function\" && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    /* --------------------------------------------------------------------------------------------\n     * Copyright (c) Microsoft Corporation. All rights reserved.\n     * Licensed under the MIT License. See License.txt in the project root for license information.\n     * ------------------------------------------------------------------------------------------ */\n    'use strict';\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.TextDocument = exports.EOL = exports.WorkspaceFolder = exports.InlineCompletionContext = exports.SelectedCompletionInfo = exports.InlineCompletionTriggerKind = exports.InlineCompletionList = exports.InlineCompletionItem = exports.StringValue = exports.InlayHint = exports.InlayHintLabelPart = exports.InlayHintKind = exports.InlineValueContext = exports.InlineValueEvaluatableExpression = exports.InlineValueVariableLookup = exports.InlineValueText = exports.SemanticTokens = exports.SemanticTokenModifiers = exports.SemanticTokenTypes = exports.SelectionRange = exports.DocumentLink = exports.FormattingOptions = exports.CodeLens = exports.CodeAction = exports.CodeActionContext = exports.CodeActionTriggerKind = exports.CodeActionKind = exports.DocumentSymbol = exports.WorkspaceSymbol = exports.SymbolInformation = exports.SymbolTag = exports.SymbolKind = exports.DocumentHighlight = exports.DocumentHighlightKind = exports.SignatureInformation = exports.ParameterInformation = exports.Hover = exports.MarkedString = exports.CompletionList = exports.CompletionItem = exports.CompletionItemLabelDetails = exports.InsertTextMode = exports.InsertReplaceEdit = exports.CompletionItemTag = exports.InsertTextFormat = exports.CompletionItemKind = exports.MarkupContent = exports.MarkupKind = exports.TextDocumentItem = exports.OptionalVersionedTextDocumentIdentifier = exports.VersionedTextDocumentIdentifier = exports.TextDocumentIdentifier = exports.WorkspaceChange = exports.WorkspaceEdit = exports.DeleteFile = exports.RenameFile = exports.CreateFile = exports.TextDocumentEdit = exports.AnnotatedTextEdit = exports.ChangeAnnotationIdentifier = exports.ChangeAnnotation = exports.TextEdit = exports.Command = exports.Diagnostic = exports.CodeDescription = exports.DiagnosticTag = exports.DiagnosticSeverity = exports.DiagnosticRelatedInformation = exports.FoldingRange = exports.FoldingRangeKind = exports.ColorPresentation = exports.ColorInformation = exports.Color = exports.LocationLink = exports.Location = exports.Range = exports.Position = exports.uinteger = exports.integer = exports.URI = exports.DocumentUri = void 0;\n    var DocumentUri;\n    (function (DocumentUri) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        DocumentUri.is = is;\n    })(DocumentUri || (exports.DocumentUri = DocumentUri = {}));\n    var URI;\n    (function (URI) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        URI.is = is;\n    })(URI || (exports.URI = URI = {}));\n    var integer;\n    (function (integer) {\n        integer.MIN_VALUE = -2147483648;\n        integer.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n        }\n        integer.is = is;\n    })(integer || (exports.integer = integer = {}));\n    var uinteger;\n    (function (uinteger) {\n        uinteger.MIN_VALUE = 0;\n        uinteger.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n        }\n        uinteger.is = is;\n    })(uinteger || (exports.uinteger = uinteger = {}));\n    /**\n     * The Position namespace provides helper functions to work with\n     * {@link Position} literals.\n     */\n    var Position;\n    (function (Position) {\n        /**\n         * Creates a new Position literal from the given line and character.\n         * @param line The position's line.\n         * @param character The position's character.\n         */\n        function create(line, character) {\n            if (line === Number.MAX_VALUE) {\n                line = uinteger.MAX_VALUE;\n            }\n            if (character === Number.MAX_VALUE) {\n                character = uinteger.MAX_VALUE;\n            }\n            return { line: line, character: character };\n        }\n        Position.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Position} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n        }\n        Position.is = is;\n    })(Position || (exports.Position = Position = {}));\n    /**\n     * The Range namespace provides helper functions to work with\n     * {@link Range} literals.\n     */\n    var Range;\n    (function (Range) {\n        function create(one, two, three, four) {\n            if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n                return { start: Position.create(one, two), end: Position.create(three, four) };\n            }\n            else if (Position.is(one) && Position.is(two)) {\n                return { start: one, end: two };\n            }\n            else {\n                throw new Error(\"Range#create called with invalid arguments[\".concat(one, \", \").concat(two, \", \").concat(three, \", \").concat(four, \"]\"));\n            }\n        }\n        Range.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Range} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n        }\n        Range.is = is;\n    })(Range || (exports.Range = Range = {}));\n    /**\n     * The Location namespace provides helper functions to work with\n     * {@link Location} literals.\n     */\n    var Location;\n    (function (Location) {\n        /**\n         * Creates a Location literal.\n         * @param uri The location's uri.\n         * @param range The location's range.\n         */\n        function create(uri, range) {\n            return { uri: uri, range: range };\n        }\n        Location.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Location} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n        }\n        Location.is = is;\n    })(Location || (exports.Location = Location = {}));\n    /**\n     * The LocationLink namespace provides helper functions to work with\n     * {@link LocationLink} literals.\n     */\n    var LocationLink;\n    (function (LocationLink) {\n        /**\n         * Creates a LocationLink literal.\n         * @param targetUri The definition's uri.\n         * @param targetRange The full range of the definition.\n         * @param targetSelectionRange The span of the symbol definition at the target.\n         * @param originSelectionRange The span of the symbol being defined in the originating source file.\n         */\n        function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n            return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n        }\n        LocationLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link LocationLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n                && Range.is(candidate.targetSelectionRange)\n                && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n        }\n        LocationLink.is = is;\n    })(LocationLink || (exports.LocationLink = LocationLink = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link Color} literals.\n     */\n    var Color;\n    (function (Color) {\n        /**\n         * Creates a new Color literal.\n         */\n        function create(red, green, blue, alpha) {\n            return {\n                red: red,\n                green: green,\n                blue: blue,\n                alpha: alpha,\n            };\n        }\n        Color.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Color} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n                && Is.numberRange(candidate.green, 0, 1)\n                && Is.numberRange(candidate.blue, 0, 1)\n                && Is.numberRange(candidate.alpha, 0, 1);\n        }\n        Color.is = is;\n    })(Color || (exports.Color = Color = {}));\n    /**\n     * The ColorInformation namespace provides helper functions to work with\n     * {@link ColorInformation} literals.\n     */\n    var ColorInformation;\n    (function (ColorInformation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(range, color) {\n            return {\n                range: range,\n                color: color,\n            };\n        }\n        ColorInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n        }\n        ColorInformation.is = is;\n    })(ColorInformation || (exports.ColorInformation = ColorInformation = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link ColorPresentation} literals.\n     */\n    var ColorPresentation;\n    (function (ColorPresentation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(label, textEdit, additionalTextEdits) {\n            return {\n                label: label,\n                textEdit: textEdit,\n                additionalTextEdits: additionalTextEdits,\n            };\n        }\n        ColorPresentation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label)\n                && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n                && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n        }\n        ColorPresentation.is = is;\n    })(ColorPresentation || (exports.ColorPresentation = ColorPresentation = {}));\n    /**\n     * A set of predefined range kinds.\n     */\n    var FoldingRangeKind;\n    (function (FoldingRangeKind) {\n        /**\n         * Folding range for a comment\n         */\n        FoldingRangeKind.Comment = 'comment';\n        /**\n         * Folding range for an import or include\n         */\n        FoldingRangeKind.Imports = 'imports';\n        /**\n         * Folding range for a region (e.g. `#region`)\n         */\n        FoldingRangeKind.Region = 'region';\n    })(FoldingRangeKind || (exports.FoldingRangeKind = FoldingRangeKind = {}));\n    /**\n     * The folding range namespace provides helper functions to work with\n     * {@link FoldingRange} literals.\n     */\n    var FoldingRange;\n    (function (FoldingRange) {\n        /**\n         * Creates a new FoldingRange literal.\n         */\n        function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n            var result = {\n                startLine: startLine,\n                endLine: endLine\n            };\n            if (Is.defined(startCharacter)) {\n                result.startCharacter = startCharacter;\n            }\n            if (Is.defined(endCharacter)) {\n                result.endCharacter = endCharacter;\n            }\n            if (Is.defined(kind)) {\n                result.kind = kind;\n            }\n            if (Is.defined(collapsedText)) {\n                result.collapsedText = collapsedText;\n            }\n            return result;\n        }\n        FoldingRange.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n                && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n                && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n                && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n        }\n        FoldingRange.is = is;\n    })(FoldingRange || (exports.FoldingRange = FoldingRange = {}));\n    /**\n     * The DiagnosticRelatedInformation namespace provides helper functions to work with\n     * {@link DiagnosticRelatedInformation} literals.\n     */\n    var DiagnosticRelatedInformation;\n    (function (DiagnosticRelatedInformation) {\n        /**\n         * Creates a new DiagnosticRelatedInformation literal.\n         */\n        function create(location, message) {\n            return {\n                location: location,\n                message: message\n            };\n        }\n        DiagnosticRelatedInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n        }\n        DiagnosticRelatedInformation.is = is;\n    })(DiagnosticRelatedInformation || (exports.DiagnosticRelatedInformation = DiagnosticRelatedInformation = {}));\n    /**\n     * The diagnostic's severity.\n     */\n    var DiagnosticSeverity;\n    (function (DiagnosticSeverity) {\n        /**\n         * Reports an error.\n         */\n        DiagnosticSeverity.Error = 1;\n        /**\n         * Reports a warning.\n         */\n        DiagnosticSeverity.Warning = 2;\n        /**\n         * Reports an information.\n         */\n        DiagnosticSeverity.Information = 3;\n        /**\n         * Reports a hint.\n         */\n        DiagnosticSeverity.Hint = 4;\n    })(DiagnosticSeverity || (exports.DiagnosticSeverity = DiagnosticSeverity = {}));\n    /**\n     * The diagnostic tags.\n     *\n     * @since 3.15.0\n     */\n    var DiagnosticTag;\n    (function (DiagnosticTag) {\n        /**\n         * Unused or unnecessary code.\n         *\n         * Clients are allowed to render diagnostics with this tag faded out instead of having\n         * an error squiggle.\n         */\n        DiagnosticTag.Unnecessary = 1;\n        /**\n         * Deprecated or obsolete code.\n         *\n         * Clients are allowed to rendered diagnostics with this tag strike through.\n         */\n        DiagnosticTag.Deprecated = 2;\n    })(DiagnosticTag || (exports.DiagnosticTag = DiagnosticTag = {}));\n    /**\n     * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n     *\n     * @since 3.16.0\n     */\n    var CodeDescription;\n    (function (CodeDescription) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.href);\n        }\n        CodeDescription.is = is;\n    })(CodeDescription || (exports.CodeDescription = CodeDescription = {}));\n    /**\n     * The Diagnostic namespace provides helper functions to work with\n     * {@link Diagnostic} literals.\n     */\n    var Diagnostic;\n    (function (Diagnostic) {\n        /**\n         * Creates a new Diagnostic literal.\n         */\n        function create(range, message, severity, code, source, relatedInformation) {\n            var result = { range: range, message: message };\n            if (Is.defined(severity)) {\n                result.severity = severity;\n            }\n            if (Is.defined(code)) {\n                result.code = code;\n            }\n            if (Is.defined(source)) {\n                result.source = source;\n            }\n            if (Is.defined(relatedInformation)) {\n                result.relatedInformation = relatedInformation;\n            }\n            return result;\n        }\n        Diagnostic.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n         */\n        function is(value) {\n            var _a;\n            var candidate = value;\n            return Is.defined(candidate)\n                && Range.is(candidate.range)\n                && Is.string(candidate.message)\n                && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n                && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n                && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n                && (Is.string(candidate.source) || Is.undefined(candidate.source))\n                && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n        }\n        Diagnostic.is = is;\n    })(Diagnostic || (exports.Diagnostic = Diagnostic = {}));\n    /**\n     * The Command namespace provides helper functions to work with\n     * {@link Command} literals.\n     */\n    var Command;\n    (function (Command) {\n        /**\n         * Creates a new Command literal.\n         */\n        function create(title, command) {\n            var args = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                args[_i - 2] = arguments[_i];\n            }\n            var result = { title: title, command: command };\n            if (Is.defined(args) && args.length > 0) {\n                result.arguments = args;\n            }\n            return result;\n        }\n        Command.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Command} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n        }\n        Command.is = is;\n    })(Command || (exports.Command = Command = {}));\n    /**\n     * The TextEdit namespace provides helper function to create replace,\n     * insert and delete edits more easily.\n     */\n    var TextEdit;\n    (function (TextEdit) {\n        /**\n         * Creates a replace text edit.\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         */\n        function replace(range, newText) {\n            return { range: range, newText: newText };\n        }\n        TextEdit.replace = replace;\n        /**\n         * Creates an insert text edit.\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         */\n        function insert(position, newText) {\n            return { range: { start: position, end: position }, newText: newText };\n        }\n        TextEdit.insert = insert;\n        /**\n         * Creates a delete text edit.\n         * @param range The range of text to be deleted.\n         */\n        function del(range) {\n            return { range: range, newText: '' };\n        }\n        TextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && Is.string(candidate.newText)\n                && Range.is(candidate.range);\n        }\n        TextEdit.is = is;\n    })(TextEdit || (exports.TextEdit = TextEdit = {}));\n    var ChangeAnnotation;\n    (function (ChangeAnnotation) {\n        function create(label, needsConfirmation, description) {\n            var result = { label: label };\n            if (needsConfirmation !== undefined) {\n                result.needsConfirmation = needsConfirmation;\n            }\n            if (description !== undefined) {\n                result.description = description;\n            }\n            return result;\n        }\n        ChangeAnnotation.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n                (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        ChangeAnnotation.is = is;\n    })(ChangeAnnotation || (exports.ChangeAnnotation = ChangeAnnotation = {}));\n    var ChangeAnnotationIdentifier;\n    (function (ChangeAnnotationIdentifier) {\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate);\n        }\n        ChangeAnnotationIdentifier.is = is;\n    })(ChangeAnnotationIdentifier || (exports.ChangeAnnotationIdentifier = ChangeAnnotationIdentifier = {}));\n    var AnnotatedTextEdit;\n    (function (AnnotatedTextEdit) {\n        /**\n         * Creates an annotated replace text edit.\n         *\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         * @param annotation The annotation.\n         */\n        function replace(range, newText, annotation) {\n            return { range: range, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.replace = replace;\n        /**\n         * Creates an annotated insert text edit.\n         *\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         * @param annotation The annotation.\n         */\n        function insert(position, newText, annotation) {\n            return { range: { start: position, end: position }, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.insert = insert;\n        /**\n         * Creates an annotated delete text edit.\n         *\n         * @param range The range of text to be deleted.\n         * @param annotation The annotation.\n         */\n        function del(range, annotation) {\n            return { range: range, newText: '', annotationId: annotation };\n        }\n        AnnotatedTextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        AnnotatedTextEdit.is = is;\n    })(AnnotatedTextEdit || (exports.AnnotatedTextEdit = AnnotatedTextEdit = {}));\n    /**\n     * The TextDocumentEdit namespace provides helper function to create\n     * an edit that manipulates a text document.\n     */\n    var TextDocumentEdit;\n    (function (TextDocumentEdit) {\n        /**\n         * Creates a new `TextDocumentEdit`\n         */\n        function create(textDocument, edits) {\n            return { textDocument: textDocument, edits: edits };\n        }\n        TextDocumentEdit.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate)\n                && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n                && Array.isArray(candidate.edits);\n        }\n        TextDocumentEdit.is = is;\n    })(TextDocumentEdit || (exports.TextDocumentEdit = TextDocumentEdit = {}));\n    var CreateFile;\n    (function (CreateFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'create',\n                uri: uri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        CreateFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        CreateFile.is = is;\n    })(CreateFile || (exports.CreateFile = CreateFile = {}));\n    var RenameFile;\n    (function (RenameFile) {\n        function create(oldUri, newUri, options, annotation) {\n            var result = {\n                kind: 'rename',\n                oldUri: oldUri,\n                newUri: newUri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        RenameFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        RenameFile.is = is;\n    })(RenameFile || (exports.RenameFile = RenameFile = {}));\n    var DeleteFile;\n    (function (DeleteFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'delete',\n                uri: uri\n            };\n            if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        DeleteFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        DeleteFile.is = is;\n    })(DeleteFile || (exports.DeleteFile = DeleteFile = {}));\n    var WorkspaceEdit;\n    (function (WorkspaceEdit) {\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n                (candidate.documentChanges === undefined || candidate.documentChanges.every(function (change) {\n                    if (Is.string(change.kind)) {\n                        return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                    }\n                    else {\n                        return TextDocumentEdit.is(change);\n                    }\n                }));\n        }\n        WorkspaceEdit.is = is;\n    })(WorkspaceEdit || (exports.WorkspaceEdit = WorkspaceEdit = {}));\n    var TextEditChangeImpl = /** @class */ (function () {\n        function TextEditChangeImpl(edits, changeAnnotations) {\n            this.edits = edits;\n            this.changeAnnotations = changeAnnotations;\n        }\n        TextEditChangeImpl.prototype.insert = function (position, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.insert(position, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.insert(position, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.insert(position, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.replace = function (range, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.replace(range, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.replace(range, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.replace(range, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.delete = function (range, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.del(range);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.del(range, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.del(range, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.add = function (edit) {\n            this.edits.push(edit);\n        };\n        TextEditChangeImpl.prototype.all = function () {\n            return this.edits;\n        };\n        TextEditChangeImpl.prototype.clear = function () {\n            this.edits.splice(0, this.edits.length);\n        };\n        TextEditChangeImpl.prototype.assertChangeAnnotations = function (value) {\n            if (value === undefined) {\n                throw new Error(\"Text edit change is not configured to manage change annotations.\");\n            }\n        };\n        return TextEditChangeImpl;\n    }());\n    /**\n     * A helper class\n     */\n    var ChangeAnnotations = /** @class */ (function () {\n        function ChangeAnnotations(annotations) {\n            this._annotations = annotations === undefined ? Object.create(null) : annotations;\n            this._counter = 0;\n            this._size = 0;\n        }\n        ChangeAnnotations.prototype.all = function () {\n            return this._annotations;\n        };\n        Object.defineProperty(ChangeAnnotations.prototype, \"size\", {\n            get: function () {\n                return this._size;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ChangeAnnotations.prototype.manage = function (idOrAnnotation, annotation) {\n            var id;\n            if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n                id = idOrAnnotation;\n            }\n            else {\n                id = this.nextId();\n                annotation = idOrAnnotation;\n            }\n            if (this._annotations[id] !== undefined) {\n                throw new Error(\"Id \".concat(id, \" is already in use.\"));\n            }\n            if (annotation === undefined) {\n                throw new Error(\"No annotation provided for id \".concat(id));\n            }\n            this._annotations[id] = annotation;\n            this._size++;\n            return id;\n        };\n        ChangeAnnotations.prototype.nextId = function () {\n            this._counter++;\n            return this._counter.toString();\n        };\n        return ChangeAnnotations;\n    }());\n    /**\n     * A workspace change helps constructing changes to a workspace.\n     */\n    var WorkspaceChange = /** @class */ (function () {\n        function WorkspaceChange(workspaceEdit) {\n            var _this = this;\n            this._textEditChanges = Object.create(null);\n            if (workspaceEdit !== undefined) {\n                this._workspaceEdit = workspaceEdit;\n                if (workspaceEdit.documentChanges) {\n                    this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                    workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    workspaceEdit.documentChanges.forEach(function (change) {\n                        if (TextDocumentEdit.is(change)) {\n                            var textEditChange = new TextEditChangeImpl(change.edits, _this._changeAnnotations);\n                            _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                        }\n                    });\n                }\n                else if (workspaceEdit.changes) {\n                    Object.keys(workspaceEdit.changes).forEach(function (key) {\n                        var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                        _this._textEditChanges[key] = textEditChange;\n                    });\n                }\n            }\n            else {\n                this._workspaceEdit = {};\n            }\n        }\n        Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n            /**\n             * Returns the underlying {@link WorkspaceEdit} literal\n             * use to be returned from a workspace edit operation like rename.\n             */\n            get: function () {\n                this.initDocumentChanges();\n                if (this._changeAnnotations !== undefined) {\n                    if (this._changeAnnotations.size === 0) {\n                        this._workspaceEdit.changeAnnotations = undefined;\n                    }\n                    else {\n                        this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    }\n                }\n                return this._workspaceEdit;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WorkspaceChange.prototype.getTextEditChange = function (key) {\n            if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n                this.initDocumentChanges();\n                if (this._workspaceEdit.documentChanges === undefined) {\n                    throw new Error('Workspace edit is not configured for document changes.');\n                }\n                var textDocument = { uri: key.uri, version: key.version };\n                var result = this._textEditChanges[textDocument.uri];\n                if (!result) {\n                    var edits = [];\n                    var textDocumentEdit = {\n                        textDocument: textDocument,\n                        edits: edits\n                    };\n                    this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                    result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                    this._textEditChanges[textDocument.uri] = result;\n                }\n                return result;\n            }\n            else {\n                this.initChanges();\n                if (this._workspaceEdit.changes === undefined) {\n                    throw new Error('Workspace edit is not configured for normal text edit changes.');\n                }\n                var result = this._textEditChanges[key];\n                if (!result) {\n                    var edits = [];\n                    this._workspaceEdit.changes[key] = edits;\n                    result = new TextEditChangeImpl(edits);\n                    this._textEditChanges[key] = result;\n                }\n                return result;\n            }\n        };\n        WorkspaceChange.prototype.initDocumentChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._changeAnnotations = new ChangeAnnotations();\n                this._workspaceEdit.documentChanges = [];\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        };\n        WorkspaceChange.prototype.initChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._workspaceEdit.changes = Object.create(null);\n            }\n        };\n        WorkspaceChange.prototype.createFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = CreateFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = CreateFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.renameFile = function (oldUri, newUri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = RenameFile.create(oldUri, newUri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = RenameFile.create(oldUri, newUri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.deleteFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = DeleteFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = DeleteFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        return WorkspaceChange;\n    }());\n    exports.WorkspaceChange = WorkspaceChange;\n    /**\n     * The TextDocumentIdentifier namespace provides helper functions to work with\n     * {@link TextDocumentIdentifier} literals.\n     */\n    var TextDocumentIdentifier;\n    (function (TextDocumentIdentifier) {\n        /**\n         * Creates a new TextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         */\n        function create(uri) {\n            return { uri: uri };\n        }\n        TextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri);\n        }\n        TextDocumentIdentifier.is = is;\n    })(TextDocumentIdentifier || (exports.TextDocumentIdentifier = TextDocumentIdentifier = {}));\n    /**\n     * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link VersionedTextDocumentIdentifier} literals.\n     */\n    var VersionedTextDocumentIdentifier;\n    (function (VersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new VersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        VersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n        }\n        VersionedTextDocumentIdentifier.is = is;\n    })(VersionedTextDocumentIdentifier || (exports.VersionedTextDocumentIdentifier = VersionedTextDocumentIdentifier = {}));\n    /**\n     * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link OptionalVersionedTextDocumentIdentifier} literals.\n     */\n    var OptionalVersionedTextDocumentIdentifier;\n    (function (OptionalVersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        OptionalVersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n        }\n        OptionalVersionedTextDocumentIdentifier.is = is;\n    })(OptionalVersionedTextDocumentIdentifier || (exports.OptionalVersionedTextDocumentIdentifier = OptionalVersionedTextDocumentIdentifier = {}));\n    /**\n     * The TextDocumentItem namespace provides helper functions to work with\n     * {@link TextDocumentItem} literals.\n     */\n    var TextDocumentItem;\n    (function (TextDocumentItem) {\n        /**\n         * Creates a new TextDocumentItem literal.\n         * @param uri The document's uri.\n         * @param languageId The document's language identifier.\n         * @param version The document's version number.\n         * @param text The document's text.\n         */\n        function create(uri, languageId, version, text) {\n            return { uri: uri, languageId: languageId, version: version, text: text };\n        }\n        TextDocumentItem.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n        }\n        TextDocumentItem.is = is;\n    })(TextDocumentItem || (exports.TextDocumentItem = TextDocumentItem = {}));\n    /**\n     * Describes the content type that a client supports in various\n     * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n     *\n     * Please note that `MarkupKinds` must not start with a `$`. This kinds\n     * are reserved for internal usage.\n     */\n    var MarkupKind;\n    (function (MarkupKind) {\n        /**\n         * Plain text is supported as a content format\n         */\n        MarkupKind.PlainText = 'plaintext';\n        /**\n         * Markdown is supported as a content format\n         */\n        MarkupKind.Markdown = 'markdown';\n        /**\n         * Checks whether the given value is a value of the {@link MarkupKind} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n        }\n        MarkupKind.is = is;\n    })(MarkupKind || (exports.MarkupKind = MarkupKind = {}));\n    var MarkupContent;\n    (function (MarkupContent) {\n        /**\n         * Checks whether the given value conforms to the {@link MarkupContent} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n        }\n        MarkupContent.is = is;\n    })(MarkupContent || (exports.MarkupContent = MarkupContent = {}));\n    /**\n     * The kind of a completion entry.\n     */\n    var CompletionItemKind;\n    (function (CompletionItemKind) {\n        CompletionItemKind.Text = 1;\n        CompletionItemKind.Method = 2;\n        CompletionItemKind.Function = 3;\n        CompletionItemKind.Constructor = 4;\n        CompletionItemKind.Field = 5;\n        CompletionItemKind.Variable = 6;\n        CompletionItemKind.Class = 7;\n        CompletionItemKind.Interface = 8;\n        CompletionItemKind.Module = 9;\n        CompletionItemKind.Property = 10;\n        CompletionItemKind.Unit = 11;\n        CompletionItemKind.Value = 12;\n        CompletionItemKind.Enum = 13;\n        CompletionItemKind.Keyword = 14;\n        CompletionItemKind.Snippet = 15;\n        CompletionItemKind.Color = 16;\n        CompletionItemKind.File = 17;\n        CompletionItemKind.Reference = 18;\n        CompletionItemKind.Folder = 19;\n        CompletionItemKind.EnumMember = 20;\n        CompletionItemKind.Constant = 21;\n        CompletionItemKind.Struct = 22;\n        CompletionItemKind.Event = 23;\n        CompletionItemKind.Operator = 24;\n        CompletionItemKind.TypeParameter = 25;\n    })(CompletionItemKind || (exports.CompletionItemKind = CompletionItemKind = {}));\n    /**\n     * Defines whether the insert text in a completion item should be interpreted as\n     * plain text or a snippet.\n     */\n    var InsertTextFormat;\n    (function (InsertTextFormat) {\n        /**\n         * The primary text to be inserted is treated as a plain string.\n         */\n        InsertTextFormat.PlainText = 1;\n        /**\n         * The primary text to be inserted is treated as a snippet.\n         *\n         * A snippet can define tab stops and placeholders with `$1`, `$2`\n         * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n         * the end of the snippet. Placeholders with equal identifiers are linked,\n         * that is typing in one will update others too.\n         *\n         * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n         */\n        InsertTextFormat.Snippet = 2;\n    })(InsertTextFormat || (exports.InsertTextFormat = InsertTextFormat = {}));\n    /**\n     * Completion item tags are extra annotations that tweak the rendering of a completion\n     * item.\n     *\n     * @since 3.15.0\n     */\n    var CompletionItemTag;\n    (function (CompletionItemTag) {\n        /**\n         * Render a completion as obsolete, usually using a strike-out.\n         */\n        CompletionItemTag.Deprecated = 1;\n    })(CompletionItemTag || (exports.CompletionItemTag = CompletionItemTag = {}));\n    /**\n     * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n     *\n     * @since 3.16.0\n     */\n    var InsertReplaceEdit;\n    (function (InsertReplaceEdit) {\n        /**\n         * Creates a new insert / replace edit\n         */\n        function create(newText, insert, replace) {\n            return { newText: newText, insert: insert, replace: replace };\n        }\n        InsertReplaceEdit.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n        }\n        InsertReplaceEdit.is = is;\n    })(InsertReplaceEdit || (exports.InsertReplaceEdit = InsertReplaceEdit = {}));\n    /**\n     * How whitespace and indentation is handled during completion\n     * item insertion.\n     *\n     * @since 3.16.0\n     */\n    var InsertTextMode;\n    (function (InsertTextMode) {\n        /**\n         * The insertion or replace strings is taken as it is. If the\n         * value is multi line the lines below the cursor will be\n         * inserted using the indentation defined in the string value.\n         * The client will not apply any kind of adjustments to the\n         * string.\n         */\n        InsertTextMode.asIs = 1;\n        /**\n         * The editor adjusts leading whitespace of new lines so that\n         * they match the indentation up to the cursor of the line for\n         * which the item is accepted.\n         *\n         * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n         * multi line completion item is indented using 2 tabs and all\n         * following lines inserted will be indented using 2 tabs as well.\n         */\n        InsertTextMode.adjustIndentation = 2;\n    })(InsertTextMode || (exports.InsertTextMode = InsertTextMode = {}));\n    var CompletionItemLabelDetails;\n    (function (CompletionItemLabelDetails) {\n        function is(value) {\n            var candidate = value;\n            return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        CompletionItemLabelDetails.is = is;\n    })(CompletionItemLabelDetails || (exports.CompletionItemLabelDetails = CompletionItemLabelDetails = {}));\n    /**\n     * The CompletionItem namespace provides functions to deal with\n     * completion items.\n     */\n    var CompletionItem;\n    (function (CompletionItem) {\n        /**\n         * Create a completion item and seed it with a label.\n         * @param label The completion item's label\n         */\n        function create(label) {\n            return { label: label };\n        }\n        CompletionItem.create = create;\n    })(CompletionItem || (exports.CompletionItem = CompletionItem = {}));\n    /**\n     * The CompletionList namespace provides functions to deal with\n     * completion lists.\n     */\n    var CompletionList;\n    (function (CompletionList) {\n        /**\n         * Creates a new completion list.\n         *\n         * @param items The completion items.\n         * @param isIncomplete The list is not complete.\n         */\n        function create(items, isIncomplete) {\n            return { items: items ? items : [], isIncomplete: !!isIncomplete };\n        }\n        CompletionList.create = create;\n    })(CompletionList || (exports.CompletionList = CompletionList = {}));\n    var MarkedString;\n    (function (MarkedString) {\n        /**\n         * Creates a marked string from plain text.\n         *\n         * @param plainText The plain text.\n         */\n        function fromPlainText(plainText) {\n            return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        }\n        MarkedString.fromPlainText = fromPlainText;\n        /**\n         * Checks whether the given value conforms to the {@link MarkedString} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n        }\n        MarkedString.is = is;\n    })(MarkedString || (exports.MarkedString = MarkedString = {}));\n    var Hover;\n    (function (Hover) {\n        /**\n         * Checks whether the given value conforms to the {@link Hover} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n                MarkedString.is(candidate.contents) ||\n                Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n        }\n        Hover.is = is;\n    })(Hover || (exports.Hover = Hover = {}));\n    /**\n     * The ParameterInformation namespace provides helper functions to work with\n     * {@link ParameterInformation} literals.\n     */\n    var ParameterInformation;\n    (function (ParameterInformation) {\n        /**\n         * Creates a new parameter information literal.\n         *\n         * @param label A label string.\n         * @param documentation A doc string.\n         */\n        function create(label, documentation) {\n            return documentation ? { label: label, documentation: documentation } : { label: label };\n        }\n        ParameterInformation.create = create;\n    })(ParameterInformation || (exports.ParameterInformation = ParameterInformation = {}));\n    /**\n     * The SignatureInformation namespace provides helper functions to work with\n     * {@link SignatureInformation} literals.\n     */\n    var SignatureInformation;\n    (function (SignatureInformation) {\n        function create(label, documentation) {\n            var parameters = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                parameters[_i - 2] = arguments[_i];\n            }\n            var result = { label: label };\n            if (Is.defined(documentation)) {\n                result.documentation = documentation;\n            }\n            if (Is.defined(parameters)) {\n                result.parameters = parameters;\n            }\n            else {\n                result.parameters = [];\n            }\n            return result;\n        }\n        SignatureInformation.create = create;\n    })(SignatureInformation || (exports.SignatureInformation = SignatureInformation = {}));\n    /**\n     * A document highlight kind.\n     */\n    var DocumentHighlightKind;\n    (function (DocumentHighlightKind) {\n        /**\n         * A textual occurrence.\n         */\n        DocumentHighlightKind.Text = 1;\n        /**\n         * Read-access of a symbol, like reading a variable.\n         */\n        DocumentHighlightKind.Read = 2;\n        /**\n         * Write-access of a symbol, like writing to a variable.\n         */\n        DocumentHighlightKind.Write = 3;\n    })(DocumentHighlightKind || (exports.DocumentHighlightKind = DocumentHighlightKind = {}));\n    /**\n     * DocumentHighlight namespace to provide helper functions to work with\n     * {@link DocumentHighlight} literals.\n     */\n    var DocumentHighlight;\n    (function (DocumentHighlight) {\n        /**\n         * Create a DocumentHighlight object.\n         * @param range The range the highlight applies to.\n         * @param kind The highlight kind\n         */\n        function create(range, kind) {\n            var result = { range: range };\n            if (Is.number(kind)) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        DocumentHighlight.create = create;\n    })(DocumentHighlight || (exports.DocumentHighlight = DocumentHighlight = {}));\n    /**\n     * A symbol kind.\n     */\n    var SymbolKind;\n    (function (SymbolKind) {\n        SymbolKind.File = 1;\n        SymbolKind.Module = 2;\n        SymbolKind.Namespace = 3;\n        SymbolKind.Package = 4;\n        SymbolKind.Class = 5;\n        SymbolKind.Method = 6;\n        SymbolKind.Property = 7;\n        SymbolKind.Field = 8;\n        SymbolKind.Constructor = 9;\n        SymbolKind.Enum = 10;\n        SymbolKind.Interface = 11;\n        SymbolKind.Function = 12;\n        SymbolKind.Variable = 13;\n        SymbolKind.Constant = 14;\n        SymbolKind.String = 15;\n        SymbolKind.Number = 16;\n        SymbolKind.Boolean = 17;\n        SymbolKind.Array = 18;\n        SymbolKind.Object = 19;\n        SymbolKind.Key = 20;\n        SymbolKind.Null = 21;\n        SymbolKind.EnumMember = 22;\n        SymbolKind.Struct = 23;\n        SymbolKind.Event = 24;\n        SymbolKind.Operator = 25;\n        SymbolKind.TypeParameter = 26;\n    })(SymbolKind || (exports.SymbolKind = SymbolKind = {}));\n    /**\n     * Symbol tags are extra annotations that tweak the rendering of a symbol.\n     *\n     * @since 3.16\n     */\n    var SymbolTag;\n    (function (SymbolTag) {\n        /**\n         * Render a symbol as obsolete, usually using a strike-out.\n         */\n        SymbolTag.Deprecated = 1;\n    })(SymbolTag || (exports.SymbolTag = SymbolTag = {}));\n    var SymbolInformation;\n    (function (SymbolInformation) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the location of the symbol.\n         * @param uri The resource of the location of symbol.\n         * @param containerName The name of the symbol containing the symbol.\n         */\n        function create(name, kind, range, uri, containerName) {\n            var result = {\n                name: name,\n                kind: kind,\n                location: { uri: uri, range: range }\n            };\n            if (containerName) {\n                result.containerName = containerName;\n            }\n            return result;\n        }\n        SymbolInformation.create = create;\n    })(SymbolInformation || (exports.SymbolInformation = SymbolInformation = {}));\n    var WorkspaceSymbol;\n    (function (WorkspaceSymbol) {\n        /**\n         * Create a new workspace symbol.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param uri The resource of the location of the symbol.\n         * @param range An options range of the location.\n         * @returns A WorkspaceSymbol.\n         */\n        function create(name, kind, uri, range) {\n            return range !== undefined\n                ? { name: name, kind: kind, location: { uri: uri, range: range } }\n                : { name: name, kind: kind, location: { uri: uri } };\n        }\n        WorkspaceSymbol.create = create;\n    })(WorkspaceSymbol || (exports.WorkspaceSymbol = WorkspaceSymbol = {}));\n    var DocumentSymbol;\n    (function (DocumentSymbol) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param detail The detail of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the symbol.\n         * @param selectionRange The selectionRange of the symbol.\n         * @param children Children of the symbol.\n         */\n        function create(name, detail, kind, range, selectionRange, children) {\n            var result = {\n                name: name,\n                detail: detail,\n                kind: kind,\n                range: range,\n                selectionRange: selectionRange\n            };\n            if (children !== undefined) {\n                result.children = children;\n            }\n            return result;\n        }\n        DocumentSymbol.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                Is.string(candidate.name) && Is.number(candidate.kind) &&\n                Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n                (candidate.detail === undefined || Is.string(candidate.detail)) &&\n                (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n                (candidate.children === undefined || Array.isArray(candidate.children)) &&\n                (candidate.tags === undefined || Array.isArray(candidate.tags));\n        }\n        DocumentSymbol.is = is;\n    })(DocumentSymbol || (exports.DocumentSymbol = DocumentSymbol = {}));\n    /**\n     * A set of predefined code action kinds\n     */\n    var CodeActionKind;\n    (function (CodeActionKind) {\n        /**\n         * Empty kind.\n         */\n        CodeActionKind.Empty = '';\n        /**\n         * Base kind for quickfix actions: 'quickfix'\n         */\n        CodeActionKind.QuickFix = 'quickfix';\n        /**\n         * Base kind for refactoring actions: 'refactor'\n         */\n        CodeActionKind.Refactor = 'refactor';\n        /**\n         * Base kind for refactoring extraction actions: 'refactor.extract'\n         *\n         * Example extract actions:\n         *\n         * - Extract method\n         * - Extract function\n         * - Extract variable\n         * - Extract interface from class\n         * - ...\n         */\n        CodeActionKind.RefactorExtract = 'refactor.extract';\n        /**\n         * Base kind for refactoring inline actions: 'refactor.inline'\n         *\n         * Example inline actions:\n         *\n         * - Inline function\n         * - Inline variable\n         * - Inline constant\n         * - ...\n         */\n        CodeActionKind.RefactorInline = 'refactor.inline';\n        /**\n         * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n         *\n         * Example rewrite actions:\n         *\n         * - Convert JavaScript function to class\n         * - Add or remove parameter\n         * - Encapsulate field\n         * - Make method static\n         * - Move method to base class\n         * - ...\n         */\n        CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n        /**\n         * Base kind for source actions: `source`\n         *\n         * Source code actions apply to the entire file.\n         */\n        CodeActionKind.Source = 'source';\n        /**\n         * Base kind for an organize imports source action: `source.organizeImports`\n         */\n        CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n        /**\n         * Base kind for auto-fix source actions: `source.fixAll`.\n         *\n         * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n         * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n         *\n         * @since 3.15.0\n         */\n        CodeActionKind.SourceFixAll = 'source.fixAll';\n    })(CodeActionKind || (exports.CodeActionKind = CodeActionKind = {}));\n    /**\n     * The reason why code actions were requested.\n     *\n     * @since 3.17.0\n     */\n    var CodeActionTriggerKind;\n    (function (CodeActionTriggerKind) {\n        /**\n         * Code actions were explicitly requested by the user or by an extension.\n         */\n        CodeActionTriggerKind.Invoked = 1;\n        /**\n         * Code actions were requested automatically.\n         *\n         * This typically happens when current selection in a file changes, but can\n         * also be triggered when file content changes.\n         */\n        CodeActionTriggerKind.Automatic = 2;\n    })(CodeActionTriggerKind || (exports.CodeActionTriggerKind = CodeActionTriggerKind = {}));\n    /**\n     * The CodeActionContext namespace provides helper functions to work with\n     * {@link CodeActionContext} literals.\n     */\n    var CodeActionContext;\n    (function (CodeActionContext) {\n        /**\n         * Creates a new CodeActionContext literal.\n         */\n        function create(diagnostics, only, triggerKind) {\n            var result = { diagnostics: diagnostics };\n            if (only !== undefined && only !== null) {\n                result.only = only;\n            }\n            if (triggerKind !== undefined && triggerKind !== null) {\n                result.triggerKind = triggerKind;\n            }\n            return result;\n        }\n        CodeActionContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n                && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n                && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n        }\n        CodeActionContext.is = is;\n    })(CodeActionContext || (exports.CodeActionContext = CodeActionContext = {}));\n    var CodeAction;\n    (function (CodeAction) {\n        function create(title, kindOrCommandOrEdit, kind) {\n            var result = { title: title };\n            var checkKind = true;\n            if (typeof kindOrCommandOrEdit === 'string') {\n                checkKind = false;\n                result.kind = kindOrCommandOrEdit;\n            }\n            else if (Command.is(kindOrCommandOrEdit)) {\n                result.command = kindOrCommandOrEdit;\n            }\n            else {\n                result.edit = kindOrCommandOrEdit;\n            }\n            if (checkKind && kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        CodeAction.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.title) &&\n                (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n                (candidate.kind === undefined || Is.string(candidate.kind)) &&\n                (candidate.edit !== undefined || candidate.command !== undefined) &&\n                (candidate.command === undefined || Command.is(candidate.command)) &&\n                (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n                (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n        }\n        CodeAction.is = is;\n    })(CodeAction || (exports.CodeAction = CodeAction = {}));\n    /**\n     * The CodeLens namespace provides helper functions to work with\n     * {@link CodeLens} literals.\n     */\n    var CodeLens;\n    (function (CodeLens) {\n        /**\n         * Creates a new CodeLens literal.\n         */\n        function create(range, data) {\n            var result = { range: range };\n            if (Is.defined(data)) {\n                result.data = data;\n            }\n            return result;\n        }\n        CodeLens.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeLens} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n        }\n        CodeLens.is = is;\n    })(CodeLens || (exports.CodeLens = CodeLens = {}));\n    /**\n     * The FormattingOptions namespace provides helper functions to work with\n     * {@link FormattingOptions} literals.\n     */\n    var FormattingOptions;\n    (function (FormattingOptions) {\n        /**\n         * Creates a new FormattingOptions literal.\n         */\n        function create(tabSize, insertSpaces) {\n            return { tabSize: tabSize, insertSpaces: insertSpaces };\n        }\n        FormattingOptions.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n        }\n        FormattingOptions.is = is;\n    })(FormattingOptions || (exports.FormattingOptions = FormattingOptions = {}));\n    /**\n     * The DocumentLink namespace provides helper functions to work with\n     * {@link DocumentLink} literals.\n     */\n    var DocumentLink;\n    (function (DocumentLink) {\n        /**\n         * Creates a new DocumentLink literal.\n         */\n        function create(range, target, data) {\n            return { range: range, target: target, data: data };\n        }\n        DocumentLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n        }\n        DocumentLink.is = is;\n    })(DocumentLink || (exports.DocumentLink = DocumentLink = {}));\n    /**\n     * The SelectionRange namespace provides helper function to work with\n     * SelectionRange literals.\n     */\n    var SelectionRange;\n    (function (SelectionRange) {\n        /**\n         * Creates a new SelectionRange\n         * @param range the range.\n         * @param parent an optional parent.\n         */\n        function create(range, parent) {\n            return { range: range, parent: parent };\n        }\n        SelectionRange.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n        }\n        SelectionRange.is = is;\n    })(SelectionRange || (exports.SelectionRange = SelectionRange = {}));\n    /**\n     * A set of predefined token types. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenTypes;\n    (function (SemanticTokenTypes) {\n        SemanticTokenTypes[\"namespace\"] = \"namespace\";\n        /**\n         * Represents a generic type. Acts as a fallback for types which can't be mapped to\n         * a specific type like class or enum.\n         */\n        SemanticTokenTypes[\"type\"] = \"type\";\n        SemanticTokenTypes[\"class\"] = \"class\";\n        SemanticTokenTypes[\"enum\"] = \"enum\";\n        SemanticTokenTypes[\"interface\"] = \"interface\";\n        SemanticTokenTypes[\"struct\"] = \"struct\";\n        SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n        SemanticTokenTypes[\"parameter\"] = \"parameter\";\n        SemanticTokenTypes[\"variable\"] = \"variable\";\n        SemanticTokenTypes[\"property\"] = \"property\";\n        SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n        SemanticTokenTypes[\"event\"] = \"event\";\n        SemanticTokenTypes[\"function\"] = \"function\";\n        SemanticTokenTypes[\"method\"] = \"method\";\n        SemanticTokenTypes[\"macro\"] = \"macro\";\n        SemanticTokenTypes[\"keyword\"] = \"keyword\";\n        SemanticTokenTypes[\"modifier\"] = \"modifier\";\n        SemanticTokenTypes[\"comment\"] = \"comment\";\n        SemanticTokenTypes[\"string\"] = \"string\";\n        SemanticTokenTypes[\"number\"] = \"number\";\n        SemanticTokenTypes[\"regexp\"] = \"regexp\";\n        SemanticTokenTypes[\"operator\"] = \"operator\";\n        /**\n         * @since 3.17.0\n         */\n        SemanticTokenTypes[\"decorator\"] = \"decorator\";\n    })(SemanticTokenTypes || (exports.SemanticTokenTypes = SemanticTokenTypes = {}));\n    /**\n     * A set of predefined token modifiers. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenModifiers;\n    (function (SemanticTokenModifiers) {\n        SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n        SemanticTokenModifiers[\"definition\"] = \"definition\";\n        SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n        SemanticTokenModifiers[\"static\"] = \"static\";\n        SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n        SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n        SemanticTokenModifiers[\"async\"] = \"async\";\n        SemanticTokenModifiers[\"modification\"] = \"modification\";\n        SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n        SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n    })(SemanticTokenModifiers || (exports.SemanticTokenModifiers = SemanticTokenModifiers = {}));\n    /**\n     * @since 3.16.0\n     */\n    var SemanticTokens;\n    (function (SemanticTokens) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n                Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n        }\n        SemanticTokens.is = is;\n    })(SemanticTokens || (exports.SemanticTokens = SemanticTokens = {}));\n    /**\n     * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueText;\n    (function (InlineValueText) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        InlineValueText.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n        }\n        InlineValueText.is = is;\n    })(InlineValueText || (exports.InlineValueText = InlineValueText = {}));\n    /**\n     * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueVariableLookup;\n    (function (InlineValueVariableLookup) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, variableName, caseSensitiveLookup) {\n            return { range: range, variableName: variableName, caseSensitiveLookup: caseSensitiveLookup };\n        }\n        InlineValueVariableLookup.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n                && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n        }\n        InlineValueVariableLookup.is = is;\n    })(InlineValueVariableLookup || (exports.InlineValueVariableLookup = InlineValueVariableLookup = {}));\n    /**\n     * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueEvaluatableExpression;\n    (function (InlineValueEvaluatableExpression) {\n        /**\n         * Creates a new InlineValueEvaluatableExpression literal.\n         */\n        function create(range, expression) {\n            return { range: range, expression: expression };\n        }\n        InlineValueEvaluatableExpression.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n                && (Is.string(candidate.expression) || candidate.expression === undefined);\n        }\n        InlineValueEvaluatableExpression.is = is;\n    })(InlineValueEvaluatableExpression || (exports.InlineValueEvaluatableExpression = InlineValueEvaluatableExpression = {}));\n    /**\n     * The InlineValueContext namespace provides helper functions to work with\n     * {@link InlineValueContext} literals.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueContext;\n    (function (InlineValueContext) {\n        /**\n         * Creates a new InlineValueContext literal.\n         */\n        function create(frameId, stoppedLocation) {\n            return { frameId: frameId, stoppedLocation: stoppedLocation };\n        }\n        InlineValueContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(value.stoppedLocation);\n        }\n        InlineValueContext.is = is;\n    })(InlineValueContext || (exports.InlineValueContext = InlineValueContext = {}));\n    /**\n     * Inlay hint kinds.\n     *\n     * @since 3.17.0\n     */\n    var InlayHintKind;\n    (function (InlayHintKind) {\n        /**\n         * An inlay hint that for a type annotation.\n         */\n        InlayHintKind.Type = 1;\n        /**\n         * An inlay hint that is for a parameter.\n         */\n        InlayHintKind.Parameter = 2;\n        function is(value) {\n            return value === 1 || value === 2;\n        }\n        InlayHintKind.is = is;\n    })(InlayHintKind || (exports.InlayHintKind = InlayHintKind = {}));\n    var InlayHintLabelPart;\n    (function (InlayHintLabelPart) {\n        function create(value) {\n            return { value: value };\n        }\n        InlayHintLabelPart.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.location === undefined || Location.is(candidate.location))\n                && (candidate.command === undefined || Command.is(candidate.command));\n        }\n        InlayHintLabelPart.is = is;\n    })(InlayHintLabelPart || (exports.InlayHintLabelPart = InlayHintLabelPart = {}));\n    var InlayHint;\n    (function (InlayHint) {\n        function create(position, label, kind) {\n            var result = { position: position, label: label };\n            if (kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        InlayHint.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.position)\n                && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n                && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n                && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n                && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n        }\n        InlayHint.is = is;\n    })(InlayHint || (exports.InlayHint = InlayHint = {}));\n    var StringValue;\n    (function (StringValue) {\n        function createSnippet(value) {\n            return { kind: 'snippet', value: value };\n        }\n        StringValue.createSnippet = createSnippet;\n    })(StringValue || (exports.StringValue = StringValue = {}));\n    var InlineCompletionItem;\n    (function (InlineCompletionItem) {\n        function create(insertText, filterText, range, command) {\n            return { insertText: insertText, filterText: filterText, range: range, command: command };\n        }\n        InlineCompletionItem.create = create;\n    })(InlineCompletionItem || (exports.InlineCompletionItem = InlineCompletionItem = {}));\n    var InlineCompletionList;\n    (function (InlineCompletionList) {\n        function create(items) {\n            return { items: items };\n        }\n        InlineCompletionList.create = create;\n    })(InlineCompletionList || (exports.InlineCompletionList = InlineCompletionList = {}));\n    /**\n     * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    var InlineCompletionTriggerKind;\n    (function (InlineCompletionTriggerKind) {\n        /**\n         * Completion was triggered explicitly by a user gesture.\n         */\n        InlineCompletionTriggerKind.Invoked = 0;\n        /**\n         * Completion was triggered automatically while editing.\n         */\n        InlineCompletionTriggerKind.Automatic = 1;\n    })(InlineCompletionTriggerKind || (exports.InlineCompletionTriggerKind = InlineCompletionTriggerKind = {}));\n    var SelectedCompletionInfo;\n    (function (SelectedCompletionInfo) {\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        SelectedCompletionInfo.create = create;\n    })(SelectedCompletionInfo || (exports.SelectedCompletionInfo = SelectedCompletionInfo = {}));\n    var InlineCompletionContext;\n    (function (InlineCompletionContext) {\n        function create(triggerKind, selectedCompletionInfo) {\n            return { triggerKind: triggerKind, selectedCompletionInfo: selectedCompletionInfo };\n        }\n        InlineCompletionContext.create = create;\n    })(InlineCompletionContext || (exports.InlineCompletionContext = InlineCompletionContext = {}));\n    var WorkspaceFolder;\n    (function (WorkspaceFolder) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n        }\n        WorkspaceFolder.is = is;\n    })(WorkspaceFolder || (exports.WorkspaceFolder = WorkspaceFolder = {}));\n    exports.EOL = ['\\n', '\\r\\n', '\\r'];\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var TextDocument;\n    (function (TextDocument) {\n        /**\n         * Creates a new ITextDocument literal from the given uri and content.\n         * @param uri The document's uri.\n         * @param languageId The document's language Id.\n         * @param version The document's version.\n         * @param content The document's content.\n         */\n        function create(uri, languageId, version, content) {\n            return new FullTextDocument(uri, languageId, version, content);\n        }\n        TextDocument.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n                && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n        }\n        TextDocument.is = is;\n        function applyEdits(document, edits) {\n            var text = document.getText();\n            var sortedEdits = mergeSort(edits, function (a, b) {\n                var diff = a.range.start.line - b.range.start.line;\n                if (diff === 0) {\n                    return a.range.start.character - b.range.start.character;\n                }\n                return diff;\n            });\n            var lastModifiedOffset = text.length;\n            for (var i = sortedEdits.length - 1; i >= 0; i--) {\n                var e = sortedEdits[i];\n                var startOffset = document.offsetAt(e.range.start);\n                var endOffset = document.offsetAt(e.range.end);\n                if (endOffset <= lastModifiedOffset) {\n                    text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n                }\n                else {\n                    throw new Error('Overlapping edit');\n                }\n                lastModifiedOffset = startOffset;\n            }\n            return text;\n        }\n        TextDocument.applyEdits = applyEdits;\n        function mergeSort(data, compare) {\n            if (data.length <= 1) {\n                // sorted\n                return data;\n            }\n            var p = (data.length / 2) | 0;\n            var left = data.slice(0, p);\n            var right = data.slice(p);\n            mergeSort(left, compare);\n            mergeSort(right, compare);\n            var leftIdx = 0;\n            var rightIdx = 0;\n            var i = 0;\n            while (leftIdx < left.length && rightIdx < right.length) {\n                var ret = compare(left[leftIdx], right[rightIdx]);\n                if (ret <= 0) {\n                    // smaller_equal -> take left to preserve order\n                    data[i++] = left[leftIdx++];\n                }\n                else {\n                    // greater -> take right\n                    data[i++] = right[rightIdx++];\n                }\n            }\n            while (leftIdx < left.length) {\n                data[i++] = left[leftIdx++];\n            }\n            while (rightIdx < right.length) {\n                data[i++] = right[rightIdx++];\n            }\n            return data;\n        }\n    })(TextDocument || (exports.TextDocument = TextDocument = {}));\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var FullTextDocument = /** @class */ (function () {\n        function FullTextDocument(uri, languageId, version, content) {\n            this._uri = uri;\n            this._languageId = languageId;\n            this._version = version;\n            this._content = content;\n            this._lineOffsets = undefined;\n        }\n        Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n            get: function () {\n                return this._uri;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n            get: function () {\n                return this._languageId;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"version\", {\n            get: function () {\n                return this._version;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FullTextDocument.prototype.getText = function (range) {\n            if (range) {\n                var start = this.offsetAt(range.start);\n                var end = this.offsetAt(range.end);\n                return this._content.substring(start, end);\n            }\n            return this._content;\n        };\n        FullTextDocument.prototype.update = function (event, version) {\n            this._content = event.text;\n            this._version = version;\n            this._lineOffsets = undefined;\n        };\n        FullTextDocument.prototype.getLineOffsets = function () {\n            if (this._lineOffsets === undefined) {\n                var lineOffsets = [];\n                var text = this._content;\n                var isLineStart = true;\n                for (var i = 0; i < text.length; i++) {\n                    if (isLineStart) {\n                        lineOffsets.push(i);\n                        isLineStart = false;\n                    }\n                    var ch = text.charAt(i);\n                    isLineStart = (ch === '\\r' || ch === '\\n');\n                    if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                        i++;\n                    }\n                }\n                if (isLineStart && text.length > 0) {\n                    lineOffsets.push(text.length);\n                }\n                this._lineOffsets = lineOffsets;\n            }\n            return this._lineOffsets;\n        };\n        FullTextDocument.prototype.positionAt = function (offset) {\n            offset = Math.max(Math.min(offset, this._content.length), 0);\n            var lineOffsets = this.getLineOffsets();\n            var low = 0, high = lineOffsets.length;\n            if (high === 0) {\n                return Position.create(0, offset);\n            }\n            while (low < high) {\n                var mid = Math.floor((low + high) / 2);\n                if (lineOffsets[mid] > offset) {\n                    high = mid;\n                }\n                else {\n                    low = mid + 1;\n                }\n            }\n            // low is the least x for which the line offset is larger than the current offset\n            // or array.length if no line offset is larger than the current offset\n            var line = low - 1;\n            return Position.create(line, offset - lineOffsets[line]);\n        };\n        FullTextDocument.prototype.offsetAt = function (position) {\n            var lineOffsets = this.getLineOffsets();\n            if (position.line >= lineOffsets.length) {\n                return this._content.length;\n            }\n            else if (position.line < 0) {\n                return 0;\n            }\n            var lineOffset = lineOffsets[position.line];\n            var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n            return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n        };\n        Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n            get: function () {\n                return this.getLineOffsets().length;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return FullTextDocument;\n    }());\n    var Is;\n    (function (Is) {\n        var toString = Object.prototype.toString;\n        function defined(value) {\n            return typeof value !== 'undefined';\n        }\n        Is.defined = defined;\n        function undefined(value) {\n            return typeof value === 'undefined';\n        }\n        Is.undefined = undefined;\n        function boolean(value) {\n            return value === true || value === false;\n        }\n        Is.boolean = boolean;\n        function string(value) {\n            return toString.call(value) === '[object String]';\n        }\n        Is.string = string;\n        function number(value) {\n            return toString.call(value) === '[object Number]';\n        }\n        Is.number = number;\n        function numberRange(value, min, max) {\n            return toString.call(value) === '[object Number]' && min <= value && value <= max;\n        }\n        Is.numberRange = numberRange;\n        function integer(value) {\n            return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n        }\n        Is.integer = integer;\n        function uinteger(value) {\n            return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n        }\n        Is.uinteger = uinteger;\n        function func(value) {\n            return toString.call(value) === '[object Function]';\n        }\n        Is.func = func;\n        function objectLiteral(value) {\n            // Strictly speaking class instances pass this check as well. Since the LSP\n            // doesn't use classes we ignore this for now. If we do we need to add something\n            // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n            return value !== null && typeof value === 'object';\n        }\n        Is.objectLiteral = objectLiteral;\n        function typedArray(value, check) {\n            return Array.isArray(value) && value.every(check);\n        }\n        Is.typedArray = typedArray;\n    })(Is || (Is = {}));\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar stream = require('stream');\nvar module$1 = require('module');\n\nvar decoder;\r\ntry {\r\n\tdecoder = new TextDecoder();\r\n} catch(error) {}\r\nvar src;\r\nvar srcEnd;\r\nvar position = 0;\r\nconst EMPTY_ARRAY = [];\r\nvar strings = EMPTY_ARRAY;\r\nvar stringPosition = 0;\r\nvar currentUnpackr = {};\r\nvar currentStructures;\r\nvar srcString;\r\nvar srcStringStart = 0;\r\nvar srcStringEnd = 0;\r\nvar bundledStrings;\r\nvar referenceMap;\r\nvar currentExtensions = [];\r\nvar dataView;\r\nvar defaultOptions = {\r\n\tuseRecords: false,\r\n\tmapsAsObjects: true\r\n};\r\nclass C1Type {}\r\nconst C1 = new C1Type();\r\nC1.name = 'MessagePack 0xC1';\r\nvar sequentialMode = false;\r\nvar inlineObjectReadThreshold = 2;\r\ntry {\r\n\tnew Function('');\r\n} catch(error) {\r\n\t// if eval variants are not supported, do not create inline object readers ever\r\n\tinlineObjectReadThreshold = Infinity;\r\n}\r\n\r\nclass Unpackr {\r\n\tconstructor(options) {\r\n\t\tif (options) {\r\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\r\n\t\t\t\toptions.mapsAsObjects = true;\r\n\t\t\tif (options.structures)\r\n\t\t\t\toptions.structures.sharedLength = options.structures.length;\r\n\t\t\telse if (options.getStructures) {\r\n\t\t\t\t(options.structures = []).uninitialized = true; // this is what we use to denote an uninitialized structures\r\n\t\t\t\toptions.structures.sharedLength = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tObject.assign(this, options);\r\n\t}\r\n\tunpack(source, end) {\r\n\t\tif (src) {\r\n\t\t\t// re-entrant execution, save the state and restore it after we do this unpack\r\n\t\t\treturn saveState(() => {\r\n\t\t\t\tclearSource();\r\n\t\t\t\treturn this ? this.unpack(source, end) : Unpackr.prototype.unpack.call(defaultOptions, source, end)\r\n\t\t\t})\r\n\t\t}\r\n\t\tsrcEnd = end > -1 ? end : source.length;\r\n\t\tposition = 0;\r\n\t\tstringPosition = 0;\r\n\t\tsrcStringEnd = 0;\r\n\t\tsrcString = null;\r\n\t\tstrings = EMPTY_ARRAY;\r\n\t\tbundledStrings = null;\r\n\t\tsrc = source;\r\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\r\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\r\n\t\t// new ones\r\n\t\ttry {\r\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength));\r\n\t\t} catch(error) {\r\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\r\n\t\t\tsrc = null;\r\n\t\t\tif (source instanceof Uint8Array)\r\n\t\t\t\tthrow error\r\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\r\n\t\t}\r\n\t\tif (this instanceof Unpackr) {\r\n\t\t\tcurrentUnpackr = this;\r\n\t\t\tif (this.structures) {\r\n\t\t\t\tcurrentStructures = this.structures;\r\n\t\t\t\treturn checkedRead()\r\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\r\n\t\t\t\tcurrentStructures = [];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcurrentUnpackr = defaultOptions;\r\n\t\t\tif (!currentStructures || currentStructures.length > 0)\r\n\t\t\t\tcurrentStructures = [];\r\n\t\t}\r\n\t\treturn checkedRead()\r\n\t}\r\n\tunpackMultiple(source, forEach) {\r\n\t\tlet values, lastPosition = 0;\r\n\t\ttry {\r\n\t\t\tsequentialMode = true;\r\n\t\t\tlet size = source.length;\r\n\t\t\tlet value = this ? this.unpack(source, size) : defaultUnpackr.unpack(source, size);\r\n\t\t\tif (forEach) {\r\n\t\t\t\tforEach(value);\r\n\t\t\t\twhile(position < size) {\r\n\t\t\t\t\tlastPosition = position;\r\n\t\t\t\t\tif (forEach(checkedRead()) === false) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvalues = [ value ];\r\n\t\t\t\twhile(position < size) {\r\n\t\t\t\t\tlastPosition = position;\r\n\t\t\t\t\tvalues.push(checkedRead());\r\n\t\t\t\t}\r\n\t\t\t\treturn values\r\n\t\t\t}\r\n\t\t} catch(error) {\r\n\t\t\terror.lastPosition = lastPosition;\r\n\t\t\terror.values = values;\r\n\t\t\tthrow error\r\n\t\t} finally {\r\n\t\t\tsequentialMode = false;\r\n\t\t\tclearSource();\r\n\t\t}\r\n\t}\r\n\t_mergeStructures(loadedStructures, existingStructures) {\r\n\t\tloadedStructures = loadedStructures || [];\r\n\t\tfor (let i = 0, l = loadedStructures.length; i < l; i++) {\r\n\t\t\tlet structure = loadedStructures[i];\r\n\t\t\tif (structure) {\r\n\t\t\t\tstructure.isShared = true;\r\n\t\t\t\tif (i >= 32)\r\n\t\t\t\t\tstructure.highByte = (i - 32) >> 5;\r\n\t\t\t}\r\n\t\t}\r\n\t\tloadedStructures.sharedLength = loadedStructures.length;\r\n\t\tfor (let id in existingStructures || []) {\r\n\t\t\tif (id >= 0) {\r\n\t\t\t\tlet structure = loadedStructures[id];\r\n\t\t\t\tlet existing = existingStructures[id];\r\n\t\t\t\tif (existing) {\r\n\t\t\t\t\tif (structure)\r\n\t\t\t\t\t\t(loadedStructures.restoreStructures || (loadedStructures.restoreStructures = []))[id] = structure;\r\n\t\t\t\t\tloadedStructures[id] = existing;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.structures = loadedStructures\r\n\t}\r\n\tdecode(source, end) {\r\n\t\treturn this.unpack(source, end)\r\n\t}\r\n}\r\nfunction checkedRead() {\r\n\ttry {\r\n\t\tif (!currentUnpackr.trusted && !sequentialMode) {\r\n\t\t\tlet sharedLength = currentStructures.sharedLength || 0;\r\n\t\t\tif (sharedLength < currentStructures.length)\r\n\t\t\t\tcurrentStructures.length = sharedLength;\r\n\t\t}\r\n\t\tlet result = read();\r\n\t\tif (bundledStrings) // bundled strings to skip past\r\n\t\t\tposition = bundledStrings.postBundlePosition;\r\n\r\n\t\tif (position == srcEnd) {\r\n\t\t\t// finished reading this source, cleanup references\r\n\t\t\tif (currentStructures.restoreStructures)\r\n\t\t\t\trestoreStructures();\r\n\t\t\tcurrentStructures = null;\r\n\t\t\tsrc = null;\r\n\t\t\tif (referenceMap)\r\n\t\t\t\treferenceMap = null;\r\n\t\t} else if (position > srcEnd) {\r\n\t\t\t// over read\r\n\t\t\tthrow new Error('Unexpected end of MessagePack data')\r\n\t\t} else if (!sequentialMode) {\r\n\t\t\tthrow new Error('Data read, but end of buffer not reached ' + JSON.stringify(result).slice(0, 100))\r\n\t\t}\r\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\r\n\t\treturn result\r\n\t} catch(error) {\r\n\t\tif (currentStructures.restoreStructures)\r\n\t\t\trestoreStructures();\r\n\t\tclearSource();\r\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer') || position > srcEnd) {\r\n\t\t\terror.incomplete = true;\r\n\t\t}\r\n\t\tthrow error\r\n\t}\r\n}\r\n\r\nfunction restoreStructures() {\r\n\tfor (let id in currentStructures.restoreStructures) {\r\n\t\tcurrentStructures[id] = currentStructures.restoreStructures[id];\r\n\t}\r\n\tcurrentStructures.restoreStructures = null;\r\n}\r\n\r\nfunction read() {\r\n\tlet token = src[position++];\r\n\tif (token < 0xa0) {\r\n\t\tif (token < 0x80) {\r\n\t\t\tif (token < 0x40)\r\n\t\t\t\treturn token\r\n\t\t\telse {\r\n\t\t\t\tlet structure = currentStructures[token & 0x3f] ||\r\n\t\t\t\t\tcurrentUnpackr.getStructures && loadStructures()[token & 0x3f];\r\n\t\t\t\tif (structure) {\r\n\t\t\t\t\tif (!structure.read) {\r\n\t\t\t\t\t\tstructure.read = createStructureReader(structure, token & 0x3f);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn structure.read()\r\n\t\t\t\t} else\r\n\t\t\t\t\treturn token\r\n\t\t\t}\r\n\t\t} else if (token < 0x90) {\r\n\t\t\t// map\r\n\t\t\ttoken -= 0x80;\r\n\t\t\tif (currentUnpackr.mapsAsObjects) {\r\n\t\t\t\tlet object = {};\r\n\t\t\t\tfor (let i = 0; i < token; i++) {\r\n\t\t\t\t\tobject[readKey()] = read();\r\n\t\t\t\t}\r\n\t\t\t\treturn object\r\n\t\t\t} else {\r\n\t\t\t\tlet map = new Map();\r\n\t\t\t\tfor (let i = 0; i < token; i++) {\r\n\t\t\t\t\tmap.set(read(), read());\r\n\t\t\t\t}\r\n\t\t\t\treturn map\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttoken -= 0x90;\r\n\t\t\tlet array = new Array(token);\r\n\t\t\tfor (let i = 0; i < token; i++) {\r\n\t\t\t\tarray[i] = read();\r\n\t\t\t}\r\n\t\t\treturn array\r\n\t\t}\r\n\t} else if (token < 0xc0) {\r\n\t\t// fixstr\r\n\t\tlet length = token - 0xa0;\r\n\t\tif (srcStringEnd >= position) {\r\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\r\n\t\t}\r\n\t\tif (srcStringEnd == 0 && srcEnd < 140) {\r\n\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\r\n\t\t\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length);\r\n\t\t\tif (string != null)\r\n\t\t\t\treturn string\r\n\t\t}\r\n\t\treturn readFixedString(length)\r\n\t} else {\r\n\t\tlet value;\r\n\t\tswitch (token) {\r\n\t\t\tcase 0xc0: return null\r\n\t\t\tcase 0xc1:\r\n\t\t\t\tif (bundledStrings) {\r\n\t\t\t\t\tvalue = read(); // followed by the length of the string in characters (not bytes!)\r\n\t\t\t\t\tif (value > 0)\r\n\t\t\t\t\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 -= value)\r\n\t\t\t\t}\r\n\t\t\t\treturn C1; // \"never-used\", return special object to denote that\r\n\t\t\tcase 0xc2: return false\r\n\t\t\tcase 0xc3: return true\r\n\t\t\tcase 0xc4:\r\n\t\t\t\t// bin 8\r\n\t\t\t\tvalue = src[position++];\r\n\t\t\t\tif (value === undefined)\r\n\t\t\t\t\tthrow new Error('Unexpected end of buffer')\r\n\t\t\t\treturn readBin(value)\r\n\t\t\tcase 0xc5:\r\n\t\t\t\t// bin 16\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn readBin(value)\r\n\t\t\tcase 0xc6:\r\n\t\t\t\t// bin 32\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn readBin(value)\r\n\t\t\tcase 0xc7:\r\n\t\t\t\t// ext 8\r\n\t\t\t\treturn readExt(src[position++])\r\n\t\t\tcase 0xc8:\r\n\t\t\t\t// ext 16\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn readExt(value)\r\n\t\t\tcase 0xc9:\r\n\t\t\t\t// ext 32\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn readExt(value)\r\n\t\t\tcase 0xca:\r\n\t\t\t\tvalue = dataView.getFloat32(position);\r\n\t\t\t\tif (currentUnpackr.useFloat32 > 2) {\r\n\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\r\n\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)];\r\n\t\t\t\t\tposition += 4;\r\n\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\r\n\t\t\t\t}\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn value\r\n\t\t\tcase 0xcb:\r\n\t\t\t\tvalue = dataView.getFloat64(position);\r\n\t\t\t\tposition += 8;\r\n\t\t\t\treturn value\r\n\t\t\t// uint handlers\r\n\t\t\tcase 0xcc:\r\n\t\t\t\treturn src[position++]\r\n\t\t\tcase 0xcd:\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn value\r\n\t\t\tcase 0xce:\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn value\r\n\t\t\tcase 0xcf:\r\n\t\t\t\tif (currentUnpackr.int64AsNumber) {\r\n\t\t\t\t\tvalue = dataView.getUint32(position) * 0x100000000;\r\n\t\t\t\t\tvalue += dataView.getUint32(position + 4);\r\n\t\t\t\t} else\r\n\t\t\t\t\tvalue = dataView.getBigUint64(position);\r\n\t\t\t\tposition += 8;\r\n\t\t\t\treturn value\r\n\r\n\t\t\t// int handlers\r\n\t\t\tcase 0xd0:\r\n\t\t\t\treturn dataView.getInt8(position++)\r\n\t\t\tcase 0xd1:\r\n\t\t\t\tvalue = dataView.getInt16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn value\r\n\t\t\tcase 0xd2:\r\n\t\t\t\tvalue = dataView.getInt32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn value\r\n\t\t\tcase 0xd3:\r\n\t\t\t\tif (currentUnpackr.int64AsNumber) {\r\n\t\t\t\t\tvalue = dataView.getInt32(position) * 0x100000000;\r\n\t\t\t\t\tvalue += dataView.getUint32(position + 4);\r\n\t\t\t\t} else\r\n\t\t\t\t\tvalue = dataView.getBigInt64(position);\r\n\t\t\t\tposition += 8;\r\n\t\t\t\treturn value\r\n\r\n\t\t\tcase 0xd4:\r\n\t\t\t\t// fixext 1\r\n\t\t\t\tvalue = src[position++];\r\n\t\t\t\tif (value == 0x72) {\r\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet extension = currentExtensions[value];\r\n\t\t\t\t\tif (extension) {\r\n\t\t\t\t\t\tif (extension.read) {\r\n\t\t\t\t\t\t\tposition++; // skip filler byte\r\n\t\t\t\t\t\t\treturn extension.read(read())\r\n\t\t\t\t\t\t} else if (extension.noBuffer) {\r\n\t\t\t\t\t\t\tposition++; // skip filler byte\r\n\t\t\t\t\t\t\treturn extension()\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\treturn extension(src.subarray(position, ++position))\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tthrow new Error('Unknown extension ' + value)\r\n\t\t\t\t}\r\n\t\t\tcase 0xd5:\r\n\t\t\t\t// fixext 2\r\n\t\t\t\tvalue = src[position];\r\n\t\t\t\tif (value == 0x72) {\r\n\t\t\t\t\tposition++;\r\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f, src[position++])\r\n\t\t\t\t} else\r\n\t\t\t\t\treturn readExt(2)\r\n\t\t\tcase 0xd6:\r\n\t\t\t\t// fixext 4\r\n\t\t\t\treturn readExt(4)\r\n\t\t\tcase 0xd7:\r\n\t\t\t\t// fixext 8\r\n\t\t\t\treturn readExt(8)\r\n\t\t\tcase 0xd8:\r\n\t\t\t\t// fixext 16\r\n\t\t\t\treturn readExt(16)\r\n\t\t\tcase 0xd9:\r\n\t\t\t// str 8\r\n\t\t\t\tvalue = src[position++];\r\n\t\t\t\tif (srcStringEnd >= position) {\r\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\r\n\t\t\t\t}\r\n\t\t\t\treturn readString8(value)\r\n\t\t\tcase 0xda:\r\n\t\t\t// str 16\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\tif (srcStringEnd >= position) {\r\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\r\n\t\t\t\t}\r\n\t\t\t\treturn readString16(value)\r\n\t\t\tcase 0xdb:\r\n\t\t\t// str 32\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\tif (srcStringEnd >= position) {\r\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\r\n\t\t\t\t}\r\n\t\t\t\treturn readString32(value)\r\n\t\t\tcase 0xdc:\r\n\t\t\t// array 16\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn readArray(value)\r\n\t\t\tcase 0xdd:\r\n\t\t\t// array 32\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn readArray(value)\r\n\t\t\tcase 0xde:\r\n\t\t\t// map 16\r\n\t\t\t\tvalue = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\treturn readMap(value)\r\n\t\t\tcase 0xdf:\r\n\t\t\t// map 32\r\n\t\t\t\tvalue = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\treturn readMap(value)\r\n\t\t\tdefault: // negative int\r\n\t\t\t\tif (token >= 0xe0)\r\n\t\t\t\t\treturn token - 0x100\r\n\t\t\t\tif (token === undefined) {\r\n\t\t\t\t\tlet error = new Error('Unexpected end of MessagePack data');\r\n\t\t\t\t\terror.incomplete = true;\r\n\t\t\t\t\tthrow error\r\n\t\t\t\t}\r\n\t\t\t\tthrow new Error('Unknown MessagePack token ' + token)\r\n\r\n\t\t}\r\n\t}\r\n}\r\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/;\r\nfunction createStructureReader(structure, firstId) {\r\n\tfunction readObject() {\r\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\r\n\t\tif (readObject.count++ > inlineObjectReadThreshold) {\r\n\t\t\tlet readObject = structure.read = (new Function('r', 'return function(){return {' + structure.map(key => validName.test(key) ? key + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '}}'))(read);\r\n\t\t\tif (structure.highByte === 0)\r\n\t\t\t\tstructure.read = createSecondByteReader(firstId, structure.read);\r\n\t\t\treturn readObject() // second byte is already read, if there is one so immediately read object\r\n\t\t}\r\n\t\tlet object = {};\r\n\t\tfor (let i = 0, l = structure.length; i < l; i++) {\r\n\t\t\tlet key = structure[i];\r\n\t\t\tobject[key] = read();\r\n\t\t}\r\n\t\treturn object\r\n\t}\r\n\treadObject.count = 0;\r\n\tif (structure.highByte === 0) {\r\n\t\treturn createSecondByteReader(firstId, readObject)\r\n\t}\r\n\treturn readObject\r\n}\r\n\r\nconst createSecondByteReader = (firstId, read0) => {\r\n\treturn function() {\r\n\t\tlet highByte = src[position++];\r\n\t\tif (highByte === 0)\r\n\t\t\treturn read0()\r\n\t\tlet id = firstId < 32 ? -(firstId + (highByte << 5)) : firstId + (highByte << 5);\r\n\t\tlet structure = currentStructures[id] || loadStructures()[id];\r\n\t\tif (!structure) {\r\n\t\t\tthrow new Error('Record id is not defined for ' + id)\r\n\t\t}\r\n\t\tif (!structure.read)\r\n\t\t\tstructure.read = createStructureReader(structure, firstId);\r\n\t\treturn structure.read()\r\n\t}\r\n};\r\n\r\nfunction loadStructures() {\r\n\tlet loadedStructures = saveState(() => {\r\n\t\t// save the state in case getStructures modifies our buffer\r\n\t\tsrc = null;\r\n\t\treturn currentUnpackr.getStructures()\r\n\t});\r\n\treturn currentStructures = currentUnpackr._mergeStructures(loadedStructures, currentStructures)\r\n}\r\n\r\nvar readFixedString = readStringJS;\r\nvar readString8 = readStringJS;\r\nvar readString16 = readStringJS;\r\nvar readString32 = readStringJS;\r\nexports.isNativeAccelerationEnabled = false;\r\n\r\nfunction setExtractor(extractStrings) {\r\n\texports.isNativeAccelerationEnabled = true;\r\n\treadFixedString = readString(1);\r\n\treadString8 = readString(2);\r\n\treadString16 = readString(3);\r\n\treadString32 = readString(5);\r\n\tfunction readString(headerLength) {\r\n\t\treturn function readString(length) {\r\n\t\t\tlet string = strings[stringPosition++];\r\n\t\t\tif (string == null) {\r\n\t\t\t\tif (bundledStrings)\r\n\t\t\t\t\treturn readStringJS(length)\r\n\t\t\t\tlet extraction = extractStrings(position - headerLength, srcEnd, src);\r\n\t\t\t\tif (typeof extraction == 'string') {\r\n\t\t\t\t\tstring = extraction;\r\n\t\t\t\t\tstrings = EMPTY_ARRAY;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstrings = extraction;\r\n\t\t\t\t\tstringPosition = 1;\r\n\t\t\t\t\tsrcStringEnd = 1; // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\r\n\t\t\t\t\tstring = strings[0];\r\n\t\t\t\t\tif (string === undefined)\r\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet srcStringLength = string.length;\r\n\t\t\tif (srcStringLength <= length) {\r\n\t\t\t\tposition += length;\r\n\t\t\t\treturn string\r\n\t\t\t}\r\n\t\t\tsrcString = string;\r\n\t\t\tsrcStringStart = position;\r\n\t\t\tsrcStringEnd = position + srcStringLength;\r\n\t\t\tposition += length;\r\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\r\n\t\t}\r\n\t}\r\n}\r\nfunction readStringJS(length) {\r\n\tlet result;\r\n\tif (length < 16) {\r\n\t\tif (result = shortStringInJS(length))\r\n\t\t\treturn result\r\n\t}\r\n\tif (length > 64 && decoder)\r\n\t\treturn decoder.decode(src.subarray(position, position += length))\r\n\tconst end = position + length;\r\n\tconst units = [];\r\n\tresult = '';\r\n\twhile (position < end) {\r\n\t\tconst byte1 = src[position++];\r\n\t\tif ((byte1 & 0x80) === 0) {\r\n\t\t\t// 1 byte\r\n\t\t\tunits.push(byte1);\r\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\r\n\t\t\t// 2 bytes\r\n\t\t\tconst byte2 = src[position++] & 0x3f;\r\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2);\r\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\r\n\t\t\t// 3 bytes\r\n\t\t\tconst byte2 = src[position++] & 0x3f;\r\n\t\t\tconst byte3 = src[position++] & 0x3f;\r\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\r\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\r\n\t\t\t// 4 bytes\r\n\t\t\tconst byte2 = src[position++] & 0x3f;\r\n\t\t\tconst byte3 = src[position++] & 0x3f;\r\n\t\t\tconst byte4 = src[position++] & 0x3f;\r\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\r\n\t\t\tif (unit > 0xffff) {\r\n\t\t\t\tunit -= 0x10000;\r\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800);\r\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff);\r\n\t\t\t}\r\n\t\t\tunits.push(unit);\r\n\t\t} else {\r\n\t\t\tunits.push(byte1);\r\n\t\t}\r\n\r\n\t\tif (units.length >= 0x1000) {\r\n\t\t\tresult += fromCharCode.apply(String, units);\r\n\t\t\tunits.length = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tif (units.length > 0) {\r\n\t\tresult += fromCharCode.apply(String, units);\r\n\t}\r\n\r\n\treturn result\r\n}\r\n\r\nfunction readArray(length) {\r\n\tlet array = new Array(length);\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tarray[i] = read();\r\n\t}\r\n\treturn array\r\n}\r\n\r\nfunction readMap(length) {\r\n\tif (currentUnpackr.mapsAsObjects) {\r\n\t\tlet object = {};\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tobject[readKey()] = read();\r\n\t\t}\r\n\t\treturn object\r\n\t} else {\r\n\t\tlet map = new Map();\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tmap.set(read(), read());\r\n\t\t}\r\n\t\treturn map\r\n\t}\r\n}\r\n\r\nvar fromCharCode = String.fromCharCode;\r\nfunction longStringInJS(length) {\r\n\tlet start = position;\r\n\tlet bytes = new Array(length);\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tconst byte = src[position++];\r\n\t\tif ((byte & 0x80) > 0) {\r\n\t\t\t\tposition = start;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tbytes[i] = byte;\r\n\t\t}\r\n\t\treturn fromCharCode.apply(String, bytes)\r\n}\r\nfunction shortStringInJS(length) {\r\n\tif (length < 4) {\r\n\t\tif (length < 2) {\r\n\t\t\tif (length === 0)\r\n\t\t\t\treturn ''\r\n\t\t\telse {\r\n\t\t\t\tlet a = src[position++];\r\n\t\t\t\tif ((a & 0x80) > 1) {\r\n\t\t\t\t\tposition -= 1;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn fromCharCode(a)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet a = src[position++];\r\n\t\t\tlet b = src[position++];\r\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\r\n\t\t\t\tposition -= 2;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (length < 3)\r\n\t\t\t\treturn fromCharCode(a, b)\r\n\t\t\tlet c = src[position++];\r\n\t\t\tif ((c & 0x80) > 0) {\r\n\t\t\t\tposition -= 3;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn fromCharCode(a, b, c)\r\n\t\t}\r\n\t} else {\r\n\t\tlet a = src[position++];\r\n\t\tlet b = src[position++];\r\n\t\tlet c = src[position++];\r\n\t\tlet d = src[position++];\r\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\r\n\t\t\tposition -= 4;\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (length < 6) {\r\n\t\t\tif (length === 4)\r\n\t\t\t\treturn fromCharCode(a, b, c, d)\r\n\t\t\telse {\r\n\t\t\t\tlet e = src[position++];\r\n\t\t\t\tif ((e & 0x80) > 0) {\r\n\t\t\t\t\tposition -= 5;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\r\n\t\t\t}\r\n\t\t} else if (length < 8) {\r\n\t\t\tlet e = src[position++];\r\n\t\t\tlet f = src[position++];\r\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\r\n\t\t\t\tposition -= 6;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (length < 7)\r\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\r\n\t\t\tlet g = src[position++];\r\n\t\t\tif ((g & 0x80) > 0) {\r\n\t\t\t\tposition -= 7;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\r\n\t\t} else {\r\n\t\t\tlet e = src[position++];\r\n\t\t\tlet f = src[position++];\r\n\t\t\tlet g = src[position++];\r\n\t\t\tlet h = src[position++];\r\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\r\n\t\t\t\tposition -= 8;\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (length < 10) {\r\n\t\t\t\tif (length === 8)\r\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet i = src[position++];\r\n\t\t\t\t\tif ((i & 0x80) > 0) {\r\n\t\t\t\t\t\tposition -= 9;\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\r\n\t\t\t\t}\r\n\t\t\t} else if (length < 12) {\r\n\t\t\t\tlet i = src[position++];\r\n\t\t\t\tlet j = src[position++];\r\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\r\n\t\t\t\t\tposition -= 10;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (length < 11)\r\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\r\n\t\t\t\tlet k = src[position++];\r\n\t\t\t\tif ((k & 0x80) > 0) {\r\n\t\t\t\t\tposition -= 11;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\r\n\t\t\t} else {\r\n\t\t\t\tlet i = src[position++];\r\n\t\t\t\tlet j = src[position++];\r\n\t\t\t\tlet k = src[position++];\r\n\t\t\t\tlet l = src[position++];\r\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\r\n\t\t\t\t\tposition -= 12;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (length < 14) {\r\n\t\t\t\t\tif (length === 12)\r\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tlet m = src[position++];\r\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\r\n\t\t\t\t\t\t\tposition -= 13;\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet m = src[position++];\r\n\t\t\t\t\tlet n = src[position++];\r\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\r\n\t\t\t\t\t\tposition -= 14;\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (length < 15)\r\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\r\n\t\t\t\t\tlet o = src[position++];\r\n\t\t\t\t\tif ((o & 0x80) > 0) {\r\n\t\t\t\t\t\tposition -= 15;\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction readOnlyJSString() {\r\n\tlet token = src[position++];\r\n\tlet length;\r\n\tif (token < 0xc0) {\r\n\t\t// fixstr\r\n\t\tlength = token - 0xa0;\r\n\t} else {\r\n\t\tswitch(token) {\r\n\t\t\tcase 0xd9:\r\n\t\t\t// str 8\r\n\t\t\t\tlength = src[position++];\r\n\t\t\t\tbreak\r\n\t\t\tcase 0xda:\r\n\t\t\t// str 16\r\n\t\t\t\tlength = dataView.getUint16(position);\r\n\t\t\t\tposition += 2;\r\n\t\t\t\tbreak\r\n\t\t\tcase 0xdb:\r\n\t\t\t// str 32\r\n\t\t\t\tlength = dataView.getUint32(position);\r\n\t\t\t\tposition += 4;\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error('Expected string')\r\n\t\t}\r\n\t}\r\n\treturn readStringJS(length)\r\n}\r\n\r\n\r\nfunction readBin(length) {\r\n\treturn currentUnpackr.copyBuffers ?\r\n\t\t// specifically use the copying slice (not the node one)\r\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\r\n\t\tsrc.subarray(position, position += length)\r\n}\r\nfunction readExt(length) {\r\n\tlet type = src[position++];\r\n\tif (currentExtensions[type]) {\r\n\t\treturn currentExtensions[type](src.subarray(position, position += length))\r\n\t}\r\n\telse\r\n\t\tthrow new Error('Unknown extension type ' + type)\r\n}\r\n\r\nvar keyCache = new Array(4096);\r\nfunction readKey() {\r\n\tlet length = src[position++];\r\n\tif (length >= 0xa0 && length < 0xc0) {\r\n\t\t// fixstr, potentially use key cache\r\n\t\tlength = length - 0xa0;\r\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\r\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\r\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\r\n\t\t\treturn readFixedString(length)\r\n\t} else { // not cacheable, go back and do a standard read\r\n\t\tposition--;\r\n\t\treturn read()\r\n\t}\r\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff;\r\n\tlet entry = keyCache[key];\r\n\tlet checkPosition = position;\r\n\tlet end = position + length - 3;\r\n\tlet chunk;\r\n\tlet i = 0;\r\n\tif (entry && entry.bytes == length) {\r\n\t\twhile (checkPosition < end) {\r\n\t\t\tchunk = dataView.getUint32(checkPosition);\r\n\t\t\tif (chunk != entry[i++]) {\r\n\t\t\t\tcheckPosition = 0x70000000;\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tcheckPosition += 4;\r\n\t\t}\r\n\t\tend += 3;\r\n\t\twhile (checkPosition < end) {\r\n\t\t\tchunk = src[checkPosition++];\r\n\t\t\tif (chunk != entry[i++]) {\r\n\t\t\t\tcheckPosition = 0x70000000;\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (checkPosition === end) {\r\n\t\t\tposition = checkPosition;\r\n\t\t\treturn entry.string\r\n\t\t}\r\n\t\tend -= 3;\r\n\t\tcheckPosition = position;\r\n\t}\r\n\tentry = [];\r\n\tkeyCache[key] = entry;\r\n\tentry.bytes = length;\r\n\twhile (checkPosition < end) {\r\n\t\tchunk = dataView.getUint32(checkPosition);\r\n\t\tentry.push(chunk);\r\n\t\tcheckPosition += 4;\r\n\t}\r\n\tend += 3;\r\n\twhile (checkPosition < end) {\r\n\t\tchunk = src[checkPosition++];\r\n\t\tentry.push(chunk);\r\n\t}\r\n\t// for small blocks, avoiding the overhead of the extract call is helpful\r\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length);\r\n\tif (string != null)\r\n\t\treturn entry.string = string\r\n\treturn entry.string = readFixedString(length)\r\n}\r\n\r\n// the registration of the record definition extension (as \"r\")\r\nconst recordDefinition = (id, highByte) => {\r\n\tvar structure = read();\r\n\tlet firstByte = id;\r\n\tif (highByte !== undefined) {\r\n\t\tid = id < 32 ? -((highByte << 5) + id) : ((highByte << 5) + id);\r\n\t\tstructure.highByte = highByte;\r\n\t}\r\n\tlet existingStructure = currentStructures[id];\r\n\tif (existingStructure && existingStructure.isShared) {\r\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure;\r\n\t}\r\n\tcurrentStructures[id] = structure;\r\n\tstructure.read = createStructureReader(structure, firstByte);\r\n\treturn structure.read()\r\n};\r\ncurrentExtensions[0] = () => {}; // notepack defines extension 0 to mean undefined, so use that as the default here\r\ncurrentExtensions[0].noBuffer = true;\r\n\r\ncurrentExtensions[0x65] = () => {\r\n\tlet data = read();\r\n\treturn (globalThis[data[0]] || Error)(data[1])\r\n};\r\n\r\ncurrentExtensions[0x69] = (data) => {\r\n\t// id extension (for structured clones)\r\n\tlet id = dataView.getUint32(position - 4);\r\n\tif (!referenceMap)\r\n\t\treferenceMap = new Map();\r\n\tlet token = src[position];\r\n\tlet target;\r\n\t// TODO: handle Maps, Sets, and other types that can cycle; this is complicated, because you potentially need to read\r\n\t// ahead past references to record structure definitions\r\n\tif (token >= 0x90 && token < 0xa0 || token == 0xdc || token == 0xdd)\r\n\t\ttarget = [];\r\n\telse\r\n\t\ttarget = {};\r\n\r\n\tlet refEntry = { target }; // a placeholder object\r\n\treferenceMap.set(id, refEntry);\r\n\tlet targetProperties = read(); // read the next value as the target object to id\r\n\tif (refEntry.used) // there is a cycle, so we have to assign properties to original target\r\n\t\treturn Object.assign(target, targetProperties)\r\n\trefEntry.target = targetProperties; // the placeholder wasn't used, replace with the deserialized one\r\n\treturn targetProperties // no cycle, can just use the returned read object\r\n};\r\n\r\ncurrentExtensions[0x70] = (data) => {\r\n\t// pointer extension (for structured clones)\r\n\tlet id = dataView.getUint32(position - 4);\r\n\tlet refEntry = referenceMap.get(id);\r\n\trefEntry.used = true;\r\n\treturn refEntry.target\r\n};\r\n\r\ncurrentExtensions[0x73] = () => new Set(read());\r\n\r\nconst typedArrays = ['Int8','Uint8','Uint8Clamped','Int16','Uint16','Int32','Uint32','Float32','Float64','BigInt64','BigUint64'].map(type => type + 'Array');\r\n\r\ncurrentExtensions[0x74] = (data) => {\r\n\tlet typeCode = data[0];\r\n\tlet typedArrayName = typedArrays[typeCode];\r\n\tif (!typedArrayName)\r\n\t\tthrow new Error('Could not find typed array for code ' + typeCode)\r\n\t// we have to always slice/copy here to get a new ArrayBuffer that is word/byte aligned\r\n\treturn new globalThis[typedArrayName](Uint8Array.prototype.slice.call(data, 1).buffer)\r\n};\r\ncurrentExtensions[0x78] = () => {\r\n\tlet data = read();\r\n\treturn new RegExp(data[0], data[1])\r\n};\r\nconst TEMP_BUNDLE = [];\r\ncurrentExtensions[0x62] = (data) => {\r\n\tlet dataSize = (data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3];\r\n\tlet dataPosition = position;\r\n\tposition += dataSize - data.length;\r\n\tbundledStrings = TEMP_BUNDLE;\r\n\tbundledStrings = [readOnlyJSString(), readOnlyJSString()];\r\n\tbundledStrings.position0 = 0;\r\n\tbundledStrings.position1 = 0;\r\n\tbundledStrings.postBundlePosition = position;\r\n\tposition = dataPosition;\r\n\treturn read()\r\n};\r\n\r\ncurrentExtensions[0xff] = (data) => {\r\n\t// 32-bit date extension\r\n\tif (data.length == 4)\r\n\t\treturn new Date((data[0] * 0x1000000 + (data[1] << 16) + (data[2] << 8) + data[3]) * 1000)\r\n\telse if (data.length == 8)\r\n\t\treturn new Date(\r\n\t\t\t((data[0] << 22) + (data[1] << 14) + (data[2] << 6) + (data[3] >> 2)) / 1000000 +\r\n\t\t\t((data[3] & 0x3) * 0x100000000 + data[4] * 0x1000000 + (data[5] << 16) + (data[6] << 8) + data[7]) * 1000)\r\n\telse if (data.length == 12)// TODO: Implement support for negative\r\n\t\treturn new Date(\r\n\t\t\t((data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]) / 1000000 +\r\n\t\t\t(((data[4] & 0x80) ? -0x1000000000000 : 0) + data[6] * 0x10000000000 + data[7] * 0x100000000 + data[8] * 0x1000000 + (data[9] << 16) + (data[10] << 8) + data[11]) * 1000)\r\n\telse\r\n\t\treturn new Date('invalid')\r\n}; // notepack defines extension 0 to mean undefined, so use that as the default here\r\n// registration of bulk record definition?\r\n// currentExtensions[0x52] = () =>\r\n\r\nfunction saveState(callback) {\r\n\tlet savedSrcEnd = srcEnd;\r\n\tlet savedPosition = position;\r\n\tlet savedStringPosition = stringPosition;\r\n\tlet savedSrcStringStart = srcStringStart;\r\n\tlet savedSrcStringEnd = srcStringEnd;\r\n\tlet savedSrcString = srcString;\r\n\tlet savedStrings = strings;\r\n\tlet savedReferenceMap = referenceMap;\r\n\tlet savedBundledStrings = bundledStrings;\r\n\r\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\r\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)); // we copy the data in case it changes while external data is processed\r\n\tlet savedStructures = currentStructures;\r\n\tlet savedStructuresContents = currentStructures.slice(0, currentStructures.length);\r\n\tlet savedPackr = currentUnpackr;\r\n\tlet savedSequentialMode = sequentialMode;\r\n\tlet value = callback();\r\n\tsrcEnd = savedSrcEnd;\r\n\tposition = savedPosition;\r\n\tstringPosition = savedStringPosition;\r\n\tsrcStringStart = savedSrcStringStart;\r\n\tsrcStringEnd = savedSrcStringEnd;\r\n\tsrcString = savedSrcString;\r\n\tstrings = savedStrings;\r\n\treferenceMap = savedReferenceMap;\r\n\tbundledStrings = savedBundledStrings;\r\n\tsrc = savedSrc;\r\n\tsequentialMode = savedSequentialMode;\r\n\tcurrentStructures = savedStructures;\r\n\tcurrentStructures.splice(0, currentStructures.length, ...savedStructuresContents);\r\n\tcurrentUnpackr = savedPackr;\r\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength);\r\n\treturn value\r\n}\r\nfunction clearSource() {\r\n\tsrc = null;\r\n\treferenceMap = null;\r\n\tcurrentStructures = null;\r\n}\r\n\r\nfunction addExtension(extension) {\r\n\tif (extension.unpack)\r\n\t\tcurrentExtensions[extension.type] = extension.unpack;\r\n\telse\r\n\t\tcurrentExtensions[extension.type] = extension;\r\n}\r\n\r\nconst mult10 = new Array(147); // this is a table matching binary exponents to the multiplier to determine significant digit rounding\r\nfor (let i = 0; i < 256; i++) {\r\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103));\r\n}\r\nconst Decoder = Unpackr;\r\nvar defaultUnpackr = new Unpackr({ useRecords: false });\r\nconst unpack = defaultUnpackr.unpack;\r\nconst unpackMultiple = defaultUnpackr.unpackMultiple;\r\nconst decode = defaultUnpackr.unpack;\r\nconst FLOAT32_OPTIONS = {\r\n\tNEVER: 0,\r\n\tALWAYS: 1,\r\n\tDECIMAL_ROUND: 3,\r\n\tDECIMAL_FIT: 4\r\n};\r\nlet f32Array = new Float32Array(1);\r\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4);\r\nfunction roundFloat32(float32Number) {\r\n\tf32Array[0] = float32Number;\r\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)];\r\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\r\n}\n\nlet textEncoder;\r\ntry {\r\n\ttextEncoder = new TextEncoder();\r\n} catch (error) {}\r\nlet extensions, extensionClasses;\r\nconst hasNodeBuffer = typeof Buffer !== 'undefined';\r\nconst ByteArrayAllocate = hasNodeBuffer ?\r\n\tfunction(length) { return Buffer.allocUnsafeSlow(length) } : Uint8Array;\r\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array;\r\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000;\r\nlet target, keysTarget;\r\nlet targetView;\r\nlet position$1 = 0;\r\nlet safeEnd;\r\nlet bundledStrings$1 = null;\r\nconst MAX_BUNDLE_SIZE = 0xf000;\r\nconst hasNonLatin = /[\\u0080-\\uFFFF]/;\r\nconst RECORD_SYMBOL = Symbol('record-id');\r\nclass Packr extends Unpackr {\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.offset = 0;\r\n\t\tlet start;\r\n\t\tlet hasSharedUpdate;\r\n\t\tlet structures;\r\n\t\tlet referenceMap;\r\n\t\tlet lastSharedStructuresLength = 0;\r\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position) {\r\n\t\t\treturn target.utf8Write(string, position, 0xffffffff)\r\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\r\n\t\t\tfunction(string, position) {\r\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\r\n\t\t\t} : false;\r\n\r\n\t\tlet packr = this;\r\n\t\tif (!options)\r\n\t\t\toptions = {};\r\n\t\tlet isSequential = options && options.sequential;\r\n\t\tlet hasSharedStructures = options.structures || options.saveStructures;\r\n\t\tlet maxSharedStructures = options.maxSharedStructures;\r\n\t\tif (maxSharedStructures == null)\r\n\t\t\tmaxSharedStructures = hasSharedStructures ? 32 : 0;\r\n\t\tif (maxSharedStructures > 8160)\r\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8160')\r\n\t\tif (options.structuredClone && options.moreTypes == undefined) {\r\n\t\t\toptions.moreTypes = true;\r\n\t\t}\r\n\t\tlet maxOwnStructures = options.maxOwnStructures;\r\n\t\tif (maxOwnStructures == null)\r\n\t\t\tmaxOwnStructures = hasSharedStructures ? 32 : 64;\r\n\t\tif (!this.structures && options.useRecords != false)\r\n\t\t\tthis.structures = [];\r\n\t\t// two byte record ids for shared structures\r\n\t\tlet useTwoByteRecords = maxSharedStructures > 32 || (maxOwnStructures + maxSharedStructures > 64);\t\t\r\n\t\tlet sharedLimitId = maxSharedStructures + 0x40;\r\n\t\tlet maxStructureId = maxSharedStructures + maxOwnStructures + 0x40;\r\n\t\tif (maxStructureId > 8256) {\r\n\t\t\tthrow new Error('Maximum maxSharedStructure + maxOwnStructure is 8192')\r\n\t\t}\r\n\t\tlet recordIdsToRemove = [];\r\n\t\tlet transitionsCount = 0;\r\n\t\tlet serializationsSinceTransitionRebuild = 0;\r\n\r\n\t\tthis.pack = this.encode = function(value, encodeOptions) {\r\n\t\t\tif (!target) {\r\n\t\t\t\ttarget = new ByteArrayAllocate(8192);\r\n\t\t\t\ttargetView = new DataView(target.buffer, 0, 8192);\r\n\t\t\t\tposition$1 = 0;\r\n\t\t\t}\r\n\t\t\tsafeEnd = target.length - 10;\r\n\t\t\tif (safeEnd - position$1 < 0x800) {\r\n\t\t\t\t// don't start too close to the end, \r\n\t\t\t\ttarget = new ByteArrayAllocate(target.length);\r\n\t\t\t\ttargetView = new DataView(target.buffer, 0, target.length);\r\n\t\t\t\tsafeEnd = target.length - 10;\r\n\t\t\t\tposition$1 = 0;\r\n\t\t\t} else\r\n\t\t\t\tposition$1 = (position$1 + 7) & 0x7ffffff8; // Word align to make any future copying of this buffer faster\r\n\t\t\tstart = position$1;\r\n\t\t\treferenceMap = packr.structuredClone ? new Map() : null;\r\n\t\t\tif (packr.bundleStrings && typeof value !== 'string') {\r\n\t\t\t\tbundledStrings$1 = [];\r\n\t\t\t\tbundledStrings$1.size = Infinity; // force a new bundle start on first string\r\n\t\t\t} else\r\n\t\t\t\tbundledStrings$1 = null;\r\n\t\t\tstructures = packr.structures;\r\n\t\t\tif (structures) {\r\n\t\t\t\tif (structures.uninitialized)\r\n\t\t\t\t\tstructures = packr._mergeStructures(packr.getStructures());\r\n\t\t\t\tlet sharedLength = structures.sharedLength || 0;\r\n\t\t\t\tif (sharedLength > maxSharedStructures) {\r\n\t\t\t\t\t//if (maxSharedStructures <= 32 && structures.sharedLength > 32) // TODO: could support this, but would need to update the limit ids\r\n\t\t\t\t\tthrow new Error('Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to ' + structures.sharedLength)\r\n\t\t\t\t}\r\n\t\t\t\tif (!structures.transitions) {\r\n\t\t\t\t\t// rebuild our structure transitions\r\n\t\t\t\t\tstructures.transitions = Object.create(null);\r\n\t\t\t\t\tfor (let i = 0; i < sharedLength; i++) {\r\n\t\t\t\t\t\tlet keys = structures[i];\r\n\t\t\t\t\t\tif (!keys)\r\n\t\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t\tlet nextTransition, transition = structures.transitions;\r\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\r\n\t\t\t\t\t\t\tlet key = keys[j];\r\n\t\t\t\t\t\t\tnextTransition = transition[key];\r\n\t\t\t\t\t\t\tif (!nextTransition) {\r\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttransition = nextTransition;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i + 0x40;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastSharedStructuresLength = sharedLength;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isSequential) {\r\n\t\t\t\t\tstructures.nextId = sharedLength + 0x40;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (hasSharedUpdate)\r\n\t\t\t\thasSharedUpdate = false;\r\n\t\t\ttry {\r\n\t\t\t\tpack(value);\r\n\t\t\t\tif (bundledStrings$1) {\r\n\t\t\t\t\twriteBundles(start, pack);\r\n\t\t\t\t}\r\n\t\t\t\tpackr.offset = position$1; // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\r\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\r\n\t\t\t\t\tposition$1 += referenceMap.idsToInsert.length * 6;\r\n\t\t\t\t\tif (position$1 > safeEnd)\r\n\t\t\t\t\t\tmakeRoom(position$1);\r\n\t\t\t\t\tpackr.offset = position$1;\r\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position$1), referenceMap.idsToInsert);\r\n\t\t\t\t\treferenceMap = null;\r\n\t\t\t\t\treturn serialized\r\n\t\t\t\t}\r\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\r\n\t\t\t\t\ttarget.start = start;\r\n\t\t\t\t\ttarget.end = position$1;\r\n\t\t\t\t\treturn target\r\n\t\t\t\t}\r\n\t\t\t\treturn target.subarray(start, position$1) // position can change if we call pack again in saveStructures, so we get the buffer now\r\n\t\t\t} finally {\r\n\t\t\t\tif (structures) {\r\n\t\t\t\t\tif (serializationsSinceTransitionRebuild < 10)\r\n\t\t\t\t\t\tserializationsSinceTransitionRebuild++;\r\n\t\t\t\t\tlet sharedLength = structures.sharedLength || maxSharedStructures;\r\n\t\t\t\t\tif (structures.length > sharedLength)\r\n\t\t\t\t\t\tstructures.length = sharedLength;\r\n\t\t\t\t\tif (transitionsCount > 10000) {\r\n\t\t\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\r\n\t\t\t\t\t\tstructures.transitions = null;\r\n\t\t\t\t\t\tserializationsSinceTransitionRebuild = 0;\r\n\t\t\t\t\t\ttransitionsCount = 0;\r\n\t\t\t\t\t\tif (recordIdsToRemove.length > 0)\r\n\t\t\t\t\t\t\trecordIdsToRemove = [];\r\n\t\t\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\r\n\t\t\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\r\n\t\t\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trecordIdsToRemove = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hasSharedUpdate && packr.saveStructures) {\r\n\t\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\r\n\t\t\t\t\t\tlet returnBuffer = target.subarray(start, position$1);\r\n\t\t\t\t\t\tif (packr.saveStructures(structures, lastSharedStructuresLength) === false) {\r\n\t\t\t\t\t\t\t// get updated structures and try again if the update failed\r\n\t\t\t\t\t\t\tpackr._mergeStructures(packr.getStructures());\r\n\t\t\t\t\t\t\treturn packr.pack(value)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastSharedStructuresLength = sharedLength;\r\n\t\t\t\t\t\treturn returnBuffer\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\r\n\t\t\t\t\tposition$1 = start;\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst pack = (value) => {\r\n\t\t\tif (position$1 > safeEnd)\r\n\t\t\t\ttarget = makeRoom(position$1);\r\n\r\n\t\t\tvar type = typeof value;\r\n\t\t\tvar length;\r\n\t\t\tif (type === 'string') {\r\n\t\t\t\tlet strLength = value.length;\r\n\t\t\t\tif (bundledStrings$1 && strLength >= 4 && strLength < 0x1000) {\r\n\t\t\t\t\tif ((bundledStrings$1.size += strLength) > MAX_BUNDLE_SIZE) {\r\n\t\t\t\t\t\tlet extStart;\r\n\t\t\t\t\t\tlet maxBytes = (bundledStrings$1[0] ? bundledStrings$1[0].length * 3 + bundledStrings$1[1].length : 0) + 10;\r\n\t\t\t\t\t\tif (position$1 + maxBytes > safeEnd)\r\n\t\t\t\t\t\t\ttarget = makeRoom(position$1 + maxBytes);\r\n\t\t\t\t\t\tif (bundledStrings$1.position) { // here we use the 0x62 extension to write the last bundle and reserve sapce for the reference pointer to the next/current bundle\r\n\t\t\t\t\t\t\ttarget[position$1] = 0xc8; // ext 16\r\n\t\t\t\t\t\t\tposition$1 += 3; // reserve for the writing bundle size\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0x62; // 'b'\r\n\t\t\t\t\t\t\textStart = position$1 - start;\r\n\t\t\t\t\t\t\tposition$1 += 4; // reserve for writing bundle reference\r\n\t\t\t\t\t\t\twriteBundles(start, pack); // write the last bundles\r\n\t\t\t\t\t\t\ttargetView.setUint16(extStart + start - 3, position$1 - start - extStart);\r\n\t\t\t\t\t\t} else { // here we use the 0x62 extension just to reserve the space for the reference pointer to the bundle (will be updated once the bundle is written)\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xd6; // fixext 4\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0x62; // 'b'\r\n\t\t\t\t\t\t\textStart = position$1 - start;\r\n\t\t\t\t\t\t\tposition$1 += 4; // reserve for writing bundle reference\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbundledStrings$1 = ['', '']; // create new ones\r\n\t\t\t\t\t\tbundledStrings$1.size = 0;\r\n\t\t\t\t\t\tbundledStrings$1.position = extStart;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value);\r\n\t\t\t\t\tbundledStrings$1[twoByte ? 0 : 1] += value;\r\n\t\t\t\t\ttarget[position$1++] = 0xc1;\r\n\t\t\t\t\tpack(twoByte ? -strLength : strLength);\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet headerSize;\r\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\r\n\t\t\t\tif (strLength < 0x20) {\r\n\t\t\t\t\theaderSize = 1;\r\n\t\t\t\t} else if (strLength < 0x100) {\r\n\t\t\t\t\theaderSize = 2;\r\n\t\t\t\t} else if (strLength < 0x10000) {\r\n\t\t\t\t\theaderSize = 3;\r\n\t\t\t\t} else {\r\n\t\t\t\t\theaderSize = 5;\r\n\t\t\t\t}\r\n\t\t\t\tlet maxBytes = strLength * 3;\r\n\t\t\t\tif (position$1 + maxBytes > safeEnd)\r\n\t\t\t\t\ttarget = makeRoom(position$1 + maxBytes);\r\n\r\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\r\n\t\t\t\t\tlet i, c1, c2, strPosition = position$1 + headerSize;\r\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\r\n\t\t\t\t\t\tc1 = value.charCodeAt(i);\r\n\t\t\t\t\t\tif (c1 < 0x80) {\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1;\r\n\t\t\t\t\t\t} else if (c1 < 0x800) {\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80;\r\n\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\r\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff);\r\n\t\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80;\r\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlength = strPosition - position$1 - headerSize;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlength = encodeUtf8(value, position$1 + headerSize);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (length < 0x20) {\r\n\t\t\t\t\ttarget[position$1++] = 0xa0 | length;\r\n\t\t\t\t} else if (length < 0x100) {\r\n\t\t\t\t\tif (headerSize < 2) {\r\n\t\t\t\t\t\ttarget.copyWithin(position$1 + 2, position$1 + 1, position$1 + 1 + length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget[position$1++] = 0xd9;\r\n\t\t\t\t\ttarget[position$1++] = length;\r\n\t\t\t\t} else if (length < 0x10000) {\r\n\t\t\t\t\tif (headerSize < 3) {\r\n\t\t\t\t\t\ttarget.copyWithin(position$1 + 3, position$1 + 2, position$1 + 2 + length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget[position$1++] = 0xda;\r\n\t\t\t\t\ttarget[position$1++] = length >> 8;\r\n\t\t\t\t\ttarget[position$1++] = length & 0xff;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (headerSize < 5) {\r\n\t\t\t\t\t\ttarget.copyWithin(position$1 + 5, position$1 + 3, position$1 + 3 + length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget[position$1++] = 0xdb;\r\n\t\t\t\t\ttargetView.setUint32(position$1, length);\r\n\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t}\r\n\t\t\t\tposition$1 += length;\r\n\t\t\t} else if (type === 'number') {\r\n\t\t\t\tif (value >>> 0 === value) {// positive integer, 32-bit or less\r\n\t\t\t\t\t// positive uint\r\n\t\t\t\t\tif (value < 0x40) {\r\n\t\t\t\t\t\ttarget[position$1++] = value;\r\n\t\t\t\t\t} else if (value < 0x100) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xcc;\r\n\t\t\t\t\t\ttarget[position$1++] = value;\r\n\t\t\t\t\t} else if (value < 0x10000) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xcd;\r\n\t\t\t\t\t\ttarget[position$1++] = value >> 8;\r\n\t\t\t\t\t\ttarget[position$1++] = value & 0xff;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xce;\r\n\t\t\t\t\t\ttargetView.setUint32(position$1, value);\r\n\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (value >> 0 === value) { // negative integer\r\n\t\t\t\t\tif (value >= -0x20) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0x100 + value;\r\n\t\t\t\t\t} else if (value >= -0x80) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xd0;\r\n\t\t\t\t\t\ttarget[position$1++] = value + 0x100;\r\n\t\t\t\t\t} else if (value >= -0x8000) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xd1;\r\n\t\t\t\t\t\ttargetView.setInt16(position$1, value);\r\n\t\t\t\t\t\tposition$1 += 2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xd2;\r\n\t\t\t\t\t\ttargetView.setInt32(position$1, value);\r\n\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet useFloat32;\r\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xca;\r\n\t\t\t\t\t\ttargetView.setFloat32(position$1, value);\r\n\t\t\t\t\t\tlet xShifted;\r\n\t\t\t\t\t\tif (useFloat32 < 4 ||\r\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\r\n\t\t\t\t\t\t\t\t((xShifted = value * mult10[((target[position$1] & 0x7f) << 1) | (target[position$1 + 1] >> 7)]) >> 0) === xShifted) {\r\n\t\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tposition$1--; // move back into position for writing a double\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget[position$1++] = 0xcb;\r\n\t\t\t\t\ttargetView.setFloat64(position$1, value);\r\n\t\t\t\t\tposition$1 += 8;\r\n\t\t\t\t}\r\n\t\t\t} else if (type === 'object') {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\ttarget[position$1++] = 0xc0;\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (referenceMap) {\r\n\t\t\t\t\t\tlet referee = referenceMap.get(value);\r\n\t\t\t\t\t\tif (referee) {\r\n\t\t\t\t\t\t\tif (!referee.id) {\r\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = []);\r\n\t\t\t\t\t\t\t\treferee.id = idsToInsert.push(referee);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xd6; // fixext 4\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0x70; // \"p\" for pointer\r\n\t\t\t\t\t\t\ttargetView.setUint32(position$1, referee.id);\r\n\t\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} else \r\n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position$1 - start });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet constructor = value.constructor;\r\n\t\t\t\t\tif (constructor === Object) {\r\n\t\t\t\t\t\twriteObject(value, true);\r\n\t\t\t\t\t} else if (constructor === Array) {\r\n\t\t\t\t\t\tlength = value.length;\r\n\t\t\t\t\t\tif (length < 0x10) {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0x90 | length;\r\n\t\t\t\t\t\t} else if (length < 0x10000) {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xdc;\r\n\t\t\t\t\t\t\ttarget[position$1++] = length >> 8;\r\n\t\t\t\t\t\t\ttarget[position$1++] = length & 0xff;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xdd;\r\n\t\t\t\t\t\t\ttargetView.setUint32(position$1, length);\r\n\t\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\tpack(value[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (constructor === Map) {\r\n\t\t\t\t\t\tlength = value.size;\r\n\t\t\t\t\t\tif (length < 0x10) {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0x80 | length;\r\n\t\t\t\t\t\t} else if (length < 0x10000) {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xde;\r\n\t\t\t\t\t\t\ttarget[position$1++] = length >> 8;\r\n\t\t\t\t\t\t\ttarget[position$1++] = length & 0xff;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget[position$1++] = 0xdf;\r\n\t\t\t\t\t\t\ttargetView.setUint32(position$1, length);\r\n\t\t\t\t\t\t\tposition$1 += 4;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\r\n\t\t\t\t\t\t\tpack(key);\r\n\t\t\t\t\t\t\tpack(entryValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\t\r\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\r\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i];\r\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\r\n\t\t\t\t\t\t\t\tlet extension = extensions[i];\r\n\t\t\t\t\t\t\t\tif (extension.write) {\r\n\t\t\t\t\t\t\t\t\tif (extension.type) {\r\n\t\t\t\t\t\t\t\t\t\ttarget[position$1++] = 0xd4; // one byte \"tag\" extension\r\n\t\t\t\t\t\t\t\t\t\ttarget[position$1++] = extension.type;\r\n\t\t\t\t\t\t\t\t\t\ttarget[position$1++] = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tpack(extension.write.call(this, value));\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet currentTarget = target;\r\n\t\t\t\t\t\t\t\tlet currentTargetView = targetView;\r\n\t\t\t\t\t\t\t\tlet currentPosition = position$1;\r\n\t\t\t\t\t\t\t\ttarget = null;\r\n\t\t\t\t\t\t\t\tlet result;\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tresult = extension.pack.call(this, value, (size) => {\r\n\t\t\t\t\t\t\t\t\t\t// restore target and use it\r\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget;\r\n\t\t\t\t\t\t\t\t\t\tcurrentTarget = null;\r\n\t\t\t\t\t\t\t\t\t\tposition$1 += size;\r\n\t\t\t\t\t\t\t\t\t\tif (position$1 > safeEnd)\r\n\t\t\t\t\t\t\t\t\t\t\tmakeRoom(position$1);\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\ttarget, targetView, position: position$1 - size\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}, pack);\r\n\t\t\t\t\t\t\t\t} finally {\r\n\t\t\t\t\t\t\t\t\t// restore current target information (unless already restored)\r\n\t\t\t\t\t\t\t\t\tif (currentTarget) {\r\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget;\r\n\t\t\t\t\t\t\t\t\t\ttargetView = currentTargetView;\r\n\t\t\t\t\t\t\t\t\t\tposition$1 = currentPosition;\r\n\t\t\t\t\t\t\t\t\t\tsafeEnd = target.length - 10;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\t\t\tif (result.length + position$1 > safeEnd)\r\n\t\t\t\t\t\t\t\t\t\tmakeRoom(result.length + position$1);\r\n\t\t\t\t\t\t\t\t\tposition$1 = writeExtensionData(result, target, position$1, extension.type);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// no extension found, write as object\r\n\t\t\t\t\t\twriteObject(value, !value.hasOwnProperty); // if it doesn't have hasOwnProperty, don't do hasOwnProperty checks\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (type === 'boolean') {\r\n\t\t\t\ttarget[position$1++] = value ? 0xc3 : 0xc2;\r\n\t\t\t} else if (type === 'bigint') {\r\n\t\t\t\tif (value < (BigInt(1)<<BigInt(63)) && value >= -(BigInt(1)<<BigInt(63))) {\r\n\t\t\t\t\t// use a signed int as long as it fits\r\n\t\t\t\t\ttarget[position$1++] = 0xd3;\r\n\t\t\t\t\ttargetView.setBigInt64(position$1, value);\r\n\t\t\t\t} else if (value < (BigInt(1)<<BigInt(64)) && value > 0) {\r\n\t\t\t\t\t// if we can fit an unsigned int, use that\r\n\t\t\t\t\ttarget[position$1++] = 0xcf;\r\n\t\t\t\t\ttargetView.setBigUint64(position$1, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// overflow\r\n\t\t\t\t\tif (this.largeBigIntToFloat) {\r\n\t\t\t\t\t\ttarget[position$1++] = 0xcb;\r\n\t\t\t\t\t\ttargetView.setFloat64(position$1, Number(value));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new RangeError(value + ' was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tposition$1 += 8;\r\n\t\t\t} else if (type === 'undefined') {\r\n\t\t\t\tif (this.encodeUndefinedAsNil)\r\n\t\t\t\t\ttarget[position$1++] = 0xc0;\r\n\t\t\t\telse {\r\n\t\t\t\t\ttarget[position$1++] = 0xd4; // a number of implementations use fixext1 with type 0, data 0 to denote undefined, so we follow suite\r\n\t\t\t\t\ttarget[position$1++] = 0;\r\n\t\t\t\t\ttarget[position$1++] = 0;\r\n\t\t\t\t}\r\n\t\t\t} else if (type === 'function') {\r\n\t\t\t\tpack(this.writeFunction && this.writeFunction()); // if there is a writeFunction, use it, otherwise just encode as undefined\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error('Unknown type: ' + type)\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst writeObject = this.useRecords === false ? this.variableMapSize ? (object) => {\r\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\r\n\t\t\tlet keys = Object.keys(object);\r\n\t\t\tlet length = keys.length;\r\n\t\t\tif (length < 0x10) {\r\n\t\t\t\ttarget[position$1++] = 0x80 | length;\r\n\t\t\t} else if (length < 0x10000) {\r\n\t\t\t\ttarget[position$1++] = 0xde;\r\n\t\t\t\ttarget[position$1++] = length >> 8;\r\n\t\t\t\ttarget[position$1++] = length & 0xff;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[position$1++] = 0xdf;\r\n\t\t\t\ttargetView.setUint32(position$1, length);\r\n\t\t\t\tposition$1 += 4;\r\n\t\t\t}\r\n\t\t\tlet key;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tpack(key = keys[i]);\r\n\t\t\t\tpack(object[key]);\r\n\t\t\t}\r\n\t\t} :\r\n\t\t(object, safePrototype) => {\r\n\t\t\ttarget[position$1++] = 0xde; // always using map 16, so we can preallocate and set the length afterwards\r\n\t\t\tlet objectOffset = position$1 - start;\r\n\t\t\tposition$1 += 2;\r\n\t\t\tlet size = 0;\r\n\t\t\tfor (let key in object) {\r\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key)) {\r\n\t\t\t\t\tpack(key);\r\n\t\t\t\t\tpack(object[key]);\r\n\t\t\t\t\tsize++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget[objectOffset++ + start] = size >> 8;\r\n\t\t\ttarget[objectOffset + start] = size & 0xff;\r\n\t\t} :\r\n\t\t(options.progressiveRecords && !useTwoByteRecords) ?  // this is about 2% faster for highly stable structures, since it only requires one for-in loop (but much more expensive when new structure needs to be written)\r\n\t\t(object, safePrototype) => {\r\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null));\r\n\t\t\tlet objectOffset = position$1++ - start;\r\n\t\t\tlet wroteKeys;\r\n\t\t\tfor (let key in object) {\r\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key)) {\r\n\t\t\t\t\tnextTransition = transition[key];\r\n\t\t\t\t\tif (nextTransition)\r\n\t\t\t\t\t\ttransition = nextTransition;\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// record doesn't exist, create full new record and insert it\r\n\t\t\t\t\t\tlet keys = Object.keys(object);\r\n\t\t\t\t\t\tlet lastTransition = transition;\r\n\t\t\t\t\t\ttransition = structures.transitions;\r\n\t\t\t\t\t\tlet newTransitions = 0;\r\n\t\t\t\t\t\tfor (let i = 0, l = keys.length; i < l; i++) {\r\n\t\t\t\t\t\t\tlet key = keys[i];\r\n\t\t\t\t\t\t\tnextTransition = transition[key];\r\n\t\t\t\t\t\t\tif (!nextTransition) {\r\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null);\r\n\t\t\t\t\t\t\t\tnewTransitions++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttransition = nextTransition;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (objectOffset + start + 1 == position$1) {\r\n\t\t\t\t\t\t\t// first key, so we don't need to insert, we can just write record directly\r\n\t\t\t\t\t\t\tposition$1--;\r\n\t\t\t\t\t\t\tnewRecord(transition, keys, newTransitions);\r\n\t\t\t\t\t\t} else // otherwise we need to insert the record, moving existing data after the record\r\n\t\t\t\t\t\t\tinsertNewRecord(transition, keys, objectOffset, newTransitions);\r\n\t\t\t\t\t\twroteKeys = true;\r\n\t\t\t\t\t\ttransition = lastTransition[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpack(object[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!wroteKeys) {\r\n\t\t\t\tlet recordId = transition[RECORD_SYMBOL];\r\n\t\t\t\tif (recordId)\r\n\t\t\t\t\ttarget[objectOffset + start] = recordId;\r\n\t\t\t\telse\r\n\t\t\t\t\tinsertNewRecord(transition, Object.keys(object), objectOffset, 0);\r\n\t\t\t}\r\n\t\t} :\r\n\t\t(object, safePrototype) => {\r\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null));\r\n\t\t\tlet newTransitions = 0;\r\n\t\t\tfor (let key in object) if (safePrototype || object.hasOwnProperty(key)) {\r\n\t\t\t\tnextTransition = transition[key];\r\n\t\t\t\tif (!nextTransition) {\r\n\t\t\t\t\tnextTransition = transition[key] = Object.create(null);\r\n\t\t\t\t\tnewTransitions++;\r\n\t\t\t\t}\r\n\t\t\t\ttransition = nextTransition;\r\n\t\t\t}\r\n\t\t\tlet recordId = transition[RECORD_SYMBOL];\r\n\t\t\tif (recordId) {\r\n\t\t\t\tif (recordId >= 0x60 && useTwoByteRecords) {\r\n\t\t\t\t\ttarget[position$1++] = ((recordId -= 0x60) & 0x1f) + 0x60;\r\n\t\t\t\t\ttarget[position$1++] = recordId >> 5;\r\n\t\t\t\t} else\r\n\t\t\t\t\ttarget[position$1++] = recordId;\r\n\t\t\t} else {\r\n\t\t\t\tnewRecord(transition, transition.__keys__ || Object.keys(object), newTransitions);\r\n\t\t\t}\r\n\t\t\t// now write the values\r\n\t\t\tfor (let key in object)\r\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key))\r\n\t\t\t\t\tpack(object[key]);\r\n\t\t};\r\n\t\tconst makeRoom = (end) => {\r\n\t\t\tlet newSize;\r\n\t\t\tif (end > 0x1000000) {\r\n\t\t\t\t// special handling for really large buffers\r\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\r\n\t\t\t\t\tthrow new Error('Packed buffer would be larger than maximum buffer size')\r\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\r\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000);\r\n\t\t\t} else // faster handling for smaller buffers\r\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12;\r\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize);\r\n\t\t\ttargetView = new DataView(newBuffer.buffer, 0, newSize);\r\n\t\t\tend = Math.min(end, target.length);\r\n\t\t\tif (target.copy)\r\n\t\t\t\ttarget.copy(newBuffer, 0, start, end);\r\n\t\t\telse\r\n\t\t\t\tnewBuffer.set(target.slice(start, end));\r\n\t\t\tposition$1 -= start;\r\n\t\t\tstart = 0;\r\n\t\t\tsafeEnd = newBuffer.length - 10;\r\n\t\t\treturn target = newBuffer\r\n\t\t};\r\n\t\tconst newRecord = (transition, keys, newTransitions) => {\r\n\t\t\tlet recordId = structures.nextId;\r\n\t\t\tif (!recordId)\r\n\t\t\t\trecordId = 0x40;\r\n\t\t\tif (recordId < sharedLimitId && this.shouldShareStructure && !this.shouldShareStructure(keys)) {\r\n\t\t\t\trecordId = structures.nextOwnId;\r\n\t\t\t\tif (!(recordId < maxStructureId))\r\n\t\t\t\t\trecordId = sharedLimitId;\r\n\t\t\t\tstructures.nextOwnId = recordId + 1;\r\n\t\t\t} else {\r\n\t\t\t\tif (recordId >= maxStructureId)// cycle back around\r\n\t\t\t\t\trecordId = sharedLimitId;\r\n\t\t\t\tstructures.nextId = recordId + 1;\r\n\t\t\t}\r\n\t\t\tlet highByte = keys.highByte = recordId >= 0x60 && useTwoByteRecords ? (recordId - 0x60) >> 5 : -1;\r\n\t\t\ttransition[RECORD_SYMBOL] = recordId;\r\n\t\t\ttransition.__keys__ = keys;\r\n\t\t\tstructures[recordId - 0x40] = keys;\r\n\r\n\t\t\tif (recordId < sharedLimitId) {\r\n\t\t\t\tkeys.isShared = true;\r\n\t\t\t\tstructures.sharedLength = recordId - 0x3f;\r\n\t\t\t\thasSharedUpdate = true;\r\n\t\t\t\tif (highByte >= 0) {\r\n\t\t\t\t\ttarget[position$1++] = (recordId & 0x1f) + 0x60;\r\n\t\t\t\t\ttarget[position$1++] = highByte;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[position$1++] = recordId;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (highByte >= 0) {\r\n\t\t\t\t\ttarget[position$1++] = 0xd5; // fixext 2\r\n\t\t\t\t\ttarget[position$1++] = 0x72; // \"r\" record defintion extension type\r\n\t\t\t\t\ttarget[position$1++] = (recordId & 0x1f) + 0x60;\r\n\t\t\t\t\ttarget[position$1++] = highByte;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[position$1++] = 0xd4; // fixext 1\r\n\t\t\t\t\ttarget[position$1++] = 0x72; // \"r\" record defintion extension type\r\n\t\t\t\t\ttarget[position$1++] = recordId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (newTransitions)\r\n\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions;\r\n\t\t\t\t// record the removal of the id, we can maintain our shared structure\r\n\t\t\t\tif (recordIdsToRemove.length >= maxOwnStructures)\r\n\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = 0; // we are cycling back through, and have to remove old ones\r\n\t\t\t\trecordIdsToRemove.push(transition);\r\n\t\t\t\tpack(keys);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst insertNewRecord = (transition, keys, insertionOffset, newTransitions) => {\r\n\t\t\tlet mainTarget = target;\r\n\t\t\tlet mainPosition = position$1;\r\n\t\t\tlet mainSafeEnd = safeEnd;\r\n\t\t\tlet mainStart = start;\r\n\t\t\ttarget = keysTarget;\r\n\t\t\tposition$1 = 0;\r\n\t\t\tstart = 0;\r\n\t\t\tif (!target)\r\n\t\t\t\tkeysTarget = target = new ByteArrayAllocate(8192);\r\n\t\t\tsafeEnd = target.length - 10;\r\n\t\t\tnewRecord(transition, keys, newTransitions);\r\n\t\t\tkeysTarget = target;\r\n\t\t\tlet keysPosition = position$1;\r\n\t\t\ttarget = mainTarget;\r\n\t\t\tposition$1 = mainPosition;\r\n\t\t\tsafeEnd = mainSafeEnd;\r\n\t\t\tstart = mainStart;\r\n\t\t\tif (keysPosition > 1) {\r\n\t\t\t\tlet newEnd = position$1 + keysPosition - 1;\r\n\t\t\t\tif (newEnd > safeEnd)\r\n\t\t\t\t\tmakeRoom(newEnd);\r\n\t\t\t\tlet insertionPosition = insertionOffset + start;\r\n\t\t\t\ttarget.copyWithin(insertionPosition + keysPosition, insertionPosition + 1, position$1);\r\n\t\t\t\ttarget.set(keysTarget.slice(0, keysPosition), insertionPosition);\r\n\t\t\t\tposition$1 = newEnd;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[insertionOffset + start] = keysTarget[0];\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tuseBuffer(buffer) {\r\n\t\t// this means we are finished using our own buffer and we can write over it safely\r\n\t\ttarget = buffer;\r\n\t\ttargetView = new DataView(target.buffer, target.byteOffset, target.byteLength);\r\n\t\tposition$1 = 0;\r\n\t}\r\n\tclearSharedData() {\r\n\t\tif (this.structures)\r\n\t\t\tthis.structures = [];\r\n\t}\r\n}\r\n\r\nextensionClasses = [ Date, Set, Error, RegExp, ArrayBuffer, Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/, C1Type ];\r\nextensions = [{\r\n\tpack(date, allocateForWrite, pack) {\r\n\t\tlet seconds = date.getTime() / 1000;\r\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\r\n\t\t\t// Timestamp 32\r\n\t\t\tlet { target, targetView, position} = allocateForWrite(6);\r\n\t\t\ttarget[position++] = 0xd6;\r\n\t\t\ttarget[position++] = 0xff;\r\n\t\t\ttargetView.setUint32(position, seconds);\r\n\t\t} else if (seconds > 0 && seconds < 0x100000000) {\r\n\t\t\t// Timestamp 64\r\n\t\t\tlet { target, targetView, position} = allocateForWrite(10);\r\n\t\t\ttarget[position++] = 0xd7;\r\n\t\t\ttarget[position++] = 0xff;\r\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 4000000 + ((seconds / 1000 / 0x100000000) >> 0));\r\n\t\t\ttargetView.setUint32(position + 4, seconds);\r\n\t\t} else if (isNaN(seconds)) {\r\n\t\t\tif (this.onInvalidDate) {\r\n\t\t\t\tallocateForWrite(0);\r\n\t\t\t\treturn pack(this.onInvalidDate())\r\n\t\t\t}\r\n\t\t\t// Intentionally invalid timestamp\r\n\t\t\tlet { target, targetView, position} = allocateForWrite(3);\r\n\t\t\ttarget[position++] = 0xd4;\r\n\t\t\ttarget[position++] = 0xff;\r\n\t\t\ttarget[position++] = 0xff;\r\n\t\t} else {\r\n\t\t\t// Timestamp 96\r\n\t\t\tlet { target, targetView, position} = allocateForWrite(15);\r\n\t\t\ttarget[position++] = 0xc7;\r\n\t\t\ttarget[position++] = 12;\r\n\t\t\ttarget[position++] = 0xff;\r\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 1000000);\r\n\t\t\ttargetView.setBigInt64(position + 4, BigInt(Math.floor(seconds)));\r\n\t\t}\r\n\t}\r\n}, {\r\n\tpack(set, allocateForWrite, pack) {\r\n\t\tlet array = Array.from(set);\r\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0);\r\n\t\tif (this.moreTypes) {\r\n\t\t\ttarget[position++] = 0xd4;\r\n\t\t\ttarget[position++] = 0x73; // 's' for Set\r\n\t\t\ttarget[position++] = 0;\r\n\t\t}\r\n\t\tpack(array);\r\n\t}\r\n}, {\r\n\tpack(error, allocateForWrite, pack) {\r\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0);\r\n\t\tif (this.moreTypes) {\r\n\t\t\ttarget[position++] = 0xd4;\r\n\t\t\ttarget[position++] = 0x65; // 'e' for error\r\n\t\t\ttarget[position++] = 0;\r\n\t\t}\r\n\t\tpack([ error.name, error.message ]);\r\n\t}\r\n}, {\r\n\tpack(regex, allocateForWrite, pack) {\r\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0);\r\n\t\tif (this.moreTypes) {\r\n\t\t\ttarget[position++] = 0xd4;\r\n\t\t\ttarget[position++] = 0x78; // 'x' for regeXp\r\n\t\t\ttarget[position++] = 0;\r\n\t\t}\r\n\t\tpack([ regex.source, regex.flags ]);\r\n\t}\r\n}, {\r\n\tpack(arrayBuffer, allocateForWrite) {\r\n\t\tif (this.moreTypes)\r\n\t\t\twriteExtBuffer(arrayBuffer, 0x10, allocateForWrite);\r\n\t\telse\r\n\t\t\twriteBuffer(hasNodeBuffer ? Buffer.from(arrayBuffer) : new Uint8Array(arrayBuffer), allocateForWrite);\r\n\t}\r\n}, {\r\n\tpack(typedArray, allocateForWrite) {\r\n\t\tlet constructor = typedArray.constructor;\r\n\t\tif (constructor !== ByteArray && this.moreTypes)\r\n\t\t\twriteExtBuffer(typedArray, typedArrays.indexOf(constructor.name), allocateForWrite);\r\n\t\telse\r\n\t\t\twriteBuffer(typedArray, allocateForWrite);\r\n\t}\r\n}, {\r\n\tpack(c1, allocateForWrite) { // specific 0xC1 object\r\n\t\tlet { target, position} = allocateForWrite(1);\r\n\t\ttarget[position] = 0xc1;\r\n\t}\r\n}];\r\n\r\nfunction writeExtBuffer(typedArray, type, allocateForWrite, encode) {\r\n\tlet length = typedArray.byteLength;\r\n\tif (length + 1 < 0x100) {\r\n\t\tvar { target, position } = allocateForWrite(4 + length);\r\n\t\ttarget[position++] = 0xc7;\r\n\t\ttarget[position++] = length + 1;\r\n\t} else if (length + 1 < 0x10000) {\r\n\t\tvar { target, position } = allocateForWrite(5 + length);\r\n\t\ttarget[position++] = 0xc8;\r\n\t\ttarget[position++] = (length + 1) >> 8;\r\n\t\ttarget[position++] = (length + 1) & 0xff;\r\n\t} else {\r\n\t\tvar { target, position, targetView } = allocateForWrite(7 + length);\r\n\t\ttarget[position++] = 0xc9;\r\n\t\ttargetView.setUint32(position, length + 1); // plus one for the type byte\r\n\t\tposition += 4;\r\n\t}\r\n\ttarget[position++] = 0x74; // \"t\" for typed array\r\n\ttarget[position++] = type;\r\n\ttarget.set(new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength), position);\r\n}\r\nfunction writeBuffer(buffer, allocateForWrite) {\r\n\tlet length = buffer.byteLength;\r\n\tvar target, position;\r\n\tif (length < 0x100) {\r\n\t\tvar { target, position } = allocateForWrite(length + 2);\r\n\t\ttarget[position++] = 0xc4;\r\n\t\ttarget[position++] = length;\r\n\t} else if (length < 0x10000) {\r\n\t\tvar { target, position } = allocateForWrite(length + 3);\r\n\t\ttarget[position++] = 0xc5;\r\n\t\ttarget[position++] = length >> 8;\r\n\t\ttarget[position++] = length & 0xff;\r\n\t} else {\r\n\t\tvar { target, position, targetView } = allocateForWrite(length + 5);\r\n\t\ttarget[position++] = 0xc6;\r\n\t\ttargetView.setUint32(position, length);\r\n\t\tposition += 4;\r\n\t}\r\n\ttarget.set(buffer, position);\r\n}\r\n\r\nfunction writeExtensionData(result, target, position, type) {\r\n\tlet length = result.length;\r\n\tswitch (length) {\r\n\t\tcase 1:\r\n\t\t\ttarget[position++] = 0xd4;\r\n\t\t\tbreak\r\n\t\tcase 2:\r\n\t\t\ttarget[position++] = 0xd5;\r\n\t\t\tbreak\r\n\t\tcase 4:\r\n\t\t\ttarget[position++] = 0xd6;\r\n\t\t\tbreak\r\n\t\tcase 8:\r\n\t\t\ttarget[position++] = 0xd7;\r\n\t\t\tbreak\r\n\t\tcase 16:\r\n\t\t\ttarget[position++] = 0xd8;\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tif (length < 0x100) {\r\n\t\t\t\ttarget[position++] = 0xc7;\r\n\t\t\t\ttarget[position++] = length;\r\n\t\t\t} else if (length < 0x10000) {\r\n\t\t\t\ttarget[position++] = 0xc8;\r\n\t\t\t\ttarget[position++] = length >> 8;\r\n\t\t\t\ttarget[position++] = length & 0xff;\r\n\t\t\t} else {\r\n\t\t\t\ttarget[position++] = 0xc9;\r\n\t\t\t\ttarget[position++] = length >> 24;\r\n\t\t\t\ttarget[position++] = (length >> 16) & 0xff;\r\n\t\t\t\ttarget[position++] = (length >> 8) & 0xff;\r\n\t\t\t\ttarget[position++] = length & 0xff;\r\n\t\t\t}\r\n\t}\r\n\ttarget[position++] = type;\r\n\ttarget.set(result, position);\r\n\tposition += length;\r\n\treturn position\r\n}\r\n\r\nfunction insertIds(serialized, idsToInsert) {\r\n\t// insert the ids that need to be referenced for structured clones\r\n\tlet nextId;\r\n\tlet distanceToMove = idsToInsert.length * 6;\r\n\tlet lastEnd = serialized.length - distanceToMove;\r\n\tidsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1);\r\n\twhile (nextId = idsToInsert.pop()) {\r\n\t\tlet offset = nextId.offset;\r\n\t\tlet id = nextId.id;\r\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd);\r\n\t\tdistanceToMove -= 6;\r\n\t\tlet position = offset + distanceToMove;\r\n\t\tserialized[position++] = 0xd6;\r\n\t\tserialized[position++] = 0x69; // 'i'\r\n\t\tserialized[position++] = id >> 24;\r\n\t\tserialized[position++] = (id >> 16) & 0xff;\r\n\t\tserialized[position++] = (id >> 8) & 0xff;\r\n\t\tserialized[position++] = id & 0xff;\r\n\t\tlastEnd = offset;\r\n\t}\r\n\treturn serialized\r\n}\r\n\r\nfunction writeBundles(start, pack) {\r\n\ttargetView.setUint32(bundledStrings$1.position + start, position$1 - bundledStrings$1.position - start);\r\n\tlet writeStrings = bundledStrings$1;\r\n\tbundledStrings$1 = null;\r\n\tpack(writeStrings[0]);\r\n\tpack(writeStrings[1]);\r\n}\r\n\r\nfunction addExtension$1(extension) {\r\n\tif (extension.Class) {\r\n\t\tif (!extension.pack && !extension.write)\r\n\t\t\tthrow new Error('Extension has no pack or write function')\r\n\t\tif (extension.pack && !extension.type)\r\n\t\t\tthrow new Error('Extension has no type (numeric code to identify the extension)')\r\n\t\textensionClasses.unshift(extension.Class);\r\n\t\textensions.unshift(extension);\r\n\t}\r\n\taddExtension(extension);\r\n}\r\n\r\nlet defaultPackr = new Packr({ useRecords: false });\r\nconst pack = defaultPackr.pack;\r\nconst encode = defaultPackr.pack;\r\nconst Encoder = Packr;\r\nconst { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS;\r\nconst REUSE_BUFFER_MODE = 512;\r\nconst RESET_BUFFER_MODE = 1024;\n\nclass PackrStream extends stream.Transform {\r\n\tconstructor(options) {\r\n\t\tif (!options)\r\n\t\t\toptions = {};\r\n\t\toptions.writableObjectMode = true;\r\n\t\tsuper(options);\r\n\t\toptions.sequential = true;\r\n\t\tthis.packr = options.packr || new Packr(options);\r\n\t}\r\n\t_transform(value, encoding, callback) {\r\n\t\tthis.push(this.packr.pack(value));\r\n\t\tcallback();\r\n\t}\r\n}\r\n\r\nclass UnpackrStream extends stream.Transform {\r\n\tconstructor(options) {\r\n\t\tif (!options)\r\n\t\t\toptions = {};\r\n\t\toptions.objectMode = true;\r\n\t\tsuper(options);\r\n\t\toptions.structures = [];\r\n\t\tthis.unpackr = options.unpackr || new Unpackr(options);\r\n\t}\r\n\t_transform(chunk, encoding, callback) {\r\n\t\tif (this.incompleteBuffer) {\r\n\t\t\tchunk = Buffer.concat([this.incompleteBuffer, chunk]);\r\n\t\t\tthis.incompleteBuffer = null;\r\n\t\t}\r\n\t\tlet values;\r\n\t\ttry {\r\n\t\t\tvalues = this.unpackr.unpackMultiple(chunk);\r\n\t\t} catch(error) {\r\n\t\t\tif (error.incomplete) {\r\n\t\t\t\tthis.incompleteBuffer = chunk.slice(error.lastPosition);\r\n\t\t\t\tvalues = error.values;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthrow error\r\n\t\t} finally {\r\n\t\t\tfor (let value of values || []) {\r\n\t\t\t\tif (value === null)\r\n\t\t\t\t\tvalue = this.getNullValue();\r\n\t\t\t\tthis.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (callback) callback();\r\n\t}\r\n\tgetNullValue() {\r\n\t\treturn Symbol.for(null)\r\n\t}\r\n}\n\n/**\r\n * Given an Iterable first argument, returns an Iterable where each value is packed as a Buffer\r\n * If the argument is only Async Iterable, the return value will be an Async Iterable.\r\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterator} objectIterator - iterable source, like a Readable object stream, an array, Set, or custom object\r\n * @param {options} [options] - msgpackr pack options\r\n * @returns {IterableIterator|Promise.<AsyncIterableIterator>}\r\n */\r\nfunction packIter (objectIterator, options = {}) {\r\n  if (!objectIterator || typeof objectIterator !== 'object') {\r\n    throw new Error('first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable')\r\n  } else if (typeof objectIterator[Symbol.iterator] === 'function') {\r\n    return packIterSync(objectIterator, options)\r\n  } else if (typeof objectIterator.then === 'function' || typeof objectIterator[Symbol.asyncIterator] === 'function') {\r\n    return packIterAsync(objectIterator, options)\r\n  } else {\r\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise')\r\n  }\r\n}\r\n\r\nfunction * packIterSync (objectIterator, options) {\r\n  const packr = new Packr(options);\r\n  for (const value of objectIterator) {\r\n    yield packr.pack(value);\r\n  }\r\n}\r\n\r\nasync function * packIterAsync (objectIterator, options) {\r\n  const packr = new Packr(options);\r\n  for await (const value of objectIterator) {\r\n    yield packr.pack(value);\r\n  }\r\n}\r\n\r\n/**\r\n * Given an Iterable/Iterator input which yields buffers, returns an IterableIterator which yields sync decoded objects\r\n * Or, given an Async Iterable/Iterator which yields promises resolving in buffers, returns an AsyncIterableIterator.\r\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterableIterator} bufferIterator\r\n * @param {object} [options] - unpackr options\r\n * @returns {IterableIterator|Promise.<AsyncIterableIterator}\r\n */\r\nfunction unpackIter (bufferIterator, options = {}) {\r\n  if (!bufferIterator || typeof bufferIterator !== 'object') {\r\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise')\r\n  }\r\n\r\n  const unpackr = new Unpackr(options);\r\n  let incomplete;\r\n  const parser = (chunk) => {\r\n    let yields;\r\n    // if there's incomplete data from previous chunk, concatinate and try again\r\n    if (incomplete) {\r\n      chunk = Buffer.concat([incomplete, chunk]);\r\n      incomplete = undefined;\r\n    }\r\n\r\n    try {\r\n      yields = unpackr.unpackMultiple(chunk);\r\n    } catch (err) {\r\n      if (err.incomplete) {\r\n        incomplete = chunk.slice(err.lastPosition);\r\n        yields = err.values;\r\n      } else {\r\n        throw err\r\n      }\r\n    }\r\n    return yields\r\n  };\r\n\r\n  if (typeof bufferIterator[Symbol.iterator] === 'function') {\r\n    return (function * iter () {\r\n      for (const value of bufferIterator) {\r\n        yield * parser(value);\r\n      }\r\n    })()\r\n  } else if (typeof bufferIterator[Symbol.asyncIterator] === 'function') {\r\n    return (async function * iter () {\r\n      for await (const value of bufferIterator) {\r\n        yield * parser(value);\r\n      }\r\n    })()\r\n  }\r\n}\r\nconst decodeIter = unpackIter;\r\nconst encodeIter = packIter;\n\nconst useRecords = false;\r\nconst mapsAsObjects = true;\r\n\r\nconst nativeAccelerationDisabled = process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED !== undefined && process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase() === 'true';\r\n\r\nif (!nativeAccelerationDisabled) {\r\n\tlet extractor;\r\n\ttry {\r\n\t\tif (typeof require == 'function')\r\n\t\t\textractor = require('msgpackr-extract');\r\n\t\telse\r\n\t\t\textractor = module$1.createRequire((typeof document === 'undefined' ? new (require('u' + 'rl').URL)('file:' + __filename).href : (document.currentScript && document.currentScript.src || new URL('node.cjs', document.baseURI).href)))('msgpackr-extract');\r\n\t\tif (extractor)\r\n\t\t\tsetExtractor(extractor.extractStrings);\r\n\t} catch (error) {\r\n\t\t// native module is optional\r\n\t}\r\n}\n\nexports.ALWAYS = ALWAYS;\nexports.C1 = C1;\nexports.DECIMAL_FIT = DECIMAL_FIT;\nexports.DECIMAL_ROUND = DECIMAL_ROUND;\nexports.Decoder = Decoder;\nexports.DecoderStream = UnpackrStream;\nexports.Encoder = Encoder;\nexports.EncoderStream = PackrStream;\nexports.FLOAT32_OPTIONS = FLOAT32_OPTIONS;\nexports.NEVER = NEVER;\nexports.Packr = Packr;\nexports.PackrStream = PackrStream;\nexports.Unpackr = Unpackr;\nexports.UnpackrStream = UnpackrStream;\nexports.addExtension = addExtension$1;\nexports.clearSource = clearSource;\nexports.decode = decode;\nexports.decodeIter = decodeIter;\nexports.encode = encode;\nexports.encodeIter = encodeIter;\nexports.mapsAsObjects = mapsAsObjects;\nexports.pack = pack;\nexports.roundFloat32 = roundFloat32;\nexports.unpack = unpack;\nexports.unpackMultiple = unpackMultiple;\nexports.useRecords = useRecords;\n"],"names":[],"sourceRoot":""}