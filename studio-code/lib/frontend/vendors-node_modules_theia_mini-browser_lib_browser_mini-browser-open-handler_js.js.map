{"version":3,"file":"vendors-node_modules_theia_mini-browser_lib_browser_mini-browser-open-handler_js.js","mappings":"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,KAAK,EAQR;AACH,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,UAAU;;AAEV;AACA;;AAEA,UAAU;;AAEV;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,gEAAgE,kBAAkB;;AAElF;AACA;AACA,gDAAgD,uBAAuB;AACvE,cAAc;AACd;AACA,8CAA8C,QAAQ,UAAU,WAAW,SAAS,aAAa,aAAa;AAC9G;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;;AAErC;AACA,yBAAyB;;AAEzB;AACA,kBAAkB;;AAElB;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,iCAAiC,sBAAsB;AACvD,yCAAyC,0BAA0B;AACnE,oCAAoC,sBAAsB;AAC1D;;AAEA,CAAC","sources":["webpack:///./node_modules/@theia/core/shared/lodash.debounce/index.js?","webpack:///./node_modules/@theia/mini-browser/src/browser/environment/mini-browser-environment.ts?","webpack:///./node_modules/@theia/mini-browser/src/browser/location-mapper-service.ts?","webpack:///./node_modules/@theia/mini-browser/src/browser/mini-browser-content-style.ts?","webpack:///./node_modules/@theia/mini-browser/src/browser/mini-browser-content.ts?","webpack:///./node_modules/@theia/mini-browser/src/browser/mini-browser-open-handler.ts?","webpack:///./node_modules/@theia/mini-browser/src/browser/mini-browser.ts?","webpack:///./node_modules/@theia/mini-browser/src/common/mini-browser-endpoint.ts?","webpack:///./node_modules/@theia/mini-browser/src/common/mini-browser-service.ts?","webpack:///./node_modules/pdfobject/pdfobject.js?"],"sourcesContent":["module.exports = require('lodash.debounce');\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Endpoint, FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { environment } from '@theia/core/shared/@theia/application-package/lib/environment';\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { v4 } from 'uuid';\nimport { MiniBrowserEndpoint } from '../../common/mini-browser-endpoint';\n\n/**\n * Fetch values from the backend's environment and caches them locally.\n * Helps with deploying various mini-browser endpoints.\n */\n@injectable()\nexport class MiniBrowserEnvironment implements FrontendApplicationContribution {\n\n    protected _hostPatternPromise: Promise<string>;\n    protected _hostPattern?: string;\n\n    @inject(EnvVariablesServer)\n    protected environment: EnvVariablesServer;\n\n    @postConstruct()\n    protected init(): void {\n        this._hostPatternPromise = this.getHostPattern()\n            .then(pattern => this._hostPattern = pattern);\n    }\n\n    get hostPatternPromise(): Promise<string> {\n        return this._hostPatternPromise;\n    }\n\n    get hostPattern(): string | undefined {\n        return this._hostPattern;\n    }\n\n    async onStart(): Promise<void> {\n        await this._hostPatternPromise;\n    }\n\n    /**\n     * Throws if `hostPatternPromise` is not yet resolved.\n     */\n    getEndpoint(uuid: string, hostname?: string): Endpoint {\n        if (this._hostPattern === undefined) {\n            throw new Error('MiniBrowserEnvironment is not finished initializing');\n        }\n        return new Endpoint({\n            path: MiniBrowserEndpoint.PATH,\n            host: this._hostPattern\n                .replace('{{uuid}}', uuid)\n                .replace('{{hostname}}', hostname || this.getDefaultHostname()),\n        });\n    }\n\n    /**\n     * Throws if `hostPatternPromise` is not yet resolved.\n     */\n    getRandomEndpoint(): Endpoint {\n        return this.getEndpoint(v4());\n    }\n\n    protected async getHostPattern(): Promise<string> {\n        return environment.electron.is()\n            ? MiniBrowserEndpoint.HOST_PATTERN_DEFAULT\n            : this.environment.getValue(MiniBrowserEndpoint.HOST_PATTERN_ENV)\n                .then(envVar => envVar?.value || MiniBrowserEndpoint.HOST_PATTERN_DEFAULT);\n    }\n\n    protected getDefaultHostname(): string {\n        return self.location.host;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, named } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Endpoint } from '@theia/core/lib/browser';\nimport { MaybePromise, Prioritizeable } from '@theia/core/lib/common/types';\nimport { ContributionProvider } from '@theia/core/lib/common/contribution-provider';\nimport { MiniBrowserEnvironment } from './environment/mini-browser-environment';\n\n/**\n * Contribution for the `LocationMapperService`.\n */\nexport const LocationMapper = Symbol('LocationMapper');\nexport interface LocationMapper {\n\n    /**\n     * Should return with a positive number if the current contribution can handle the given location.\n     * The number indicates the priority of the location mapper. If it is not a positive number, it means, the\n     * contribution cannot handle the location.\n     */\n    canHandle(location: string): MaybePromise<number>;\n\n    /**\n     * Maps the given location.\n     */\n    map(location: string): MaybePromise<string>;\n\n}\n\n/**\n * Location mapper service.\n */\n@injectable()\nexport class LocationMapperService {\n\n    @inject(ContributionProvider)\n    @named(LocationMapper)\n    protected readonly contributions: ContributionProvider<LocationMapper>;\n\n    async map(location: string): Promise<string> {\n        const contributions = await this.prioritize(location);\n        if (contributions.length === 0) {\n            return this.defaultMapper()(location);\n        }\n        return contributions[0].map(location);\n    }\n\n    protected defaultMapper(): (location: string) => MaybePromise<string> {\n        return location => `${new Endpoint().httpScheme}//${location}`;\n    }\n\n    protected async prioritize(location: string): Promise<LocationMapper[]> {\n        const prioritized = await Prioritizeable.prioritizeAll(this.getContributions(), contribution => contribution.canHandle(location));\n        return prioritized.map(p => p.value);\n    }\n\n    protected getContributions(): LocationMapper[] {\n        return this.contributions.getContributions();\n    }\n\n}\n\n/**\n * HTTP location mapper.\n */\n@injectable()\nexport class HttpLocationMapper implements LocationMapper {\n\n    canHandle(location: string): MaybePromise<number> {\n        return location.startsWith('http://') ? 1 : 0;\n    }\n\n    map(location: string): MaybePromise<string> {\n        return location;\n    }\n\n}\n\n/**\n * HTTPS location mapper.\n */\n@injectable()\nexport class HttpsLocationMapper implements LocationMapper {\n\n    canHandle(location: string): MaybePromise<number> {\n        return location.startsWith('https://') ? 1 : 0;\n    }\n\n    map(location: string): MaybePromise<string> {\n        return location;\n    }\n\n}\n\n/**\n * Location mapper for locations without a scheme.\n */\n@injectable()\nexport class LocationWithoutSchemeMapper implements LocationMapper {\n\n    canHandle(location: string): MaybePromise<number> {\n        return new URI(location).scheme === '' ? 1 : 0;\n    }\n\n    map(location: string): MaybePromise<string> {\n        return `http://${location}`;\n    }\n\n}\n\n/**\n * `file` URI location mapper.\n */\n@injectable()\nexport class FileLocationMapper implements LocationMapper {\n\n    @inject(MiniBrowserEnvironment)\n    protected miniBrowserEnvironment: MiniBrowserEnvironment;\n\n    canHandle(location: string): MaybePromise<number> {\n        return location.startsWith('file://') ? 1 : 0;\n    }\n\n    async map(location: string): Promise<string> {\n        const uri = new URI(location);\n        if (uri.scheme !== 'file') {\n            throw new Error(`Only URIs with 'file' scheme can be mapped to an URL. URI was: ${uri}.`);\n        }\n        let rawLocation = uri.path.toString();\n        if (rawLocation.charAt(0) === '/') {\n            rawLocation = rawLocation.substring(1);\n        }\n        return this.miniBrowserEnvironment.getRandomEndpoint().getRestUrl().resolve(rawLocation).toString();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nexport namespace MiniBrowserContentStyle {\n    export const MINI_BROWSER = 'theia-mini-browser';\n    export const TOOLBAR = 'theia-mini-browser-toolbar';\n    export const TOOLBAR_READ_ONLY = 'theia-mini-browser-toolbar-read-only';\n    export const PRE_LOAD = 'theia-mini-browser-load-indicator';\n    export const FADE_OUT = 'theia-fade-out';\n    export const CONTENT_AREA = 'theia-mini-browser-content-area';\n    export const PDF_CONTAINER = 'theia-mini-browser-pdf-container';\n    export const PREVIOUS = 'theia-mini-browser-previous';\n    export const NEXT = 'theia-mini-browser-next';\n    export const REFRESH = 'theia-mini-browser-refresh';\n    export const OPEN = 'theia-mini-browser-open';\n    export const BUTTON = 'theia-mini-browser-button';\n    export const DISABLED = 'theia-mini-browser-button-disabled';\n    export const TRANSPARENT_OVERLAY = 'theia-transparent-overlay';\n    export const ERROR_BAR = 'theia-mini-browser-error-bar';\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as PDFObject from 'pdfobject';\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport URI from '@theia/core/lib/common/uri';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport { parseCssTime, Key, KeyCode } from '@theia/core/lib/browser';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { BaseWidget, addEventListener, codiconArray } from '@theia/core/lib/browser/widgets/widget';\nimport { LocationMapperService } from './location-mapper-service';\nimport { ApplicationShellMouseTracker } from '@theia/core/lib/browser/shell/application-shell-mouse-tracker';\n\nimport debounce = require('@theia/core/shared/lodash.debounce');\nimport { MiniBrowserContentStyle } from './mini-browser-content-style';\nimport { FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { FileChangesEvent, FileChangeType } from '@theia/filesystem/lib/common/files';\n\n/**\n * Initializer properties for the embedded browser widget.\n */\n@injectable()\nexport class MiniBrowserProps {\n\n    /**\n     * `show` if the toolbar should be visible. If `read-only`, the toolbar is visible but the address cannot be changed and it acts as a link instead.\\\n     * `hide` if the toolbar should be hidden. `show` by default. If the `startPage` is not defined, this property is always `show`.\n     */\n    readonly toolbar?: 'show' | 'hide' | 'read-only';\n\n    /**\n     * If defined, the browser will load this page on startup. Otherwise, it show a blank page.\n     */\n    readonly startPage?: string;\n\n    /**\n     * Sandbox options for the underlying `iframe`. Defaults to `SandboxOptions#DEFAULT` if not provided.\n     */\n    readonly sandbox?: MiniBrowserProps.SandboxOptions[];\n\n    /**\n     * The optional icon class for the widget.\n     */\n    readonly iconClass?: string;\n\n    /**\n     * The desired name of the widget.\n     */\n    readonly name?: string;\n\n    /**\n     * `true` if the `iFrame`'s background has to be reset to the default white color. Otherwise, `false`. `false` is the default.\n     */\n    readonly resetBackground?: boolean;\n\n}\n\nexport namespace MiniBrowserProps {\n\n    /**\n     * Enumeration of the supported `sandbox` options for the `iframe`.\n     */\n    export enum SandboxOptions {\n\n        /**\n         * Allows form submissions.\n         */\n        'allow-forms',\n\n        /**\n         * Allows popups, such as `window.open()`, `showModalDialog()`, `target=”_blank”`, etc.\n         */\n        'allow-popups',\n\n        /**\n         * Allows pointer lock.\n         */\n        'allow-pointer-lock',\n\n        /**\n         * Allows the document to maintain its origin. Pages loaded from https://example.com/ will retain access to that origin’s data.\n         */\n        'allow-same-origin',\n\n        /**\n         * Allows JavaScript execution. Also allows features to trigger automatically (as they’d be trivial to implement via JavaScript).\n         */\n        'allow-scripts',\n\n        /**\n         * Allows the document to break out of the frame by navigating the top-level `window`.\n         */\n        'allow-top-navigation',\n\n        /**\n         * Allows the embedded browsing context to open modal windows.\n         */\n        'allow-modals',\n\n        /**\n         * Allows the embedded browsing context to disable the ability to lock the screen orientation.\n         */\n        'allow-orientation-lock',\n\n        /**\n         * Allows a sandboxed document to open new windows without forcing the sandboxing flags upon them.\n         * This will allow, for example, a third-party advertisement to be safely sandboxed without forcing the same restrictions upon a landing page.\n         */\n        'allow-popups-to-escape-sandbox',\n\n        /**\n         * Allows embedders to have control over whether an iframe can start a presentation session.\n         */\n        'allow-presentation',\n\n        /**\n         * Allows the embedded browsing context to navigate (load) content to the top-level browsing context only when initiated by a user gesture.\n         * If this keyword is not used, this operation is not allowed.\n         */\n        'allow-top-navigation-by-user-activation'\n    }\n\n    export namespace SandboxOptions {\n\n        /**\n         * The default `sandbox` options, if other is not provided.\n         *\n         * See: https://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/\n         */\n        export const DEFAULT: SandboxOptions[] = [\n            SandboxOptions['allow-same-origin'],\n            SandboxOptions['allow-scripts'],\n            SandboxOptions['allow-popups'],\n            SandboxOptions['allow-forms'],\n            SandboxOptions['allow-modals']\n        ];\n\n    }\n\n}\n\nexport const MiniBrowserContentFactory = Symbol('MiniBrowserContentFactory');\nexport type MiniBrowserContentFactory = (props: MiniBrowserProps) => MiniBrowserContent;\n\n@injectable()\nexport class MiniBrowserContent extends BaseWidget {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(WindowService)\n    protected readonly windowService: WindowService;\n\n    @inject(LocationMapperService)\n    protected readonly locationMapper: LocationMapperService;\n\n    @inject(KeybindingRegistry)\n    protected readonly keybindings: KeybindingRegistry;\n\n    @inject(ApplicationShellMouseTracker)\n    protected readonly mouseTracker: ApplicationShellMouseTracker;\n\n    @inject(FileService)\n    protected readonly fileService: FileService;\n\n    protected readonly submitInputEmitter = new Emitter<string>();\n    protected readonly navigateBackEmitter = new Emitter<void>();\n    protected readonly navigateForwardEmitter = new Emitter<void>();\n    protected readonly refreshEmitter = new Emitter<void>();\n    protected readonly openEmitter = new Emitter<void>();\n\n    protected readonly input: HTMLInputElement;\n    protected readonly loadIndicator: HTMLElement;\n    protected readonly errorBar: HTMLElement & Readonly<{ message: HTMLElement }>;\n    protected readonly frame: HTMLIFrameElement;\n    // eslint-disable-next-line max-len\n    // XXX This is a hack to be able to tack the mouse events when drag and dropping the widgets. On `mousedown` we put a transparent div over the `iframe` to avoid losing the mouse tacking.\n    protected readonly transparentOverlay: HTMLElement;\n    // XXX It is a hack. Instead of loading the PDF in an iframe we use `PDFObject` to render it in a div.\n    protected readonly pdfContainer: HTMLElement;\n\n    protected frameLoadTimeout: number;\n    protected readonly initialHistoryLength: number;\n    protected readonly toDisposeOnGo = new DisposableCollection();\n\n    constructor(@inject(MiniBrowserProps) protected readonly props: MiniBrowserProps) {\n        super();\n        this.node.tabIndex = 0;\n        this.addClass(MiniBrowserContentStyle.MINI_BROWSER);\n        this.input = this.createToolbar(this.node).input;\n        const contentArea = this.createContentArea(this.node);\n        this.frame = contentArea.frame;\n        this.transparentOverlay = contentArea.transparentOverlay;\n        this.loadIndicator = contentArea.loadIndicator;\n        this.errorBar = contentArea.errorBar;\n        this.pdfContainer = contentArea.pdfContainer;\n        this.initialHistoryLength = history.length;\n        this.toDispose.pushAll([\n            this.submitInputEmitter,\n            this.navigateBackEmitter,\n            this.navigateForwardEmitter,\n            this.refreshEmitter,\n            this.openEmitter\n        ]);\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.mouseTracker.onMousedown(e => {\n            if (this.frame.style.display !== 'none') {\n                this.transparentOverlay.style.display = 'block';\n            }\n        }));\n        this.toDispose.push(this.mouseTracker.onMouseup(e => {\n            if (this.frame.style.display !== 'none') {\n                this.transparentOverlay.style.display = 'none';\n            }\n        }));\n        const { startPage } = this.props;\n        if (startPage) {\n            setTimeout(() => this.go(startPage), 500);\n            this.listenOnContentChange(startPage);\n        }\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        if (this.getToolbarProps() !== 'hide') {\n            this.input.focus();\n        } else {\n            this.node.focus();\n        }\n    }\n\n    protected async listenOnContentChange(location: string): Promise<void> {\n        if (await this.fileService.exists(new URI(location))) {\n            const fileUri = new URI(location);\n            const watcher = this.fileService.watch(fileUri);\n            this.toDispose.push(watcher);\n            const onFileChange = (event: FileChangesEvent) => {\n                if (event.contains(fileUri, FileChangeType.ADDED) || event.contains(fileUri, FileChangeType.UPDATED)) {\n                    this.go(location, {\n                        showLoadIndicator: false\n                    });\n                }\n            };\n            this.toDispose.push(this.fileService.onDidFilesChange(debounce(onFileChange, 500)));\n        }\n    }\n\n    protected createToolbar(parent: HTMLElement): HTMLDivElement & Readonly<{ input: HTMLInputElement }> {\n        const toolbar = document.createElement('div');\n        toolbar.classList.add(this.getToolbarProps() === 'read-only' ? MiniBrowserContentStyle.TOOLBAR_READ_ONLY : MiniBrowserContentStyle.TOOLBAR);\n        parent.appendChild(toolbar);\n        this.createPrevious(toolbar);\n        this.createNext(toolbar);\n        this.createRefresh(toolbar);\n        const input = this.createInput(toolbar);\n        input.readOnly = this.getToolbarProps() === 'read-only';\n        this.createOpen(toolbar);\n        if (this.getToolbarProps() === 'hide') {\n            toolbar.style.display = 'none';\n        }\n        return Object.assign(toolbar, { input });\n    }\n\n    protected getToolbarProps(): 'show' | 'hide' | 'read-only' {\n        return !this.props.startPage ? 'show' : this.props.toolbar || 'show';\n    }\n\n    // eslint-disable-next-line max-len\n    protected createContentArea(parent: HTMLElement): HTMLElement & Readonly<{ frame: HTMLIFrameElement, loadIndicator: HTMLElement, errorBar: HTMLElement & Readonly<{ message: HTMLElement }>, pdfContainer: HTMLElement, transparentOverlay: HTMLElement }> {\n        const contentArea = document.createElement('div');\n        contentArea.classList.add(MiniBrowserContentStyle.CONTENT_AREA);\n\n        const loadIndicator = document.createElement('div');\n        loadIndicator.classList.add(MiniBrowserContentStyle.PRE_LOAD);\n        loadIndicator.style.display = 'none';\n\n        const errorBar = this.createErrorBar();\n\n        const frame = this.createIFrame();\n        this.submitInputEmitter.event(input => this.go(input, {\n            preserveFocus: false\n        }));\n        this.navigateBackEmitter.event(this.handleBack.bind(this));\n        this.navigateForwardEmitter.event(this.handleForward.bind(this));\n        this.refreshEmitter.event(this.handleRefresh.bind(this));\n        this.openEmitter.event(this.handleOpen.bind(this));\n\n        const transparentOverlay = document.createElement('div');\n        transparentOverlay.classList.add(MiniBrowserContentStyle.TRANSPARENT_OVERLAY);\n        transparentOverlay.style.display = 'none';\n\n        const pdfContainer = document.createElement('div');\n        pdfContainer.classList.add(MiniBrowserContentStyle.PDF_CONTAINER);\n        pdfContainer.id = `${this.id}-pdf-container`;\n        pdfContainer.style.display = 'none';\n\n        contentArea.appendChild(errorBar);\n        contentArea.appendChild(transparentOverlay);\n        contentArea.appendChild(pdfContainer);\n        contentArea.appendChild(loadIndicator);\n        contentArea.appendChild(frame);\n\n        parent.appendChild(contentArea);\n        return Object.assign(contentArea, { frame, loadIndicator, errorBar, pdfContainer, transparentOverlay });\n    }\n\n    protected createIFrame(): HTMLIFrameElement {\n        const frame = document.createElement('iframe');\n        const sandbox = (this.props.sandbox || MiniBrowserProps.SandboxOptions.DEFAULT).map(name => MiniBrowserProps.SandboxOptions[name]);\n        frame.sandbox.add(...sandbox);\n        this.toDispose.push(addEventListener(frame, 'load', this.onFrameLoad.bind(this)));\n        this.toDispose.push(addEventListener(frame, 'error', this.onFrameError.bind(this)));\n        return frame;\n    }\n\n    protected createErrorBar(): HTMLElement & Readonly<{ message: HTMLElement }> {\n        const errorBar = document.createElement('div');\n        errorBar.classList.add(MiniBrowserContentStyle.ERROR_BAR);\n        errorBar.style.display = 'none';\n\n        const icon = document.createElement('span');\n        icon.classList.add(...codiconArray('info'));\n        errorBar.appendChild(icon);\n\n        const message = document.createElement('span');\n        errorBar.appendChild(message);\n\n        return Object.assign(errorBar, { message });\n    }\n\n    protected onFrameLoad(): void {\n        clearTimeout(this.frameLoadTimeout);\n        this.maybeResetBackground();\n        this.hideLoadIndicator();\n        this.hideErrorBar();\n    }\n\n    protected onFrameError(): void {\n        clearTimeout(this.frameLoadTimeout);\n        this.maybeResetBackground();\n        this.hideLoadIndicator();\n        this.showErrorBar('An error occurred while loading this page');\n    }\n\n    protected onFrameTimeout(): void {\n        clearTimeout(this.frameLoadTimeout);\n        this.maybeResetBackground();\n        this.hideLoadIndicator();\n        this.showErrorBar('Still loading...');\n    }\n\n    protected showLoadIndicator(): void {\n        this.loadIndicator.classList.remove(MiniBrowserContentStyle.FADE_OUT);\n        this.loadIndicator.style.display = 'block';\n    }\n\n    protected hideLoadIndicator(): void {\n        // Start the fade-out transition.\n        this.loadIndicator.classList.add(MiniBrowserContentStyle.FADE_OUT);\n        // Actually hide the load indicator after the transition is finished.\n        const preloadStyle = window.getComputedStyle(this.loadIndicator);\n        const transitionDuration = parseCssTime(preloadStyle.transitionDuration, 0);\n        setTimeout(() => {\n            // But don't hide it if it was shown again since the transition started.\n            if (this.loadIndicator.classList.contains(MiniBrowserContentStyle.FADE_OUT)) {\n                this.loadIndicator.style.display = 'none';\n                this.loadIndicator.classList.remove(MiniBrowserContentStyle.FADE_OUT);\n            }\n        }, transitionDuration);\n    }\n\n    protected showErrorBar(message: string): void {\n        this.errorBar.message.textContent = message;\n        this.errorBar.style.display = 'block';\n    }\n\n    protected hideErrorBar(): void {\n        this.errorBar.message.textContent = '';\n        this.errorBar.style.display = 'none';\n    }\n\n    protected maybeResetBackground(): void {\n        if (this.props.resetBackground === true) {\n            this.frame.style.backgroundColor = 'white';\n        }\n    }\n\n    protected handleBack(): void {\n        if (history.length - this.initialHistoryLength > 0) {\n            history.back();\n        }\n    }\n\n    protected handleForward(): void {\n        if (history.length > this.initialHistoryLength) {\n            history.forward();\n        }\n    }\n\n    protected handleRefresh(): void {\n        // Initial pessimism; use the location of the input.\n        let location: string | undefined = this.props.startPage;\n        // Use the the location from the `input`.\n        if (this.input && this.input.value) {\n            location = this.input.value;\n        }\n        try {\n            const { contentDocument } = this.frame;\n            if (contentDocument && contentDocument.location) {\n                location = contentDocument.location.href;\n            }\n        } catch {\n            // Security exception due to CORS when trying to access the `location.href` of the content document.\n        }\n        if (location) {\n            this.go(location, {\n                preserveFocus: false\n            });\n        }\n    }\n\n    protected handleOpen(): void {\n        const location = this.frameSrc() || this.input.value;\n        if (location) {\n            this.windowService.openNewWindow(location);\n        }\n    }\n\n    protected createInput(parent: HTMLElement): HTMLInputElement {\n        const input = document.createElement('input');\n        input.type = 'text';\n        input.spellcheck = false;\n        input.classList.add('theia-input');\n        this.toDispose.pushAll([\n            addEventListener(input, 'keydown', this.handleInputChange.bind(this)),\n            addEventListener(input, 'click', () => {\n                if (this.getToolbarProps() === 'read-only') {\n                    this.handleOpen();\n                } else {\n                    if (input.value) {\n                        input.select();\n                    }\n                }\n            })\n        ]);\n        parent.appendChild(input);\n        return input;\n    }\n\n    protected handleInputChange(e: KeyboardEvent): void {\n        const { key } = KeyCode.createKeyCode(e);\n        if (key && Key.ENTER.keyCode === key.keyCode && this.getToolbarProps() === 'show') {\n            const { target } = e;\n            if (target instanceof HTMLInputElement) {\n                this.mapLocation(target.value).then(location => this.submitInputEmitter.fire(location));\n            }\n        }\n    }\n\n    protected createPrevious(parent: HTMLElement): HTMLElement {\n        return this.onClick(this.createButton(parent, 'Show The Previous Page', MiniBrowserContentStyle.PREVIOUS), this.navigateBackEmitter);\n    }\n\n    protected createNext(parent: HTMLElement): HTMLElement {\n        return this.onClick(this.createButton(parent, 'Show The Next Page', MiniBrowserContentStyle.NEXT), this.navigateForwardEmitter);\n    }\n\n    protected createRefresh(parent: HTMLElement): HTMLElement {\n        return this.onClick(this.createButton(parent, 'Reload This Page', MiniBrowserContentStyle.REFRESH), this.refreshEmitter);\n    }\n\n    protected createOpen(parent: HTMLElement): HTMLElement {\n        const button = this.onClick(this.createButton(parent, 'Open In A New Window', MiniBrowserContentStyle.OPEN), this.openEmitter);\n        return button;\n    }\n\n    protected createButton(parent: HTMLElement, title: string, ...className: string[]): HTMLElement {\n        const button = document.createElement('div');\n        button.title = title;\n        button.classList.add(...className, MiniBrowserContentStyle.BUTTON);\n        parent.appendChild(button);\n        return button;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected onClick(element: HTMLElement, emitter: Emitter<any>): HTMLElement {\n        this.toDispose.push(addEventListener(element, 'click', () => {\n            if (!element.classList.contains(MiniBrowserContentStyle.DISABLED)) {\n                emitter.fire(undefined);\n            }\n        }));\n        return element;\n    }\n\n    protected mapLocation(location: string): Promise<string> {\n        return this.locationMapper.map(location);\n    }\n\n    protected setInput(value: string): void {\n        if (this.input.value !== value) {\n            this.input.value = value;\n        }\n    }\n\n    protected frameSrc(): string {\n        let src = this.frame.src;\n        try {\n            const { contentWindow } = this.frame;\n            if (contentWindow) {\n                src = contentWindow.location.href;\n            }\n        } catch {\n            // CORS issue. Ignored.\n        }\n        if (src === 'about:blank') {\n            src = '';\n        }\n        return src;\n    }\n\n    protected contentDocument(): Document | null {\n        try {\n            let { contentDocument } = this.frame;\n            // eslint-disable-next-line no-null/no-null\n            if (contentDocument === null) {\n                const { contentWindow } = this.frame;\n                if (contentWindow) {\n                    contentDocument = contentWindow.document;\n                }\n            }\n            return contentDocument;\n        } catch {\n            // eslint-disable-next-line no-null/no-null\n            return null;\n        }\n    }\n\n    protected async go(location: string, options?: Partial<{\n        /* default: true */\n        showLoadIndicator: boolean,\n        /* default: true */\n        preserveFocus: boolean\n    }>): Promise<void> {\n        const { showLoadIndicator, preserveFocus } = {\n            showLoadIndicator: true,\n            preserveFocus: true,\n            ...options\n        };\n        if (location) {\n            try {\n                this.toDisposeOnGo.dispose();\n                const url = await this.mapLocation(location);\n                this.setInput(url);\n                if (this.getToolbarProps() === 'read-only') {\n                    this.input.title = `Open ${url} In A New Window`;\n                }\n                clearTimeout(this.frameLoadTimeout);\n                this.frameLoadTimeout = window.setTimeout(this.onFrameTimeout.bind(this), 4000);\n                if (showLoadIndicator) {\n                    this.showLoadIndicator();\n                }\n                if (url.endsWith('.pdf')) {\n                    this.pdfContainer.style.display = 'block';\n                    this.frame.style.display = 'none';\n                    PDFObject.embed(url, this.pdfContainer, {\n                        // eslint-disable-next-line max-len, @typescript-eslint/quotes\n                        fallbackLink: `<p style=\"padding: 0px 15px 0px 15px\">Your browser does not support inline PDFs. Click on this <a href='[url]' target=\"_blank\">link</a> to open the PDF in a new tab.</p>`\n                    });\n                    clearTimeout(this.frameLoadTimeout);\n                    this.hideLoadIndicator();\n                    if (!preserveFocus) {\n                        this.pdfContainer.focus();\n                    }\n                } else {\n                    this.pdfContainer.style.display = 'none';\n                    this.frame.style.display = 'block';\n                    this.frame.src = url;\n                    // The load indicator will hide itself if the content of the iframe was loaded.\n                    if (!preserveFocus) {\n                        this.frame.addEventListener('load', () => {\n                            const window = this.frame.contentWindow;\n                            if (window) {\n                                window.focus();\n                            }\n                        }, { once: true });\n                    }\n                }\n                // Delegate all the `keypress` events from the `iframe` to the application.\n                this.toDisposeOnGo.push(addEventListener(this.frame, 'load', () => {\n                    try {\n                        const { contentDocument } = this.frame;\n                        if (contentDocument) {\n                            const keypressHandler = (e: KeyboardEvent) => this.keybindings.run(e);\n                            contentDocument.addEventListener('keypress', keypressHandler, true);\n                            this.toDisposeOnDetach.push(Disposable.create(() => contentDocument.removeEventListener('keypress', keypressHandler)));\n                        }\n                    } catch {\n                        // There is not much we could do with the security exceptions due to CORS.\n                    }\n                }));\n            } catch (e) {\n                clearTimeout(this.frameLoadTimeout);\n                this.hideLoadIndicator();\n                this.showErrorBar(String(e));\n                console.log(e);\n            }\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Widget } from '@theia/core/shared/@phosphor/widgets';\nimport { injectable, inject, optional } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport { codicon, QuickInputService } from '@theia/core/lib/browser';\nimport { ApplicationShell } from '@theia/core/lib/browser/shell';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { MenuContribution, MenuModelRegistry } from '@theia/core/lib/common/menu';\nimport { TabBarToolbarContribution, TabBarToolbarRegistry } from '@theia/core/lib/browser/shell/tab-bar-toolbar';\nimport { NavigatableWidget, NavigatableWidgetOpenHandler } from '@theia/core/lib/browser/navigatable';\nimport { open, OpenerService } from '@theia/core/lib/browser/opener-service';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser/frontend-application-contribution';\nimport { WidgetOpenerOptions } from '@theia/core/lib/browser/widget-open-handler';\nimport { MiniBrowserService } from '../common/mini-browser-service';\nimport { MiniBrowser, MiniBrowserProps } from './mini-browser';\nimport { LocationMapperService } from './location-mapper-service';\nimport { nls } from '@theia/core/lib/common/nls';\n\nexport namespace MiniBrowserCommands {\n\n    export const PREVIEW_CATEGORY = 'Preview';\n    export const PREVIEW_CATEGORY_KEY = nls.getDefaultKey(PREVIEW_CATEGORY);\n\n    export const PREVIEW = Command.toLocalizedCommand({\n        id: 'mini-browser.preview',\n        label: 'Open Preview',\n        iconClass: codicon('open-preview')\n    }, 'vscode.markdown-language-features/package/markdown.preview.title');\n    export const OPEN_SOURCE: Command = {\n        id: 'mini-browser.open.source',\n        iconClass: codicon('go-to-file')\n    };\n    export const OPEN_URL = Command.toDefaultLocalizedCommand({\n        id: 'mini-browser.openUrl',\n        category: PREVIEW_CATEGORY,\n        label: 'Open URL'\n    });\n}\n\n/**\n * Further options for opening a new `Mini Browser` widget.\n */\nexport interface MiniBrowserOpenerOptions extends WidgetOpenerOptions, MiniBrowserProps {\n    /**\n     * Controls how the mini-browser widget should be opened.\n     * - `source`: editable source.\n     * - `preview`: rendered content of the source.\n     */\n    openFor?: 'source' | 'preview';\n}\n\n@injectable()\nexport class MiniBrowserOpenHandler extends NavigatableWidgetOpenHandler<MiniBrowser>\n    implements FrontendApplicationContribution, CommandContribution, MenuContribution, TabBarToolbarContribution {\n\n    static PREVIEW_URI = new URI().withScheme('__minibrowser__preview__');\n\n    /**\n     * Instead of going to the backend with each file URI to ask whether it can handle the current file or not,\n     * we have this map of extension and priority pairs that we populate at application startup.\n     * The real advantage of this approach is the following: [Phosphor cannot run async code when invoking `isEnabled`/`isVisible`\n     * for the command handlers](https://github.com/eclipse-theia/theia/issues/1958#issuecomment-392829371)\n     * so the menu item would be always visible for the user even if the file type cannot be handled eventually.\n     * Hopefully, we could get rid of this hack once we have migrated the existing Phosphor code to [React](https://github.com/eclipse-theia/theia/issues/1915).\n     */\n    protected readonly supportedExtensions: Map<string, number> = new Map();\n\n    readonly id = MiniBrowser.ID;\n    readonly label = nls.localize(MiniBrowserCommands.PREVIEW_CATEGORY_KEY, MiniBrowserCommands.PREVIEW_CATEGORY);\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(QuickInputService) @optional()\n    protected readonly quickInputService: QuickInputService;\n\n    @inject(MiniBrowserService)\n    protected readonly miniBrowserService: MiniBrowserService;\n\n    @inject(LocationMapperService)\n    protected readonly locationMapperService: LocationMapperService;\n\n    onStart(): void {\n        this.miniBrowserService.supportedFileExtensions().then(entries => {\n            entries.forEach(entry => {\n                const { extension, priority } = entry;\n                this.supportedExtensions.set(extension, priority);\n            });\n        });\n    }\n\n    canHandle(uri: URI, options?: MiniBrowserOpenerOptions): number {\n        // It does not guard against directories. For instance, a folder with this name: `Hahahah.html`.\n        // We could check with the FS, but then, this method would become async again.\n        const extension = uri.toString().split('.').pop();\n        if (!extension) {\n            return 0;\n        }\n        if (options?.openFor === 'source') {\n            return -100;\n        } else if (options?.openFor === 'preview') {\n            return 200; // higher than that of the editor.\n        } else {\n            return this.supportedExtensions.get(extension.toLocaleLowerCase()) || 0;\n        }\n    }\n\n    override async open(uri: URI, options?: MiniBrowserOpenerOptions): Promise<MiniBrowser> {\n        const widget = await super.open(uri, options);\n        const area = this.shell.getAreaFor(widget);\n        if (area === 'right' || area === 'left') {\n            const panelLayout = area === 'right' ? this.shell.getLayoutData().rightPanel : this.shell.getLayoutData().leftPanel;\n            const minSize = this.shell.mainPanel.node.offsetWidth / 2;\n            if (panelLayout && panelLayout.size && panelLayout.size <= minSize) {\n                requestAnimationFrame(() => this.shell.resize(minSize, area));\n            }\n        }\n        return widget;\n    }\n\n    protected override async getOrCreateWidget(uri: URI, options?: MiniBrowserOpenerOptions): Promise<MiniBrowser> {\n        const props = await this.options(uri, options);\n        const widget = await super.getOrCreateWidget(uri, props);\n        widget.setProps(props);\n        return widget;\n    }\n\n    protected async options(uri?: URI, options?: MiniBrowserOpenerOptions): Promise<MiniBrowserOpenerOptions & { widgetOptions: ApplicationShell.WidgetOptions }> {\n        // Get the default options.\n        let result = await this.defaultOptions();\n        if (uri) {\n            // Decorate it with a few properties inferred from the URI.\n            const startPage = uri.toString(true);\n            const name = this.labelProvider.getName(uri);\n            const iconClass = `${this.labelProvider.getIcon(uri)} file-icon`;\n            // The background has to be reset to white only for \"real\" web-pages but not for images, for instance.\n            const resetBackground = await this.resetBackground(uri);\n            result = {\n                ...result,\n                startPage,\n                name,\n                iconClass,\n                // Make sure the toolbar is not visible. We have the `iframe.src` anyway.\n                toolbar: 'hide',\n                resetBackground\n            };\n        }\n        if (options) {\n            // Explicit options overrule everything.\n            result = {\n                ...result,\n                ...options\n            };\n        }\n        return result;\n    }\n\n    protected resetBackground(uri: URI): MaybePromise<boolean> {\n        const { scheme } = uri;\n        const uriStr = uri.toString();\n        return scheme === 'http'\n            || scheme === 'https'\n            || (scheme === 'file'\n                && (uriStr.endsWith('html') || uriStr.endsWith('.htm'))\n            );\n    }\n\n    protected async defaultOptions(): Promise<MiniBrowserOpenerOptions & { widgetOptions: ApplicationShell.WidgetOptions }> {\n        return {\n            mode: 'activate',\n            widgetOptions: { area: 'main' },\n            sandbox: MiniBrowserProps.SandboxOptions.DEFAULT,\n            toolbar: 'show'\n        };\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(MiniBrowserCommands.PREVIEW, {\n            execute: widget => this.preview(widget),\n            isEnabled: widget => this.canPreviewWidget(widget),\n            isVisible: widget => this.canPreviewWidget(widget)\n        });\n        commands.registerCommand(MiniBrowserCommands.OPEN_SOURCE, {\n            execute: widget => this.openSource(widget),\n            isEnabled: widget => !!this.getSourceUri(widget),\n            isVisible: widget => !!this.getSourceUri(widget)\n        });\n        commands.registerCommand(MiniBrowserCommands.OPEN_URL, {\n            execute: (arg?: string) => this.openUrl(arg)\n        });\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        menus.registerMenuAction(['editor_context_menu', 'navigation'], {\n            commandId: MiniBrowserCommands.PREVIEW.id\n        });\n    }\n\n    registerToolbarItems(toolbar: TabBarToolbarRegistry): void {\n        toolbar.registerItem({\n            id: MiniBrowserCommands.PREVIEW.id,\n            command: MiniBrowserCommands.PREVIEW.id,\n            tooltip: nls.localize('vscode.markdown-language-features/package/markdown.previewSide.title', 'Open Preview to the Side')\n        });\n        toolbar.registerItem({\n            id: MiniBrowserCommands.OPEN_SOURCE.id,\n            command: MiniBrowserCommands.OPEN_SOURCE.id,\n            tooltip: nls.localize('vscode.markdown-language-features/package/markdown.showSource.title', 'Open Source')\n        });\n    }\n\n    protected canPreviewWidget(widget?: Widget): boolean {\n        const uri = this.getUriToPreview(widget);\n        return !!uri && !!this.canHandle(uri);\n    }\n\n    protected getUriToPreview(widget?: Widget): URI | undefined {\n        const current = this.getWidgetToPreview(widget);\n        return current && current.getResourceUri();\n    }\n\n    protected getWidgetToPreview(widget?: Widget): NavigatableWidget | undefined {\n        const current = widget ? widget : this.shell.currentWidget;\n        // MiniBrowser is NavigatableWidget and should be excluded from widgets to preview\n        return !(current instanceof MiniBrowser) && NavigatableWidget.is(current) && current || undefined;\n    }\n\n    protected async preview(widget?: Widget): Promise<void> {\n        const ref = this.getWidgetToPreview(widget);\n        if (!ref) {\n            return;\n        }\n        const uri = ref.getResourceUri();\n        if (!uri) {\n            return;\n        }\n        await this.open(uri, {\n            mode: 'reveal',\n            widgetOptions: { ref, mode: 'open-to-right' },\n            openFor: 'preview'\n        });\n    }\n\n    protected async openSource(ref?: Widget): Promise<void> {\n        const uri = this.getSourceUri(ref);\n        if (uri) {\n            await open(this.openerService, uri, {\n                widgetOptions: { ref, mode: 'tab-after' },\n                openFor: 'source'\n            });\n        }\n    }\n\n    protected getSourceUri(ref?: Widget): URI | undefined {\n        const uri = ref instanceof MiniBrowser && ref.getResourceUri() || undefined;\n        if (!uri || uri.scheme === 'http' || uri.scheme === 'https' || uri.isEqual(MiniBrowserOpenHandler.PREVIEW_URI)) {\n            return undefined;\n        }\n        return uri;\n    }\n\n    protected async openUrl(arg?: string): Promise<void> {\n        const url = arg ? arg : await this.quickInputService?.input({\n            prompt: nls.localizeByDefault('URL to open'),\n            placeHolder: nls.localize('theia/mini-browser/typeUrl', 'Type a URL')\n        });\n        if (url) {\n            await this.openPreview(url);\n        }\n    }\n\n    async openPreview(startPage: string): Promise<MiniBrowser> {\n        const props = await this.getOpenPreviewProps(await this.locationMapperService.map(startPage));\n        return this.open(MiniBrowserOpenHandler.PREVIEW_URI, props);\n    }\n\n    protected async getOpenPreviewProps(startPage: string): Promise<MiniBrowserOpenerOptions> {\n        const resetBackground = await this.resetBackground(new URI(startPage));\n        return {\n            name: nls.localize(MiniBrowserCommands.PREVIEW_CATEGORY_KEY, MiniBrowserCommands.PREVIEW_CATEGORY),\n            startPage,\n            toolbar: 'read-only',\n            widgetOptions: {\n                area: 'right'\n            },\n            resetBackground,\n            iconClass: codicon('preview'),\n            openFor: 'preview'\n        };\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Message } from '@theia/core/shared/@phosphor/messaging';\nimport URI from '@theia/core/lib/common/uri';\nimport { NavigatableWidget, StatefulWidget } from '@theia/core/lib/browser';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { BaseWidget, codicon, PanelLayout } from '@theia/core/lib/browser/widgets/widget';\nimport { MiniBrowserProps, MiniBrowserContentFactory } from './mini-browser-content';\n\nexport { MiniBrowserProps };\n\n@injectable()\nexport class MiniBrowserOptions {\n    uri: URI;\n}\n\n@injectable()\nexport class MiniBrowser extends BaseWidget implements NavigatableWidget, StatefulWidget {\n\n    static ID = 'mini-browser';\n    static ICON = codicon('globe');\n\n    @inject(MiniBrowserOptions)\n    protected readonly options: MiniBrowserOptions;\n\n    @inject(MiniBrowserContentFactory)\n    protected readonly createContent: MiniBrowserContentFactory;\n\n    @postConstruct()\n    protected init(): void {\n        const { uri } = this.options;\n        this.id = `${MiniBrowser.ID}:${uri.toString()}`;\n        this.title.closable = true;\n        this.layout = new PanelLayout({ fitPolicy: 'set-no-constraint' });\n    }\n\n    getResourceUri(): URI | undefined {\n        return this.options.uri;\n    }\n\n    createMoveToUri(resourceUri: URI): URI | undefined {\n        return this.options.uri && this.options.uri.withPath(resourceUri.path);\n    }\n\n    protected props: MiniBrowserProps | undefined;\n    protected readonly toDisposeOnProps = new DisposableCollection();\n\n    setProps(raw: MiniBrowserProps): void {\n        const props: MiniBrowserProps = {\n            toolbar: raw.toolbar,\n            startPage: raw.startPage,\n            sandbox: raw.sandbox,\n            iconClass: raw.iconClass,\n            name: raw.name,\n            resetBackground: raw.resetBackground\n        };\n        if (JSON.stringify(props) === JSON.stringify(this.props)) {\n            return;\n        }\n        this.toDisposeOnProps.dispose();\n        this.toDispose.push(this.toDisposeOnProps);\n        this.props = props;\n\n        this.title.caption = this.title.label = props.name || 'Browser';\n        this.title.iconClass = props.iconClass || MiniBrowser.ICON;\n\n        const content = this.createContent(props);\n        (this.layout as PanelLayout).addWidget(content);\n        this.toDisposeOnProps.push(content);\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        const widget = (this.layout as PanelLayout).widgets[0];\n        if (widget) {\n            widget.activate();\n        }\n    }\n\n    storeState(): object {\n        const { props } = this;\n        return { props };\n    }\n\n    restoreState(oldState: object): void {\n        if (!this.toDisposeOnProps.disposed) {\n            return;\n        }\n        if ('props' in oldState) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.setProps((<any>oldState)['props']);\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * The mini-browser can now serve content on its own host/origin.\n *\n * The virtual host can be configured with this `THEIA_MINI_BROWSER_HOST_PATTERN`\n * environment variable. `{{hostname}}` represents the current host, and `{{uuid}}`\n * will be replace by a random uuid value.\n */\nexport namespace MiniBrowserEndpoint {\n    export const PATH = '/mini-browser';\n    export const HOST_PATTERN_ENV = 'THEIA_MINI_BROWSER_HOST_PATTERN';\n    export const HOST_PATTERN_DEFAULT = '{{uuid}}.mini-browser.{{hostname}}';\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const MiniBrowserServicePath = '/services/mini-browser-service';\nexport const MiniBrowserService = Symbol('MiniBrowserService');\nexport interface MiniBrowserService {\n\n    /**\n     * Resolves to an array of file extensions - priority pairs supported by the `Mini Browser`.\n     *\n     * The file extensions start without the leading dot (`.`) and should be treated in a case-insensitive way. This means,\n     * if the `Mini Browser` supports `['jpg']`, then it can open the `MyPicture.JPG` file.\n     */\n    supportedFileExtensions(): Promise<Readonly<{ extension: string, priority: number }>[]>;\n\n}\n","/**\n *  PDFObject v2.2.12\n *  https://github.com/pipwerks/PDFObject\n *  @license\n *  Copyright (c) 2008-2023 Philip Hutchison\n *  MIT-style license: http://pipwerks.mit-license.org/\n *  UMD module pattern from https://github.com/umdjs/umd/blob/master/templates/returnExports.js\n */\n\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof module === \"object\" && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.PDFObject = factory();\n  }\n}(this, function () {\n\n    \"use strict\";\n\n    //PDFObject is designed for client-side (browsers), not server-side (node)\n    //Will choke on undefined navigator and window vars when run on server\n    //Return boolean false and exit function when running server-side\n\n    if( typeof window === \"undefined\" || \n        window.navigator === undefined || \n        window.navigator.userAgent === undefined || \n        window.navigator.mimeTypes === undefined){ \n            return false;\n    }\n\n    let pdfobjectversion = \"2.2.12\";\n    let nav = window.navigator;\n    let ua = window.navigator.userAgent;\n\n    //Time to jump through hoops -- browser vendors do not make it easy to detect PDF support.\n\n    /*\n        IE11 still uses ActiveX for Adobe Reader, but IE 11 doesn't expose window.ActiveXObject the same way \n        previous versions of IE did. window.ActiveXObject will evaluate to false in IE 11, but \"ActiveXObject\" \n        in window evaluates to true.\n\n        MS Edge does not support ActiveX so this test will evaluate false\n    */\n    let isIE = (\"ActiveXObject\" in window);\n\n    /*\n        There is a coincidental correlation between implementation of window.promises and native PDF support in desktop browsers\n        We use this to assume if the browser supports promises it supports embedded PDFs\n        Is this fragile? Sort of. But browser vendors removed mimetype detection, so we're left to improvise\n    */\n    let isModernBrowser = (window.Promise !== undefined);\n\n    //Older browsers still expose the mimeType\n    let supportsPdfMimeType = (nav.mimeTypes[\"application/pdf\"] !== undefined);\n\n    //Safari on iPadOS doesn't report as 'mobile' when requesting desktop site, yet still fails to embed PDFs\n    let isSafariIOSDesktopMode = (  nav.platform !== undefined && \n                                    nav.platform === \"MacIntel\" && \n                                    nav.maxTouchPoints !== undefined && \n                                    nav.maxTouchPoints > 1 );\n\n    //Quick test for mobile devices.\n    let isMobileDevice = (isSafariIOSDesktopMode || /Mobi|Tablet|Android|iPad|iPhone/.test(ua));\n\n    //Safari desktop requires special handling \n    let isSafariDesktop = ( !isMobileDevice && \n                            nav.vendor !== undefined && \n                            /Apple/.test(nav.vendor) && \n                            /Safari/.test(ua) );\n    \n    //Firefox started shipping PDF.js in Firefox 19. If this is Firefox 19 or greater, assume PDF.js is available\n    let isFirefoxWithPDFJS = (!isMobileDevice && /irefox/.test(ua) && ua.split(\"rv:\").length > 1) ? (parseInt(ua.split(\"rv:\")[1].split(\".\")[0], 10) > 18) : false;\n\n\n    /* ----------------------------------------------------\n       Supporting functions\n       ---------------------------------------------------- */\n\n    let createAXO = function (type){\n        var ax;\n        try {\n            ax = new ActiveXObject(type);\n        } catch (e) {\n            ax = null; //ensure ax remains null\n        }\n        return ax;\n    };\n\n    //If either ActiveX support for \"AcroPDF.PDF\" or \"PDF.PdfCtrl\" are found, return true\n    //Constructed as a method (not a prop) to avoid unneccesarry overhead -- will only be evaluated if needed\n    let supportsPdfActiveX = function (){ return !!(createAXO(\"AcroPDF.PDF\") || createAXO(\"PDF.PdfCtrl\")); };\n\n    //Determines whether PDF support is available\n    let supportsPDFs = (\n        //As of Sept 2020 no mobile browsers properly support PDF embeds\n        !isMobileDevice && (\n            //We're moving into the age of MIME-less browsers. They mostly all support PDF rendering without plugins.\n            isModernBrowser ||\n            //Modern versions of Firefox come bundled with PDFJS\n            isFirefoxWithPDFJS ||\n            //Browsers that still support the original MIME type check\n            supportsPdfMimeType ||\n            //Pity the poor souls still using IE\n            (isIE && supportsPdfActiveX())\n        )\n    );\n\n    //Create a fragment identifier for using PDF Open parameters when embedding PDF\n    let buildURLFragmentString = function(pdfParams){\n\n        let string = \"\";\n        let prop;\n\n        if(pdfParams){\n\n            for (prop in pdfParams) {\n                if (pdfParams.hasOwnProperty(prop)) {\n                    string += encodeURIComponent(prop) + \"=\" + encodeURIComponent(pdfParams[prop]) + \"&\";\n                }\n            }\n\n            //The string will be empty if no PDF Params found\n            if(string){\n\n                string = \"#\" + string;\n\n                //Remove last ampersand\n                string = string.slice(0, string.length - 1);\n\n            }\n\n        }\n\n        return string;\n\n    };\n\n    let embedError = function (msg, suppressConsole){\n        if(!suppressConsole){\n            console.log(\"[PDFObject] \" + msg);\n        }\n        return false;\n    };\n\n    let emptyNodeContents = function (node){\n        while(node.firstChild){\n            node.removeChild(node.firstChild);\n        }\n    };\n\n    let getTargetElement = function (targetSelector){\n\n        //Default to body for full-browser PDF\n        let targetNode = document.body;\n\n        //If a targetSelector is specified, check to see whether\n        //it's passing a selector, jQuery object, or an HTML element\n\n        if(typeof targetSelector === \"string\"){\n\n            //Is CSS selector\n            targetNode = document.querySelector(targetSelector);\n\n        } else if (window.jQuery !== undefined && targetSelector instanceof jQuery && targetSelector.length) {\n\n            //Is jQuery element. Extract HTML node\n            targetNode = targetSelector.get(0);\n\n        } else if (targetSelector.nodeType !== undefined && targetSelector.nodeType === 1){\n\n            //Is HTML element\n            targetNode = targetSelector;\n\n        }\n\n        return targetNode;\n\n    };\n\n    let generatePDFObjectMarkup = function (embedType, targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, customAttribute, PDFJS_URL){\n\n        //Ensure target element is empty first\n        emptyNodeContents(targetNode);\n\n        let source = url;\n\n        if(embedType === \"pdfjs\"){ \n            //If PDFJS_URL already contains a ?, assume querystring is in place, and use an ampersand to append PDFJS's file parameter\n            let connector = (PDFJS_URL.indexOf(\"?\") !== -1) ? \"&\" : \"?\"; \n            source = PDFJS_URL + connector + \"file=\" + encodeURIComponent(url) + pdfOpenFragment;\n        } else {\n            source += pdfOpenFragment;\n        }\n\n        let el_type = (embedType === \"pdfjs\" || embedType === \"iframe\") ? \"iframe\" : \"embed\";\n        let el = document.createElement(el_type);\n\n        el.className = \"pdfobject\";\n        el.type = \"application/pdf\";\n        el.title = title;\n        el.src = source;\n\n        if(id){\n            el.id = id;\n        }\n\n        if(el_type === \"iframe\"){\n            el.allow = \"fullscreen\";\n            el.frameborder = \"0\";\n        }\n\n        if(!omitInlineStyles){\n\n            let style = (el_type === \"embed\") ? \"overflow: auto;\" : \"border: none;\";\n\n            if(targetNode !== document.body){\n                //assign width and height to target node\n                style += \"width: \" + width + \"; height: \" + height + \";\";\n            } else {\n                //this is a full-page embed, use CSS to fill the viewport\n                style += \"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;\";\n            }\n\n            el.style.cssText = style; \n\n        }\n\n        //Allow developer to insert custom attribute on embed/iframe element, but ensure it does not conflict with attributes used by PDFObject\n        let reservedTokens = [\"className\", \"type\", \"title\", \"src\", \"style\", \"id\", \"allow\", \"frameborder\"];\n        if(customAttribute && customAttribute.key && reservedTokens.indexOf(customAttribute.key) === -1){\n            el.setAttribute(customAttribute.key, (typeof customAttribute.value !== \"undefined\") ? customAttribute.value : \"\");\n        }\n\n        targetNode.classList.add(\"pdfobject-container\");\n        targetNode.appendChild(el);\n\n        return targetNode.getElementsByTagName(el_type)[0];\n\n    };\n\n    let embed = function(url, targetSelector, options){\n\n        //If targetSelector is not defined, convert to boolean\n        let selector = targetSelector || false;\n\n        //Ensure options object is not undefined -- enables easier error checking below\n        let opt = options || {};\n\n        //Get passed options, or set reasonable defaults\n        let id = (typeof opt.id === \"string\") ? opt.id : \"\";\n        let page = opt.page || false;\n        let pdfOpenParams = opt.pdfOpenParams || {};\n        let fallbackLink = (typeof opt.fallbackLink === \"string\" || typeof opt.fallbackLink === \"boolean\") ? opt.fallbackLink : true;\n        let width = opt.width || \"100%\";\n        let height = opt.height || \"100%\";\n        let title = opt.title || \"Embedded PDF\";\n        let assumptionMode = (typeof opt.assumptionMode === \"boolean\") ? opt.assumptionMode : true;\n        let forcePDFJS = (typeof opt.forcePDFJS === \"boolean\") ? opt.forcePDFJS : false;\n        let supportRedirect = (typeof opt.supportRedirect === \"boolean\") ? opt.supportRedirect : false;\n        let omitInlineStyles = (typeof opt.omitInlineStyles === \"boolean\") ? opt.omitInlineStyles : false;\n        let suppressConsole = (typeof opt.suppressConsole === \"boolean\") ? opt.suppressConsole : false;\n        let forceIframe = (typeof opt.forceIframe === \"boolean\") ? opt.forceIframe : false;\n        let PDFJS_URL = opt.PDFJS_URL || false;\n        let targetNode = getTargetElement(selector);\n        let fallbackHTML = \"\";\n        let pdfOpenFragment = \"\";\n        let customAttribute = opt.customAttribute || {};\n        let fallbackHTML_default = \"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>\";\n\n        //Ensure URL is available. If not, exit now.\n        if(typeof url !== \"string\"){ return embedError(\"URL is not valid\", suppressConsole); }\n\n        //If target element is specified but is not valid, exit without doing anything\n        if(!targetNode){ return embedError(\"Target element cannot be determined\", suppressConsole); }\n\n        //page option overrides pdfOpenParams, if found\n        if(page){ pdfOpenParams.page = page; }\n\n        //Stringify optional Adobe params for opening document (as fragment identifier)\n        pdfOpenFragment = buildURLFragmentString(pdfOpenParams);\n\n\n        // --== Do the dance: Embed attempt #1 ==--\n\n        //If the forcePDFJS option is invoked, skip everything else and embed as directed\n        if(forcePDFJS && PDFJS_URL){\n            return generatePDFObjectMarkup(\"pdfjs\", targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, customAttribute, PDFJS_URL);\n        }\n \n        // --== Embed attempt #2 ==--\n\n        //Embed PDF if traditional support is provided, or if this developer is willing to roll with assumption\n        //that modern desktop (not mobile) browsers natively support PDFs \n        if(supportsPDFs || (assumptionMode && !isMobileDevice)){\n            \n            //Should we use <embed> or <iframe>? In most cases <embed>. \n            //Allow developer to force <iframe>, if desired\n            //There is an edge case where Safari does not respect 302 redirect requests for PDF files when using <embed> element.\n            //Redirect appears to work fine when using <iframe> instead of <embed> (Addresses issue #210)\n            //Forcing Safari desktop to use iframe due to freezing bug in macOS 11 (Big Sur)\n            let embedtype = (forceIframe || supportRedirect || isSafariDesktop) ? \"iframe\" : \"embed\";\n            \n            return generatePDFObjectMarkup(embedtype, targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, customAttribute);\n\n        }\n        \n        // --== Embed attempt #3 ==--\n        \n        //If everything else has failed and a PDFJS fallback is provided, try to use it\n        if(PDFJS_URL){\n            return generatePDFObjectMarkup(\"pdfjs\", targetNode, url, pdfOpenFragment, width, height, id, title, omitInlineStyles, customAttribute, PDFJS_URL);\n        }\n        \n        // --== PDF embed not supported! Use fallback ==-- \n\n        //Display the fallback link if available\n        if(fallbackLink){\n\n            fallbackHTML = (typeof fallbackLink === \"string\") ? fallbackLink : fallbackHTML_default;\n            targetNode.innerHTML = fallbackHTML.replace(/\\[url\\]/g, url);\n\n        }\n\n        return embedError(\"This browser does not support embedded PDFs\", suppressConsole);\n\n    };\n\n    return {\n        embed: function (a,b,c){ return embed(a,b,c); },\n        pdfobjectversion: (function () { return pdfobjectversion; })(),\n        supportsPDFs: (function (){ return supportsPDFs; })()\n    };\n\n}));\n"],"names":[],"sourceRoot":""}