{"version":3,"file":"vendors-node_modules_theia_filesystem_lib_browser_download_file-download-command-contribution_js.js","mappings":"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","sources":["webpack:///./node_modules/@theia/filesystem/src/browser/download/file-download-command-contribution.ts?","webpack:///./node_modules/@theia/filesystem/src/browser/download/file-download-service.ts?"],"sourcesContent":["// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { isChrome } from '@theia/core/lib/browser/browser';\nimport { environment } from '@theia/core/shared/@theia/application-package/lib/environment';\nimport { SelectionService } from '@theia/core/lib/common/selection-service';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { UriAwareCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { FileDownloadService } from './file-download-service';\nimport { CommonCommands } from '@theia/core/lib/browser';\n\n@injectable()\nexport class FileDownloadCommandContribution implements CommandContribution {\n\n    @inject(FileDownloadService)\n    protected readonly downloadService: FileDownloadService;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    registerCommands(registry: CommandRegistry): void {\n        registry.registerCommand(\n            FileDownloadCommands.DOWNLOAD,\n            UriAwareCommandHandler.MultiSelect(this.selectionService, {\n                execute: uris => this.executeDownload(uris),\n                isEnabled: uris => this.isDownloadEnabled(uris),\n                isVisible: uris => this.isDownloadVisible(uris),\n            })\n        );\n        registry.registerCommand(\n            FileDownloadCommands.COPY_DOWNLOAD_LINK,\n            UriAwareCommandHandler.MultiSelect(this.selectionService, {\n                execute: uris => this.executeDownload(uris, { copyLink: true }),\n                isEnabled: uris => isChrome && this.isDownloadEnabled(uris),\n                isVisible: uris => isChrome && this.isDownloadVisible(uris),\n            })\n        );\n    }\n\n    protected async executeDownload(uris: URI[], options?: { copyLink?: boolean }): Promise<void> {\n        this.downloadService.download(uris, options);\n    }\n\n    protected isDownloadEnabled(uris: URI[]): boolean {\n        return !environment.electron.is() && uris.length > 0 && uris.every(u => u.scheme === 'file');\n    }\n\n    protected isDownloadVisible(uris: URI[]): boolean {\n        return this.isDownloadEnabled(uris);\n    }\n\n}\n\nexport namespace FileDownloadCommands {\n\n    export const DOWNLOAD = Command.toDefaultLocalizedCommand({\n        id: 'file.download',\n        category: CommonCommands.FILE_CATEGORY,\n        label: 'Download'\n    });\n\n    export const COPY_DOWNLOAD_LINK = Command.toLocalizedCommand({\n        id: 'file.copyDownloadLink',\n        category: CommonCommands.FILE_CATEGORY,\n        label: 'Copy Download Link'\n    }, 'theia/filesystem/copyDownloadLink', CommonCommands.FILE_CATEGORY_KEY);\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FileDownloadData } from '../../common/download/file-download-data';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { addClipboardListener } from '@theia/core/lib/browser/widgets';\nimport { nls } from '@theia/core';\n\n@injectable()\nexport class FileDownloadService {\n\n    protected anchor: HTMLAnchorElement | undefined;\n    protected downloadCounter: number = 0;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    protected handleCopy(event: ClipboardEvent, downloadUrl: string): void {\n        if (downloadUrl && event.clipboardData) {\n            event.clipboardData.setData('text/plain', downloadUrl);\n            event.preventDefault();\n            this.messageService.info(nls.localize('theia/filesystem/copiedToClipboard', 'Copied the download link to the clipboard.'));\n        }\n    }\n\n    async cancelDownload(id: string): Promise<void> {\n        await fetch(`${this.endpoint()}/download/?id=${id}&cancel=true`);\n    }\n\n    async download(uris: URI[], options?: FileDownloadService.DownloadOptions): Promise<void> {\n        let cancel = false;\n        if (uris.length === 0) {\n            return;\n        }\n        const copyLink = options && options.copyLink ? true : false;\n        try {\n            const text: string = copyLink ?\n                nls.localize('theia/filesystem/prepareDownloadLink', 'Preparing download link...') :\n                nls.localize('theia/filesystem/prepareDownload', 'Preparing download...');\n            const [progress, result] = await Promise.all([\n                this.messageService.showProgress({\n                    text: text,\n                    options: { cancelable: true }\n                }, () => { cancel = true; }),\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                new Promise<{ response: Response, jsonResponse: any }>(async resolve => {\n                    const resp = await fetch(this.request(uris));\n                    const jsonResp = await resp.json();\n                    resolve({ response: resp, jsonResponse: jsonResp });\n                })\n            ]);\n            const { response, jsonResponse } = result;\n            if (cancel) {\n                this.cancelDownload(jsonResponse.id);\n                return;\n            }\n            const { status, statusText } = response;\n            if (status === 200) {\n                progress.cancel();\n                const downloadUrl = `${this.endpoint()}/download/?id=${jsonResponse.id}`;\n                if (copyLink) {\n                    if (document.documentElement) {\n                        const toDispose = addClipboardListener(document.documentElement, 'copy', e => {\n                            toDispose.dispose();\n                            this.handleCopy(e, downloadUrl);\n                        });\n                        document.execCommand('copy');\n                    }\n                } else {\n                    this.forceDownload(jsonResponse.id, decodeURIComponent(jsonResponse.name));\n                }\n            } else {\n                throw new Error(`Received unexpected status code: ${status}. [${statusText}]`);\n            }\n        } catch (e) {\n            this.logger.error(`Error occurred when downloading: ${uris.map(u => u.toString(true))}.`, e);\n        }\n    }\n\n    protected async forceDownload(id: string, title: string): Promise<void> {\n        let url: string | undefined;\n        try {\n            if (this.anchor === undefined) {\n                this.anchor = document.createElement('a');\n            }\n            const endpoint = this.endpoint();\n            url = `${endpoint}/download/?id=${id}`;\n            this.anchor.href = url;\n            this.anchor.style.display = 'none';\n            this.anchor.download = title;\n            document.body.appendChild(this.anchor);\n            this.anchor.click();\n        } finally {\n            // make sure anchor is removed from parent\n            if (this.anchor && this.anchor.parentNode) {\n                this.anchor.parentNode.removeChild(this.anchor);\n            }\n            if (url) {\n                URL.revokeObjectURL(url);\n            }\n        }\n    }\n\n    protected request(uris: URI[]): Request {\n        const url = this.url(uris);\n        const init = this.requestInit(uris);\n        return new Request(url, init);\n    }\n\n    protected requestInit(uris: URI[]): RequestInit {\n        if (uris.length === 1) {\n            return {\n                body: undefined,\n                method: 'GET'\n            };\n        }\n        return {\n            method: 'PUT',\n            body: JSON.stringify(this.body(uris)),\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n        };\n    }\n\n    protected body(uris: URI[]): FileDownloadData {\n        return {\n            uris: uris.map(u => u.toString(true))\n        };\n    }\n\n    protected url(uris: URI[]): string {\n        const endpoint = this.endpoint();\n        if (uris.length === 1) {\n            // tslint:disable-next-line:whitespace\n            const [uri,] = uris;\n            return `${endpoint}/?uri=${uri.toString()}`;\n        }\n        return endpoint;\n\n    }\n\n    protected endpoint(): string {\n        const url = this.filesUrl();\n        return url.endsWith('/') ? url.slice(0, -1) : url;\n    }\n\n    protected filesUrl(): string {\n        return new Endpoint({ path: 'files' }).getRestUrl().toString();\n    }\n\n}\n\nexport namespace FileDownloadService {\n    export interface DownloadOptions {\n        /**\n         * `true` if the download link has to be copied to the clipboard. This will not trigger the actual download. Defaults to `false`.\n         */\n        readonly copyLink?: boolean;\n    }\n}\n"],"names":[],"sourceRoot":""}