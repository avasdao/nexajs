"use strict";var Xz=Object.create;var Nd=Object.defineProperty;var LT=Object.getOwnPropertyDescriptor;var Jz=Object.getOwnPropertyNames;var Yz=Object.getPrototypeOf,Qz=Object.prototype.hasOwnProperty;var Zz=(t,e)=>()=>(t&&(e=t(t=0)),e);var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eX=(t,e)=>{for(var r in e)Nd(t,r,{get:e[r],enumerable:!0})},TT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Jz(e))!Qz.call(t,i)&&i!==r&&Nd(t,i,{get:()=>e[i],enumerable:!(n=LT(e,i))||n.enumerable});return t};var A=(t,e,r)=>(r=t!=null?Xz(Yz(t)):{},TT(e||!t||!t.__esModule?Nd(r,"default",{value:t,enumerable:!0}):r,t)),tX=t=>TT(Nd({},"__esModule",{value:!0}),t),T=(t,e,r,n)=>{for(var i=n>1?void 0:n?LT(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&Nd(e,r,i),i},v=(t,e)=>(r,n)=>e(r,n,t);var _e=y((r_e,FT)=>{"use strict";var rX=Object.create,rH=Object.defineProperty,nX=Object.getOwnPropertyDescriptor,MT=Object.getOwnPropertyNames,iX=Object.getPrototypeOf,oX=Object.prototype.hasOwnProperty,sX=(t,e)=>function(){return e||(0,t[MT(t)[0]])((e={exports:{}}).exports,e),e.exports},aX=(t,e)=>{for(var r in e)rH(t,r,{get:e[r],enumerable:!0})},kT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MT(e))!oX.call(t,i)&&i!==r&&rH(t,i,{get:()=>e[i],enumerable:!(n=nX(e,i))||n.enumerable});return t},uX=(t,e,r)=>(r=t!=null?rX(iX(t)):{},kT(e||!t||!t.__esModule?rH(r,"default",{value:t,enumerable:!0}):r,t)),cX=t=>kT(rH({},"__esModule",{value:!0}),t),lX=sX({"node_modules/request-light/lib/node/main.js"(t){(()=>{var e={46:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,c,{signal:l}={}){return new Promise((p,f)=>{function m(){l?.removeEventListener("abort",m),u.removeListener(c,h),u.removeListener("error",H)}function h(...b){m(),p(b)}function H(b){m(),f(b)}l?.addEventListener("abort",m),u.on(c,h),u.on("error",H)})}},54:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};let l=u(361),p=c(u(374)),f=c(u(304)),m=p.default("agent-base");function h(){let{stack:b}=new Error;return typeof b=="string"&&b.split(`
`).some(_=>_.indexOf("(https.js:")!==-1||_.indexOf("node:https:")!==-1)}function H(b,_){return new H.Agent(b,_)}(function(b){class _ extends l.EventEmitter{constructor(U,D){super();let P=D;typeof U=="function"?this.callback=U:U&&(P=U),this.timeout=null,P&&typeof P.timeout=="number"&&(this.timeout=P.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:h()?443:80}set defaultPort(U){this.explicitDefaultPort=U}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:h()?"https:":"http:"}set protocol(U){this.explicitProtocol=U}callback(U,D,P){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(U,D){let P=Object.assign({},D);typeof P.secureEndpoint!="boolean"&&(P.secureEndpoint=h()),P.host==null&&(P.host="localhost"),P.port==null&&(P.port=P.secureEndpoint?443:80),P.protocol==null&&(P.protocol=P.secureEndpoint?"https:":"http:"),P.host&&P.path&&delete P.path,delete P.agent,delete P.hostname,delete P._defaultAgent,delete P.defaultPort,delete P.createConnection,U._last=!0,U.shouldKeepAlive=!1;let j=!1,N=null,M=P.timeout||this.timeout,L=O=>{U._hadError||(U.emit("error",O),U._hadError=!0)},F=()=>{N=null,j=!0;let O=new Error(`A "socket" was not created for HTTP request before ${M}ms`);O.code="ETIMEOUT",L(O)},S=O=>{j||(N!==null&&(clearTimeout(N),N=null),L(O))},k=O=>{if(j)return;if(N!=null&&(clearTimeout(N),N=null),K=O,Boolean(K)&&typeof K.addRequest=="function")return m("Callback returned another Agent instance %o",O.constructor.name),void O.addRequest(U,P);var K;if(O)return O.once("free",()=>{this.freeSocket(O,P)}),void U.onSocket(O);let C=new Error(`no Duplex stream was returned to agent-base for \`${U.method} ${U.path}\``);L(C)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(m("Converting legacy callback function to promise"),this.promisifiedCallback=f.default(this.callback)):this.promisifiedCallback=this.callback),typeof M=="number"&&M>0&&(N=setTimeout(F,M)),"port"in P&&typeof P.port!="number"&&(P.port=Number(P.port));try{m("Resolving socket for %o request: %o",P.protocol,`${U.method} ${U.path}`),Promise.resolve(this.promisifiedCallback(U,P)).then(k,S)}catch(O){Promise.reject(O).catch(S)}}else L(new Error("`callback` is not defined"))}freeSocket(U,D){m("Freeing socket %o %o",U.constructor.name,D),U.destroy()}destroy(){m("Destroying agent %o",this.constructor.name)}}b.Agent=_,b.prototype=b.Agent.prototype})(H||(H={})),s.exports=H},304:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){return function(c,l){return new Promise((p,f)=>{u.call(this,c,l,(m,h)=>{m?f(m):p(h)})})}}},370:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(U,D,P,j){return new(P||(P=Promise))(function(N,M){function L(k){try{S(j.next(k))}catch(O){M(O)}}function F(k){try{S(j.throw(k))}catch(O){M(O)}}function S(k){var O;k.done?N(k.value):(O=k.value,O instanceof P?O:new P(function(K){K(O)})).then(L,F)}S((j=j.apply(U,D||[])).next())})},l=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),m=l(u(310)),h=l(u(374)),H=l(u(46)),b=u(54),_=(0,h.default)("http-proxy-agent");class $ extends b.Agent{constructor(D){let P;if(P=typeof D=="string"?m.default.parse(D):D,!P)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_("Creating new HttpProxyAgent instance: %o",P),super(P);let j=Object.assign({},P);var N;this.secureProxy=P.secureProxy||typeof(N=j.protocol)=="string"&&/^https:?$/i.test(N),j.host=j.hostname||j.host,typeof j.port=="string"&&(j.port=parseInt(j.port,10)),!j.port&&j.host&&(j.port=this.secureProxy?443:80),j.host&&j.path&&(delete j.path,delete j.pathname),this.proxy=j}callback(D,P){return c(this,void 0,void 0,function*(){let{proxy:j,secureProxy:N}=this,M=m.default.parse(D.path),L;if(M.protocol||(M.protocol="http:"),M.hostname||(M.hostname=P.hostname||P.host||null),M.port==null&&(P.port,1)&&(M.port=String(P.port)),M.port==="80"&&(M.port=""),D.path=m.default.format(M),j.auth&&D.setHeader("Proxy-Authorization",`Basic ${Buffer.from(j.auth).toString("base64")}`),N?(_("Creating `tls.Socket`: %o",j),L=f.default.connect(j)):(_("Creating `net.Socket`: %o",j),L=p.default.connect(j)),D._header){let F,S;_("Regenerating stored HTTP header string for request"),D._header=null,D._implicitHeader(),D.output&&D.output.length>0?(_("Patching connection write() output buffer with updated header"),F=D.output[0],S=F.indexOf(`\r
\r
`)+4,D.output[0]=D._header+F.substring(S),_("Output buffer: %o",D.output)):D.outputData&&D.outputData.length>0&&(_("Patching connection write() output buffer with updated header"),F=D.outputData[0].data,S=F.indexOf(`\r
\r
`)+4,D.outputData[0].data=D._header+F.substring(S),_("Output buffer: %o",D.outputData[0].data))}return yield(0,H.default)(L,"connect"),L})}}a.default=$},201:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(370));function l(p){return new c.default(p)}(function(p){p.HttpProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),s.exports=l},146:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(P,j,N,M){return new(N||(N=Promise))(function(L,F){function S(K){try{O(M.next(K))}catch(C){F(C)}}function k(K){try{O(M.throw(K))}catch(C){F(C)}}function O(K){var C;K.done?L(K.value):(C=K.value,C instanceof N?C:new N(function(x){x(C)})).then(S,k)}O((M=M.apply(P,j||[])).next())})},l=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(a,"__esModule",{value:!0});let p=l(u(808)),f=l(u(404)),m=l(u(310)),h=l(u(491)),H=l(u(374)),b=u(54),_=l(u(829)),$=H.default("https-proxy-agent:agent");class U extends b.Agent{constructor(j){let N;if(N=typeof j=="string"?m.default.parse(j):j,!N)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");$("creating new HttpsProxyAgent instance: %o",N),super(N);let M=Object.assign({},N);var L;this.secureProxy=N.secureProxy||typeof(L=M.protocol)=="string"&&/^https:?$/i.test(L),M.host=M.hostname||M.host,typeof M.port=="string"&&(M.port=parseInt(M.port,10)),!M.port&&M.host&&(M.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in M)&&(M.ALPNProtocols=["http 1.1"]),M.host&&M.path&&(delete M.path,delete M.pathname),this.proxy=M}callback(j,N){return c(this,void 0,void 0,function*(){let{proxy:M,secureProxy:L}=this,F;L?($("Creating `tls.Socket`: %o",M),F=f.default.connect(M)):($("Creating `net.Socket`: %o",M),F=p.default.connect(M));let S=Object.assign({},M.headers),k=`CONNECT ${N.host}:${N.port} HTTP/1.1\r
`;M.auth&&(S["Proxy-Authorization"]=`Basic ${Buffer.from(M.auth).toString("base64")}`);let{host:O,port:K,secureEndpoint:C}=N;(function(X,te){return Boolean(!te&&X===80||te&&X===443)})(K,C)||(O+=`:${K}`),S.Host=O,S.Connection="close";for(let X of Object.keys(S))k+=`${X}: ${S[X]}\r
`;let x=_.default(F);F.write(`${k}\r
`);let{statusCode:Z,buffered:re}=yield x;if(Z===200){if(j.once("socket",D),N.secureEndpoint){$("Upgrading socket connection to TLS");let X=N.servername||N.host;return f.default.connect(Object.assign(Object.assign({},function(te,...ue){let se={},de;for(de in te)ue.includes(de)||(se[de]=te[de]);return se}(N,"host","hostname","path","port")),{socket:F,servername:X}))}return F}F.destroy();let ne=new p.default.Socket({writable:!1});return ne.readable=!0,j.once("socket",X=>{$("replaying proxy buffer for failed request"),h.default(X.listenerCount("data")>0),X.push(re),X.push(null)}),ne})}}function D(P){P.resume()}a.default=U},18:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}})(u(146));function l(p){return new c.default(p)}(function(p){p.HttpsProxyAgent=c.default,p.prototype=c.default.prototype})(l||(l={})),s.exports=l},829:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(a,"__esModule",{value:!0});let l=c(u(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(p){return new Promise((f,m)=>{let h=0,H=[];function b(){let U=p.read();U?function(D){H.push(D),h+=D.length;let P=Buffer.concat(H,h);if(P.indexOf(`\r
\r
`)===-1)return l("have not received end of HTTP headers yet..."),void b();let j=P.toString("ascii",0,P.indexOf(`\r
`)),N=+j.split(" ")[1];l("got proxy server response: %o",j),f({statusCode:N,buffered:P})}(U):p.once("readable",b)}function _(U){l("onclose had error %o",U)}function $(){l("onend")}p.on("error",function U(D){p.removeListener("end",$),p.removeListener("error",U),p.removeListener("close",_),p.removeListener("readable",b),l("onerror %o",D),m(D)}),p.on("close",_),p.on("end",$),b()})}},539:function(s,a,u){"use strict";var c,l=this&&this.__extends||(c=function(L,F){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,k){S.__proto__=k}||function(S,k){for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(S[O]=k[O])},c(L,F)},function(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function S(){this.constructor=L}c(L,F),L.prototype=F===null?Object.create(F):(S.prototype=F.prototype,new S)}),p=this&&this.__assign||function(){return p=Object.assign||function(L){for(var F,S=1,k=arguments.length;S<k;S++)for(var O in F=arguments[S])Object.prototype.hasOwnProperty.call(F,O)&&(L[O]=F[O]);return L},p.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var f=u(685),m=u(687),h=u(310),H=u(472),b=u(796),_=u(201),$=u(18);if(process.env.VSCODE_NLS_CONFIG){var U=process.env.VSCODE_NLS_CONFIG;H.config(JSON.parse(U))}var D=H.loadMessageBundle(),P=void 0,j=!0;function N(L){var F;return new Promise(function(S,k){var O=(0,h.parse)(L.url),K={hostname:O.hostname,agent:!!L.agent&&L.agent,port:O.port?parseInt(O.port):O.protocol==="https:"?443:80,path:O.path,method:L.type||"GET",headers:L.headers,rejectUnauthorized:typeof L.strictSSL!="boolean"||L.strictSSL};L.user&&L.password&&(K.auth=L.user+":"+L.password);var C=function(x){if(x.statusCode>=300&&x.statusCode<400&&L.followRedirects&&L.followRedirects>0&&x.headers.location){var Z=x.headers.location;Z.startsWith("/")&&(Z=(0,h.format)({protocol:O.protocol,hostname:O.hostname,port:O.port,pathname:Z})),S(N(function(re){for(var ne=[],X=1;X<arguments.length;X++)ne[X-1]=arguments[X];return ne.forEach(function(te){return Object.keys(te).forEach(function(ue){return re[ue]=te[ue]})}),re}({},L,{url:Z,followRedirects:L.followRedirects-1})))}else S({req:F,res:x})};(F=O.protocol==="https:"?m.request(K,C):f.request(K,C)).on("error",k),L.timeout&&F.setTimeout(L.timeout),L.data&&F.write(L.data),F.end(),L.token&&(L.token.isCancellationRequested&&F.destroy(new M),L.token.onCancellationRequested(function(){F.destroy(new M)}))})}a.configure=function(L,F){P=L,j=F},a.xhr=function(L){return typeof(L=p({},L)).strictSSL!="boolean"&&(L.strictSSL=j),L.agent||(L.agent=function(F,S){S===void 0&&(S={});var k=(0,h.parse)(F),O=S.proxyUrl||function(x){return x.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:x.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(k);if(!O)return null;var K=(0,h.parse)(O);if(!/^https?:$/.test(K.protocol))return null;var C={host:K.hostname,port:Number(K.port),auth:K.auth,rejectUnauthorized:typeof S.strictSSL!="boolean"||S.strictSSL,protocol:K.protocol};return k.protocol==="http:"?_(C):$(C)}(L.url,{proxyUrl:P,strictSSL:j})),typeof L.followRedirects!="number"&&(L.followRedirects=5),N(L).then(function(F){return new Promise(function(S,k){var O,K,C=F.res,x=C,Z=!1,re=C.headers&&C.headers["content-encoding"];if(re&&(O=L.type,K=F.res.statusCode,!(O==="HEAD"||K>=100&&K<200||K===204||K===304))){var ne={flush:b.constants.Z_SYNC_FLUSH,finishFlush:b.constants.Z_SYNC_FLUSH};if(re==="gzip"){var X=b.createGunzip(ne);C.pipe(X),x=X}else if(re==="deflate"){var te=b.createInflate(ne);C.pipe(te),x=te}}var ue=[];x.on("data",function(se){return ue.push(se)}),x.on("end",function(){if(!Z){if(Z=!0,L.followRedirects>0&&(C.statusCode>=300&&C.statusCode<=303||C.statusCode===307)){var se=C.headers.location;if(se.startsWith("/")){var de=(0,h.parse)(L.url);se=(0,h.format)({protocol:de.protocol,hostname:de.hostname,port:de.port,pathname:se})}if(se){var nt={type:L.type,url:se,user:L.user,password:L.password,headers:L.headers,timeout:L.timeout,followRedirects:L.followRedirects-1,data:L.data,token:L.token};return void(0,a.xhr)(nt).then(S,k)}}var me=Buffer.concat(ue),kt={responseText:me.toString(),body:me,status:C.statusCode,headers:C.headers||{}};C.statusCode>=200&&C.statusCode<300||C.statusCode===1223?S(kt):k(kt)}}),x.on("error",function(se){var de;de=M.is(se)?se:{responseText:D("error","Unable to access {0}. Error: {1}",L.url,se.message),body:Buffer.concat(ue),status:500,headers:{}},Z=!0,k(de)}),L.token&&(L.token.isCancellationRequested&&x.destroy(new M),L.token.onCancellationRequested(function(){x.destroy(new M)}))})},function(F){var S;return S=M.is(F)?F:{responseText:L.agent?D("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",L.url,F.message):D("error.cannot.connect","Unable to connect to {0}. Error: {1}",L.url,F.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(S)})},a.getErrorStatusDescription=function(L){if(!(L<400))switch(L){case 400:return D("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return D("status.401","Unauthorized. The server is refusing to respond.");case 403:return D("status.403","Forbidden. The server is refusing to respond.");case 404:return D("status.404","Not Found. The requested location could not be found.");case 405:return D("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return D("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return D("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return D("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return D("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return D("status.410","Gone. The requested page is no longer available.");case 411:return D("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return D("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return D("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return D("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return D("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return D("status.500","Internal Server Error.");case 501:return D("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return D("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return D("status.416","HTTP status code {0}",L)}};var M=function(L){function F(){var S=L.call(this,"The user aborted a request")||this;return S.name="AbortError",Object.setPrototypeOf(S,F.prototype),S}return l(F,L),F.is=function(S){return S instanceof F},F}(Error)},800:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,l,p,f=u(926);function m(H){return H!==void 0}function h(H,b){return a.isPseudo&&(H="\uFF3B"+H.replace(/[aouei]/g,"$&$&")+"\uFF3D"),b.length===0?H:H.replace(/\{(\d+)\}/g,function(_,$){var U=$[0],D=b[U],P=_;return typeof D=="string"?P=D:typeof D!="number"&&typeof D!="boolean"&&D!=null||(P=String(D)),P})}(p=a.MessageFormat||(a.MessageFormat={})).file="file",p.bundle="bundle",p.both="both",(l=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",l.languagePack="languagePack",function(H){H.is=function(b){var _=b;return _&&m(_.key)&&m(_.comment)}}(c||(c={})),a.isDefined=m,a.isPseudo=!1,a.setPseudo=function(H){a.isPseudo=H},a.format=h,a.localize=function(H,b){for(var _=[],$=2;$<arguments.length;$++)_[$-2]=arguments[$];return h(b,_)},a.loadMessageBundle=function(H){return(0,f.default)().loadMessageBundle(H)},a.config=function(H){return(0,f.default)().config(H)}},926:(s,a)=>{"use strict";var u;function c(){if(u===void 0)throw new Error("No runtime abstraction layer installed");return u}Object.defineProperty(a,"__esModule",{value:!0}),function(l){l.install=function(p){if(p===void 0)throw new Error("No runtime abstraction layer provided");u=p}}(c||(c={})),a.default=c},472:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=u(17),l=u(147),p=u(926),f=u(800),m=u(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return m.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return m.BundleFormat}});var h,H,b=Object.prototype.toString;function _(F){return b.call(F)==="[object Number]"}function $(F){return b.call(F)==="[object String]"}function U(F){return JSON.parse(l.readFileSync(F,"utf8"))}function D(F){return function(S,k){for(var O=[],K=2;K<arguments.length;K++)O[K-2]=arguments[K];return _(S)?S>=F.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,f.format)(F[S],O):$(k)?(console.warn("Message ".concat(k," didn't get externalized correctly.")),(0,f.format)(k,O)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function P(F,S){return h[F]=S,S}function j(F){try{return function(S){var k=U(c.join(S,"nls.metadata.json")),O=Object.create(null);for(var K in k){var C=k[K];O[K]=C.messages}return O}(F)}catch(S){return void console.log("Generating default bundle from meta data failed.",S)}}function N(F,S){var k;if(H.languagePackSupport===!0&&H.cacheRoot!==void 0&&H.languagePackId!==void 0&&H.translationsConfigFile!==void 0&&H.translationsConfig!==void 0)try{k=function(K,C){var x,Z,re,ne=c.join(H.cacheRoot,"".concat(K.id,"-").concat(K.hash,".json")),X=!1,te=!1;try{return x=JSON.parse(l.readFileSync(ne,{encoding:"utf8",flag:"r"})),Z=ne,re=new Date,l.utimes(Z,re,re,function(){}),x}catch(ue){if(ue.code==="ENOENT")te=!0;else{if(!(ue instanceof SyntaxError))throw ue;console.log("Syntax error parsing message bundle: ".concat(ue.message,".")),l.unlink(ne,function(se){se&&console.error("Deleting corrupted bundle ".concat(ne," failed."))}),X=!0}}if(x=function(ue,se){var de=H.translationsConfig[ue.id];if(de){var nt=U(de).contents,me=U(c.join(se,"nls.metadata.json")),kt=Object.create(null);for(var Pr in me){var Q=me[Pr],ve=nt["".concat(ue.outDir,"/").concat(Pr)];if(ve){for(var Y=[],ye=0;ye<Q.keys.length;ye++){var Ne=Q.keys[ye],dt=ve[$(Ne)?Ne:Ne.key];dt===void 0&&(dt=Q.messages[ye]),Y.push(dt)}kt[Pr]=Y}else kt[Pr]=Q.messages}return kt}}(K,C),!x||X)return x;if(te)try{l.writeFileSync(ne,JSON.stringify(x),{encoding:"utf8",flag:"wx"})}catch(ue){if(ue.code==="EEXIST")return x;throw ue}return x}(F,S)}catch(K){console.log("Load or create bundle failed ",K)}if(!k){if(H.languagePackSupport)return j(S);var O=function(K){for(var C=H.language;C;){var x=c.join(K,"nls.bundle.".concat(C,".json"));if(l.existsSync(x))return x;var Z=C.lastIndexOf("-");C=Z>0?C.substring(0,Z):void 0}if(C===void 0&&(x=c.join(K,"nls.bundle.json"),l.existsSync(x)))return x}(S);if(O)try{return U(O)}catch(K){console.log("Loading in the box message bundle failed.",K)}k=j(S)}return k}function M(F){if(!F)return f.localize;var S=c.extname(F);if(S&&(F=F.substr(0,F.length-S.length)),H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.bundle){var k=function(X){for(var te,ue=c.dirname(X);te=c.join(ue,"nls.metadata.header.json"),!l.existsSync(te);){var se=c.dirname(ue);if(se===ue){te=void 0;break}ue=se}return te}(F);if(k){var O=c.dirname(k),K=h[O];if(K===void 0)try{var C=JSON.parse(l.readFileSync(k,"utf8"));try{var x=N(C,O);K=P(O,x?{header:C,nlsBundle:x}:null)}catch(X){console.error("Failed to load nls bundle",X),K=P(O,null)}}catch(X){console.error("Failed to read header file",X),K=P(O,null)}if(K){var Z=F.substr(O.length+1).replace(/\\/g,"/"),re=K.nlsBundle[Z];return re===void 0?(console.error("Messages for file ".concat(F," not found. See console for details.")),function(){return"Messages not found."}):D(re)}}}if(H.messageFormat===f.MessageFormat.both||H.messageFormat===f.MessageFormat.file)try{var ne=U(function(X){var te;if(!(H.cacheLanguageResolution&&te)){if(f.isPseudo||!H.language)te=".nls.json";else for(var ue=H.language;ue;){var se=".nls."+ue+".json";if(l.existsSync(X+se)){te=se;break}var de=ue.lastIndexOf("-");de>0?ue=ue.substring(0,de):(te=".nls.json",ue=null)}H.cacheLanguageResolution}return X+te}(F));return Array.isArray(ne)?D(ne):(0,f.isDefined)(ne.messages)&&(0,f.isDefined)(ne.keys)?D(ne.messages):(console.error("String bundle '".concat(F,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(X){X.code!=="ENOENT"&&console.error("Failed to load single file bundle",X)}return console.error("Failed to load message bundle for file ".concat(F)),function(){return"Failed to load message bundle. See console for details."}}function L(F){return F&&($(F.locale)&&(H.locale=F.locale.toLowerCase(),H.language=H.locale,h=Object.create(null)),F.messageFormat!==void 0&&(H.messageFormat=F.messageFormat),F.bundleFormat===f.BundleFormat.standalone&&H.languagePackSupport===!0&&(H.languagePackSupport=!1)),(0,f.setPseudo)(H.locale==="pseudo"),M}(function(){if(H={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:f.MessageFormat.bundle},$(process.env.VSCODE_NLS_CONFIG))try{var F=JSON.parse(process.env.VSCODE_NLS_CONFIG),S=void 0;if(F.availableLanguages){var k=F.availableLanguages["*"];$(k)&&(S=k)}if($(F.locale)&&(H.locale=F.locale.toLowerCase()),S===void 0?H.language=H.locale:S!=="en"&&(H.language=S),function(K){return K===!0||K===!1}(F._languagePackSupport)&&(H.languagePackSupport=F._languagePackSupport),$(F._cacheRoot)&&(H.cacheRoot=F._cacheRoot),$(F._languagePackId)&&(H.languagePackId=F._languagePackId),$(F._translationsConfigFile)){H.translationsConfigFile=F._translationsConfigFile;try{H.translationsConfig=U(H.translationsConfigFile)}catch{if(F._corruptedFile){var O=c.dirname(F._corruptedFile);l.exists(O,function(C){C&&l.writeFile(F._corruptedFile,"corrupted","utf8",function(x){console.error(x)})})}}}}catch{}(0,f.setPseudo)(H.locale==="pseudo"),h=Object.create(null)})(),a.loadMessageBundle=M,a.config=L,p.default.install(Object.freeze({loadMessageBundle:M,config:L}))},374:(s,a)=>{function u(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return u}},491:s=>{"use strict";s.exports=require("assert")},361:s=>{"use strict";s.exports=require("events")},147:s=>{"use strict";s.exports=require("fs")},685:s=>{"use strict";s.exports=require("http")},687:s=>{"use strict";s.exports=require("https")},808:s=>{"use strict";s.exports=require("net")},17:s=>{"use strict";s.exports=require("path")},404:s=>{"use strict";s.exports=require("tls")},310:s=>{"use strict";s.exports=require("url")},796:s=>{"use strict";s.exports=require("zlib")}},r={},n=function s(a){var u=r[a];if(u!==void 0)return u.exports;var c=r[a]={exports:{}};return e[a].call(c.exports,c,c.exports,s),c.exports}(539),i=t;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})()}}),OT={};aX(OT,{config:()=>mX,t:()=>gX});FT.exports=cX(OT);var pX=require("fs"),fX=require("fs/promises"),$T=uX(lX());async function dX(t){if(t.protocol==="file:")return await(0,fX.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:")try{let e=await(0,$T.xhr)({url:t.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(e.body)}catch(e){throw new Error(e.responseText??(0,$T.getErrorStatusDescription)(e.status)??e.toString())}throw new Error("Unsupported protocol")}function hX(t){return(0,pX.readFileSync)(t,"utf8")}var nl;function mX(t){if("contents"in t){typeof t.contents=="string"?nl=JSON.parse(t.contents):nl=t.contents;return}if("fsPath"in t){let e=hX(t.fsPath),r=JSON.parse(e);nl=RT(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=dX(e).then(o=>{try{let s=JSON.parse(o);nl=RT(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function gX(...t){let e=t[0],r,n,i;if(typeof e=="string"?(r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0]):(n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{}),!nl)return Ud(n,i);let o=nl[r];return o?typeof o=="string"?Ud(o,i):o.comment?Ud(o.message,i):Ud(n,i):Ud(n,i)}var HX=/{([^}]+)}/g;function Ud(t,e){return t.replace(HX,(r,n)=>e[n]??r)}function RT(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var Su=y(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.findWindowsCandidates=en.sort=en.preferredEdgePath=en.preferredChromePath=en.escapeRegexSpecialChars=en.canAccess=void 0;var DX=require("path");async function hH({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}en.canAccess=hH;var CX="/\\.?*()^${}|[]+";function PX(t,e){let r=CX.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}en.escapeRegexSpecialChars=PX;async function xX(t,e){if(await hH(t,e.CHROME_PATH))return e.CHROME_PATH}en.preferredChromePath=xX;async function LX(t,e){if(await hH(t,e.EDGE_PATH))return e.EDGE_PATH}en.preferredEdgePath=LX;function TX(t,e){return[...t].filter(n=>!!n).map(n=>{let i=e.find(o=>o.regex.test(n));return i?{path:n,weight:i.weight,quality:i.quality}:{path:n,weight:10,quality:"dev"}}).sort((n,i)=>i.weight-n.weight).map(n=>({path:n.path,quality:n.quality}))}en.sort=TX;async function $X(t,e,r){let n=[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"]].filter(o=>!!o),i=[];for(let o of n)for(let s of r){let a=DX.win32.join(o,s.name);i.push(hH(e,a).then(u=>u?{path:a,quality:s.type}:void 0))}return(await Promise.all(i)).filter(o=>!!o)}en.findWindowsCandidates=$X});var SA=y(mH=>{"use strict";Object.defineProperty(mH,"__esModule",{value:!0});mH.DarwinFinderBase=void 0;var RX=require("path"),AA=Su(),zT=/( \(0x[a-f0-9]+\))/,IA=class{constructor(e,r,n){this.env=e,this.fs=r,this.execa=n,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(let r of this.wellKnownPaths)if(e(r)&&await(0,AA.canAccess)(this.fs,r.path))return r;return(await this.findAll()).find(e)}findAll(){var e;return(e=this.foundAll)!==null&&e!==void 0||(this.foundAll=this.findAllInner()),this.foundAll}async findLaunchRegisteredApps(e,r,n){let{stdout:i}=await this.execa.command(`${this.lsRegisterCommand} | awk 'tolower($0) ~ /${e.toLowerCase()}${zT.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),o=[...r,...i.split(`
`).map(u=>u.trim().replace(zT,""))].filter(u=>!!u),s=this.getPreferredPath();s&&o.push(s);let a=new Set;for(let u of o)for(let c of n){let l=RX.posix.join(u.trim(),c);try{await this.fs.access(l),a.add(l)}catch{}}return a}createPriorities(e){let r=this.env.HOME&&(0,AA.escapeRegexSpecialChars)(this.env.HOME),n=this.getPreferredPath(),i=e.reduce((o,s)=>[...o,{regex:new RegExp(`^/Applications/.*${s.name}`),weight:s.weight+100,quality:s.quality},{regex:new RegExp(`^${r}/Applications/.*${s.name}`),weight:s.weight,quality:s.quality},{regex:new RegExp(`^/Volumes/.*${s.name}`),weight:s.weight-100,quality:s.quality}],[]);return n&&i.unshift({regex:new RegExp((0,AA.escapeRegexSpecialChars)(n)),weight:151,quality:"custom"}),i}};mH.DarwinFinderBase=IA});var XT=y(gH=>{"use strict";Object.defineProperty(gH,"__esModule",{value:!0});gH.DarwinChromeBrowserFinder=void 0;var MX=Su(),kX=SA(),EA=class extends kX.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome Beta","/Contents/MacOS/Google Chrome Dev","/Contents/MacOS/Google Chrome"],r=["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],n=await this.findLaunchRegisteredApps("google chrome[A-Za-z() ]*.app",r,e);return(0,MX.sort)(n,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"},{name:"Chrome Beta.app",weight:2,quality:"beta"},{name:"Chrome Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.CHROME_PATH}};gH.DarwinChromeBrowserFinder=EA});var JT=y(HH=>{"use strict";Object.defineProperty(HH,"__esModule",{value:!0});HH.DarwinEdgeBrowserFinder=void 0;var OX=Su(),FX=SA(),DA=class extends FX.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"],r=["/Applications/Microsoft Edge.app"],n=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",r,e);return(0,OX.sort)(n,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}};HH.DarwinEdgeBrowserFinder=DA});var xA=y(yH=>{"use strict";Object.defineProperty(yH,"__esModule",{value:!0});yH.LinuxChromeBrowserFinder=void 0;var BX=require("path"),sl=Su(),CA=require("child_process"),NX=require("os"),YT=/\r?\n/,PA=class{constructor(e,r){this.env=e,this.fs=r,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/google-chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=new Set,r=this.env[this.pathEnvironmentVar];r&&await(0,sl.canAccess)(this.fs,r)&&e.add(r),[BX.posix.join((0,NX.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin"].forEach(s=>{for(let a in this.findChromeExecutables(s))e.add(a)}),await Promise.all(this.executablesOnPath.map(async s=>{try{let a=(0,CA.execFileSync)("which",[s],{stdio:"pipe"}).toString().split(YT)[0];await(0,sl.canAccess)(this.fs,a)&&e.add(a)}catch{}}));let o=r?[{regex:new RegExp((0,sl.escapeRegexSpecialChars)(r)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,sl.sort)(e,o)}async findChromeExecutables(e){let r=/(^[^ ]+).*/,n=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,i=[];if(await(0,sl.canAccess)(this.fs,e)){let o;try{o=(0,CA.execSync)(`grep -ER "${n}" ${e} | awk -F '=' '{print $2}'`)}catch{o=(0,CA.execSync)(`grep -Er "${n}" ${e} | awk -F '=' '{print $2}'`)}let s=o.toString().split(YT).map(a=>a.replace(r,"$1"));await Promise.all(s.map(async a=>{await(0,sl.canAccess)(this.fs,a)&&i.push(a)}))}return i}};yH.LinuxChromeBrowserFinder=PA});var QT=y(bH=>{"use strict";Object.defineProperty(bH,"__esModule",{value:!0});bH.LinuxEdgeBrowserFinder=void 0;var UX=xA(),LA=class extends UX.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}};bH.LinuxEdgeBrowserFinder=LA});var e$=y(vH=>{"use strict";Object.defineProperty(vH,"__esModule",{value:!0});vH.WindowsChromeBrowserFinder=void 0;var jX=require("path"),ZT=Su(),TA=class{constructor(e,r){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=jX.win32.sep,r=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],n=await(0,ZT.findWindowsCandidates)(this.env,this.fs,r),i=await(0,ZT.preferredChromePath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};vH.WindowsChromeBrowserFinder=TA});var r$=y(wH=>{"use strict";Object.defineProperty(wH,"__esModule",{value:!0});wH.WindowsEdgeBrowserFinder=void 0;var xr=require("path"),t$=Su(),$A=class{constructor(e,r){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=[{name:`${xr.sep}Microsoft${xr.sep}Edge SxS${xr.sep}Application${xr.sep}msedge.exe`,type:"canary"},{name:`${xr.sep}Microsoft${xr.sep}Edge Dev${xr.sep}Application${xr.sep}msedge.exe`,type:"dev"},{name:`${xr.sep}Microsoft${xr.sep}Edge Beta${xr.sep}Application${xr.sep}msedge.exe`,type:"beta"},{name:`${xr.sep}Microsoft${xr.sep}Edge${xr.sep}Application${xr.sep}msedge.exe`,type:"stable"}],r=await(0,t$.findWindowsCandidates)(this.env,this.fs,e),n=await(0,t$.preferredEdgePath)(this.fs,this.env);return n&&r.unshift({path:n,quality:"custom"}),r}};wH.WindowsEdgeBrowserFinder=$A});var RA=y(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.EdgeBrowserFinder=yi.ChromeBrowserFinder=yi.isQuality=yi.allQualities=void 0;var qX=XT(),WX=JT(),VX=xA(),GX=QT(),KX=e$(),zX=r$(),XX={canary:null,stable:null,beta:null,dev:null,custom:null};yi.allQualities=new Set(Object.keys(XX));var JX=t=>yi.allQualities.has(t);yi.isQuality=JX;yi.ChromeBrowserFinder=process.platform==="win32"?KX.WindowsChromeBrowserFinder:process.platform==="darwin"?qX.DarwinChromeBrowserFinder:VX.LinuxChromeBrowserFinder;yi.EdgeBrowserFinder=process.platform==="win32"?zX.WindowsEdgeBrowserFinder:process.platform==="darwin"?WX.DarwinEdgeBrowserFinder:GX.LinuxEdgeBrowserFinder});var a$=y((y_e,s$)=>{s$.exports=o$;o$.sync=QX;var n$=require("fs");function YX(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}function i$(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:YX(e,r)}function o$(t,e,r){n$.stat(t,function(n,i){r(n,n?!1:i$(i,t,e))})}function QX(t,e){return i$(n$.statSync(t),t,e)}});var f$=y((b_e,p$)=>{p$.exports=c$;c$.sync=ZX;var u$=require("fs");function c$(t,e,r){u$.stat(t,function(n,i){r(n,n?!1:l$(i,e))})}function ZX(t,e){return l$(u$.statSync(t),e)}function l$(t,e){return t.isFile()&&e7(t,e)}function e7(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),l=a|u,p=r&c||r&u&&i===s||r&a&&n===o||r&l&&o===0;return p}});var kA=y((w_e,d$)=>{var v_e=require("fs"),_H;process.platform==="win32"||global.TESTING_WINDOWS?_H=a$():_H=f$();d$.exports=MA;MA.sync=t7;function MA(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){MA(t,e||{},function(o,s){o?i(o):n(s)})})}_H(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}function t7(t,e){try{return _H.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var v$=y((__e,b$)=>{var al=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",h$=require("path"),r7=al?";":":",m$=kA(),g$=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),H$=(t,e)=>{let r=e.colon||r7,n=t.match(/\//)||al&&t.match(/\\/)?[""]:[...al?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=al?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=al?i.split(r):[""];return al&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},y$=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=H$(t,e),s=[],a=c=>new Promise((l,p)=>{if(c===n.length)return e.all&&s.length?l(s):p(g$(t));let f=n[c],m=/^".*"$/.test(f)?f.slice(1,-1):f,h=h$.join(m,t),H=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;l(u(H,c,0))}),u=(c,l,p)=>new Promise((f,m)=>{if(p===i.length)return f(a(l+1));let h=i[p];m$(c+h,{pathExt:o},(H,b)=>{if(!H&&b)if(e.all)s.push(c+h);else return f(c+h);return f(u(c,l,p+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},n7=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=H$(t,e),o=[];for(let s=0;s<r.length;s++){let a=r[s],u=/^".*"$/.test(a)?a.slice(1,-1):a,c=h$.join(u,t),l=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let p=0;p<n.length;p++){let f=l+n[p];try{if(m$.sync(f,{pathExt:i}))if(e.all)o.push(f);else return f}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw g$(t)};b$.exports=y$;y$.sync=n7});var _$=y((A_e,OA)=>{"use strict";var w$=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};OA.exports=w$;OA.exports.default=w$});var E$=y((I_e,S$)=>{"use strict";var A$=require("path"),i7=v$(),o7=_$();function I$(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let s;try{s=i7.sync(t.command,{path:r[o7({env:r})],pathExt:e?A$.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=A$.resolve(i?t.options.cwd:"",s)),s}function s7(t){return I$(t)||I$(t,!0)}S$.exports=s7});var D$=y((S_e,BA)=>{"use strict";var FA=/([()\][%!^"`<>&|;, *?])/g;function a7(t){return t=t.replace(FA,"^$1"),t}function u7(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(FA,"^$1"),e&&(t=t.replace(FA,"^$1")),t}BA.exports.command=a7;BA.exports.argument=u7});var P$=y((E_e,C$)=>{"use strict";C$.exports=/^#!(.*)/});var L$=y((D_e,x$)=>{"use strict";var c7=P$();x$.exports=(t="")=>{let e=t.match(c7);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var $$=y((C_e,T$)=>{"use strict";var NA=require("fs"),l7=L$();function p7(t){let r=Buffer.alloc(150),n;try{n=NA.openSync(t,"r"),NA.readSync(n,r,0,150,0),NA.closeSync(n)}catch{}return l7(r.toString())}T$.exports=p7});var O$=y((P_e,k$)=>{"use strict";var f7=require("path"),R$=E$(),M$=D$(),d7=$$(),h7=process.platform==="win32",m7=/\.(?:com|exe)$/i,g7=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function H7(t){t.file=R$(t);let e=t.file&&d7(t.file);return e?(t.args.unshift(t.file),t.command=e,R$(t)):t.file}function y7(t){if(!h7)return t;let e=H7(t),r=!m7.test(e);if(t.options.forceShell||r){let n=g7.test(e);t.command=f7.normalize(t.command),t.command=M$.command(t.command),t.args=t.args.map(o=>M$.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function b7(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:y7(n)}k$.exports=b7});var N$=y((x_e,B$)=>{"use strict";var UA=process.platform==="win32";function jA(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function v7(t,e){if(!UA)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=F$(i,e,"spawn");if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}function F$(t,e){return UA&&t===1&&!e.file?jA(e.original,"spawn"):null}function w7(t,e){return UA&&t===1&&!e.file?jA(e.original,"spawnSync"):null}B$.exports={hookChildProcess:v7,verifyENOENT:F$,verifyENOENTSync:w7,notFoundError:jA}});var q$=y((L_e,ul)=>{"use strict";var U$=require("child_process"),qA=O$(),WA=N$();function j$(t,e,r){let n=qA(t,e,r),i=U$.spawn(n.command,n.args,n.options);return WA.hookChildProcess(i,n),i}function _7(t,e,r){let n=qA(t,e,r),i=U$.spawnSync(n.command,n.args,n.options);return i.error=i.error||WA.verifyENOENTSync(i.status,n),i}ul.exports=j$;ul.exports.spawn=j$;ul.exports.sync=_7;ul.exports._parse=qA;ul.exports._enoent=WA});var V$=y((T_e,W$)=>{"use strict";W$.exports=t=>{let e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var K$=y(($_e,VA)=>{"use strict";var G$=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};VA.exports=G$;VA.exports.default=G$});var J$=y((R_e,Kd)=>{"use strict";var Gd=require("path"),z$=K$(),X$=t=>{t={cwd:process.cwd(),path:process.env[z$()],execPath:process.execPath,...t};let e,r=Gd.resolve(t.cwd),n=[];for(;e!==r;)n.push(Gd.join(r,"node_modules/.bin")),e=r,r=Gd.resolve(r,"..");let i=Gd.resolve(t.cwd,t.execPath,"..");return n.push(i),n.concat(t.path).join(Gd.delimiter)};Kd.exports=X$;Kd.exports.default=X$;Kd.exports.env=t=>{t={env:process.env,...t};let e={...t.env},r=z$({env:e});return t.path=e[r],e[r]=Kd.exports(t),e}});var Q$=y((M_e,GA)=>{"use strict";var Y$=(t,e)=>{for(let r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};GA.exports=Y$;GA.exports.default=Y$});var eR=y((k_e,IH)=>{"use strict";var A7=Q$(),AH=new WeakMap,Z$=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,i=t.displayName||t.name||"<anonymous>",o=function(...s){if(AH.set(o,++n),n===1)r=t.apply(this,s),t=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return A7(o,t),AH.set(o,n),o};IH.exports=Z$;IH.exports.default=Z$;IH.exports.callCount=t=>{if(!AH.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return AH.get(t)}});var tR=y(SH=>{"use strict";Object.defineProperty(SH,"__esModule",{value:!0});SH.SIGNALS=void 0;var I7=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];SH.SIGNALS=I7});var KA=y(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.SIGRTMAX=cl.getRealtimeSignals=void 0;var S7=function(){let t=nR-rR+1;return Array.from({length:t},E7)};cl.getRealtimeSignals=S7;var E7=function(t,e){return{name:`SIGRT${e+1}`,number:rR+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},rR=34,nR=64;cl.SIGRTMAX=nR});var iR=y(EH=>{"use strict";Object.defineProperty(EH,"__esModule",{value:!0});EH.getSignals=void 0;var D7=require("os"),C7=tR(),P7=KA(),x7=function(){let t=(0,P7.getRealtimeSignals)();return[...C7.SIGNALS,...t].map(L7)};EH.getSignals=x7;var L7=function({name:t,number:e,description:r,action:n,forced:i=!1,standard:o}){let{signals:{[t]:s}}=D7.constants,a=s!==void 0;return{name:t,number:a?s:e,description:r,supported:a,action:n,forced:i,standard:o}}});var sR=y(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.signalsByNumber=ll.signalsByName=void 0;var T7=require("os"),oR=iR(),$7=KA(),R7=function(){return(0,oR.getSignals)().reduce(M7,{})},M7=function(t,{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}){return{...t,[e]:{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}}},k7=R7();ll.signalsByName=k7;var O7=function(){let t=(0,oR.getSignals)(),e=$7.SIGRTMAX+1,r=Array.from({length:e},(n,i)=>F7(i,t));return Object.assign({},...r)},F7=function(t,e){let r=B7(t,e);if(r===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:a,standard:u}=r;return{[t]:{name:n,number:t,description:i,supported:o,action:s,forced:a,standard:u}}},B7=function(t,e){let r=e.find(({name:n})=>T7.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},N7=O7();ll.signalsByNumber=N7});var uR=y((U_e,aR)=>{"use strict";var{signalsByName:U7}=sR(),j7=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>t?`timed out after ${e} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",q7=({stdout:t,stderr:e,all:r,error:n,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:u,isCanceled:c,killed:l,parsed:{options:{timeout:p}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let f=i===void 0?void 0:U7[i].description,m=n&&n.code,H=`Command ${j7({timedOut:u,timeout:p,errorCode:m,signal:i,signalDescription:f,exitCode:o,isCanceled:c})}: ${s}`,b=Object.prototype.toString.call(n)==="[object Error]",_=b?`${H}
${n.message}`:H,$=[_,e,t].filter(Boolean).join(`
`);return b?(n.originalMessage=n.message,n.message=$):n=new Error($),n.shortMessage=_,n.command=s,n.escapedCommand=a,n.exitCode=o,n.signal=i,n.signalDescription=f,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=Boolean(u),n.isCanceled=c,n.killed=l&&!u,n};aR.exports=q7});var lR=y((j_e,zA)=>{"use strict";var DH=["stdin","stdout","stderr"],W7=t=>DH.some(e=>t[e]!==void 0),cR=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return DH.map(n=>t[n]);if(W7(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${DH.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,DH.length);return Array.from({length:r},(n,i)=>e[i])};zA.exports=cR;zA.exports.node=t=>{let e=cR(t);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var pR=y((q_e,CH)=>{CH.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&CH.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&CH.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var hR=y((W_e,Jd)=>{var V7=require("assert"),zd=pR(),G7=/^win/i.test(process.platform),PH=require("events");typeof PH!="function"&&(PH=PH.EventEmitter);var mr;process.__signal_exit_emitter__?mr=process.__signal_exit_emitter__:(mr=process.__signal_exit_emitter__=new PH,mr.count=0,mr.emitted={});mr.infinite||(mr.setMaxListeners(1/0),mr.infinite=!0);Jd.exports=function(t,e){V7.equal(typeof t,"function","a callback must be provided for exit handler"),Xd===!1&&fR();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){mr.removeListener(r,t),mr.listeners("exit").length===0&&mr.listeners("afterexit").length===0&&JA()};return mr.on(r,t),n};Jd.exports.unload=JA;function JA(){Xd&&(Xd=!1,zd.forEach(function(t){try{process.removeListener(t,YA[t])}catch{}}),process.emit=XA,process.reallyExit=dR,mr.count-=1)}function pl(t,e,r){mr.emitted[t]||(mr.emitted[t]=!0,mr.emit(t,e,r))}var YA={};zd.forEach(function(t){YA[t]=function(){var r=process.listeners(t);r.length===mr.count&&(JA(),pl("exit",null,t),pl("afterexit",null,t),G7&&t==="SIGHUP"&&(t="SIGINT"),process.kill(process.pid,t))}});Jd.exports.signals=function(){return zd};Jd.exports.load=fR;var Xd=!1;function fR(){Xd||(Xd=!0,mr.count+=1,zd=zd.filter(function(t){try{return process.on(t,YA[t]),!0}catch{return!1}}),process.emit=z7,process.reallyExit=K7)}var dR=process.reallyExit;function K7(t){process.exitCode=t||0,pl("exit",process.exitCode,null),pl("afterexit",process.exitCode,null),dR.call(process,process.exitCode)}var XA=process.emit;function z7(t,e){if(t==="exit"){e!==void 0&&(process.exitCode=e);var r=XA.apply(this,arguments);return pl("exit",process.exitCode,null),pl("afterexit",process.exitCode,null),r}else return XA.apply(this,arguments)}});var gR=y((V_e,mR)=>{"use strict";var X7=require("os"),J7=hR(),Y7=1e3*5,Q7=(t,e="SIGTERM",r={})=>{let n=t(e);return Z7(t,e,r,n),n},Z7=(t,e,r,n)=>{if(!eJ(e,r,n))return;let i=rJ(r),o=setTimeout(()=>{t("SIGKILL")},i);o.unref&&o.unref()},eJ=(t,{forceKillAfterTimeout:e},r)=>tJ(t)&&e!==!1&&r,tJ=t=>t===X7.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",rJ=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return Y7;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},nJ=(t,e)=>{t.kill()&&(e.isCanceled=!0)},iJ=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},oJ=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let i,o=new Promise((a,u)=>{i=setTimeout(()=>{iJ(t,r,u)},e)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},sJ=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},aJ=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let i=J7(()=>{t.kill()});return n.finally(()=>{i()})};mR.exports={spawnedKill:Q7,spawnedCancel:nJ,setupTimeout:oJ,validateTimeout:sJ,setExitHandler:aJ}});var yR=y((G_e,HR)=>{"use strict";var Gi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Gi.writable=t=>Gi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Gi.readable=t=>Gi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Gi.duplex=t=>Gi.writable(t)&&Gi.readable(t);Gi.transform=t=>Gi.duplex(t)&&typeof t._transform=="function"&&typeof t._transformState=="object";HR.exports=Gi});var vR=y((K_e,bR)=>{"use strict";var{PassThrough:uJ}=require("stream");bR.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new uJ({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var wR=y((z_e,Yd)=>{"use strict";var{constants:cJ}=require("buffer"),lJ=require("stream"),{promisify:pJ}=require("util"),fJ=vR(),dJ=pJ(lJ.pipeline),xH=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function QA(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=fJ(e);return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=cJ.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};(async()=>{try{await dJ(t,n),i()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new xH)})}),n.getBufferedValue()}Yd.exports=QA;Yd.exports.buffer=(t,e)=>QA(t,{...e,encoding:"buffer"});Yd.exports.array=(t,e)=>QA(t,{...e,array:!0});Yd.exports.MaxBufferError=xH});var AR=y((X_e,_R)=>{"use strict";var{PassThrough:hJ}=require("stream");_R.exports=function(){var t=[],e=new hJ({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),e;function r(o){return Array.isArray(o)?(o.forEach(r),this):(t.push(o),o.once("end",i.bind(null,o)),o.once("error",e.emit.bind(e,"error")),o.pipe(e,{end:!1}),this)}function n(){return t.length==0}function i(o){t=t.filter(function(s){return s!==o}),!t.length&&e.readable&&e.end()}}});var DR=y((J_e,ER)=>{"use strict";var SR=yR(),IR=wR(),mJ=AR(),gJ=(t,e)=>{e===void 0||t.stdin===void 0||(SR(e)?e.pipe(t.stdin):t.stdin.end(e))},HJ=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=mJ();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},ZA=async(t,e)=>{if(t){t.destroy();try{return await e}catch(r){return r.bufferedData}}},eI=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?IR(t,{encoding:e,maxBuffer:n}):IR.buffer(t,{maxBuffer:n})},yJ=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:i,maxBuffer:o},s)=>{let a=eI(t,{encoding:n,buffer:i,maxBuffer:o}),u=eI(e,{encoding:n,buffer:i,maxBuffer:o}),c=eI(r,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,a,u,c])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},ZA(t,a),ZA(e,u),ZA(r,c)])}},bJ=({input:t})=>{if(SR(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};ER.exports={handleInput:gJ,makeAllStream:HJ,getSpawnedResult:yJ,validateInputSync:bJ}});var PR=y((Y_e,CR)=>{"use strict";var vJ=(async()=>{})().constructor.prototype,wJ=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(vJ,t)]),_J=(t,e)=>{for(let[r,n]of wJ){let i=typeof e=="function"?(...o)=>Reflect.apply(n.value,e(),o):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:i})}return t},AJ=t=>new Promise((e,r)=>{t.on("exit",(n,i)=>{e({exitCode:n,signal:i})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});CR.exports={mergePromise:_J,getSpawnedPromise:AJ}});var TR=y((Q_e,LR)=>{"use strict";var xR=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],IJ=/^[\w.-]+$/,SJ=/"/g,EJ=t=>typeof t!="string"||IJ.test(t)?t:`"${t.replace(SJ,'\\"')}"`,DJ=(t,e)=>xR(t,e).join(" "),CJ=(t,e)=>xR(t,e).map(r=>EJ(r)).join(" "),PJ=/ +/g,xJ=t=>{let e=[];for(let r of t.trim().split(PJ)){let n=e[e.length-1];n&&n.endsWith("\\")?e[e.length-1]=`${n.slice(0,-1)} ${r}`:e.push(r)}return e};LR.exports={joinCommand:DJ,getEscapedCommand:CJ,parseCommand:xJ}});var rI=y((Z_e,fl)=>{"use strict";var LJ=require("path"),tI=require("child_process"),TJ=q$(),$J=V$(),RJ=J$(),MJ=eR(),LH=uR(),RR=lR(),{spawnedKill:kJ,spawnedCancel:OJ,setupTimeout:FJ,validateTimeout:BJ,setExitHandler:NJ}=gR(),{handleInput:UJ,getSpawnedResult:jJ,makeAllStream:qJ,validateInputSync:WJ}=DR(),{mergePromise:$R,getSpawnedPromise:VJ}=PR(),{joinCommand:MR,parseCommand:kR,getEscapedCommand:OR}=TR(),GJ=1e3*1e3*100,KJ=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:i})=>{let o=e?{...process.env,...t}:t;return r?RJ.env({env:o,cwd:n,execPath:i}):o},FR=(t,e,r={})=>{let n=TJ._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:GJ,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=KJ(r),r.stdio=RR(r),process.platform==="win32"&&LJ.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},Qd=(t,e,r)=>typeof e!="string"&&!Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?$J(e):e,TH=(t,e,r)=>{let n=FR(t,e,r),i=MR(t,e),o=OR(t,e);BJ(n.options);let s;try{s=tI.spawn(n.file,n.args,n.options)}catch(m){let h=new tI.ChildProcess,H=Promise.reject(LH({error:m,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return $R(h,H)}let a=VJ(s),u=FJ(s,n.options,a),c=NJ(s,n.options,u),l={isCanceled:!1};s.kill=kJ.bind(null,s.kill.bind(s)),s.cancel=OJ.bind(null,s,l);let f=MJ(async()=>{let[{error:m,exitCode:h,signal:H,timedOut:b},_,$,U]=await jJ(s,n.options,c),D=Qd(n.options,_),P=Qd(n.options,$),j=Qd(n.options,U);if(m||h!==0||H!==null){let N=LH({error:m,exitCode:h,signal:H,stdout:D,stderr:P,all:j,command:i,escapedCommand:o,parsed:n,timedOut:b,isCanceled:l.isCanceled,killed:s.killed});if(!n.options.reject)return N;throw N}return{command:i,escapedCommand:o,exitCode:0,stdout:D,stderr:P,all:j,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return UJ(s,n.options.input),s.all=qJ(s,n.options),$R(s,f)};fl.exports=TH;fl.exports.sync=(t,e,r)=>{let n=FR(t,e,r),i=MR(t,e),o=OR(t,e);WJ(n.options);let s;try{s=tI.spawnSync(n.file,n.args,n.options)}catch(c){throw LH({error:c,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=Qd(n.options,s.stdout,s.error),u=Qd(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let c=LH({stdout:a,stderr:u,error:s.error,signal:s.signal,exitCode:s.status,command:i,escapedCommand:o,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return c;throw c}return{command:i,escapedCommand:o,exitCode:0,stdout:a,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};fl.exports.command=(t,e)=>{let[r,...n]=kR(t);return TH(r,n,e)};fl.exports.commandSync=(t,e)=>{let[r,...n]=kR(t);return TH.sync(r,n,e)};fl.exports.node=(t,e,r={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(r=e,e=[]);let n=RR.node(r),i=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:s=i}=r;return TH(o,[...s,t,...Array.isArray(e)?e:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var Ot=y(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.NON_CUSTOM_TAG_KEYS=Le.PRE_DESTROY=Le.POST_CONSTRUCT=Le.DESIGN_PARAM_TYPES=Le.PARAM_TYPES=Le.TAGGED_PROP=Le.TAGGED=Le.MULTI_INJECT_TAG=Le.INJECT_TAG=Le.OPTIONAL_TAG=Le.UNMANAGED_TAG=Le.NAME_TAG=Le.NAMED_TAG=void 0;Le.NAMED_TAG="named";Le.NAME_TAG="name";Le.UNMANAGED_TAG="unmanaged";Le.OPTIONAL_TAG="optional";Le.INJECT_TAG="inject";Le.MULTI_INJECT_TAG="multi_inject";Le.TAGGED="inversify:tagged";Le.TAGGED_PROP="inversify:tagged_props";Le.PARAM_TYPES="inversify:paramtypes";Le.DESIGN_PARAM_TYPES="design:paramtypes";Le.POST_CONSTRUCT="post_construct";Le.PRE_DESTROY="pre_destroy";function zJ(){return[Le.INJECT_TAG,Le.MULTI_INJECT_TAG,Le.NAME_TAG,Le.UNMANAGED_TAG,Le.NAMED_TAG,Le.OPTIONAL_TAG]}Le.NON_CUSTOM_TAG_KEYS=zJ()});var bi=y(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.TargetTypeEnum=zs.BindingTypeEnum=zs.BindingScopeEnum=void 0;var XJ={Request:"Request",Singleton:"Singleton",Transient:"Transient"};zs.BindingScopeEnum=XJ;var JJ={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};zs.BindingTypeEnum=JJ;var YJ={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};zs.TargetTypeEnum=YJ});var Xs=y($H=>{"use strict";Object.defineProperty($H,"__esModule",{value:!0});$H.id=void 0;var QJ=0;function ZJ(){return QJ++}$H.id=ZJ});var NR=y(RH=>{"use strict";Object.defineProperty(RH,"__esModule",{value:!0});RH.Binding=void 0;var BR=bi(),eY=Xs(),tY=function(){function t(e,r){this.id=(0,eY.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=r,this.type=BR.BindingTypeEnum.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===BR.BindingScopeEnum.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}();RH.Binding=tY});var Lr=y(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.STACK_OVERFLOW=le.CIRCULAR_DEPENDENCY_IN_FACTORY=le.ON_DEACTIVATION_ERROR=le.PRE_DESTROY_ERROR=le.POST_CONSTRUCT_ERROR=le.ASYNC_UNBIND_REQUIRED=le.MULTIPLE_POST_CONSTRUCT_METHODS=le.MULTIPLE_PRE_DESTROY_METHODS=le.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=le.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=le.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=le.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=le.ARGUMENTS_LENGTH_MISMATCH=le.INVALID_DECORATOR_OPERATION=le.INVALID_TO_SELF_VALUE=le.LAZY_IN_SYNC=le.INVALID_FUNCTION_BINDING=le.INVALID_MIDDLEWARE_RETURN=le.NO_MORE_SNAPSHOTS_AVAILABLE=le.INVALID_BINDING_TYPE=le.NOT_IMPLEMENTED=le.CIRCULAR_DEPENDENCY=le.UNDEFINED_INJECT_ANNOTATION=le.MISSING_INJECT_ANNOTATION=le.MISSING_INJECTABLE_ANNOTATION=le.NOT_REGISTERED=le.CANNOT_UNBIND=le.AMBIGUOUS_MATCH=le.KEY_NOT_FOUND=le.NULL_ARGUMENT=le.DUPLICATED_METADATA=le.DUPLICATED_INJECTABLE_DECORATOR=void 0;le.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";le.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";le.NULL_ARGUMENT="NULL argument";le.KEY_NOT_FOUND="Key Not Found";le.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";le.CANNOT_UNBIND="Could not unbind serviceIdentifier:";le.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";le.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";le.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var rY=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};le.UNDEFINED_INJECT_ANNOTATION=rY;le.CIRCULAR_DEPENDENCY="Circular dependency found:";le.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";le.INVALID_BINDING_TYPE="Invalid binding type:";le.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";le.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";le.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";var nY=function(t){return"You are attempting to construct '"+t+`' in a synchronous way
 but it has asynchronous dependencies.`};le.LAZY_IN_SYNC=nY;le.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";le.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var iY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+(t[0]+" must be >= than the number of constructor arguments of its base class.")};le.ARGUMENTS_LENGTH_MISMATCH=iY;le.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";le.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').";le.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";le.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";le.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class";le.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";le.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";var oY=function(t,e){return"@postConstruct error in class "+t+": "+e};le.POST_CONSTRUCT_ERROR=oY;var sY=function(t,e){return"@preDestroy error in class "+t+": "+e};le.PRE_DESTROY_ERROR=sY;var aY=function(t,e){return"onDeactivation() error in class "+t+": "+e};le.ON_DEACTIVATION_ERROR=aY;var uY=function(t,e){return"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with"+("service identifier '"+e+"'.")};le.CIRCULAR_DEPENDENCY_IN_FACTORY=uY;le.STACK_OVERFLOW="Maximum call stack size exceeded"});var iI=y(Ki=>{"use strict";var cY=Ki&&Ki.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lY=Ki&&Ki.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pY=Ki&&Ki.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cY(e,t,r);return lY(e,t),e};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.MetadataReader=void 0;var nI=pY(Ot()),fY=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var r=Reflect.getMetadata(nI.PARAM_TYPES,e),n=Reflect.getMetadata(nI.TAGGED,e);return{compilerGeneratedMetadata:r,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(e){var r=Reflect.getMetadata(nI.TAGGED_PROP,e)||[];return r},t}();Ki.MetadataReader=fY});var UR=y(MH=>{"use strict";Object.defineProperty(MH,"__esModule",{value:!0});MH.BindingCount=void 0;var dY={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};MH.BindingCount=dY});var oI=y(qn=>{"use strict";var hY=qn&&qn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mY=qn&&qn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gY=qn&&qn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hY(e,t,r);return mY(e,t),e};Object.defineProperty(qn,"__esModule",{value:!0});qn.tryAndThrowErrorIfStackOverflow=qn.isStackOverflowExeption=void 0;var HY=gY(Lr());function jR(t){return t instanceof RangeError||t.message===HY.STACK_OVERFLOW}qn.isStackOverflowExeption=jR;var yY=function(t,e){try{return t()}catch(r){throw jR(r)&&(r=e()),r}};qn.tryAndThrowErrorIfStackOverflow=yY});var dl=y(Ft=>{"use strict";var bY=Ft&&Ft.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vY=Ft&&Ft.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wY=Ft&&Ft.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bY(e,t,r);return vY(e,t),e};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.getSymbolDescription=Ft.circularDependencyToException=Ft.listMetadataForTarget=Ft.listRegisteredBindingsForServiceIdentifier=Ft.getServiceIdentifierAsString=Ft.getFunctionName=void 0;var _Y=wY(Lr());function qR(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}Ft.getServiceIdentifierAsString=qR;function AY(t,e,r){var n="",i=r(t,e);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(o){var s="Object";o.implementationType!==null&&(s=GR(o.implementationType)),n=n+`
 `+s,o.constraint.metaData&&(n=n+" - "+o.constraint.metaData)})),n}Ft.listRegisteredBindingsForServiceIdentifier=AY;function WR(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:WR(t.parentRequest,e)}function IY(t){function e(n,i){i===void 0&&(i=[]);var o=qR(n.serviceIdentifier);return i.push(o),n.parentRequest!==null?e(n.parentRequest,i):i}var r=e(t);return r.reverse().join(" --> ")}function VR(t){t.childRequests.forEach(function(e){if(WR(e,e.serviceIdentifier)){var r=IY(e);throw new Error(_Y.CIRCULAR_DEPENDENCY+" "+r)}else VR(e)})}Ft.circularDependencyToException=VR;function SY(t,e){if(e.isTagged()||e.isNamed()){var r="",n=e.getNamedTag(),i=e.getCustomTags();return n!==null&&(r+=n.toString()+`
`),i!==null&&i.forEach(function(o){r+=o.toString()+`
`})," "+t+`
 `+t+" - "+r}else return" "+t}Ft.listMetadataForTarget=SY;function GR(t){if(t.name)return t.name;var e=t.toString(),r=e.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+e}Ft.getFunctionName=GR;function EY(t){return t.toString().slice(7,-1)}Ft.getSymbolDescription=EY});var KR=y(kH=>{"use strict";Object.defineProperty(kH,"__esModule",{value:!0});kH.Context=void 0;var DY=Xs(),CY=function(){function t(e){this.id=(0,DY.id)(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}();kH.Context=CY});var vi=y(zi=>{"use strict";var PY=zi&&zi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xY=zi&&zi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),LY=zi&&zi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PY(e,t,r);return xY(e,t),e};Object.defineProperty(zi,"__esModule",{value:!0});zi.Metadata=void 0;var TY=LY(Ot()),$Y=function(){function t(e,r){this.key=e,this.value=r}return t.prototype.toString=function(){return this.key===TY.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}();zi.Metadata=$Y});var zR=y(OH=>{"use strict";Object.defineProperty(OH,"__esModule",{value:!0});OH.Plan=void 0;var RY=function(){function t(e,r){this.parentContext=e,this.rootRequest=r}return t}();OH.Plan=RY});var sI=y(FH=>{"use strict";Object.defineProperty(FH,"__esModule",{value:!0});FH.LazyServiceIdentifer=void 0;var MY=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}();FH.LazyServiceIdentifer=MY});var XR=y(BH=>{"use strict";Object.defineProperty(BH,"__esModule",{value:!0});BH.QueryableString=void 0;var kY=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var r="",n=e.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},n)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}();BH.QueryableString=kY});var aI=y(Xi=>{"use strict";var OY=Xi&&Xi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FY=Xi&&Xi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BY=Xi&&Xi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&OY(e,t,r);return FY(e,t),e};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.Target=void 0;var Qo=BY(Ot()),NY=Xs(),UY=dl(),JR=vi(),jY=XR(),qY=function(){function t(e,r,n,i){this.id=(0,NY.id)(),this.type=e,this.serviceIdentifier=n;var o=typeof r=="symbol"?(0,UY.getSymbolDescription)(r):r;this.name=new jY.QueryableString(o||""),this.identifier=r,this.metadata=new Array;var s=null;typeof i=="string"?s=new JR.Metadata(Qo.NAMED_TAG,i):i instanceof JR.Metadata&&(s=i),s!==null&&this.metadata.push(s)}return t.prototype.hasTag=function(e){for(var r=0,n=this.metadata;r<n.length;r++){var i=n[r];if(i.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(Qo.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(e){return this.matchesTag(Qo.MULTI_INJECT_TAG)(e)},t.prototype.isNamed=function(){return this.hasTag(Qo.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return Qo.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})})},t.prototype.isOptional=function(){return this.matchesTag(Qo.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===Qo.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return Qo.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(Qo.NAMED_TAG)(e)},t.prototype.matchesTag=function(e){var r=this;return function(n){for(var i=0,o=r.metadata;i<o.length;i++){var s=o[i];if(s.key===e&&s.value===n)return!0}return!1}},t}();Xi.Target=qY});var iM=y(Tr=>{"use strict";var WY=Tr&&Tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VY=Tr&&Tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),YR=Tr&&Tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WY(e,t,r);return VY(e,t),e},NH=Tr&&Tr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.getFunctionName=Tr.getBaseClassDependencyCount=Tr.getDependencies=void 0;var GY=sI(),uI=YR(Lr()),QR=bi(),Zd=YR(Ot()),cI=dl();Object.defineProperty(Tr,"getFunctionName",{enumerable:!0,get:function(){return cI.getFunctionName}});var ZR=aI();function KY(t,e){var r=(0,cI.getFunctionName)(e);return eM(t,r,e,!1)}Tr.getDependencies=KY;function eM(t,e,r,n){var i=t.getConstructorMetadata(r),o=i.compilerGeneratedMetadata;if(o===void 0){var s=uI.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var a=i.userGeneratedMetadata,u=Object.keys(a),c=r.length===0&&u.length>0,l=u.length>r.length,p=c||l?u.length:r.length,f=XY(n,e,o,a,p),m=tM(t,r,e),h=NH(NH([],f,!0),m,!0);return h}function zY(t,e,r,n,i){var o=i[t.toString()]||[],s=nM(o),a=s.unmanaged!==!0,u=n[t],c=s.inject||s.multiInject;if(u=c||u,u instanceof GY.LazyServiceIdentifer&&(u=u.unwrap()),a){var l=u===Object,p=u===Function,f=u===void 0,m=l||p||f;if(!e&&m){var h=uI.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+r+".";throw new Error(h)}var H=new ZR.Target(QR.TargetTypeEnum.ConstructorArgument,s.targetName,u);return H.metadata=o,H}return null}function XY(t,e,r,n,i){for(var o=[],s=0;s<i;s++){var a=s,u=zY(a,t,e,r,n);u!==null&&o.push(u)}return o}function JY(t,e,r,n){var i=t||e;if(i===void 0){var o=uI.MISSING_INJECTABLE_ANNOTATION+" for property "+String(r)+" in class "+n+".";throw new Error(o)}return i}function tM(t,e,r){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.getOwnPropertySymbols(n),s=Object.keys(n),a=s.concat(o),u=0,c=a;u<c.length;u++){var l=c[u],p=n[l],f=nM(p),m=f.targetName||l,h=JY(f.inject,f.multiInject,l,r),H=new ZR.Target(QR.TargetTypeEnum.ClassProperty,m,h);H.metadata=p,i.push(H)}var b=Object.getPrototypeOf(e.prototype).constructor;if(b!==Object){var _=tM(t,b,r);i=NH(NH([],i,!0),_,!0)}return i}function rM(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var n=(0,cI.getFunctionName)(r),i=eM(t,n,r,!0),o=i.map(function(u){return u.metadata.filter(function(c){return c.key===Zd.UNMANAGED_TAG})}),s=[].concat.apply([],o).length,a=i.length-s;return a>0?a:rM(t,r)}else return 0}Tr.getBaseClassDependencyCount=rM;function nM(t){var e={};return t.forEach(function(r){e[r.key.toString()]=r.value}),{inject:e[Zd.INJECT_TAG],multiInject:e[Zd.MULTI_INJECT_TAG],targetName:e[Zd.NAME_TAG],unmanaged:e[Zd.UNMANAGED_TAG]}}});var oM=y(UH=>{"use strict";Object.defineProperty(UH,"__esModule",{value:!0});UH.Request=void 0;var YY=Xs(),QY=function(){function t(e,r,n,i,o){this.id=(0,YY.id)(),this.serviceIdentifier=e,this.parentContext=r,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return t.prototype.addChildRequest=function(e,r,n){var i=new t(e,this.parentContext,this,r,n);return this.childRequests.push(i),i},t}();UH.Request=QY});var hI=y(tn=>{"use strict";var ZY=tn&&tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eQ=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uM=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZY(e,t,r);return eQ(e,t),e};Object.defineProperty(tn,"__esModule",{value:!0});tn.getBindingDictionary=tn.createMockRequest=tn.plan=void 0;var jH=UR(),pI=uM(Lr()),cM=bi(),sM=uM(Ot()),tQ=oI(),hl=dl(),lM=KR(),fI=vi(),rQ=zR(),lI=iM(),dI=oM(),pM=aI();function fM(t){return t._bindingDictionary}tn.getBindingDictionary=fM;function nQ(t,e,r,n,i,o){var s=t?sM.MULTI_INJECT_TAG:sM.INJECT_TAG,a=new fI.Metadata(s,r),u=new pM.Target(e,n,r,a);if(i!==void 0){var c=new fI.Metadata(i,o);u.metadata.push(c)}return u}function aM(t,e,r,n,i){var o=eh(r.container,i.serviceIdentifier),s=[];return o.length===jH.BindingCount.NoBindingsAvailable&&r.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),o=eh(r.container,i.serviceIdentifier)),e?s=o:s=o.filter(function(a){var u=new dI.Request(a.serviceIdentifier,r,n,a,i);return a.constraint(u)}),iQ(i.serviceIdentifier,s,i,r.container),s}function iQ(t,e,r,n){switch(e.length){case jH.BindingCount.NoBindingsAvailable:if(r.isOptional())return e;var i=(0,hl.getServiceIdentifierAsString)(t),o=pI.NOT_REGISTERED;throw o+=(0,hl.listMetadataForTarget)(i,r),o+=(0,hl.listRegisteredBindingsForServiceIdentifier)(n,i,eh),new Error(o);case jH.BindingCount.OnlyOneBindingAvailable:return e;case jH.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return e;var i=(0,hl.getServiceIdentifierAsString)(t),o=pI.AMBIGUOUS_MATCH+" "+i;throw o+=(0,hl.listRegisteredBindingsForServiceIdentifier)(n,i,eh),new Error(o)}}function dM(t,e,r,n,i,o){var s,a;if(i===null){s=aM(t,e,n,null,o),a=new dI.Request(r,n,null,s,o);var u=new rQ.Plan(n,a);n.addPlan(u)}else s=aM(t,e,n,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach(function(c){var l=null;if(o.isArray())l=a.addChildRequest(c.serviceIdentifier,c,o);else{if(c.cache)return;l=a}if(c.type===cM.BindingTypeEnum.Instance&&c.implementationType!==null){var p=(0,lI.getDependencies)(t,c.implementationType);if(!n.container.options.skipBaseClassChecks){var f=(0,lI.getBaseClassDependencyCount)(t,c.implementationType);if(p.length<f){var m=pI.ARGUMENTS_LENGTH_MISMATCH((0,lI.getFunctionName)(c.implementationType));throw new Error(m)}}p.forEach(function(h){dM(t,!1,h.serviceIdentifier,n,l,h)})}})}function eh(t,e){var r=[],n=fM(t);return n.hasKey(e)?r=n.get(e):t.parent!==null&&(r=eh(t.parent,e)),r}function oQ(t,e,r,n,i,o,s,a){a===void 0&&(a=!1);var u=new lM.Context(e),c=nQ(r,n,i,"",o,s);try{return dM(t,a,i,u,null,c),u}catch(l){throw(0,tQ.isStackOverflowExeption)(l)&&(0,hl.circularDependencyToException)(u.plan.rootRequest),l}}tn.plan=oQ;function sQ(t,e,r,n){var i=new pM.Target(cM.TargetTypeEnum.Variable,"",e,new fI.Metadata(r,n)),o=new lM.Context(t),s=new dI.Request(e,o,null,[],i);return s}tn.createMockRequest=sQ});var th=y(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.isPromiseOrContainsPromise=ml.isPromise=void 0;function mI(t){var e=typeof t=="object"&&t!==null||typeof t=="function";return e&&typeof t.then=="function"}ml.isPromise=mI;function aQ(t){return mI(t)?!0:Array.isArray(t)&&t.some(mI)}ml.isPromiseOrContainsPromise=aQ});var hM=y(Ji=>{"use strict";var uQ=Ji&&Ji.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},cQ=Ji&&Ji.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.saveToScope=Ji.tryGetFromScope=void 0;var qH=J(),lQ=th(),pQ=function(t,e){return e.scope===qH.BindingScopeEnum.Singleton&&e.activated?e.cache:e.scope===qH.BindingScopeEnum.Request&&t.has(e.id)?t.get(e.id):null};Ji.tryGetFromScope=pQ;var fQ=function(t,e,r){e.scope===qH.BindingScopeEnum.Singleton&&hQ(e,r),e.scope===qH.BindingScopeEnum.Request&&dQ(t,e,r)};Ji.saveToScope=fQ;var dQ=function(t,e,r){t.has(e.id)||t.set(e.id,r)},hQ=function(t,e){t.cache=e,t.activated=!0,(0,lQ.isPromise)(e)&&mQ(t,e)},mQ=function(t,e){return uQ(void 0,void 0,void 0,function(){var r,n;return cQ(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return r=i.sent(),t.cache=r,[3,3];case 2:throw n=i.sent(),t.cache=null,t.activated=!1,n;case 3:return[2]}})})}});var mM=y(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.FactoryType=void 0;var gQ;(function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"})(gQ=rh.FactoryType||(rh.FactoryType={}))});var HI=y(rn=>{"use strict";var HQ=rn&&rn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yQ=rn&&rn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bQ=rn&&rn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HQ(e,t,r);return yQ(e,t),e};Object.defineProperty(rn,"__esModule",{value:!0});rn.getFactoryDetails=rn.ensureFullyBound=rn.multiBindToService=void 0;var vQ=J(),wQ=bQ(Lr()),Yi=bi(),gI=mM(),_Q=function(t){return function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach(function(i){return t.bind(i).toService(e)})}}};rn.multiBindToService=_Q;var AQ=function(t){var e=null;switch(t.type){case Yi.BindingTypeEnum.ConstantValue:case Yi.BindingTypeEnum.Function:e=t.cache;break;case Yi.BindingTypeEnum.Constructor:case Yi.BindingTypeEnum.Instance:e=t.implementationType;break;case Yi.BindingTypeEnum.DynamicValue:e=t.dynamicValue;break;case Yi.BindingTypeEnum.Provider:e=t.provider;break;case Yi.BindingTypeEnum.Factory:e=t.factory;break}if(e===null){var r=(0,vQ.getServiceIdentifierAsString)(t.serviceIdentifier);throw new Error(wQ.INVALID_BINDING_TYPE+" "+r)}};rn.ensureFullyBound=AQ;var IQ=function(t){switch(t.type){case Yi.BindingTypeEnum.Factory:return{factory:t.factory,factoryType:gI.FactoryType.Factory};case Yi.BindingTypeEnum.Provider:return{factory:t.provider,factoryType:gI.FactoryType.Provider};case Yi.BindingTypeEnum.DynamicValue:return{factory:t.dynamicValue,factoryType:gI.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}};rn.getFactoryDetails=IQ});var wM=y(tr=>{"use strict";var gl=tr&&tr.__assign||function(){return gl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gl.apply(this,arguments)},SQ=tr&&tr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),EQ=tr&&tr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DQ=tr&&tr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SQ(e,t,r);return EQ(e,t),e},yM=tr&&tr.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},bM=tr&&tr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},CQ=tr&&tr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(tr,"__esModule",{value:!0});tr.resolveInstance=void 0;var yI=Lr(),vI=bi(),bI=DQ(Ot()),wI=th();function PQ(t,e){return t.reduce(function(r,n){var i=e(n),o=n.target.type;return o===vI.TargetTypeEnum.ConstructorArgument?r.constructorInjections.push(i):(r.propertyRequests.push(n),r.propertyInjections.push(i)),r.isAsync||(r.isAsync=(0,wI.isPromiseOrContainsPromise)(i)),r},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function xQ(t,e,r){var n;if(e.length>0){var i=PQ(e,r),o=gl(gl({},i),{constr:t});i.isAsync?n=LQ(o):n=vM(o)}else n=new t;return n}function vM(t){var e,r=new((e=t.constr).bind.apply(e,CQ([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach(function(n,i){var o=n.target.identifier,s=t.propertyInjections[i];r[o]=s}),r}function LQ(t){return yM(this,void 0,void 0,function(){var e,r;return bM(this,function(n){switch(n.label){case 0:return[4,gM(t.constructorInjections)];case 1:return e=n.sent(),[4,gM(t.propertyInjections)];case 2:return r=n.sent(),[2,vM(gl(gl({},t),{constructorInjections:e,propertyInjections:r}))]}})})}function gM(t){return yM(this,void 0,void 0,function(){var e,r,n,i;return bM(this,function(o){for(e=[],r=0,n=t;r<n.length;r++)i=n[r],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]})})}function HM(t,e){var r=TQ(t,e);return(0,wI.isPromise)(r)?r.then(function(){return e}):e}function TQ(t,e){var r,n;if(Reflect.hasMetadata(bI.POST_CONSTRUCT,t)){var i=Reflect.getMetadata(bI.POST_CONSTRUCT,t);try{return(n=(r=e)[i.value])===null||n===void 0?void 0:n.call(r)}catch(o){throw new Error((0,yI.POST_CONSTRUCT_ERROR)(t.name,o.message))}}}function $Q(t,e){t.scope!==vI.BindingScopeEnum.Singleton&&RQ(t,e)}function RQ(t,e){var r="Class cannot be instantiated in "+(t.scope===vI.BindingScopeEnum.Request?"request":"transient")+" scope.";if(typeof t.onDeactivation=="function")throw new Error((0,yI.ON_DEACTIVATION_ERROR)(e.name,r));if(Reflect.hasMetadata(bI.PRE_DESTROY,e))throw new Error((0,yI.PRE_DESTROY_ERROR)(e.name,r))}function MQ(t,e,r,n){$Q(t,e);var i=xQ(e,r,n);return(0,wI.isPromise)(i)?i.then(function(o){return HM(e,o)}):HM(e,i)}tr.resolveInstance=MQ});var EM=y(nn=>{"use strict";var kQ=nn&&nn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OQ=nn&&nn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FQ=nn&&nn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kQ(e,t,r);return OQ(e,t),e},BQ=nn&&nn.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},NQ=nn&&nn.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(nn,"__esModule",{value:!0});nn.resolve=void 0;var UQ=FQ(Lr()),WH=bi(),jQ=hI(),_M=hM(),_I=th(),IM=HI(),qQ=oI(),WQ=wM(),AI=function(t){return function(e){e.parentContext.setCurrentRequest(e);var r=e.bindings,n=e.childRequests,i=e.target&&e.target.isArray(),o=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(i&&o)return n.map(function(a){var u=AI(t);return u(a)});if(e.target.isOptional()&&r.length===0)return;var s=r[0];return zQ(t,e,s)}},VQ=function(t,e){var r=(0,IM.getFactoryDetails)(t);return(0,qQ.tryAndThrowErrorIfStackOverflow)(function(){return r.factory.bind(t)(e)},function(){return new Error(UQ.CIRCULAR_DEPENDENCY_IN_FACTORY(r.factoryType,e.currentRequest.serviceIdentifier.toString()))})},GQ=function(t,e,r){var n,i=e.childRequests;switch((0,IM.ensureFullyBound)(r),r.type){case WH.BindingTypeEnum.ConstantValue:case WH.BindingTypeEnum.Function:n=r.cache;break;case WH.BindingTypeEnum.Constructor:n=r.implementationType;break;case WH.BindingTypeEnum.Instance:n=(0,WQ.resolveInstance)(r,r.implementationType,i,AI(t));break;default:n=VQ(r,e.parentContext)}return n},KQ=function(t,e,r){var n=(0,_M.tryGetFromScope)(t,e);return n!==null||(n=r(),(0,_M.saveToScope)(t,e,n)),n},zQ=function(t,e,r){return KQ(t,r,function(){var n=GQ(t,e,r);return(0,_I.isPromise)(n)?n=n.then(function(i){return AM(e,r,i)}):n=AM(e,r,n),n})};function AM(t,e,r){var n=XQ(t.parentContext,e,r),i=QQ(t.parentContext.container),o,s=i.next();do{o=s.value;var a=t.parentContext,u=t.serviceIdentifier,c=YQ(o,u);(0,_I.isPromise)(n)?n=SM(c,a,n):n=JQ(c,a,n),s=i.next()}while(s.done!==!0&&!(0,jQ.getBindingDictionary)(o).hasKey(t.serviceIdentifier));return n}var XQ=function(t,e,r){var n;return typeof e.onActivation=="function"?n=e.onActivation(t,r):n=r,n},JQ=function(t,e,r){for(var n=t.next();!n.done;){if(r=n.value(e,r),(0,_I.isPromise)(r))return SM(t,e,r);n=t.next()}return r},SM=function(t,e,r){return BQ(void 0,void 0,void 0,function(){var n,i;return NQ(this,function(o){switch(o.label){case 0:return[4,r];case 1:n=o.sent(),i=t.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(e,n)];case 3:return n=o.sent(),i=t.next(),[3,2];case 4:return[2,n]}})})},YQ=function(t,e){var r=t._activations;return r.hasKey(e)?r.get(e).values():[].values()},QQ=function(t){for(var e=[t],r=t.parent;r!==null;)e.push(r),r=r.parent;var n=function(){var o=e.pop();return o!==void 0?{done:!1,value:o}:{done:!0,value:void 0}},i={next:n};return i};function ZQ(t){var e=AI(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}nn.resolve=ZQ});var II=y($r=>{"use strict";var eZ=$r&&$r.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tZ=$r&&$r.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rZ=$r&&$r.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eZ(e,t,r);return tZ(e,t),e};Object.defineProperty($r,"__esModule",{value:!0});$r.typeConstraint=$r.namedConstraint=$r.taggedConstraint=$r.traverseAncerstors=void 0;var nZ=rZ(Ot()),iZ=vi(),DM=function(t,e){var r=t.parentRequest;return r!==null?e(r)?!0:DM(r,e):!1};$r.traverseAncerstors=DM;var CM=function(t){return function(e){var r=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(t)(e)};return r.metaData=new iZ.Metadata(t,e),r}};$r.taggedConstraint=CM;var oZ=CM(nZ.NAMED_TAG);$r.namedConstraint=oZ;var sZ=function(t){return function(e){var r=null;if(e!==null)if(r=e.bindings[0],typeof t=="string"){var n=r.serviceIdentifier;return n===t}else{var i=e.bindings[0].implementationType;return t===i}return!1}};$r.typeConstraint=sZ});var GH=y(VH=>{"use strict";Object.defineProperty(VH,"__esModule",{value:!0});VH.BindingWhenSyntax=void 0;var qr=KH(),Kt=II(),aZ=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new qr.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,Kt.namedConstraint)(e),new qr.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var r=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return r},new qr.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(e,r){return this._binding.constraint=(0,Kt.taggedConstraint)(e)(r),new qr.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Kt.typeConstraint)(e)(r.parentRequest)},new qr.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Kt.namedConstraint)(e)(r.parentRequest)},new qr.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Kt.taggedConstraint)(e)(r)(n.parentRequest)},new qr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Kt.traverseAncerstors)(r,(0,Kt.typeConstraint)(e))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Kt.traverseAncerstors)(r,(0,Kt.typeConstraint)(e))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Kt.traverseAncerstors)(r,(0,Kt.namedConstraint)(e))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Kt.traverseAncerstors)(r,(0,Kt.namedConstraint)(e))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Kt.traverseAncerstors)(n,(0,Kt.taggedConstraint)(e)(r))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&!(0,Kt.traverseAncerstors)(n,(0,Kt.taggedConstraint)(e)(r))},new qr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Kt.traverseAncerstors)(r,e)},new qr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Kt.traverseAncerstors)(r,e)},new qr.BindingOnSyntax(this._binding)},t}();VH.BindingWhenSyntax=aZ});var KH=y(zH=>{"use strict";Object.defineProperty(zH,"__esModule",{value:!0});zH.BindingOnSyntax=void 0;var PM=GH(),uZ=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new PM.BindingWhenSyntax(this._binding)},t.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new PM.BindingWhenSyntax(this._binding)},t}();zH.BindingOnSyntax=uZ});var SI=y(XH=>{"use strict";Object.defineProperty(XH,"__esModule",{value:!0});XH.BindingWhenOnSyntax=void 0;var cZ=KH(),lZ=GH(),pZ=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new lZ.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new cZ.BindingOnSyntax(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();XH.BindingWhenOnSyntax=pZ});var xM=y(JH=>{"use strict";Object.defineProperty(JH,"__esModule",{value:!0});JH.BindingInSyntax=void 0;var EI=bi(),DI=SI(),fZ=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=EI.BindingScopeEnum.Request,new DI.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=EI.BindingScopeEnum.Singleton,new DI.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=EI.BindingScopeEnum.Transient,new DI.BindingWhenOnSyntax(this._binding)},t}();JH.BindingInSyntax=fZ});var LM=y(YH=>{"use strict";Object.defineProperty(YH,"__esModule",{value:!0});YH.BindingInWhenOnSyntax=void 0;var dZ=xM(),hZ=KH(),mZ=GH(),gZ=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new mZ.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new hZ.BindingOnSyntax(this._binding),this._bindingInSyntax=new dZ.BindingInSyntax(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();YH.BindingInWhenOnSyntax=gZ});var RM=y(Qi=>{"use strict";var HZ=Qi&&Qi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yZ=Qi&&Qi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bZ=Qi&&Qi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&HZ(e,t,r);return yZ(e,t),e};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.BindingToSyntax=void 0;var TM=bZ(Lr()),Wr=bi(),$M=LM(),Hl=SI(),vZ=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=Wr.BindingTypeEnum.Instance,this._binding.implementationType=e,new $M.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+TM.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=Wr.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Wr.BindingScopeEnum.Singleton,new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=Wr.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new $M.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=Wr.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=Wr.BindingScopeEnum.Singleton,new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=Wr.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=Wr.BindingScopeEnum.Singleton,new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(TM.INVALID_FUNCTION_BINDING);var r=this.toConstantValue(e);return this._binding.type=Wr.BindingTypeEnum.Function,this._binding.scope=Wr.BindingScopeEnum.Singleton,r},t.prototype.toAutoFactory=function(e){return this._binding.type=Wr.BindingTypeEnum.Factory,this._binding.factory=function(r){var n=function(){return r.container.get(e)};return n},this._binding.scope=Wr.BindingScopeEnum.Singleton,new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toAutoNamedFactory=function(e){return this._binding.type=Wr.BindingTypeEnum.Factory,this._binding.factory=function(r){return function(n){return r.container.getNamed(e,n)}},new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=Wr.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=Wr.BindingScopeEnum.Singleton,new Hl.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(r){return r.container.get(e)})},t}();Qi.BindingToSyntax=vZ});var MM=y(QH=>{"use strict";Object.defineProperty(QH,"__esModule",{value:!0});QH.ContainerSnapshot=void 0;var wZ=function(){function t(){}return t.of=function(e,r,n,i,o){var s=new t;return s.bindings=e,s.middleware=r,s.deactivations=i,s.activations=n,s.moduleActivationStore=o,s},t}();QH.ContainerSnapshot=wZ});var kM=y(ZH=>{"use strict";Object.defineProperty(ZH,"__esModule",{value:!0});ZH.isClonable=void 0;function _Z(t){return typeof t=="object"&&t!==null&&"clone"in t&&typeof t.clone=="function"}ZH.isClonable=_Z});var CI=y(Zi=>{"use strict";var AZ=Zi&&Zi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IZ=Zi&&Zi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SZ=Zi&&Zi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AZ(e,t,r);return IZ(e,t),e};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.Lookup=void 0;var Eu=SZ(Lr()),EZ=kM(),DZ=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,r){if(e==null)throw new Error(Eu.NULL_ARGUMENT);if(r==null)throw new Error(Eu.NULL_ARGUMENT);var n=this._map.get(e);n!==void 0?n.push(r):this._map.set(e,[r])},t.prototype.get=function(e){if(e==null)throw new Error(Eu.NULL_ARGUMENT);var r=this._map.get(e);if(r!==void 0)return r;throw new Error(Eu.KEY_NOT_FOUND)},t.prototype.remove=function(e){if(e==null)throw new Error(Eu.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(Eu.KEY_NOT_FOUND)},t.prototype.removeIntersection=function(e){var r=this;this.traverse(function(n,i){var o=e.hasKey(n)?e.get(n):void 0;if(o!==void 0){var s=i.filter(function(a){return!o.some(function(u){return a===u})});r._setValue(n,s)}})},t.prototype.removeByCondition=function(e){var r=this,n=[];return this._map.forEach(function(i,o){for(var s=[],a=0,u=i;a<u.length;a++){var c=u[a],l=e(c);l?n.push(c):s.push(c)}r._setValue(o,s)}),n},t.prototype.hasKey=function(e){if(e==null)throw new Error(Eu.NULL_ARGUMENT);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){r.forEach(function(i){return e.add(n,(0,EZ.isClonable)(i)?i.clone():i)})}),e},t.prototype.traverse=function(e){this._map.forEach(function(r,n){e(n,r)})},t.prototype._setValue=function(e,r){r.length>0?this._map.set(e,r):this._map.delete(e)},t}();Zi.Lookup=DZ});var FM=y(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.ModuleActivationStore=void 0;var OM=CI(),CZ=function(){function t(){this._map=new Map}return t.prototype.remove=function(e){if(this._map.has(e)){var r=this._map.get(e);return this._map.delete(e),r}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(e,r,n){this._getModuleActivationHandlers(e).onDeactivations.add(r,n)},t.prototype.addActivation=function(e,r,n){this._getModuleActivationHandlers(e).onActivations.add(r,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){e._map.set(n,{onActivations:r.onActivations.clone(),onDeactivations:r.onDeactivations.clone()})}),e},t.prototype._getModuleActivationHandlers=function(e){var r=this._map.get(e);return r===void 0&&(r=this._getEmptyHandlersStore(),this._map.set(e,r)),r},t.prototype._getEmptyHandlersStore=function(){var e={onActivations:new OM.Lookup,onDeactivations:new OM.Lookup};return e},t}();ey.ModuleActivationStore=CZ});var NM=y(rr=>{"use strict";var ry=rr&&rr.__assign||function(){return ry=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ry.apply(this,arguments)},PZ=rr&&rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xZ=rr&&rr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BM=rr&&rr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PZ(e,t,r);return xZ(e,t),e},Wn=rr&&rr.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(p){s(p)}}function u(l){try{c(n.throw(l))}catch(p){s(p)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Vn=rr&&rr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},LZ=rr&&rr.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(rr,"__esModule",{value:!0});rr.Container=void 0;var TZ=NR(),wi=BM(Lr()),yl=bi(),Du=BM(Ot()),$Z=iI(),ty=hI(),RZ=EM(),MZ=RM(),Cu=th(),kZ=Xs(),OZ=dl(),FZ=MM(),nh=CI(),BZ=FM(),NZ=function(){function t(e){var r=e||{};if(typeof r!="object")throw new Error(""+wi.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(r.defaultScope===void 0)r.defaultScope=yl.BindingScopeEnum.Transient;else if(r.defaultScope!==yl.BindingScopeEnum.Singleton&&r.defaultScope!==yl.BindingScopeEnum.Transient&&r.defaultScope!==yl.BindingScopeEnum.Request)throw new Error(""+wi.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(r.autoBindInjectable===void 0)r.autoBindInjectable=!1;else if(typeof r.autoBindInjectable!="boolean")throw new Error(""+wi.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(r.skipBaseClassChecks===void 0)r.skipBaseClassChecks=!1;else if(typeof r.skipBaseClassChecks!="boolean")throw new Error(""+wi.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=(0,kZ.id)(),this._bindingDictionary=new nh.Lookup,this._snapshots=[],this._middleware=null,this._activations=new nh.Lookup,this._deactivations=new nh.Lookup,this.parent=null,this._metadataReader=new $Z.MetadataReader,this._moduleActivationStore=new BZ.ModuleActivationStore}return t.merge=function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=new t,s=LZ([e,r],n,!0).map(function(c){return(0,ty.getBindingDictionary)(c)}),a=(0,ty.getBindingDictionary)(o);function u(c,l){c.traverse(function(p,f){f.forEach(function(m){l.add(m.serviceIdentifier,m.clone())})})}return s.forEach(function(c){u(c,a)}),o},t.prototype.load=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=this._getContainerModuleHelpersFactory(),i=0,o=e;i<o.length;i++){var s=o[i],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Wn(this,void 0,void 0,function(){var n,i,o,s,a;return Vn(this,function(u){switch(u.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,o=e,u.label=1;case 1:return i<o.length?(s=o[i],a=n(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.forEach(function(i){var o=e._removeModuleBindings(i.id);e._deactivateSingletons(o),e._removeModuleHandlers(i.id)})},t.prototype.unloadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Wn(this,void 0,void 0,function(){var n,i,o,s;return Vn(this,function(a){switch(a.label){case 0:n=0,i=e,a.label=1;case 1:return n<i.length?(o=i[n],s=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(s)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(o.id),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.bind=function(e){var r=this.options.defaultScope||yl.BindingScopeEnum.Transient,n=new TZ.Binding(e,r);return this._bindingDictionary.add(e,n),new MZ.BindingToSyntax(n)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.rebindAsync=function(e){return Wn(this,void 0,void 0,function(){return Vn(this,function(r){switch(r.label){case 0:return[4,this.unbindAsync(e)];case 1:return r.sent(),[2,this.bind(e)]}})})},t.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e);this._deactivateSingletons(r)}this._removeServiceFromDictionary(e)},t.prototype.unbindAsync=function(e){return Wn(this,void 0,void 0,function(){var r;return Vn(this,function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(r=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(r)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},t.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(r,n){e._deactivateSingletons(n)}),this._bindingDictionary=new nh.Lookup},t.prototype.unbindAllAsync=function(){return Wn(this,void 0,void 0,function(){var e,r=this;return Vn(this,function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse(function(i,o){e.push(r._deactivateSingletonsAsync(o))}),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new nh.Lookup,[2]}})})},t.prototype.onActivation=function(e,r){this._activations.add(e,r)},t.prototype.onDeactivation=function(e,r){this._deactivations.add(e,r)},t.prototype.isBound=function(e){var r=this._bindingDictionary.hasKey(e);return!r&&this.parent&&(r=this.parent.isBound(e)),r},t.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},t.prototype.isBoundNamed=function(e,r){return this.isBoundTagged(e,Du.NAMED_TAG,r)},t.prototype.isBoundTagged=function(e,r,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),s=(0,ty.createMockRequest)(this,e,r,n);i=o.some(function(a){return a.constraint(s)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,r,n)),i},t.prototype.snapshot=function(){this._snapshots.push(FZ.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(wi.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},t.prototype.createChild=function(e){var r=new t(e||this.options);return r.parent=this,r},t.prototype.applyMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(i,o){return o(i)},n)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){var r=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(r)},t.prototype.getAsync=function(e){return Wn(this,void 0,void 0,function(){var r;return Vn(this,function(n){return r=this._getNotAllArgs(e,!1),[2,this._get(r)]})})},t.prototype.getTagged=function(e,r,n){var i=this._getNotAllArgs(e,!1,r,n);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(e,r,n){return Wn(this,void 0,void 0,function(){var i;return Vn(this,function(o){return i=this._getNotAllArgs(e,!1,r,n),[2,this._get(i)]})})},t.prototype.getNamed=function(e,r){return this.getTagged(e,Du.NAMED_TAG,r)},t.prototype.getNamedAsync=function(e,r){return this.getTaggedAsync(e,Du.NAMED_TAG,r)},t.prototype.getAll=function(e){var r=this._getAllArgs(e);return this._getButThrowIfAsync(r)},t.prototype.getAllAsync=function(e){var r=this._getAllArgs(e);return this._getAll(r)},t.prototype.getAllTagged=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getAll(i)},t.prototype.getAllNamed=function(e,r){return this.getAllTagged(e,Du.NAMED_TAG,r)},t.prototype.getAllNamedAsync=function(e,r){return this.getAllTaggedAsync(e,Du.NAMED_TAG,r)},t.prototype.resolve=function(e){var r=this.isBound(e);r||this.bind(e).toSelf();var n=this.get(e);return r||this.unbind(e),n},t.prototype._preDestroy=function(e,r){if(Reflect.hasMetadata(Du.PRE_DESTROY,e)){var n=Reflect.getMetadata(Du.PRE_DESTROY,e);return r[n.value]()}},t.prototype._removeModuleHandlers=function(e){var r=this._moduleActivationStore.remove(e);this._activations.removeIntersection(r.onActivations),this._deactivations.removeIntersection(r.onDeactivations)},t.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(r){return r.moduleId===e})},t.prototype._deactivate=function(e,r){var n=this,i=Object.getPrototypeOf(r).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(r,this._deactivations.get(e.serviceIdentifier).values());if((0,Cu.isPromise)(o))return this._handleDeactivationError(o.then(function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,r,i)}),i)}var s=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,r,i);if((0,Cu.isPromise)(s))return this._handleDeactivationError(s,i)}catch(a){throw new Error(wi.ON_DEACTIVATION_ERROR(i.name,a.message))}},t.prototype._handleDeactivationError=function(e,r){return Wn(this,void 0,void 0,function(){var n;return Vn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(wi.ON_DEACTIVATION_ERROR(r.name,n.message));case 3:return[2]}})})},t.prototype._deactivateContainer=function(e,r){for(var n=this,i=r.next();i.value;){var o=i.value(e);if((0,Cu.isPromise)(o))return o.then(function(){return n._deactivateContainerAsync(e,r)});i=r.next()}},t.prototype._deactivateContainerAsync=function(e,r){return Wn(this,void 0,void 0,function(){var n;return Vn(this,function(i){switch(i.label){case 0:n=r.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=r.next(),[3,1];case 3:return[2]}})})},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,r=function(l,p){l._binding.moduleId=p},n=function(l){return function(p){var f=e.bind(p);return r(f,l),f}},i=function(){return function(l){return e.unbind(l)}},o=function(){return function(l){return e.unbindAsync(l)}},s=function(){return function(l){return e.isBound(l)}},a=function(l){return function(p){var f=e.rebind(p);return r(f,l),f}},u=function(l){return function(p,f){e._moduleActivationStore.addActivation(l,p,f),e.onActivation(p,f)}},c=function(l){return function(p,f){e._moduleActivationStore.addDeactivation(l,p,f),e.onDeactivation(p,f)}};return function(l){return{bindFunction:n(l),isboundFunction:s(),onActivationFunction:u(l),onDeactivationFunction:c(l),rebindFunction:a(l),unbindFunction:i(),unbindAsyncFunction:o()}}},t.prototype._getAll=function(e){return Promise.all(this._get(e))},t.prototype._get=function(e){var r=ry(ry({},e),{contextInterceptor:function(i){return i},targetType:yl.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(r);if(n==null)throw new Error(wi.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(r)},t.prototype._getButThrowIfAsync=function(e){var r=this._get(e);if((0,Cu.isPromiseOrContainsPromise)(r))throw new Error(wi.LAZY_IN_SYNC(e.serviceIdentifier));return r},t.prototype._getAllArgs=function(e){var r={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return r},t.prototype._getNotAllArgs=function(e,r,n,i){var o={avoidConstraints:!1,isMultiInject:r,serviceIdentifier:e,key:n,value:i};return o},t.prototype._planAndResolve=function(){var e=this;return function(r){var n=(0,ty.plan)(e._metadataReader,e,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);n=r.contextInterceptor(n);var i=(0,RZ.resolve)(n);return i}},t.prototype._deactivateIfSingleton=function(e){var r=this;if(e.activated)return(0,Cu.isPromise)(e.cache)?e.cache.then(function(n){return r._deactivate(e,n)}):this._deactivate(e,e.cache)},t.prototype._deactivateSingletons=function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r],o=this._deactivateIfSingleton(i);if((0,Cu.isPromise)(o))throw new Error(wi.ASYNC_UNBIND_REQUIRED)}},t.prototype._deactivateSingletonsAsync=function(e){return Wn(this,void 0,void 0,function(){var r=this;return Vn(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return r._deactivateIfSingleton(i)}))];case 1:return n.sent(),[2]}})})},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,r,n){return this.parent?this._deactivate.bind(this.parent)(e,r):this._bindingDeactivationAndPreDestroy(e,r,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,r,n){return Wn(this,void 0,void 0,function(){return Vn(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,r)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,r,n)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(wi.CANNOT_UNBIND+" "+(0,OZ.getServiceIdentifierAsString)(e))}},t.prototype._bindingDeactivationAndPreDestroy=function(e,r,n){var i=this;if(typeof e.onDeactivation=="function"){var o=e.onDeactivation(r);if((0,Cu.isPromise)(o))return o.then(function(){return i._preDestroy(n,r)})}return this._preDestroy(n,r)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(e,r,n){return Wn(this,void 0,void 0,function(){return Vn(this,function(i){switch(i.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(r)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,r)];case 3:return i.sent(),[2]}})})},t}();rr.Container=NZ});var jM=y(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.AsyncContainerModule=bl.ContainerModule=void 0;var UM=Xs(),UZ=function(){function t(e){this.id=(0,UM.id)(),this.registry=e}return t}();bl.ContainerModule=UZ;var jZ=function(){function t(e){this.id=(0,UM.id)(),this.registry=e}return t}();bl.AsyncContainerModule=jZ});var qM=y(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.getFirstArrayDuplicate=void 0;function qZ(t){for(var e=new Set,r=0,n=t;r<n.length;r++){var i=n[r];if(e.has(i))return i;e.add(i)}}ny.getFirstArrayDuplicate=qZ});var Zo=y(Rr=>{"use strict";var WZ=Rr&&Rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VZ=Rr&&Rr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VM=Rr&&Rr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WZ(e,t,r);return VZ(e,t),e};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.createTaggedDecorator=Rr.tagProperty=Rr.tagParameter=Rr.decorate=void 0;var iy=VM(Lr()),GM=VM(Ot()),GZ=qM();function KZ(t){return t.prototype!==void 0}function zZ(t){if(t!==void 0)throw new Error(iy.INVALID_DECORATOR_OPERATION)}function KM(t,e,r,n){zZ(e),XM(GM.TAGGED,t,r.toString(),n)}Rr.tagParameter=KM;function zM(t,e,r){if(KZ(t))throw new Error(iy.INVALID_DECORATOR_OPERATION);XM(GM.TAGGED_PROP,t.constructor,e,r)}Rr.tagProperty=zM;function XZ(t){var e=[];if(Array.isArray(t)){e=t;var r=(0,GZ.getFirstArrayDuplicate)(e.map(function(n){return n.key}));if(r!==void 0)throw new Error(iy.DUPLICATED_METADATA+" "+r.toString())}else e=[t];return e}function XM(t,e,r,n){var i=XZ(n),o={};Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var s=o[r];if(s===void 0)s=[];else for(var a=function(p){if(i.some(function(f){return f.key===p.key}))throw new Error(iy.DUPLICATED_METADATA+" "+p.key.toString())},u=0,c=s;u<c.length;u++){var l=c[u];a(l)}s.push.apply(s,i),o[r]=s,Reflect.defineMetadata(t,o,e)}function JZ(t){return function(e,r,n){typeof n=="number"?KM(e,r,n,t):zM(e,r,t)}}Rr.createTaggedDecorator=JZ;function WM(t,e){Reflect.decorate(t,e)}function YZ(t,e){return function(r,n){e(r,n,t)}}function QZ(t,e,r){typeof r=="number"?WM([YZ(r,t)],e):typeof r=="string"?Reflect.decorate([t],e,r):WM([t],e)}Rr.decorate=QZ});var YM=y(eo=>{"use strict";var ZZ=eo&&eo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eee=eo&&eo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JM=eo&&eo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZZ(e,t,r);return eee(e,t),e};Object.defineProperty(eo,"__esModule",{value:!0});eo.injectable=void 0;var tee=JM(Lr()),PI=JM(Ot());function ree(){return function(t){if(Reflect.hasOwnMetadata(PI.PARAM_TYPES,t))throw new Error(tee.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(PI.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(PI.PARAM_TYPES,e,t),t}}eo.injectable=ree});var QM=y(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.tagged=void 0;var nee=vi(),iee=Zo();function oee(t,e){return(0,iee.createTaggedDecorator)(new nee.Metadata(t,e))}oy.tagged=oee});var ZM=y(to=>{"use strict";var see=to&&to.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aee=to&&to.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uee=to&&to.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&see(e,t,r);return aee(e,t),e};Object.defineProperty(to,"__esModule",{value:!0});to.named=void 0;var cee=uee(Ot()),lee=vi(),pee=Zo();function fee(t){return(0,pee.createTaggedDecorator)(new lee.Metadata(cee.NAMED_TAG,t))}to.named=fee});var xI=y(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.injectBase=void 0;var dee=Lr(),hee=vi(),mee=Zo();function gee(t){return function(e){return function(r,n,i){if(e===void 0){var o=typeof r=="function"?r.name:r.constructor.name;throw new Error((0,dee.UNDEFINED_INJECT_ANNOTATION)(o))}return(0,mee.createTaggedDecorator)(new hee.Metadata(t,e))(r,n,i)}}}sy.injectBase=gee});var ek=y(ro=>{"use strict";var Hee=ro&&ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yee=ro&&ro.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bee=ro&&ro.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hee(e,t,r);return yee(e,t),e};Object.defineProperty(ro,"__esModule",{value:!0});ro.inject=void 0;var vee=bee(Ot()),wee=xI(),_ee=(0,wee.injectBase)(vee.INJECT_TAG);ro.inject=_ee});var tk=y(no=>{"use strict";var Aee=no&&no.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Iee=no&&no.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),See=no&&no.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Aee(e,t,r);return Iee(e,t),e};Object.defineProperty(no,"__esModule",{value:!0});no.optional=void 0;var Eee=See(Ot()),Dee=vi(),Cee=Zo();function Pee(){return(0,Cee.createTaggedDecorator)(new Dee.Metadata(Eee.OPTIONAL_TAG,!0))}no.optional=Pee});var rk=y(io=>{"use strict";var xee=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lee=io&&io.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tee=io&&io.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&xee(e,t,r);return Lee(e,t),e};Object.defineProperty(io,"__esModule",{value:!0});io.unmanaged=void 0;var $ee=Tee(Ot()),Ree=vi(),Mee=Zo();function kee(){return function(t,e,r){var n=new Ree.Metadata($ee.UNMANAGED_TAG,!0);(0,Mee.tagParameter)(t,e,r,n)}}io.unmanaged=kee});var nk=y(oo=>{"use strict";var Oee=oo&&oo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fee=oo&&oo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bee=oo&&oo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Oee(e,t,r);return Fee(e,t),e};Object.defineProperty(oo,"__esModule",{value:!0});oo.multiInject=void 0;var Nee=Bee(Ot()),Uee=xI(),jee=(0,Uee.injectBase)(Nee.MULTI_INJECT_TAG);oo.multiInject=jee});var ik=y(so=>{"use strict";var qee=so&&so.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wee=so&&so.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vee=so&&so.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qee(e,t,r);return Wee(e,t),e};Object.defineProperty(so,"__esModule",{value:!0});so.targetName=void 0;var Gee=Vee(Ot()),Kee=vi(),zee=Zo();function Xee(t){return function(e,r,n){var i=new Kee.Metadata(Gee.NAME_TAG,t);(0,zee.tagParameter)(e,r,n,i)}}so.targetName=Xee});var LI=y(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.propertyEventDecorator=void 0;var Jee=vi();function Yee(t,e){return function(){return function(r,n){var i=new Jee.Metadata(t,n);if(Reflect.hasOwnMetadata(t,r.constructor))throw new Error(e);Reflect.defineMetadata(t,i,r.constructor)}}}ay.propertyEventDecorator=Yee});var sk=y(ao=>{"use strict";var Qee=ao&&ao.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Zee=ao&&ao.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ok=ao&&ao.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qee(e,t,r);return Zee(e,t),e};Object.defineProperty(ao,"__esModule",{value:!0});ao.postConstruct=void 0;var ete=ok(Lr()),tte=ok(Ot()),rte=LI(),nte=(0,rte.propertyEventDecorator)(tte.POST_CONSTRUCT,ete.MULTIPLE_POST_CONSTRUCT_METHODS);ao.postConstruct=nte});var uk=y(uo=>{"use strict";var ite=uo&&uo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ote=uo&&uo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ak=uo&&uo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ite(e,t,r);return ote(e,t),e};Object.defineProperty(uo,"__esModule",{value:!0});uo.preDestroy=void 0;var ste=ak(Lr()),ate=ak(Ot()),ute=LI(),cte=(0,ute.propertyEventDecorator)(ate.PRE_DESTROY,ste.MULTIPLE_PRE_DESTROY_METHODS);uo.preDestroy=cte});var ck=y(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});uy.interfaces=void 0;var TI;(function(t){})(TI||(TI={}));uy.interfaces=TI});var J=y(pe=>{"use strict";var lte=pe&&pe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pte=pe&&pe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fte=pe&&pe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&lte(e,t,r);return pte(e,t),e};Object.defineProperty(pe,"__esModule",{value:!0});pe.multiBindToService=pe.getServiceIdentifierAsString=pe.typeConstraint=pe.namedConstraint=pe.taggedConstraint=pe.traverseAncerstors=pe.decorate=pe.interfaces=pe.id=pe.MetadataReader=pe.preDestroy=pe.postConstruct=pe.targetName=pe.multiInject=pe.unmanaged=pe.optional=pe.LazyServiceIdentifer=pe.inject=pe.named=pe.tagged=pe.injectable=pe.createTaggedDecorator=pe.ContainerModule=pe.AsyncContainerModule=pe.TargetTypeEnum=pe.BindingTypeEnum=pe.BindingScopeEnum=pe.Container=pe.METADATA_KEY=void 0;var dte=fte(Ot());pe.METADATA_KEY=dte;var hte=NM();Object.defineProperty(pe,"Container",{enumerable:!0,get:function(){return hte.Container}});var $I=bi();Object.defineProperty(pe,"BindingScopeEnum",{enumerable:!0,get:function(){return $I.BindingScopeEnum}});Object.defineProperty(pe,"BindingTypeEnum",{enumerable:!0,get:function(){return $I.BindingTypeEnum}});Object.defineProperty(pe,"TargetTypeEnum",{enumerable:!0,get:function(){return $I.TargetTypeEnum}});var lk=jM();Object.defineProperty(pe,"AsyncContainerModule",{enumerable:!0,get:function(){return lk.AsyncContainerModule}});Object.defineProperty(pe,"ContainerModule",{enumerable:!0,get:function(){return lk.ContainerModule}});var mte=Zo();Object.defineProperty(pe,"createTaggedDecorator",{enumerable:!0,get:function(){return mte.createTaggedDecorator}});var gte=YM();Object.defineProperty(pe,"injectable",{enumerable:!0,get:function(){return gte.injectable}});var Hte=QM();Object.defineProperty(pe,"tagged",{enumerable:!0,get:function(){return Hte.tagged}});var yte=ZM();Object.defineProperty(pe,"named",{enumerable:!0,get:function(){return yte.named}});var bte=ek();Object.defineProperty(pe,"inject",{enumerable:!0,get:function(){return bte.inject}});var vte=sI();Object.defineProperty(pe,"LazyServiceIdentifer",{enumerable:!0,get:function(){return vte.LazyServiceIdentifer}});var wte=tk();Object.defineProperty(pe,"optional",{enumerable:!0,get:function(){return wte.optional}});var _te=rk();Object.defineProperty(pe,"unmanaged",{enumerable:!0,get:function(){return _te.unmanaged}});var Ate=nk();Object.defineProperty(pe,"multiInject",{enumerable:!0,get:function(){return Ate.multiInject}});var Ite=ik();Object.defineProperty(pe,"targetName",{enumerable:!0,get:function(){return Ite.targetName}});var Ste=sk();Object.defineProperty(pe,"postConstruct",{enumerable:!0,get:function(){return Ste.postConstruct}});var Ete=uk();Object.defineProperty(pe,"preDestroy",{enumerable:!0,get:function(){return Ete.preDestroy}});var Dte=iI();Object.defineProperty(pe,"MetadataReader",{enumerable:!0,get:function(){return Dte.MetadataReader}});var Cte=Xs();Object.defineProperty(pe,"id",{enumerable:!0,get:function(){return Cte.id}});var Pte=ck();Object.defineProperty(pe,"interfaces",{enumerable:!0,get:function(){return Pte.interfaces}});var xte=Zo();Object.defineProperty(pe,"decorate",{enumerable:!0,get:function(){return xte.decorate}});var cy=II();Object.defineProperty(pe,"traverseAncerstors",{enumerable:!0,get:function(){return cy.traverseAncerstors}});Object.defineProperty(pe,"taggedConstraint",{enumerable:!0,get:function(){return cy.taggedConstraint}});Object.defineProperty(pe,"namedConstraint",{enumerable:!0,get:function(){return cy.namedConstraint}});Object.defineProperty(pe,"typeConstraint",{enumerable:!0,get:function(){return cy.typeConstraint}});var Lte=dl();Object.defineProperty(pe,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return Lte.getServiceIdentifierAsString}});var Tte=HI();Object.defineProperty(pe,"multiBindToService",{enumerable:!0,get:function(){return Tte.multiBindToService}})});var Ck=y(Dk=>{var Ek="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Dk.encode=function(t){if(0<=t&&t<Ek.length)return Ek[t];throw new TypeError("Must be between 0 and 63: "+t)}});var NI=y(Lk=>{var Bte=Ck(),Pk=5,xk=1<<Pk,Nte=xk-1,Ute=xk;function jte(t){return t<0?(-t<<1)+1:(t<<1)+0}Lk.encode=function(e){let r="",n,i=jte(e);do n=i&Nte,i>>>=Pk,i>0&&(n|=Ute),r+=Bte.encode(n);while(i>0);return r}});var $k=y((gAe,Tk)=>{"use strict";Tk.exports=typeof URL=="function"?URL:require("url").URL});var ph=y(lo=>{var Qs=$k();function qte(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}lo.getArg=qte;var Mk=function(){return!("__proto__"in Object.create(null))}();function kk(t){return t}function Wte(t){return Ok(t)?"$"+t:t}lo.toSetString=Mk?kk:Wte;function Vte(t){return Ok(t)?t.slice(1):t}lo.fromSetString=Mk?kk:Vte;function Ok(t){if(!t)return!1;let e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(let r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Rk(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Gte(t,e){let r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Rk(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Rk(t.name,e.name)}lo.compareByGeneratedPositionsInflated=Gte;function Kte(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}lo.parseSourceMapInput=Kte;var jI="http:",ch=`${jI}//host`;function qI(t){return e=>{let r=wl(e),n=WI(e),i=new Qs(e,n);t(i);let o=i.toString();return r==="absolute"?o:r==="scheme-relative"?o.slice(jI.length):r==="path-absolute"?o.slice(ch.length):VI(n,o)}}function Ys(t,e){return new Qs(t,e).toString()}function zte(t,e){let r=0;do{let n=t+r++;if(e.indexOf(n)===-1)return n}while(!0)}function WI(t){let e=t.split("..").length-1,r=zte("p",t),n=`${ch}/`;for(let i=0;i<e;i++)n+=`${r}/`;return n}var Xte=/^[A-Za-z0-9\+\-\.]+:/;function wl(t){return t[0]==="/"?t[1]==="/"?"scheme-relative":"path-absolute":Xte.test(t)?"absolute":"path-relative"}function VI(t,e){typeof t=="string"&&(t=new Qs(t)),typeof e=="string"&&(e=new Qs(e));let r=e.pathname.split("/"),n=t.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();r.length>0&&n.length>0&&r[0]===n[0];)r.shift(),n.shift();return n.map(()=>"..").concat(r).join("/")+e.search+e.hash}var Jte=qI(t=>{t.pathname=t.pathname.replace(/\/?$/,"/")}),Yte=qI(t=>{t.href=new Qs(".",t.toString()).toString()}),lh=qI(t=>{});lo.normalize=lh;function UI(t,e){let r=wl(e),n=wl(t);if(t=Jte(t),r==="absolute")return Ys(e,void 0);if(n==="absolute")return Ys(e,t);if(r==="scheme-relative")return lh(e);if(n==="scheme-relative")return Ys(e,Ys(t,ch)).slice(jI.length);if(r==="path-absolute")return lh(e);if(n==="path-absolute")return Ys(e,Ys(t,ch)).slice(ch.length);let i=WI(e+t),o=Ys(e,Ys(t,i));return VI(i,o)}lo.join=UI;function Qte(t,e){let r=Zte(t,e);return typeof r=="string"?r:lh(e)}lo.relative=Qte;function Zte(t,e){if(wl(t)!==wl(e))return null;let n=WI(t+e),i=new Qs(t,n),o=new Qs(e,n);try{new Qs("",o.toString())}catch{return null}return o.protocol!==i.protocol||o.user!==i.user||o.password!==i.password||o.hostname!==i.hostname||o.port!==i.port?null:VI(i,o)}function ere(t,e,r){t&&wl(e)==="path-absolute"&&(e=e.replace(/^\//,""));let n=lh(e||"");return t&&(n=UI(t,n)),r&&(n=UI(Yte(r),n)),n}lo.computeSourceURL=ere});var GI=y(Fk=>{var fh=class{constructor(){this._array=[],this._set=new Map}static fromArray(e,r){let n=new fh;for(let i=0,o=e.length;i<o;i++)n.add(e[i],r);return n}size(){return this._set.size}add(e,r){let n=this.has(e),i=this._array.length;(!n||r)&&this._array.push(e),n||this._set.set(e,i)}has(e){return this._set.has(e)}indexOf(e){let r=this._set.get(e);if(r>=0)return r;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}};Fk.ArraySet=fh});var Uk=y(Nk=>{var Bk=ph();function tre(t,e){let r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||Bk.compareByGeneratedPositionsInflated(t,e)<=0}var KI=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,r){this._array.forEach(e,r)}add(e){tre(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(Bk.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};Nk.MappingList=KI});var zI=y(jk=>{var dh=NI(),Bt=ph(),by=GI().ArraySet,rre=Uk().MappingList,_l=class{constructor(e){e||(e={}),this._file=Bt.getArg(e,"file",null),this._sourceRoot=Bt.getArg(e,"sourceRoot",null),this._skipValidation=Bt.getArg(e,"skipValidation",!1),this._sources=new by,this._names=new by,this._mappings=new rre,this._sourcesContents=null}static fromSourceMap(e){let r=e.sourceRoot,n=new _l({file:e.file,sourceRoot:r});return e.eachMapping(function(i){let o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Bt.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){let o=i;r!==null&&(o=Bt.relative(r,i)),n._sources.has(o)||n._sources.add(o);let s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n}addMapping(e){let r=Bt.getArg(e,"generated"),n=Bt.getArg(e,"original",null),i=Bt.getArg(e,"source",null),o=Bt.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})}setSourceContent(e,r){let n=e;this._sourceRoot!=null&&(n=Bt.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Bt.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Bt.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(e,r,n){let i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}let o=this._sourceRoot;o!=null&&(i=Bt.relative(o,i));let s=this._mappings.toArray().length>0?new by:this._sources,a=new by;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){let p=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});p.source!=null&&(u.source=p.source,n!=null&&(u.source=Bt.join(n,u.source)),o!=null&&(u.source=Bt.relative(o,u.source)),u.originalLine=p.line,u.originalColumn=p.column,p.name!=null&&(u.name=p.name))}let c=u.source;c!=null&&!s.has(c)&&s.add(c);let l=u.name;l!=null&&!a.has(l)&&a.add(l)},this),this._sources=s,this._names=a,e.sources.forEach(function(u){let c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Bt.join(n,u)),o!=null&&(u=Bt.relative(o,u)),this.setSourceContent(u,c))},this)}_validateMapping(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(!(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}}_serializeMappings(){let e=0,r=1,n=0,i=0,o=0,s=0,a="",u,c,l,p,f=this._mappings.toArray();for(let m=0,h=f.length;m<h;m++){if(c=f[m],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(m>0){if(!Bt.compareByGeneratedPositionsInflated(c,f[m-1]))continue;u+=","}u+=dh.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(p=this._sources.indexOf(c.source),u+=dh.encode(p-s),s=p,u+=dh.encode(c.originalLine-1-i),i=c.originalLine-1,u+=dh.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=dh.encode(l-o),o=l)),a+=u}return a}_generateSourcesContent(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Bt.relative(r,n));let i=Bt.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)}toJSON(){let e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}};_l.prototype._version=3;jk.SourceMapGenerator=_l});var qk=y(Lu=>{Lu.GREATEST_LOWER_BOUND=1;Lu.LEAST_UPPER_BOUND=2;function XI(t,e,r,n,i,o){let s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?XI(s,e,r,n,i,o):o==Lu.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?XI(t,s,r,n,i,o):o==Lu.LEAST_UPPER_BOUND?s:t<0?-1:t}Lu.search=function(e,r,n,i){if(r.length===0)return-1;let o=XI(-1,r.length,e,r,n,i||Lu.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var YI=y((_Ae,JI)=>{"use strict";var nre=require("fs"),ire=require("path");JI.exports=function(){return new Promise((e,r)=>{let n=ire.join(__dirname,"mappings.wasm");nre.readFile(n,null,(i,o)=>{if(i){r(i);return}e(o.buffer)})})};JI.exports.initialize=t=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}});var Vk=y((AAe,Wk)=>{var ore=YI();function sre(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var hh=null;Wk.exports=function(){if(hh)return hh;let e=[];return hh=ore().then(r=>WebAssembly.instantiate(r,{env:{mapping_callback(n,i,o,s,a,u,c,l,p,f){let m=new sre;m.generatedLine=n+1,m.generatedColumn=i,o&&(m.lastGeneratedColumn=s-1),a&&(m.source=u,m.originalLine=c+1,m.originalColumn=l,p&&(m.name=f)),e[e.length-1](m)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(r=>({exports:r.instance.exports,withMappingCallback:(n,i)=>{e.push(n);try{i()}finally{e.pop()}}})).then(null,r=>{throw hh=null,r}),hh}});var Gk=y(wy=>{var Ee=ph(),are=qk(),QI=GI().ArraySet,IAe=NI(),ure=YI(),cre=Vk(),ZI=Symbol("smcInternal"),Tt=class{constructor(e,r){return e==ZI?Promise.resolve(this):lre(e,r)}static initialize(e){ure.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,r){return pre(e,r)}static async with(e,r,n){let i=await new Tt(e,r);try{return await n(i)}finally{i.destroy()}}eachMapping(e,r,n){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}};Tt.prototype._version=3;Tt.GENERATED_ORDER=1;Tt.ORIGINAL_ORDER=2;Tt.GREATEST_LOWER_BOUND=1;Tt.LEAST_UPPER_BOUND=2;wy.SourceMapConsumer=Tt;var Zs=class extends Tt{constructor(e,r){return super(ZI).then(n=>{let i=e;typeof e=="string"&&(i=Ee.parseSourceMapInput(e));let o=Ee.getArg(i,"version"),s=Ee.getArg(i,"sources").map(String),a=Ee.getArg(i,"names",[]),u=Ee.getArg(i,"sourceRoot",null),c=Ee.getArg(i,"sourcesContent",null),l=Ee.getArg(i,"mappings"),p=Ee.getArg(i,"file",null);if(o!=n._version)throw new Error("Unsupported version: "+o);return n._sourceLookupCache=new Map,n._names=QI.fromArray(a.map(String),!0),n._sources=QI.fromArray(s,!0),n._absoluteSources=QI.fromArray(n._sources.toArray().map(function(f){return Ee.computeSourceURL(u,f,r)}),!0),n.sourceRoot=u,n.sourcesContent=c,n._mappings=l,n._sourceMapURL=r,n.file=p,n._computedColumnSpans=!1,n._mappingsPtr=0,n._wasm=null,cre().then(f=>(n._wasm=f,n))})}_findSourceIndex(e){let r=this._sourceLookupCache.get(e);if(typeof r=="number")return r;let n=Ee.computeSourceURL(null,e,this._sourceMapURL);if(this._absoluteSources.has(n)){let o=this._absoluteSources.indexOf(n);return this._sourceLookupCache.set(e,o),o}let i=Ee.computeSourceURL(this.sourceRoot,e,this._sourceMapURL);if(this._absoluteSources.has(i)){let o=this._absoluteSources.indexOf(i);return this._sourceLookupCache.set(e,o),o}return-1}static fromSourceMap(e,r){return new Zs(e.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(),this._mappingsPtr}_parseMappings(){let e=this._mappings,r=e.length,n=this._wasm.exports.allocate_mappings(r),i=new Uint8Array(this._wasm.exports.memory.buffer,n,r);for(let s=0;s<r;s++)i[s]=e.charCodeAt(s);let o=this._wasm.exports.parse_mappings(n);if(!o){let s=this._wasm.exports.get_last_error(),a=`Error parsing mappings (code ${s}): `;switch(s){case 1:a+="the mappings contained a negative line, column, source index, or name index";break;case 2:a+="the mappings contained a number larger than 2**32";break;case 3:a+="reached EOF while in the middle of parsing a VLQ";break;case 4:a+="invalid base 64 character while parsing a VLQ";break;default:a+="unknown error code";break}throw new Error(a)}this._mappingsPtr=o}eachMapping(e,r,n){let i=r||null,o=n||Tt.GENERATED_ORDER;this._wasm.withMappingCallback(s=>{s.source!==null&&(s.source=this._absoluteSources.at(s.source),s.name!==null&&(s.name=this._names.at(s.name))),this._computedColumnSpans&&s.lastGeneratedColumn===null&&(s.lastGeneratedColumn=1/0),e.call(i,s)},()=>{switch(o){case Tt.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case Tt.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let r=Ee.getArg(e,"source"),n=Ee.getArg(e,"line"),i=e.column||0;if(r=this._findSourceIndex(r),r<0)return[];if(n<1)throw new Error("Line numbers must be >= 1");if(i<0)throw new Error("Column numbers must be >= 0");let o=[];return this._wasm.withMappingCallback(s=>{let a=s.lastGeneratedColumn;this._computedColumnSpans&&a===null&&(a=1/0),o.push({line:s.generatedLine,column:s.generatedColumn,lastColumn:a})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),r,n-1,"column"in e,i)}),o}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){let r={generatedLine:Ee.getArg(e,"line"),generatedColumn:Ee.getArg(e,"column")};if(r.generatedLine<1)throw new Error("Line numbers must be >= 1");if(r.generatedColumn<0)throw new Error("Column numbers must be >= 0");let n=Ee.getArg(e,"bias",Tt.GREATEST_LOWER_BOUND);n==null&&(n=Tt.GREATEST_LOWER_BOUND);let i;if(this._wasm.withMappingCallback(o=>i=o,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),r.generatedLine-1,r.generatedColumn,n)}),i&&i.generatedLine===r.generatedLine){let o=Ee.getArg(i,"source",null);o!==null&&(o=this._absoluteSources.at(o));let s=Ee.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:Ee.getArg(i,"originalLine",null),column:Ee.getArg(i,"originalColumn",null),name:s}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1}sourceContentFor(e,r){if(!this.sourcesContent)return null;let n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){let r=Ee.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};let n={source:r,originalLine:Ee.getArg(e,"line"),originalColumn:Ee.getArg(e,"column")};if(n.originalLine<1)throw new Error("Line numbers must be >= 1");if(n.originalColumn<0)throw new Error("Column numbers must be >= 0");let i=Ee.getArg(e,"bias",Tt.GREATEST_LOWER_BOUND);i==null&&(i=Tt.GREATEST_LOWER_BOUND);let o;if(this._wasm.withMappingCallback(s=>o=s,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),n.source,n.originalLine-1,n.originalColumn,i)}),o&&o.source===n.source){let s=o.lastGeneratedColumn;return this._computedColumnSpans&&s===null&&(s=1/0),{line:Ee.getArg(o,"generatedLine",null),column:Ee.getArg(o,"generatedColumn",null),lastColumn:s}}return{line:null,column:null,lastColumn:null}}};Zs.prototype.consumer=Tt;wy.BasicSourceMapConsumer=Zs;var vy=class extends Tt{constructor(e,r){return super(ZI).then(n=>{let i=e;typeof e=="string"&&(i=Ee.parseSourceMapInput(e));let o=Ee.getArg(i,"version"),s=Ee.getArg(i,"sections");if(o!=n._version)throw new Error("Unsupported version: "+o);let a={line:-1,column:0};return Promise.all(s.map(u=>{if(u.url)throw new Error("Support for url field in sections not implemented.");let c=Ee.getArg(u,"offset"),l=Ee.getArg(c,"line"),p=Ee.getArg(c,"column");if(l<a.line||l===a.line&&p<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=c,new Tt(Ee.getArg(u,"map"),r).then(m=>({generatedOffset:{generatedLine:l+1,generatedColumn:p+1},consumer:m}))})).then(u=>(n._sections=u,n))})}get sources(){let e=[];for(let r=0;r<this._sections.length;r++)for(let n=0;n<this._sections[r].consumer.sources.length;n++)e.push(this._sections[r].consumer.sources[n]);return e}originalPositionFor(e){let r={generatedLine:Ee.getArg(e,"line"),generatedColumn:Ee.getArg(e,"column")},n=are.search(r,this._sections,function(o,s){let a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,r){for(let n=0;n<this._sections.length;n++){let o=this._sections[n].consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')}_findSectionIndex(e){for(let r=0;r<this._sections.length;r++){let{consumer:n}=this._sections[r];if(n._findSourceIndex(e)!==-1)return r}return-1}generatedPositionFor(e){let r=this._findSectionIndex(Ee.getArg(e,"source")),n=r>=0?this._sections[r]:null,i=r>=0&&r+1<this._sections.length?this._sections[r+1]:null,o=n&&n.consumer.generatedPositionFor(e);if(o&&o.line!==null){let s=n.generatedOffset.generatedLine-1,a=n.generatedOffset.generatedColumn-1;return o.line===1&&(o.column+=a,typeof o.lastColumn=="number"&&(o.lastColumn+=a)),o.lastColumn===1/0&&i&&o.line===i.generatedOffset.generatedLine&&(o.lastColumn=i.generatedOffset.generatedColumn-2),o.line+=s,o}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(e){let r=this._findSectionIndex(Ee.getArg(e,"source")),n=r>=0?this._sections[r]:null,i=r>=0&&r+1<this._sections.length?this._sections[r+1]:null;return n?n.consumer.allGeneratedPositionsFor(e).map(o=>{let s=n.generatedOffset.generatedLine-1,a=n.generatedOffset.generatedColumn-1;return o.line===1&&(o.column+=a,typeof o.lastColumn=="number"&&(o.lastColumn+=a)),o.lastColumn===1/0&&i&&o.line===i.generatedOffset.generatedLine&&(o.lastColumn=i.generatedOffset.generatedColumn-2),o.line+=s,o}):[]}eachMapping(e,r,n){this._sections.forEach((i,o)=>{let s=o+1<this._sections.length?this._sections[o+1]:null,{generatedOffset:a}=i,u=a.generatedLine-1,c=a.generatedColumn-1;i.consumer.eachMapping(function(l){l.generatedLine===1&&(l.generatedColumn+=c,typeof l.lastGeneratedColumn=="number"&&(l.lastGeneratedColumn+=c)),l.lastGeneratedColumn===1/0&&s&&l.generatedLine===s.generatedOffset.generatedLine&&(l.lastGeneratedColumn=s.generatedOffset.generatedColumn-2),l.generatedLine+=u,e.call(this,l)},r,n)})}computeColumnSpans(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.computeColumnSpans()}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}};wy.IndexedSourceMapConsumer=vy;function lre(t,e){let r=t;typeof t=="string"&&(r=Ee.parseSourceMapInput(t));let n=r.sections!=null?new vy(r,e):new Zs(r,e);return Promise.resolve(n)}function pre(t,e){return Zs.fromSourceMap(t,e)}});var zk=y(Kk=>{var fre=zI().SourceMapGenerator,_y=ph(),dre=/(\r?\n)/,hre=10,Al="$$$isSourceNode$$$",Il=class{constructor(e,r,n,i,o){this.children=[],this.sourceContents={},this.line=e??null,this.column=r??null,this.source=n??null,this.name=o??null,this[Al]=!0,i!=null&&this.add(i)}static fromStringWithSourceMap(e,r,n){let i=new Il,o=e.split(dre),s=0,a=function(){let m=H(),h=H()||"";return m+h;function H(){return s<o.length?o[s++]:void 0}},u=1,c=0,l=null,p;return r.eachMapping(function(m){if(l!==null)if(u<m.generatedLine)f(l,a()),u++,c=0;else{p=o[s]||"";let h=p.substr(0,m.generatedColumn-c);o[s]=p.substr(m.generatedColumn-c),c=m.generatedColumn,f(l,h),l=m;return}for(;u<m.generatedLine;)i.add(a()),u++;c<m.generatedColumn&&(p=o[s]||"",i.add(p.substr(0,m.generatedColumn)),o[s]=p.substr(m.generatedColumn),c=m.generatedColumn),l=m},this),s<o.length&&(l&&f(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(m){let h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=_y.join(n,m)),i.setSourceContent(m,h))}),i;function f(m,h){if(m===null||m.source===void 0)i.add(h);else{let H=n?_y.join(n,m.source):m.source;i.add(new Il(m.originalLine,m.originalColumn,H,h,m.name))}}}add(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Al]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Al]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let r;for(let n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Al]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this}replaceRight(e,r){let n=this.children[this.children.length-1];return n[Al]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this}setSourceContent(e,r){this.sourceContents[_y.toSetString(e)]=r}walkSourceContents(e){for(let n=0,i=this.children.length;n<i;n++)this.children[n][Al]&&this.children[n].walkSourceContents(e);let r=Object.keys(this.sourceContents);for(let n=0,i=r.length;n<i;n++)e(_y.fromSetString(r[n]),this.sourceContents[r[n]])}toString(){let e="";return this.walk(function(r){e+=r}),e}toStringWithSourceMap(e){let r={code:"",line:1,column:0},n=new fre(e),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,u=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(let p=0,f=c.length;p<f;p++)c.charCodeAt(p)===hre?(r.line++,r.column=0,p+1===f?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}}};Kk.SourceNode=Il});var Iy=y(Ay=>{Ay.SourceMapGenerator=zI().SourceMapGenerator;Ay.SourceMapConsumer=Gk().SourceMapConsumer;Ay.SourceNode=zk().SourceNode});var gh=y(v1=>{(function t(e){"use strict";var r,n,i,o,s,a;function u(D){var P={},j,N;for(j in D)D.hasOwnProperty(j)&&(N=D[j],typeof N=="object"&&N!==null?P[j]=u(N):P[j]=N);return P}function c(D,P){var j,N,M,L;for(N=D.length,M=0;N;)j=N>>>1,L=M+j,P(D[L])?N=j:(M=L+1,N-=j+1);return M}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},o={},s={},a={},n={Break:o,Skip:s,Remove:a};function l(D,P){this.parent=D,this.key=P}l.prototype.replace=function(P){this.parent[this.key]=P},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function p(D,P,j,N){this.node=D,this.path=P,this.wrap=j,this.ref=N}function f(){}f.prototype.path=function(){var P,j,N,M,L,F;function S(k,O){if(Array.isArray(O))for(N=0,M=O.length;N<M;++N)k.push(O[N]);else k.push(O)}if(!this.__current.path)return null;for(L=[],P=2,j=this.__leavelist.length;P<j;++P)F=this.__leavelist[P],S(L,F.path);return S(L,this.__current.path),L},f.prototype.type=function(){var D=this.current();return D.type||this.__current.wrap},f.prototype.parents=function(){var P,j,N;for(N=[],P=1,j=this.__leavelist.length;P<j;++P)N.push(this.__leavelist[P].node);return N},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(P,j){var N,M;return M=void 0,N=this.__current,this.__current=j,this.__state=null,P&&(M=P.call(this,j.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=N,M},f.prototype.notify=function(P){this.__state=P},f.prototype.skip=function(){this.notify(s)},f.prototype.break=function(){this.notify(o)},f.prototype.remove=function(){this.notify(a)},f.prototype.__initialize=function(D,P){this.visitor=P,this.root=D,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,P.fallback==="iteration"?this.__fallback=Object.keys:typeof P.fallback=="function"&&(this.__fallback=P.fallback),this.__keys=i,P.keys&&(this.__keys=Object.assign(Object.create(this.__keys),P.keys))};function m(D){return D==null?!1:typeof D=="object"&&typeof D.type=="string"}function h(D,P){return(D===r.ObjectExpression||D===r.ObjectPattern)&&P==="properties"}function H(D,P){for(var j=D.length-1;j>=0;--j)if(D[j].node===P)return!0;return!1}f.prototype.traverse=function(P,j){var N,M,L,F,S,k,O,K,C,x,Z,re;for(this.__initialize(P,j),re={},N=this.__worklist,M=this.__leavelist,N.push(new p(P,null,null,null)),M.push(new p(null,null,null,null));N.length;){if(L=N.pop(),L===re){if(L=M.pop(),k=this.__execute(j.leave,L),this.__state===o||k===o)return;continue}if(L.node){if(k=this.__execute(j.enter,L),this.__state===o||k===o)return;if(N.push(re),M.push(L),this.__state===s||k===s)continue;if(F=L.node,S=F.type||L.wrap,x=this.__keys[S],!x)if(this.__fallback)x=this.__fallback(F);else throw new Error("Unknown node type "+S+".");for(K=x.length;(K-=1)>=0;)if(O=x[K],Z=F[O],!!Z){if(Array.isArray(Z)){for(C=Z.length;(C-=1)>=0;)if(Z[C]&&!H(M,Z[C])){if(h(S,x[K]))L=new p(Z[C],[O,C],"Property",null);else if(m(Z[C]))L=new p(Z[C],[O,C],null,null);else continue;N.push(L)}}else if(m(Z)){if(H(M,Z))continue;N.push(new p(Z,O,null,null))}}}}},f.prototype.replace=function(P,j){var N,M,L,F,S,k,O,K,C,x,Z,re,ne;function X(te){var ue,se,de,nt;if(te.ref.remove()){for(se=te.ref.key,nt=te.ref.parent,ue=N.length;ue--;)if(de=N[ue],de.ref&&de.ref.parent===nt){if(de.ref.key<se)break;--de.ref.key}}}for(this.__initialize(P,j),Z={},N=this.__worklist,M=this.__leavelist,re={root:P},k=new p(P,null,null,new l(re,"root")),N.push(k),M.push(k);N.length;){if(k=N.pop(),k===Z){if(k=M.pop(),S=this.__execute(j.leave,k),S!==void 0&&S!==o&&S!==s&&S!==a&&k.ref.replace(S),(this.__state===a||S===a)&&X(k),this.__state===o||S===o)return re.root;continue}if(S=this.__execute(j.enter,k),S!==void 0&&S!==o&&S!==s&&S!==a&&(k.ref.replace(S),k.node=S),(this.__state===a||S===a)&&(X(k),k.node=null),this.__state===o||S===o)return re.root;if(L=k.node,!!L&&(N.push(Z),M.push(k),!(this.__state===s||S===s))){if(F=L.type||k.wrap,C=this.__keys[F],!C)if(this.__fallback)C=this.__fallback(L);else throw new Error("Unknown node type "+F+".");for(O=C.length;(O-=1)>=0;)if(ne=C[O],x=L[ne],!!x)if(Array.isArray(x)){for(K=x.length;(K-=1)>=0;)if(x[K]){if(h(F,C[O]))k=new p(x[K],[ne,K],"Property",new l(x,K));else if(m(x[K]))k=new p(x[K],[ne,K],null,new l(x,K));else continue;N.push(k)}}else m(x)&&N.push(new p(x,ne,null,new l(L,ne)))}}return re.root};function b(D,P){var j=new f;return j.traverse(D,P)}function _(D,P){var j=new f;return j.replace(D,P)}function $(D,P){var j;return j=c(P,function(M){return M.range[0]>D.range[0]}),D.extendedRange=[D.range[0],D.range[1]],j!==P.length&&(D.extendedRange[1]=P[j].range[0]),j-=1,j>=0&&(D.extendedRange[0]=P[j].range[1]),D}function U(D,P,j){var N=[],M,L,F,S;if(!D.range)throw new Error("attachComments needs range information");if(!j.length){if(P.length){for(F=0,L=P.length;F<L;F+=1)M=u(P[F]),M.extendedRange=[0,D.range[0]],N.push(M);D.leadingComments=N}return D}for(F=0,L=P.length;F<L;F+=1)N.push($(u(P[F]),j));return S=0,b(D,{enter:function(k){for(var O;S<N.length&&(O=N[S],!(O.extendedRange[1]>k.range[0]));)O.extendedRange[1]===k.range[0]?(k.leadingComments||(k.leadingComments=[]),k.leadingComments.push(O),N.splice(S,1)):S+=1;if(S===N.length)return n.Break;if(N[S].extendedRange[0]>k.range[1])return n.Skip}}),S=0,b(D,{leave:function(k){for(var O;S<N.length&&(O=N[S],!(k.range[1]<O.extendedRange[0]));)k.range[1]===O.extendedRange[0]?(k.trailingComments||(k.trailingComments=[]),k.trailingComments.push(O),N.splice(S,1)):S+=1;if(S===N.length)return n.Break;if(N[S].extendedRange[0]>k.range[1])return n.Skip}}),D}return e.Syntax=r,e.traverse=b,e.replace=_,e.attachComments=U,e.VisitorKeys=i,e.VisitorOption=n,e.Controller=f,e.cloneEnvironment=function(){return t({})},e})(v1)});var Q1=y((aSe,Eh)=>{var J1={};J1.__wbindgen_placeholder__=Eh.exports;var Si,{TextDecoder:Bre}=require("util"),Y1=new Bre("utf-8",{ignoreBOM:!0,fatal:!0});Y1.decode();var Jy=null;function _S(){return(Jy===null||Jy.buffer!==Si.memory.buffer)&&(Jy=new Uint8Array(Si.memory.buffer)),Jy}function Nre(t,e){return Y1.decode(_S().subarray(t,t+e))}var wS=0;function X1(t,e){let r=e(t.length*1);return _S().set(t,r/1),wS=t.length,r}var Nl=class{static __wrap(e){let r=Object.create(Nl.prototype);return r.ptr=e,r}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();Si.__wbg_hasher_free(e)}constructor(){var e=Si.hasher_new();return Nl.__wrap(e)}update(e){var r=X1(e,Si.__wbindgen_malloc),n=wS;Si.hasher_update(this.ptr,r,n)}digest(e){try{var r=X1(e,Si.__wbindgen_malloc),n=wS;Si.hasher_digest(this.ptr,r,n)}finally{e.set(_S().subarray(r/1,r/1+n)),Si.__wbindgen_free(r,n*1)}}};Eh.exports.Hasher=Nl;Eh.exports.__wbindgen_throw=function(t,e){throw new Error(Nre(t,e))};var Ure=require("path").join(__dirname,"chromehash_bg.wasm"),jre=require("fs").readFileSync(Ure),qre=new WebAssembly.Module(jre),Wre=new WebAssembly.Instance(qre,J1);Si=Wre.exports;Eh.exports.__wasm=Si});var iO=y(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.shaHashFile=bo.hashFile=bo.shaHash=bo.hash=void 0;var tO=Q1(),rO=require("fs"),Z1=require("string_decoder"),nO=require("crypto"),Qy=Buffer.alloc(4*5),Vre=t=>{let e=new tO.Hasher;return e.update(Xre(t)),e.digest(Qy),e.free(),Qy.toString("hex")};bo.hash=Vre;var Gre=t=>{let e=(0,nO.createHash)("sha256");return e.update(Jre(t)),e.digest("hex")};bo.shaHash=Gre;var Kre=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=new tO.Hasher,i;try{i=await rO.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if(eb(s))for(n.update(s.slice(2));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else if(tb(s))for(n.update(s.slice(2).swap16());o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead).swap16());else if(Zy(s)){let a=new Z1.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s.slice(3)),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}else{let a=new Z1.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}return n.digest(Qy),Qy.toString("hex")}finally{n.free(),i!==void 0&&await i.close()}};bo.hashFile=Kre;var Yy={stream:!0},zre=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=(0,nO.createHash)("sha256"),i;try{i=await rO.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if(eb(s)){let a=new TextDecoder("utf-16le");for(n.update(a.decode(s.slice(2),Yy));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Yy))}else if(tb(s)){let a=new TextDecoder("utf-16be");for(n.update(a.decode(s.slice(2),Yy));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Yy))}else if(Zy(s))for(n.update(s.slice(3));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else for(n.update(s);o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));return n.digest("hex")}finally{await i?.close()}};bo.shaHashFile=zre;var Zy=t=>t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191,eb=t=>t.length>=2&&t[0]===255&&t[1]===254,tb=t=>t.length>=2&&t[0]===254&&t[1]===255,Xre=t=>Zy(t)?eO(t.slice(3)):eb(t)?t.slice(2):tb(t)?t.slice(2).swap16():eO(t),Jre=t=>Zy(t)?t.slice(3):eb(t)?new TextEncoder().encode(new TextDecoder("utf-16le").decode(t.slice(2))):tb(t)?new TextEncoder().encode(new TextDecoder("utf-16be").decode(t.slice(2))):t,eO=t=>Buffer.from(t.toString("utf8"),"utf16le")});var pb=y(Jn=>{"use strict";Jn.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;Jn.find=(t,e)=>t.nodes.find(r=>r.type===e);Jn.exceedsLimit=(t,e,r=1,n)=>n===!1||!Jn.isInteger(t)||!Jn.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=n;Jn.escapeNode=(t,e=0,r)=>{let n=t.nodes[e];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};Jn.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);Jn.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;Jn.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;Jn.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);Jn.flatten=(...t)=>{let e=[],r=n=>{for(let i=0;i<n.length;i++){let o=n[i];Array.isArray(o)?r(o,e):o!==void 0&&e.push(o)}return e};return r(t),e}});var fb=y((rDe,xO)=>{"use strict";var PO=pb();xO.exports=(t,e={})=>{let r=(n,i={})=>{let o=e.escapeInvalid&&PO.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(o||s)&&PO.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(t)}});var TO=y((nDe,LO)=>{"use strict";LO.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var UO=y((iDe,NO)=>{"use strict";var $O=TO(),Gu=(t,e,r)=>{if($O(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if($O(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),o=String(n.shorthand),s=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+i+o+s+a;if(Gu.cache.hasOwnProperty(u))return Gu.cache[u].result;let c=Math.min(t,e),l=Math.max(t,e);if(Math.abs(c-l)===1){let H=t+"|"+e;return n.capture?`(${H})`:n.wrap===!1?H:`(?:${H})`}let p=BO(t)||BO(e),f={min:t,max:e,a:c,b:l},m=[],h=[];if(p&&(f.isPadded=p,f.maxLen=String(f.max).length),c<0){let H=l<0?Math.abs(l):1;h=RO(H,Math.abs(c),f,n),c=f.a=0}return l>=0&&(m=RO(c,l,f,n)),f.negatives=h,f.positives=m,f.result=gne(h,m,n),n.capture===!0?f.result=`(${f.result})`:n.wrap!==!1&&m.length+h.length>1&&(f.result=`(?:${f.result})`),Gu.cache[u]=f,f.result};function gne(t,e,r){let n=PS(t,e,"-",!1,r)||[],i=PS(e,t,"",!1,r)||[],o=PS(t,e,"-?",!0,r)||[];return n.concat(o).concat(i).join("|")}function Hne(t,e){let r=1,n=1,i=kO(t,r),o=new Set([e]);for(;t<=i&&i<=e;)o.add(i),r+=1,i=kO(t,r);for(i=OO(e+1,n)-1;t<i&&i<=e;)o.add(i),n+=1,i=OO(e+1,n)-1;return o=[...o],o.sort(vne),o}function yne(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=bne(t,e),i=n.length,o="",s=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?o+=u:u!=="0"||c!=="9"?o+=wne(u,c,r):s++}return s&&(o+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function RO(t,e,r,n){let i=Hne(t,e),o=[],s=t,a;for(let u=0;u<i.length;u++){let c=i[u],l=yne(String(s),String(c),n),p="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+FO(a.count),s=c+1;continue}r.isPadded&&(p=_ne(c,r,n)),l.string=p+l.pattern+FO(l.count),o.push(l),s=c+1,a=l}return o}function PS(t,e,r,n,i){let o=[];for(let s of t){let{string:a}=s;!n&&!MO(e,"string",a)&&o.push(r+a),n&&MO(e,"string",a)&&o.push(r+a)}return o}function bne(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function vne(t,e){return t>e?1:e>t?-1:0}function MO(t,e,r){return t.some(n=>n[e]===r)}function kO(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function OO(t,e){return t-t%Math.pow(10,e)}function FO(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function wne(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function BO(t){return/^-?(0+)\d/.test(t)}function _ne(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}Gu.cache={};Gu.clearCache=()=>Gu.cache={};NO.exports=Gu});var TS=y((oDe,XO)=>{"use strict";var Ane=require("util"),WO=UO(),jO=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Ine=t=>e=>t===!0?Number(e):String(e),xS=t=>typeof t=="number"||typeof t=="string"&&t!=="",xh=t=>Number.isInteger(+t),LS=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Sne=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,Ene=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},qO=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Dne=(t,e)=>{t.negatives.sort((s,a)=>s<a?-1:s>a?1:0),t.positives.sort((s,a)=>s<a?-1:s>a?1:0);let r=e.capture?"":"?:",n="",i="",o;return t.positives.length&&(n=t.positives.join("|")),t.negatives.length&&(i=`-(${r}${t.negatives.join("|")})`),n&&i?o=`${n}|${i}`:o=n||i,e.wrap?`(${r}${o})`:o},VO=(t,e,r,n)=>{if(r)return WO(t,e,{wrap:!1,...n});let i=String.fromCharCode(t);if(t===e)return i;let o=String.fromCharCode(e);return`[${i}-${o}]`},GO=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${t.join("|")})`:t.join("|")}return WO(t,e,r)},KO=(...t)=>new RangeError("Invalid range arguments: "+Ane.inspect(...t)),zO=(t,e,r)=>{if(r.strictRanges===!0)throw KO([t,e]);return[]},Cne=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Pne=(t,e,r=1,n={})=>{let i=Number(t),o=Number(e);if(!Number.isInteger(i)||!Number.isInteger(o)){if(n.strictRanges===!0)throw KO([t,e]);return[]}i===0&&(i=0),o===0&&(o=0);let s=i>o,a=String(t),u=String(e),c=String(r);r=Math.max(Math.abs(r),1);let l=LS(a)||LS(u)||LS(c),p=l?Math.max(a.length,u.length,c.length):0,f=l===!1&&Sne(t,e,n)===!1,m=n.transform||Ine(f);if(n.toRegex&&r===1)return VO(qO(t,p),qO(e,p),!0,n);let h={negatives:[],positives:[]},H=$=>h[$<0?"negatives":"positives"].push(Math.abs($)),b=[],_=0;for(;s?i>=o:i<=o;)n.toRegex===!0&&r>1?H(i):b.push(Ene(m(i,_),p,f)),i=s?i-r:i+r,_++;return n.toRegex===!0?r>1?Dne(h,n):GO(b,null,{wrap:!1,...n}):b},xne=(t,e,r=1,n={})=>{if(!xh(t)&&t.length>1||!xh(e)&&e.length>1)return zO(t,e,n);let i=n.transform||(f=>String.fromCharCode(f)),o=`${t}`.charCodeAt(0),s=`${e}`.charCodeAt(0),a=o>s,u=Math.min(o,s),c=Math.max(o,s);if(n.toRegex&&r===1)return VO(u,c,!1,n);let l=[],p=0;for(;a?o>=s:o<=s;)l.push(i(o,p)),o=a?o-r:o+r,p++;return n.toRegex===!0?GO(l,null,{wrap:!1,options:n}):l},db=(t,e,r,n={})=>{if(e==null&&xS(t))return[t];if(!xS(t)||!xS(e))return zO(t,e,n);if(typeof r=="function")return db(t,e,1,{transform:r});if(jO(r))return db(t,e,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,xh(r)?xh(t)&&xh(e)?Pne(t,e,r,i):xne(t,e,Math.max(Math.abs(r),1),i):r!=null&&!jO(r)?Cne(r,i):db(t,e,1,r)};XO.exports=db});var QO=y((sDe,YO)=>{"use strict";var Lne=TS(),JO=pb(),Tne=(t,e={})=>{let r=(n,i={})=>{let o=JO.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a=o===!0||s===!0,u=e.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=JO.reduce(n.nodes),p=Lne(...l,{...e,wrap:!1,toRegex:!0});if(p.length!==0)return l.length>1&&p.length>1?`(${p})`:p}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(t)};YO.exports=Tne});var tF=y((aDe,eF)=>{"use strict";var $ne=TS(),ZO=fb(),Xl=pb(),Ku=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Xl.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let o of i)n.push(Ku(o,e,r));else for(let o of e)r===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?Ku(i,o,r):i+o);return Xl.flatten(n)},Rne=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,o={})=>{i.queue=[];let s=o,a=o.queue;for(;s.type!=="brace"&&s.type!=="root"&&s.parent;)s=s.parent,a=s.queue;if(i.invalid||i.dollar){a.push(Ku(a.pop(),ZO(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(Ku(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let p=Xl.reduce(i.nodes);if(Xl.exceedsLimit(...p,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=$ne(...p,e);f.length===0&&(f=ZO(i,e)),a.push(Ku(a.pop(),f)),i.nodes=[];return}let u=Xl.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let p=0;p<i.nodes.length;p++){let f=i.nodes[p];if(f.type==="comma"&&i.type==="brace"){p===1&&c.push(""),c.push("");continue}if(f.type==="close"){a.push(Ku(a.pop(),c,u));continue}if(f.value&&f.type!=="open"){c.push(Ku(c.pop(),f.value));continue}f.nodes&&n(f,i)}return c};return Xl.flatten(n(t))};eF.exports=Rne});var nF=y((uDe,rF)=>{"use strict";rF.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var uF=y((cDe,aF)=>{"use strict";var Mne=fb(),{MAX_LENGTH:iF,CHAR_BACKSLASH:$S,CHAR_BACKTICK:kne,CHAR_COMMA:One,CHAR_DOT:Fne,CHAR_LEFT_PARENTHESES:Bne,CHAR_RIGHT_PARENTHESES:Nne,CHAR_LEFT_CURLY_BRACE:Une,CHAR_RIGHT_CURLY_BRACE:jne,CHAR_LEFT_SQUARE_BRACKET:oF,CHAR_RIGHT_SQUARE_BRACKET:sF,CHAR_DOUBLE_QUOTE:qne,CHAR_SINGLE_QUOTE:Wne,CHAR_NO_BREAK_SPACE:Vne,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Gne}=nF(),Kne=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},n=typeof r.maxLength=="number"?Math.min(iF,r.maxLength):iF;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let i={type:"root",input:t,nodes:[]},o=[i],s=i,a=i,u=0,c=t.length,l=0,p=0,f,m={},h=()=>t[l++],H=b=>{if(b.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&b.type==="text"){a.value+=b.value;return}return s.nodes.push(b),b.parent=s,b.prev=a,a=b,b};for(H({type:"bos"});l<c;)if(s=o[o.length-1],f=h(),!(f===Gne||f===Vne)){if(f===$S){H({type:"text",value:(e.keepEscaping?f:"")+h()});continue}if(f===sF){H({type:"text",value:"\\"+f});continue}if(f===oF){u++;let b=!0,_;for(;l<c&&(_=h());){if(f+=_,_===oF){u++;continue}if(_===$S){f+=h();continue}if(_===sF&&(u--,u===0))break}H({type:"text",value:f});continue}if(f===Bne){s=H({type:"paren",nodes:[]}),o.push(s),H({type:"text",value:f});continue}if(f===Nne){if(s.type!=="paren"){H({type:"text",value:f});continue}s=o.pop(),H({type:"text",value:f}),s=o[o.length-1];continue}if(f===qne||f===Wne||f===kne){let b=f,_;for(e.keepQuotes!==!0&&(f="");l<c&&(_=h());){if(_===$S){f+=_+h();continue}if(_===b){e.keepQuotes===!0&&(f+=_);break}f+=_}H({type:"text",value:f});continue}if(f===Une){p++;let _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||s.dollar===!0,depth:p,commas:0,ranges:0,nodes:[]};s=H(_),o.push(s),H({type:"open",value:f});continue}if(f===jne){if(s.type!=="brace"){H({type:"text",value:f});continue}let b="close";s=o.pop(),s.close=!0,H({type:b,value:f}),p--,s=o[o.length-1];continue}if(f===One&&p>0){if(s.ranges>0){s.ranges=0;let b=s.nodes.shift();s.nodes=[b,{type:"text",value:Mne(s)}]}H({type:"comma",value:f}),s.commas++;continue}if(f===Fne&&p>0&&s.commas===0){let b=s.nodes;if(p===0||b.length===0){H({type:"text",value:f});continue}if(a.type==="dot"){if(s.range=[],a.value+=f,a.type="range",s.nodes.length!==3&&s.nodes.length!==5){s.invalid=!0,s.ranges=0,a.type="text";continue}s.ranges++,s.args=[];continue}if(a.type==="range"){b.pop();let _=b[b.length-1];_.value+=a.value+f,a=_,s.ranges--;continue}H({type:"dot",value:f});continue}H({type:"text",value:f})}do if(s=o.pop(),s.type!=="root"){s.nodes.forEach($=>{$.nodes||($.type==="open"&&($.isOpen=!0),$.type==="close"&&($.isClose=!0),$.nodes||($.type="text"),$.invalid=!0)});let b=o[o.length-1],_=b.nodes.indexOf(s);b.nodes.splice(_,1,...s.nodes)}while(o.length>0);return H({type:"eos"}),i};aF.exports=Kne});var pF=y((lDe,lF)=>{"use strict";var cF=fb(),zne=QO(),Xne=tF(),Jne=uF(),En=(t,e={})=>{let r=[];if(Array.isArray(t))for(let n of t){let i=En.create(n,e);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(En.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};En.parse=(t,e={})=>Jne(t,e);En.stringify=(t,e={})=>cF(typeof t=="string"?En.parse(t,e):t,e);En.compile=(t,e={})=>(typeof t=="string"&&(t=En.parse(t,e)),zne(t,e));En.expand=(t,e={})=>{typeof t=="string"&&(t=En.parse(t,e));let r=Xne(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};En.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?En.compile(t,e):En.expand(t,e);lF.exports=En});var Lh=y((pDe,gF)=>{"use strict";var Yne=require("path"),vo="\\\\/",fF=`[^${vo}]`,as="\\.",Qne="\\+",Zne="\\?",hb="\\/",eie="(?=.)",dF="[^/]",RS=`(?:${hb}|$)`,hF=`(?:^|${hb})`,MS=`${as}{1,2}${RS}`,tie=`(?!${as})`,rie=`(?!${hF}${MS})`,nie=`(?!${as}{0,1}${RS})`,iie=`(?!${MS})`,oie=`[^.${hb}]`,sie=`${dF}*?`,mF={DOT_LITERAL:as,PLUS_LITERAL:Qne,QMARK_LITERAL:Zne,SLASH_LITERAL:hb,ONE_CHAR:eie,QMARK:dF,END_ANCHOR:RS,DOTS_SLASH:MS,NO_DOT:tie,NO_DOTS:rie,NO_DOT_SLASH:nie,NO_DOTS_SLASH:iie,QMARK_NO_DOT:oie,STAR:sie,START_ANCHOR:hF},aie={...mF,SLASH_LITERAL:`[${vo}]`,QMARK:fF,STAR:`${fF}*?`,DOTS_SLASH:`${as}{1,2}(?:[${vo}]|$)`,NO_DOT:`(?!${as})`,NO_DOTS:`(?!(?:^|[${vo}])${as}{1,2}(?:[${vo}]|$))`,NO_DOT_SLASH:`(?!${as}{0,1}(?:[${vo}]|$))`,NO_DOTS_SLASH:`(?!${as}{1,2}(?:[${vo}]|$))`,QMARK_NO_DOT:`[^.${vo}]`,START_ANCHOR:`(?:^|[${vo}])`,END_ANCHOR:`(?:[${vo}]|$)`},uie={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};gF.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:uie,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Yne.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?aie:mF}}});var Th=y(un=>{"use strict";var cie=require("path"),lie=process.platform==="win32",{REGEX_BACKSLASH:pie,REGEX_REMOVE_BACKSLASH:fie,REGEX_SPECIAL_CHARS:die,REGEX_SPECIAL_CHARS_GLOBAL:hie}=Lh();un.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);un.hasRegexChars=t=>die.test(t);un.isRegexChar=t=>t.length===1&&un.hasRegexChars(t);un.escapeRegex=t=>t.replace(hie,"\\$1");un.toPosixSlashes=t=>t.replace(pie,"/");un.removeBackslashes=t=>t.replace(fie,e=>e==="\\"?"":e);un.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};un.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:lie===!0||cie.sep==="\\";un.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?un.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};un.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};un.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var IF=y((dDe,AF)=>{"use strict";var HF=Th(),{CHAR_ASTERISK:kS,CHAR_AT:mie,CHAR_BACKWARD_SLASH:$h,CHAR_COMMA:gie,CHAR_DOT:OS,CHAR_EXCLAMATION_MARK:FS,CHAR_FORWARD_SLASH:_F,CHAR_LEFT_CURLY_BRACE:BS,CHAR_LEFT_PARENTHESES:NS,CHAR_LEFT_SQUARE_BRACKET:Hie,CHAR_PLUS:yie,CHAR_QUESTION_MARK:yF,CHAR_RIGHT_CURLY_BRACE:bie,CHAR_RIGHT_PARENTHESES:bF,CHAR_RIGHT_SQUARE_BRACKET:vie}=Lh(),vF=t=>t===_F||t===$h,wF=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},wie=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],u=t,c=-1,l=0,p=0,f=!1,m=!1,h=!1,H=!1,b=!1,_=!1,$=!1,U=!1,D=!1,P=!1,j=0,N,M,L={value:"",depth:0,isGlob:!1},F=()=>c>=n,S=()=>u.charCodeAt(c+1),k=()=>(N=M,u.charCodeAt(++c));for(;c<n;){M=k();let Z;if(M===$h){$=L.backslashes=!0,M=k(),M===BS&&(_=!0);continue}if(_===!0||M===BS){for(j++;F()!==!0&&(M=k());){if(M===$h){$=L.backslashes=!0,k();continue}if(M===BS){j++;continue}if(_!==!0&&M===OS&&(M=k())===OS){if(f=L.isBrace=!0,h=L.isGlob=!0,P=!0,i===!0)continue;break}if(_!==!0&&M===gie){if(f=L.isBrace=!0,h=L.isGlob=!0,P=!0,i===!0)continue;break}if(M===bie&&(j--,j===0)){_=!1,f=L.isBrace=!0,P=!0;break}}if(i===!0)continue;break}if(M===_F){if(o.push(c),s.push(L),L={value:"",depth:0,isGlob:!1},P===!0)continue;if(N===OS&&c===l+1){l+=2;continue}p=c+1;continue}if(r.noext!==!0&&(M===yie||M===mie||M===kS||M===yF||M===FS)===!0&&S()===NS){if(h=L.isGlob=!0,H=L.isExtglob=!0,P=!0,M===FS&&c===l&&(D=!0),i===!0){for(;F()!==!0&&(M=k());){if(M===$h){$=L.backslashes=!0,M=k();continue}if(M===bF){h=L.isGlob=!0,P=!0;break}}continue}break}if(M===kS){if(N===kS&&(b=L.isGlobstar=!0),h=L.isGlob=!0,P=!0,i===!0)continue;break}if(M===yF){if(h=L.isGlob=!0,P=!0,i===!0)continue;break}if(M===Hie){for(;F()!==!0&&(Z=k());){if(Z===$h){$=L.backslashes=!0,k();continue}if(Z===vie){m=L.isBracket=!0,h=L.isGlob=!0,P=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&M===FS&&c===l){U=L.negated=!0,l++;continue}if(r.noparen!==!0&&M===NS){if(h=L.isGlob=!0,i===!0){for(;F()!==!0&&(M=k());){if(M===NS){$=L.backslashes=!0,M=k();continue}if(M===bF){P=!0;break}}continue}break}if(h===!0){if(P=!0,i===!0)continue;break}}r.noext===!0&&(H=!1,h=!1);let O=u,K="",C="";l>0&&(K=u.slice(0,l),u=u.slice(l),p-=l),O&&h===!0&&p>0?(O=u.slice(0,p),C=u.slice(p)):h===!0?(O="",C=u):O=u,O&&O!==""&&O!=="/"&&O!==u&&vF(O.charCodeAt(O.length-1))&&(O=O.slice(0,-1)),r.unescape===!0&&(C&&(C=HF.removeBackslashes(C)),O&&$===!0&&(O=HF.removeBackslashes(O)));let x={prefix:K,input:t,start:l,base:O,glob:C,isBrace:f,isBracket:m,isGlob:h,isExtglob:H,isGlobstar:b,negated:U,negatedExtglob:D};if(r.tokens===!0&&(x.maxDepth=0,vF(M)||s.push(L),x.tokens=s),r.parts===!0||r.tokens===!0){let Z;for(let re=0;re<o.length;re++){let ne=Z?Z+1:l,X=o[re],te=t.slice(ne,X);r.tokens&&(re===0&&l!==0?(s[re].isPrefix=!0,s[re].value=K):s[re].value=te,wF(s[re]),x.maxDepth+=s[re].depth),(re!==0||te!=="")&&a.push(te),Z=X}if(Z&&Z+1<t.length){let re=t.slice(Z+1);a.push(re),r.tokens&&(s[s.length-1].value=re,wF(s[s.length-1]),x.maxDepth+=s[s.length-1].depth)}x.slashes=o,x.parts=a}return x};AF.exports=wie});var DF=y((hDe,EF)=>{"use strict";var mb=Lh(),Dn=Th(),{MAX_LENGTH:gb,POSIX_REGEX_SOURCE:_ie,REGEX_NON_SPECIAL_CHARS:Aie,REGEX_SPECIAL_CHARS_BACKREF:Iie,REPLACEMENTS:SF}=mb,Sie=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>Dn.escapeRegex(i)).join("..")}return r},Jl=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,US=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=SF[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(gb,r.maxLength):gb,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",u=Dn.isWindows(e),c=mb.globChars(u),l=mb.extglobChars(c),{DOT_LITERAL:p,PLUS_LITERAL:f,SLASH_LITERAL:m,ONE_CHAR:h,DOTS_SLASH:H,NO_DOT:b,NO_DOT_SLASH:_,NO_DOTS_SLASH:$,QMARK:U,QMARK_NO_DOT:D,STAR:P,START_ANCHOR:j}=c,N=Q=>`(${a}(?:(?!${j}${Q.dot?H:p}).)*?)`,M=r.dot?"":b,L=r.dot?U:D,F=r.bash===!0?N(r):P;r.capture&&(F=`(${F})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let S={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=Dn.removePrefix(t,S),i=t.length;let k=[],O=[],K=[],C=o,x,Z=()=>S.index===i-1,re=S.peek=(Q=1)=>t[S.index+Q],ne=S.advance=()=>t[++S.index]||"",X=()=>t.slice(S.index+1),te=(Q="",ve=0)=>{S.consumed+=Q,S.index+=ve},ue=Q=>{S.output+=Q.output!=null?Q.output:Q.value,te(Q.value)},se=()=>{let Q=1;for(;re()==="!"&&(re(2)!=="("||re(3)==="?");)ne(),S.start++,Q++;return Q%2===0?!1:(S.negated=!0,S.start++,!0)},de=Q=>{S[Q]++,K.push(Q)},nt=Q=>{S[Q]--,K.pop()},me=Q=>{if(C.type==="globstar"){let ve=S.braces>0&&(Q.type==="comma"||Q.type==="brace"),Y=Q.extglob===!0||k.length&&(Q.type==="pipe"||Q.type==="paren");Q.type!=="slash"&&Q.type!=="paren"&&!ve&&!Y&&(S.output=S.output.slice(0,-C.output.length),C.type="star",C.value="*",C.output=F,S.output+=C.output)}if(k.length&&Q.type!=="paren"&&(k[k.length-1].inner+=Q.value),(Q.value||Q.output)&&ue(Q),C&&C.type==="text"&&Q.type==="text"){C.value+=Q.value,C.output=(C.output||"")+Q.value;return}Q.prev=C,s.push(Q),C=Q},kt=(Q,ve)=>{let Y={...l[ve],conditions:1,inner:""};Y.prev=C,Y.parens=S.parens,Y.output=S.output;let ye=(r.capture?"(":"")+Y.open;de("parens"),me({type:Q,value:ve,output:S.output?"":h}),me({type:"paren",extglob:!0,value:ne(),output:ye}),k.push(Y)},Pr=Q=>{let ve=Q.close+(r.capture?")":""),Y;if(Q.type==="negate"){let ye=F;if(Q.inner&&Q.inner.length>1&&Q.inner.includes("/")&&(ye=N(r)),(ye!==F||Z()||/^\)+$/.test(X()))&&(ve=Q.close=`)$))${ye}`),Q.inner.includes("*")&&(Y=X())&&/^\.[^\\/.]+$/.test(Y)){let Ne=US(Y,{...e,fastpaths:!1}).output;ve=Q.close=`)${Ne})${ye})`}Q.prev.type==="bos"&&(S.negatedExtglob=!0)}me({type:"paren",extglob:!0,value:x,output:ve}),nt("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let Q=!1,ve=t.replace(Iie,(Y,ye,Ne,dt,yt,Ws)=>dt==="\\"?(Q=!0,Y):dt==="?"?ye?ye+dt+(yt?U.repeat(yt.length):""):Ws===0?L+(yt?U.repeat(yt.length):""):U.repeat(Ne.length):dt==="."?p.repeat(Ne.length):dt==="*"?ye?ye+dt+(yt?F:""):F:ye?Y:`\\${Y}`);return Q===!0&&(r.unescape===!0?ve=ve.replace(/\\/g,""):ve=ve.replace(/\\+/g,Y=>Y.length%2===0?"\\\\":Y?"\\":"")),ve===t&&r.contains===!0?(S.output=t,S):(S.output=Dn.wrapOutput(ve,S,e),S)}for(;!Z();){if(x=ne(),x==="\0")continue;if(x==="\\"){let Y=re();if(Y==="/"&&r.bash!==!0||Y==="."||Y===";")continue;if(!Y){x+="\\",me({type:"text",value:x});continue}let ye=/^\\+/.exec(X()),Ne=0;if(ye&&ye[0].length>2&&(Ne=ye[0].length,S.index+=Ne,Ne%2!==0&&(x+="\\")),r.unescape===!0?x=ne():x+=ne(),S.brackets===0){me({type:"text",value:x});continue}}if(S.brackets>0&&(x!=="]"||C.value==="["||C.value==="[^")){if(r.posix!==!1&&x===":"){let Y=C.value.slice(1);if(Y.includes("[")&&(C.posix=!0,Y.includes(":"))){let ye=C.value.lastIndexOf("["),Ne=C.value.slice(0,ye),dt=C.value.slice(ye+2),yt=_ie[dt];if(yt){C.value=Ne+yt,S.backtrack=!0,ne(),!o.output&&s.indexOf(C)===1&&(o.output=h);continue}}}(x==="["&&re()!==":"||x==="-"&&re()==="]")&&(x=`\\${x}`),x==="]"&&(C.value==="["||C.value==="[^")&&(x=`\\${x}`),r.posix===!0&&x==="!"&&C.value==="["&&(x="^"),C.value+=x,ue({value:x});continue}if(S.quotes===1&&x!=='"'){x=Dn.escapeRegex(x),C.value+=x,ue({value:x});continue}if(x==='"'){S.quotes=S.quotes===1?0:1,r.keepQuotes===!0&&me({type:"text",value:x});continue}if(x==="("){de("parens"),me({type:"paren",value:x});continue}if(x===")"){if(S.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Jl("opening","("));let Y=k[k.length-1];if(Y&&S.parens===Y.parens+1){Pr(k.pop());continue}me({type:"paren",value:x,output:S.parens?")":"\\)"}),nt("parens");continue}if(x==="["){if(r.nobracket===!0||!X().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Jl("closing","]"));x=`\\${x}`}else de("brackets");me({type:"bracket",value:x});continue}if(x==="]"){if(r.nobracket===!0||C&&C.type==="bracket"&&C.value.length===1){me({type:"text",value:x,output:`\\${x}`});continue}if(S.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Jl("opening","["));me({type:"text",value:x,output:`\\${x}`});continue}nt("brackets");let Y=C.value.slice(1);if(C.posix!==!0&&Y[0]==="^"&&!Y.includes("/")&&(x=`/${x}`),C.value+=x,ue({value:x}),r.literalBrackets===!1||Dn.hasRegexChars(Y))continue;let ye=Dn.escapeRegex(C.value);if(S.output=S.output.slice(0,-C.value.length),r.literalBrackets===!0){S.output+=ye,C.value=ye;continue}C.value=`(${a}${ye}|${C.value})`,S.output+=C.value;continue}if(x==="{"&&r.nobrace!==!0){de("braces");let Y={type:"brace",value:x,output:"(",outputIndex:S.output.length,tokensIndex:S.tokens.length};O.push(Y),me(Y);continue}if(x==="}"){let Y=O[O.length-1];if(r.nobrace===!0||!Y){me({type:"text",value:x,output:x});continue}let ye=")";if(Y.dots===!0){let Ne=s.slice(),dt=[];for(let yt=Ne.length-1;yt>=0&&(s.pop(),Ne[yt].type!=="brace");yt--)Ne[yt].type!=="dots"&&dt.unshift(Ne[yt].value);ye=Sie(dt,r),S.backtrack=!0}if(Y.comma!==!0&&Y.dots!==!0){let Ne=S.output.slice(0,Y.outputIndex),dt=S.tokens.slice(Y.tokensIndex);Y.value=Y.output="\\{",x=ye="\\}",S.output=Ne;for(let yt of dt)S.output+=yt.output||yt.value}me({type:"brace",value:x,output:ye}),nt("braces"),O.pop();continue}if(x==="|"){k.length>0&&k[k.length-1].conditions++,me({type:"text",value:x});continue}if(x===","){let Y=x,ye=O[O.length-1];ye&&K[K.length-1]==="braces"&&(ye.comma=!0,Y="|"),me({type:"comma",value:x,output:Y});continue}if(x==="/"){if(C.type==="dot"&&S.index===S.start+1){S.start=S.index+1,S.consumed="",S.output="",s.pop(),C=o;continue}me({type:"slash",value:x,output:m});continue}if(x==="."){if(S.braces>0&&C.type==="dot"){C.value==="."&&(C.output=p);let Y=O[O.length-1];C.type="dots",C.output+=x,C.value+=x,Y.dots=!0;continue}if(S.braces+S.parens===0&&C.type!=="bos"&&C.type!=="slash"){me({type:"text",value:x,output:p});continue}me({type:"dot",value:x,output:p});continue}if(x==="?"){if(!(C&&C.value==="(")&&r.noextglob!==!0&&re()==="("&&re(2)!=="?"){kt("qmark",x);continue}if(C&&C.type==="paren"){let ye=re(),Ne=x;if(ye==="<"&&!Dn.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(C.value==="("&&!/[!=<:]/.test(ye)||ye==="<"&&!/<([!=]|\w+>)/.test(X()))&&(Ne=`\\${x}`),me({type:"text",value:x,output:Ne});continue}if(r.dot!==!0&&(C.type==="slash"||C.type==="bos")){me({type:"qmark",value:x,output:D});continue}me({type:"qmark",value:x,output:U});continue}if(x==="!"){if(r.noextglob!==!0&&re()==="("&&(re(2)!=="?"||!/[!=<:]/.test(re(3)))){kt("negate",x);continue}if(r.nonegate!==!0&&S.index===0){se();continue}}if(x==="+"){if(r.noextglob!==!0&&re()==="("&&re(2)!=="?"){kt("plus",x);continue}if(C&&C.value==="("||r.regex===!1){me({type:"plus",value:x,output:f});continue}if(C&&(C.type==="bracket"||C.type==="paren"||C.type==="brace")||S.parens>0){me({type:"plus",value:x});continue}me({type:"plus",value:f});continue}if(x==="@"){if(r.noextglob!==!0&&re()==="("&&re(2)!=="?"){me({type:"at",extglob:!0,value:x,output:""});continue}me({type:"text",value:x});continue}if(x!=="*"){(x==="$"||x==="^")&&(x=`\\${x}`);let Y=Aie.exec(X());Y&&(x+=Y[0],S.index+=Y[0].length),me({type:"text",value:x});continue}if(C&&(C.type==="globstar"||C.star===!0)){C.type="star",C.star=!0,C.value+=x,C.output=F,S.backtrack=!0,S.globstar=!0,te(x);continue}let Q=X();if(r.noextglob!==!0&&/^\([^?]/.test(Q)){kt("star",x);continue}if(C.type==="star"){if(r.noglobstar===!0){te(x);continue}let Y=C.prev,ye=Y.prev,Ne=Y.type==="slash"||Y.type==="bos",dt=ye&&(ye.type==="star"||ye.type==="globstar");if(r.bash===!0&&(!Ne||Q[0]&&Q[0]!=="/")){me({type:"star",value:x,output:""});continue}let yt=S.braces>0&&(Y.type==="comma"||Y.type==="brace"),Ws=k.length&&(Y.type==="pipe"||Y.type==="paren");if(!Ne&&Y.type!=="paren"&&!yt&&!Ws){me({type:"star",value:x,output:""});continue}for(;Q.slice(0,3)==="/**";){let Vs=t[S.index+4];if(Vs&&Vs!=="/")break;Q=Q.slice(3),te("/**",3)}if(Y.type==="bos"&&Z()){C.type="globstar",C.value+=x,C.output=N(r),S.output=C.output,S.globstar=!0,te(x);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&!dt&&Z()){S.output=S.output.slice(0,-(Y.output+C.output).length),Y.output=`(?:${Y.output}`,C.type="globstar",C.output=N(r)+(r.strictSlashes?")":"|$)"),C.value+=x,S.globstar=!0,S.output+=Y.output+C.output,te(x);continue}if(Y.type==="slash"&&Y.prev.type!=="bos"&&Q[0]==="/"){let Vs=Q[1]!==void 0?"|$":"";S.output=S.output.slice(0,-(Y.output+C.output).length),Y.output=`(?:${Y.output}`,C.type="globstar",C.output=`${N(r)}${m}|${m}${Vs})`,C.value+=x,S.output+=Y.output+C.output,S.globstar=!0,te(x+ne()),me({type:"slash",value:"/",output:""});continue}if(Y.type==="bos"&&Q[0]==="/"){C.type="globstar",C.value+=x,C.output=`(?:^|${m}|${N(r)}${m})`,S.output=C.output,S.globstar=!0,te(x+ne()),me({type:"slash",value:"/",output:""});continue}S.output=S.output.slice(0,-C.output.length),C.type="globstar",C.output=N(r),C.value+=x,S.output+=C.output,S.globstar=!0,te(x);continue}let ve={type:"star",value:x,output:F};if(r.bash===!0){ve.output=".*?",(C.type==="bos"||C.type==="slash")&&(ve.output=M+ve.output),me(ve);continue}if(C&&(C.type==="bracket"||C.type==="paren")&&r.regex===!0){ve.output=x,me(ve);continue}(S.index===S.start||C.type==="slash"||C.type==="dot")&&(C.type==="dot"?(S.output+=_,C.output+=_):r.dot===!0?(S.output+=$,C.output+=$):(S.output+=M,C.output+=M),re()!=="*"&&(S.output+=h,C.output+=h)),me(ve)}for(;S.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jl("closing","]"));S.output=Dn.escapeLast(S.output,"["),nt("brackets")}for(;S.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jl("closing",")"));S.output=Dn.escapeLast(S.output,"("),nt("parens")}for(;S.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Jl("closing","}"));S.output=Dn.escapeLast(S.output,"{"),nt("braces")}if(r.strictSlashes!==!0&&(C.type==="star"||C.type==="bracket")&&me({type:"maybe_slash",value:"",output:`${m}?`}),S.backtrack===!0){S.output="";for(let Q of S.tokens)S.output+=Q.output!=null?Q.output:Q.value,Q.suffix&&(S.output+=Q.suffix)}return S};US.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(gb,r.maxLength):gb,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=SF[t]||t;let o=Dn.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:p,NO_DOTS_SLASH:f,STAR:m,START_ANCHOR:h}=mb.globChars(o),H=r.dot?p:l,b=r.dot?f:l,_=r.capture?"":"?:",$={negated:!1,prefix:""},U=r.bash===!0?".*?":m;r.capture&&(U=`(${U})`);let D=M=>M.noglobstar===!0?U:`(${_}(?:(?!${h}${M.dot?c:s}).)*?)`,P=M=>{switch(M){case"*":return`${H}${u}${U}`;case".*":return`${s}${u}${U}`;case"*.*":return`${H}${U}${s}${u}${U}`;case"*/*":return`${H}${U}${a}${u}${b}${U}`;case"**":return H+D(r);case"**/*":return`(?:${H}${D(r)}${a})?${b}${u}${U}`;case"**/*.*":return`(?:${H}${D(r)}${a})?${b}${U}${s}${u}${U}`;case"**/.*":return`(?:${H}${D(r)}${a})?${s}${u}${U}`;default:{let L=/^(.*?)\.(\w+)$/.exec(M);if(!L)return;let F=P(L[1]);return F?F+s+L[2]:void 0}}},j=Dn.removePrefix(t,$),N=P(j);return N&&r.strictSlashes!==!0&&(N+=`${a}?`),N};EF.exports=US});var PF=y((mDe,CF)=>{"use strict";var Eie=require("path"),Die=IF(),jS=DF(),qS=Th(),Cie=Lh(),Pie=t=>t&&typeof t=="object"&&!Array.isArray(t),Rt=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(f=>Rt(f,e,r));return f=>{for(let m of l){let h=m(f);if(h)return h}return!1}}let n=Pie(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=qS.isWindows(e),s=n?Rt.compileRe(t,e):Rt.makeRe(t,e,!1,!0),a=s.state;delete s.state;let u=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};u=Rt(i.ignore,l,r)}let c=(l,p=!1)=>{let{isMatch:f,match:m,output:h}=Rt.test(l,s,e,{glob:t,posix:o}),H={glob:t,state:a,regex:s,posix:o,input:l,output:h,match:m,isMatch:f};return typeof i.onResult=="function"&&i.onResult(H),f===!1?(H.isMatch=!1,p?H:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(H),H.isMatch=!1,p?H:!1):(typeof i.onMatch=="function"&&i.onMatch(H),p?H:!0)};return r&&(c.state=a),c};Rt.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?qS.toPosixSlashes:null),a=t===n,u=a&&s?s(t):t;return a===!1&&(u=s?s(t):t,a=u===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=Rt.matchBase(t,e,r,i):a=e.exec(u)),{isMatch:Boolean(a),match:a,output:u}};Rt.matchBase=(t,e,r,n=qS.isWindows(r))=>(e instanceof RegExp?e:Rt.makeRe(e,r)).test(Eie.basename(t));Rt.isMatch=(t,e,r)=>Rt(e,r)(t);Rt.parse=(t,e)=>Array.isArray(t)?t.map(r=>Rt.parse(r,e)):jS(t,{...e,fastpaths:!1});Rt.scan=(t,e)=>Die(t,e);Rt.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let u=Rt.toRegex(a,e);return n===!0&&(u.state=t),u};Rt.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=jS.fastpaths(t,e)),i.output||(i=jS(t,e)),Rt.compileRe(i,e,r,n)};Rt.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};Rt.constants=Cie;CF.exports=Rt});var LF=y((gDe,xF)=>{"use strict";xF.exports=PF()});var Rh=y((HDe,MF)=>{"use strict";var $F=require("util"),RF=pF(),wo=LF(),WS=Th(),TF=t=>t===""||t==="./",gt=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,i=new Set,o=new Set,s=0,a=l=>{o.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<e.length;l++){let p=wo(String(e[l]),{...r,onResult:a},!0),f=p.state.negated||p.state.negatedExtglob;f&&s++;for(let m of t){let h=p(m,!0);(f?!h.isMatch:h.isMatch)&&(f?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let c=(s===e.length?[...o]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(l=>l.replace(/\\/g,"")):e}return c};gt.match=gt;gt.matcher=(t,e)=>wo(t,e);gt.isMatch=(t,e,r)=>wo(e,r)(t);gt.any=gt.isMatch;gt.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,i=[],o=a=>{r.onResult&&r.onResult(a),i.push(a.output)},s=new Set(gt(t,e,{...r,onResult:o}));for(let a of i)s.has(a)||n.add(a);return[...n]};gt.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${$F.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>gt.contains(t,n,r));if(typeof e=="string"){if(TF(t)||TF(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return gt.isMatch(t,e,{...r,contains:!0})};gt.matchKeys=(t,e,r)=>{if(!WS.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=gt(Object.keys(t),e,r),i={};for(let o of n)i[o]=t[o];return i};gt.some=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=wo(String(i),r);if(n.some(s=>o(s)))return!0}return!1};gt.every=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=wo(String(i),r);if(!n.every(s=>o(s)))return!1}return!0};gt.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${$F.inspect(t)}"`);return[].concat(e).every(n=>wo(n,r)(t))};gt.capture=(t,e,r)=>{let n=WS.isWindows(r),o=wo.makeRe(String(t),{...r,capture:!0}).exec(n?WS.toPosixSlashes(e):e);if(o)return o.slice(1).map(s=>s===void 0?"":s)};gt.makeRe=(...t)=>wo.makeRe(...t);gt.scan=(...t)=>wo.scan(...t);gt.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let i of RF(String(n),e))r.push(wo.parse(i,e));return r};gt.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:RF(t,e)};gt.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return gt.braces(t,{...e,expand:!0})};MF.exports=gt});var BF=y(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});function $ie(t){let e=[],r=new Array(4),n=[0,192,224,240],i=[127,63,63,63],o=[0,128,128,128];for(let s of t){let a=r,u=s.codePointAt(0),c=0-(-(u&4294967168)>>31)-(-(u&4294965248)>>31)-(-(u&4294901760)>>31),l=i[c],p=o[c];a[3]=p|u&l,a[2]=p|u>>>6&l,a[1]=p|u>>>12&l,a[0]=p|u>>>18&l;let f=3-c;a[f]|=n[c],Array.prototype.push.apply(e,a.slice(f))}return new Uint8Array(e)}da.toUtf8_1=$ie;function Rie(t){let e=[];for(let r of t){let n=r.codePointAt(0);n<128?e.push(n):n<2048?e.push(192|n>>6&31,128|n&63):n<65536?e.push(224|n>>12&15,128|n>>6&63,128|n&63):e.push(240|n>>18&7,128|n>>12&63,128|n>>6&63,128|n&63)}return new Uint8Array(e)}da.toUtf8_2=Rie;function FF(t){let e=[];for(let r=0,n=t.length;r<n;++r){let i=t.charCodeAt(r);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{let o=65536+((i&1023)<<10|t.charCodeAt(++r)&1023);e.push(240|o>>18&7,128|o>>12&63,128|o>>6&63,128|o&63)}}return new Uint8Array(e)}da.toUtf8_3=FF;da.toUtf8=FF;da.default=da.toUtf8});var jF=y(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});var Mie=BF(),ep=2654435761,tp=2246822519,Hb=3266489917,NF=668265263,UF=374761393;function kie(t,e=0){t=typeof t=="string"?Mie.default(t):t;let r=t,n=e+UF&4294967295,i=0;if(r.length>=16){let s=[e+ep+tp&4294967295,e+tp&4294967295,e+0&4294967295,e-ep&4294967295],a=t,u=a.length-16,c=0;for(i=0;(i&4294967280)<=u;i+=4){let l=i,p=a[l+0]+(a[l+1]<<8),f=a[l+2]+(a[l+3]<<8),m=p*tp+(f*tp<<16),h=s[c]+m&4294967295;h=h<<13|h>>>19;let H=h&65535,b=h>>>16;s[c]=H*ep+(b*ep<<16)&4294967295,c=c+1&3}n=(s[0]<<1|s[0]>>>31)+(s[1]<<7|s[1]>>>25)+(s[2]<<12|s[2]>>>20)+(s[3]<<18|s[3]>>>14)&4294967295}n=n+t.length&4294967295;let o=t.length-4;for(;i<=o;i+=4){let s=i,a=r[s+0]+(r[s+1]<<8),u=r[s+2]+(r[s+3]<<8),c=a*Hb+(u*Hb<<16);n=n+c&4294967295,n=n<<17|n>>>15,n=(n&65535)*NF+((n>>>16)*NF<<16)&4294967295}for(;i<r.length;++i){let s=r[i];n=n+s*UF,n=n<<11|n>>>21,n=(n&65535)*ep+((n>>>16)*ep<<16)&4294967295}return n=n^n>>>15,n=((n&65535)*tp&4294967295)+((n>>>16)*tp<<16),n=n^n>>>13,n=((n&65535)*Hb&4294967295)+((n>>>16)*Hb<<16),n=n^n>>>16,n<0?n+4294967296:n}VS.xxHash32=kie});var qF=y(yb=>{"use strict";function Oie(t){for(var e in t)yb.hasOwnProperty(e)||(yb[e]=t[e])}Object.defineProperty(yb,"__esModule",{value:!0});Oie(jF())});var uB=y((mPe,aB)=>{"use strict";var{Duplex:qie}=require("stream");function oB(t){t.emit("close")}function Wie(){!this.destroyed&&this._writableState.finished&&this.destroy()}function sB(t){this.removeListener("error",sB),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function Vie(t,e){let r=!0,n=new qie({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(o,s){let a=!s&&n._readableState.objectMode?o.toString():o;n.push(a)||t.pause()}),t.once("error",function(o){n.destroyed||(r=!1,n.destroy(o))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,o){if(t.readyState===t.CLOSED){o(i),process.nextTick(oB,n);return}let s=!1;t.once("error",function(u){s=!0,o(u)}),t.once("close",function(){s||o(i),process.nextTick(oB,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,o,s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,o,s)});return}t.send(i,s)},n.on("end",Wie),n.on("error",sB),n}aB.exports=Vie});var ma=y((gPe,cB)=>{"use strict";cB.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Uh=y((HPe,Ib)=>{"use strict";var{EMPTY_BUFFER:Gie}=ma(),ZS=Buffer[Symbol.species];function Kie(t,e){if(t.length===0)return Gie;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return n<e?new ZS(r.buffer,r.byteOffset,n):r}function lB(t,e,r,n,i){for(let o=0;o<i;o++)r[n+o]=t[o]^e[o&3]}function pB(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function zie(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function eE(t){if(eE.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new ZS(t):ArrayBuffer.isView(t)?e=new ZS(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),eE.readOnly=!1),e}Ib.exports={concat:Kie,mask:lB,toArrayBuffer:zie,toBuffer:eE,unmask:pB};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Ib.exports.mask=function(e,r,n,i,o){o<48?lB(e,r,n,i,o):t.mask(e,r,n,i,o)},Ib.exports.unmask=function(e,r){e.length<32?pB(e,r):t.unmask(e,r)}}catch{}});var hB=y((yPe,dB)=>{"use strict";var fB=Symbol("kDone"),tE=Symbol("kRun"),rE=class{constructor(e){this[fB]=()=>{this.pending--,this[tE]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[tE]()}[tE](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[fB])}}};dB.exports=rE});var Wh=y((bPe,yB)=>{"use strict";var jh=require("zlib"),mB=Uh(),Xie=hB(),{kStatusCode:gB}=ma(),Jie=Buffer[Symbol.species],Yie=Buffer.from([0,0,255,255]),Db=Symbol("permessage-deflate"),cs=Symbol("total-length"),qh=Symbol("callback"),ga=Symbol("buffers"),Eb=Symbol("error"),Sb,nE=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!Sb){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Sb=new Xie(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[qh];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){Sb.add(i=>{this._decompress(e,r,(o,s)=>{i(),n(o,s)})})}compress(e,r,n){Sb.add(i=>{this._compress(e,r,(o,s)=>{i(),n(o,s)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?jh.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=jh.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[Db]=this,this._inflate[cs]=0,this._inflate[ga]=[],this._inflate.on("error",Zie),this._inflate.on("data",HB)}this._inflate[qh]=n,this._inflate.write(e),r&&this._inflate.write(Yie),this._inflate.flush(()=>{let o=this._inflate[Eb];if(o){this._inflate.close(),this._inflate=null,n(o);return}let s=mB.concat(this._inflate[ga],this._inflate[cs]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[cs]=0,this._inflate[ga]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?jh.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=jh.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[cs]=0,this._deflate[ga]=[],this._deflate.on("data",Qie)}this._deflate[qh]=n,this._deflate.write(e),this._deflate.flush(jh.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=mB.concat(this._deflate[ga],this._deflate[cs]);r&&(o=new Jie(o.buffer,o.byteOffset,o.length-4)),this._deflate[qh]=null,this._deflate[cs]=0,this._deflate[ga]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,o)})}};yB.exports=nE;function Qie(t){this[ga].push(t),this[cs]+=t.length}function HB(t){if(this[cs]+=t.length,this[Db]._maxPayload<1||this[cs]<=this[Db]._maxPayload){this[ga].push(t);return}this[Eb]=new RangeError("Max payload size exceeded"),this[Eb].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Eb][gB]=1009,this.removeListener("data",HB),this.reset()}function Zie(t){this[Db]._inflate=null,t[gB]=1007,this[qh](t)}});var Vh=y((vPe,Cb)=>{"use strict";var{isUtf8:bB}=require("buffer"),eoe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function toe(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function iE(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}Cb.exports={isValidStatusCode:toe,isValidUTF8:iE,tokenChars:eoe};if(bB)Cb.exports.isValidUTF8=function(t){return t.length<24?iE(t):bB(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");Cb.exports.isValidUTF8=function(e){return e.length<32?iE(e):t(e)}}catch{}});var cE=y((wPe,DB)=>{"use strict";var{Writable:roe}=require("stream"),vB=Wh(),{BINARY_TYPES:noe,EMPTY_BUFFER:wB,kStatusCode:ioe,kWebSocket:ooe}=ma(),{concat:oE,toArrayBuffer:soe,unmask:aoe}=Uh(),{isValidStatusCode:uoe,isValidUTF8:_B}=Vh(),Pb=Buffer[Symbol.species],coe=Promise.resolve(),loe=typeof queueMicrotask=="function"?queueMicrotask:poe,ap=0,AB=1,IB=2,SB=3,sE=4,EB=5,aE=6,uE=class extends roe{constructor(e={}){super(),this._binaryType=e.binaryType||noe[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[ooe]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=ap,this._loop=!1}_write(e,r,n){if(this._opcode===8&&this._state==ap)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new Pb(n.buffer,n.byteOffset+e,n.length-e),new Pb(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new Pb(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case ap:r=this.getInfo();break;case AB:r=this.getPayloadLength16();break;case IB:r=this.getPayloadLength64();break;case SB:this.getMask();break;case sE:r=this.getData(e);break;case EB:this._loop=!1;return;default:this._loop=!1,loe(()=>{this._state=ap,this.startLoop(e)});return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,ur(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(e[0]&64)===64;if(r&&!this._extensions[vB.extensionName])return this._loop=!1,ur(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(r)return this._loop=!1,ur(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,ur(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,ur(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,ur(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,ur(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,ur(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,ur(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,ur(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,ur(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=AB;else if(this._payloadLength===127)this._state=IB;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,ur(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,ur(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=SB:this._state=sE}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=sE}getData(e){let r=wB;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&aoe(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=EB,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){this._extensions[vB.extensionName].decompress(e,this._fin,(i,o)=>{if(i)return r(i);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(ur(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(o)}let s=this.dataMessage();if(s)return r(s);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=oE(r,e):this._binaryType==="arraybuffer"?n=soe(oE(r,e)):n=r,this.emit("message",n,!0)}else{let n=oE(r,e);if(!this._skipUTF8Validation&&!_B(n))return this._loop=!1,ur(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=aE}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,wB),this.end(),this._state=ap;else{let r=e.readUInt16BE(0);if(!uoe(r))return ur(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=new Pb(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!_B(n))return ur(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end(),this._state=ap}else this._opcode===9?(this.emit("ping",e),this._state=aE):(this.emit("pong",e),this._state=aE)}};DB.exports=uE;function ur(t,e,r,n,i){let o=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(o,ur),o.code=i,o[ioe]=n,o}function poe(t){coe.then(t).catch(doe)}function foe(t){throw t}function doe(t){process.nextTick(foe,t)}});var lE=y((APe,xB)=>{"use strict";var{Duplex:_Pe}=require("stream"),{randomFillSync:hoe}=require("crypto"),CB=Wh(),{EMPTY_BUFFER:moe}=ma(),{isValidStatusCode:goe}=Vh(),{mask:PB,toBuffer:up}=Uh(),Di=Symbol("kByteLength"),Hoe=Buffer.alloc(4),Eo=class{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,i=!1,o=2,s=!1;r.mask&&(n=r.maskBuffer||Hoe,r.generateMask?r.generateMask(n):hoe(n,0,4),s=(n[0]|n[1]|n[2]|n[3])===0,o=6);let a;typeof e=="string"?(!r.mask||s)&&r[Di]!==void 0?a=r[Di]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!s);let u=a;a>=65536?(o+=8,u=127):a>125&&(o+=2,u=126);let c=Buffer.allocUnsafe(i?a+o:o);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[o-4]=n[0],c[o-3]=n[1],c[o-2]=n[2],c[o-1]=n[3],s?[c,e]:i?(PB(e,n,c,o,a),[c]):(PB(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let o;if(e===void 0)o=moe;else{if(typeof e!="number"||!goe(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+a),o.writeUInt16BE(e,0),typeof r=="string"?o.write(r,2):o.set(r,2)}}let s={[Di]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(Eo.frame(o,s),i)}ping(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=up(e),i=e.length,o=up.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Di]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(Eo.frame(e,s),n)}pong(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=up(e),i=e.length,o=up.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Di]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(Eo.frame(e,s),n)}send(e,r,n){let i=this._extensions[CB.extensionName],o=r.binary?2:1,s=r.compress,a,u;if(typeof e=="string"?(a=Buffer.byteLength(e),u=!1):(e=up(e),a=e.length,u=up.readOnly),this._firstFragment?(this._firstFragment=!1,s&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=i._threshold),this._compress=s):(s=!1,o=0),r.fin&&(this._firstFragment=!0),i){let c={[Di]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}else this.sendFrame(Eo.frame(e,{[Di]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:!1}),n)}dispatch(e,r,n,i){if(!r){this.sendFrame(Eo.frame(e,n),i);return}let o=this._extensions[CB.extensionName];this._bufferedBytes+=n[Di],this._deflating=!0,o.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(u);for(let c=0;c<this._queue.length;c++){let l=this._queue[c],p=l[l.length-1];typeof p=="function"&&p(u)}return}this._bufferedBytes-=n[Di],this._deflating=!1,n.readOnly=!1,this.sendFrame(Eo.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Di],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Di],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};xB.exports=Eo});var BB=y((IPe,FB)=>{"use strict";var{kForOnEventAttribute:Gh,kListener:pE}=ma(),LB=Symbol("kCode"),TB=Symbol("kData"),$B=Symbol("kError"),RB=Symbol("kMessage"),MB=Symbol("kReason"),cp=Symbol("kTarget"),kB=Symbol("kType"),OB=Symbol("kWasClean"),ls=class{constructor(e){this[cp]=null,this[kB]=e}get target(){return this[cp]}get type(){return this[kB]}};Object.defineProperty(ls.prototype,"target",{enumerable:!0});Object.defineProperty(ls.prototype,"type",{enumerable:!0});var Yu=class extends ls{constructor(e,r={}){super(e),this[LB]=r.code===void 0?0:r.code,this[MB]=r.reason===void 0?"":r.reason,this[OB]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[LB]}get reason(){return this[MB]}get wasClean(){return this[OB]}};Object.defineProperty(Yu.prototype,"code",{enumerable:!0});Object.defineProperty(Yu.prototype,"reason",{enumerable:!0});Object.defineProperty(Yu.prototype,"wasClean",{enumerable:!0});var lp=class extends ls{constructor(e,r={}){super(e),this[$B]=r.error===void 0?null:r.error,this[RB]=r.message===void 0?"":r.message}get error(){return this[$B]}get message(){return this[RB]}};Object.defineProperty(lp.prototype,"error",{enumerable:!0});Object.defineProperty(lp.prototype,"message",{enumerable:!0});var Kh=class extends ls{constructor(e,r={}){super(e),this[TB]=r.data===void 0?null:r.data}get data(){return this[TB]}};Object.defineProperty(Kh.prototype,"data",{enumerable:!0});var yoe={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[Gh]&&i[pE]===e&&!i[Gh])return;let n;if(t==="message")n=function(o,s){let a=new Kh("message",{data:s?o:o.toString()});a[cp]=this,xb(e,this,a)};else if(t==="close")n=function(o,s){let a=new Yu("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[cp]=this,xb(e,this,a)};else if(t==="error")n=function(o){let s=new lp("error",{error:o,message:o.message});s[cp]=this,xb(e,this,s)};else if(t==="open")n=function(){let o=new ls("open");o[cp]=this,xb(e,this,o)};else return;n[Gh]=!!r[Gh],n[pE]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[pE]===e&&!r[Gh]){this.removeListener(t,r);break}}};FB.exports={CloseEvent:Yu,ErrorEvent:lp,Event:ls,EventTarget:yoe,MessageEvent:Kh};function xb(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var fE=y((SPe,NB)=>{"use strict";var{tokenChars:zh}=Vh();function Do(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function boe(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,o=!1,s,a,u=-1,c=-1,l=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),s===void 0)if(l===-1&&zh[c]===1)u===-1&&(u=p);else if(p!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let m=t.slice(u,l);c===44?(Do(e,m,r),r=Object.create(null)):s=m,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&zh[c]===1)u===-1&&(u=p);else if(c===32||c===9)l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),Do(r,t.slice(u,l),!0),c===44&&(Do(e,s,r),r=Object.create(null),s=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,p),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(i){if(zh[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);u===-1?u=p:n||(n=!0),i=!1}else if(o)if(zh[c]===1)u===-1&&(u=p);else if(c===34&&u!==-1)o=!1,l=p;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)o=!0;else if(l===-1&&zh[c]===1)u===-1&&(u=p);else if(u!==-1&&(c===32||c===9))l===-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let m=t.slice(u,l);n&&(m=m.replace(/\\/g,""),n=!1),Do(r,a,m),c===44&&(Do(e,s,r),r=Object.create(null),s=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(u===-1||o||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let f=t.slice(u,l);return s===void 0?Do(e,f,r):(a===void 0?Do(r,f,!0):n?Do(r,a,f.replace(/\\/g,"")):Do(r,a,f),Do(e,s,r)),e}function voe(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let o=n[i];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?i:`${i}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}NB.exports={format:voe,parse:boe}});var HE=y((CPe,YB)=>{"use strict";var woe=require("events"),_oe=require("https"),Aoe=require("http"),qB=require("net"),Ioe=require("tls"),{randomBytes:Soe,createHash:Eoe}=require("crypto"),{Duplex:EPe,Readable:DPe}=require("stream"),{URL:dE}=require("url"),Ha=Wh(),Doe=cE(),Coe=lE(),{BINARY_TYPES:UB,EMPTY_BUFFER:Lb,GUID:Poe,kForOnEventAttribute:hE,kListener:xoe,kStatusCode:Loe,kWebSocket:Or,NOOP:WB}=ma(),{EventTarget:{addEventListener:Toe,removeEventListener:$oe}}=BB(),{format:Roe,parse:Moe}=fE(),{toBuffer:koe}=Uh(),Ooe=30*1e3,VB=Symbol("kAborted"),mE=[8,13],ps=["CONNECTING","OPEN","CLOSING","CLOSED"],Foe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Ie=class extends woe{constructor(e,r,n){super(),this._binaryType=UB[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Lb,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=Ie.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),GB(this,e,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){UB.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new Doe({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Coe(e,this._extensions,n.generateMask),this._receiver=i,this._socket=e,i[Or]=this,e[Or]=this,i.on("conclude",Uoe),i.on("drain",joe),i.on("error",qoe),i.on("message",Woe),i.on("ping",Voe),i.on("pong",Goe),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",zB),e.on("data",$b),e.on("end",XB),e.on("error",JB),this._readyState=Ie.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=Ie.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Ha.extensionName]&&this._extensions[Ha.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=Ie.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==Ie.CLOSED){if(this.readyState===Ie.CONNECTING){let n="WebSocket was closed before the connection was established";Cn(this,this._req,n);return}if(this.readyState===Ie.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=Ie.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Ooe)}}pause(){this.readyState===Ie.CONNECTING||this.readyState===Ie.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===Ie.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==Ie.OPEN){gE(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||Lb,r,n)}pong(e,r,n){if(this.readyState===Ie.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==Ie.OPEN){gE(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||Lb,r,n)}resume(){this.readyState===Ie.CONNECTING||this.readyState===Ie.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===Ie.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==Ie.OPEN){gE(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Ha.extensionName]||(i.compress=!1),this._sender.send(e||Lb,i,n)}terminate(){if(this.readyState!==Ie.CLOSED){if(this.readyState===Ie.CONNECTING){let e="WebSocket was closed before the connection was established";Cn(this,this._req,e);return}this._socket&&(this._readyState=Ie.CLOSING,this._socket.destroy())}}};Object.defineProperty(Ie,"CONNECTING",{enumerable:!0,value:ps.indexOf("CONNECTING")});Object.defineProperty(Ie.prototype,"CONNECTING",{enumerable:!0,value:ps.indexOf("CONNECTING")});Object.defineProperty(Ie,"OPEN",{enumerable:!0,value:ps.indexOf("OPEN")});Object.defineProperty(Ie.prototype,"OPEN",{enumerable:!0,value:ps.indexOf("OPEN")});Object.defineProperty(Ie,"CLOSING",{enumerable:!0,value:ps.indexOf("CLOSING")});Object.defineProperty(Ie.prototype,"CLOSING",{enumerable:!0,value:ps.indexOf("CLOSING")});Object.defineProperty(Ie,"CLOSED",{enumerable:!0,value:ps.indexOf("CLOSED")});Object.defineProperty(Ie.prototype,"CLOSED",{enumerable:!0,value:ps.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(Ie.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(Ie.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[hE])return e[xoe];return null},set(e){for(let r of this.listeners(t))if(r[hE]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[hE]:!0})}})});Ie.prototype.addEventListener=Toe;Ie.prototype.removeEventListener=$oe;YB.exports=Ie;function GB(t,e,r,n){let i={protocolVersion:mE[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!mE.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${mE.join(", ")})`);let o;if(e instanceof dE)o=e;else try{o=new dE(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),t._url=o.href;let s=o.protocol==="wss:",a=o.protocol==="ws+unix:",u;if(o.protocol!=="ws:"&&!s&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!o.pathname?u="The URL's pathname is empty":o.hash&&(u="The URL contains a fragment identifier"),u){let H=new SyntaxError(u);if(t._redirects===0)throw H;Tb(t,H);return}let c=s?443:80,l=Soe(16).toString("base64"),p=s?_oe.request:Aoe.request,f=new Set,m;if(i.createConnection=s?Noe:Boe,i.defaultPort=i.defaultPort||c,i.port=o.port||c,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(m=new Ha(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Roe({[Ha.extensionName]:m.offer()})),r.length){for(let H of r){if(typeof H!="string"||!Foe.test(H)||f.has(H))throw new SyntaxError("An invalid or duplicated subprotocol was specified");f.add(H)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){let H=i.path.split(":");i.socketPath=H[0],i.path=H[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=s,t._originalHostOrSocketPath=a?i.socketPath:o.host;let H=n&&n.headers;if(n={...n,headers:{}},H)for(let[b,_]of Object.entries(H))n.headers[b.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let H=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:o.host===t._originalHostOrSocketPath;(!H||t._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,H||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=p(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=p(i);i.timeout&&h.on("timeout",()=>{Cn(t,h,"Opening handshake has timed out")}),h.on("error",H=>{h===null||h[VB]||(h=t._req=null,Tb(t,H))}),h.on("response",H=>{let b=H.headers.location,_=H.statusCode;if(b&&i.followRedirects&&_>=300&&_<400){if(++t._redirects>i.maxRedirects){Cn(t,h,"Maximum redirects exceeded");return}h.abort();let $;try{$=new dE(b,e)}catch{let D=new SyntaxError(`Invalid URL: ${b}`);Tb(t,D);return}GB(t,$,r,n)}else t.emit("unexpected-response",h,H)||Cn(t,h,`Unexpected server response: ${H.statusCode}`)}),h.on("upgrade",(H,b,_)=>{if(t.emit("upgrade",H),t.readyState!==Ie.CONNECTING)return;if(h=t._req=null,H.headers.upgrade.toLowerCase()!=="websocket"){Cn(t,b,"Invalid Upgrade header");return}let $=Eoe("sha1").update(l+Poe).digest("base64");if(H.headers["sec-websocket-accept"]!==$){Cn(t,b,"Invalid Sec-WebSocket-Accept header");return}let U=H.headers["sec-websocket-protocol"],D;if(U!==void 0?f.size?f.has(U)||(D="Server sent an invalid subprotocol"):D="Server sent a subprotocol but none was requested":f.size&&(D="Server sent no subprotocol"),D){Cn(t,b,D);return}U&&(t._protocol=U);let P=H.headers["sec-websocket-extensions"];if(P!==void 0){if(!m){Cn(t,b,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let j;try{j=Moe(P)}catch{Cn(t,b,"Invalid Sec-WebSocket-Extensions header");return}let N=Object.keys(j);if(N.length!==1||N[0]!==Ha.extensionName){Cn(t,b,"Server indicated an extension that was not requested");return}try{m.accept(j[Ha.extensionName])}catch{Cn(t,b,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Ha.extensionName]=m}t.setSocket(b,_,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function Tb(t,e){t._readyState=Ie.CLOSING,t.emit("error",e),t.emitClose()}function Boe(t){return t.path=t.socketPath,qB.connect(t)}function Noe(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=qB.isIP(t.host)?"":t.host),Ioe.connect(t)}function Cn(t,e,r){t._readyState=Ie.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Cn),e.setHeader?(e[VB]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Tb,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function gE(t,e,r){if(e){let n=koe(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${ps[t.readyState]})`);process.nextTick(r,n)}}function Uoe(t,e){let r=this[Or];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Or]!==void 0&&(r._socket.removeListener("data",$b),process.nextTick(KB,r._socket),t===1005?r.close():r.close(t,e))}function joe(){let t=this[Or];t.isPaused||t._socket.resume()}function qoe(t){let e=this[Or];e._socket[Or]!==void 0&&(e._socket.removeListener("data",$b),process.nextTick(KB,e._socket),e.close(t[Loe])),e.emit("error",t)}function jB(){this[Or].emitClose()}function Woe(t,e){this[Or].emit("message",t,e)}function Voe(t){let e=this[Or];e.pong(t,!e._isServer,WB),e.emit("ping",t)}function Goe(t){this[Or].emit("pong",t)}function KB(t){t.resume()}function zB(){let t=this[Or];this.removeListener("close",zB),this.removeListener("data",$b),this.removeListener("end",XB),t._readyState=Ie.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Or]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",jB),t._receiver.on("finish",jB))}function $b(t){this[Or]._receiver.write(t)||this.pause()}function XB(){let t=this[Or];t._readyState=Ie.CLOSING,t._receiver.end(),this.end()}function JB(){let t=this[Or];this.removeListener("error",JB),this.on("error",WB),t&&(t._readyState=Ie.CLOSING,this.destroy())}});var ZB=y((PPe,QB)=>{"use strict";var{tokenChars:Koe}=Vh();function zoe(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let s=t.charCodeAt(i);if(n===-1&&Koe[s]===1)r===-1&&(r=i);else if(i!==0&&(s===32||s===9))n===-1&&r!==-1&&(n=i);else if(s===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let o=t.slice(r,i);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}QB.exports={parse:zoe}});var sN=y((LPe,oN)=>{"use strict";var Xoe=require("events"),Rb=require("http"),{Duplex:xPe}=require("stream"),{createHash:Joe}=require("crypto"),eN=fE(),Qu=Wh(),Yoe=ZB(),Qoe=HE(),{GUID:Zoe,kWebSocket:ese}=ma(),tse=/^[+/0-9A-Za-z]{22}==$/,tN=0,rN=1,iN=2,yE=class extends Xoe{constructor(e,r){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Qoe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Rb.createServer((n,i)=>{let o=Rb.STATUS_CODES[426];i.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),i.end(o)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=rse(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,o,s)=>{this.handleUpgrade(i,o,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=tN}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===iN){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Xh,this);return}if(e&&this.once("close",e),this._state!==rN)if(this._state=rN,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Xh,this):process.nextTick(Xh,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Xh(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",nN);let o=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Zu(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Zu(this,e,r,400,"Invalid Upgrade header");return}if(!o||!tse.test(o)){Zu(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(s!==8&&s!==13){Zu(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Jh(r,400);return}let a=e.headers["sec-websocket-protocol"],u=new Set;if(a!==void 0)try{u=Yoe.parse(a)}catch{Zu(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&c!==void 0){let p=new Qu(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=eN.parse(c);f[Qu.extensionName]&&(p.accept(f[Qu.extensionName]),l[Qu.extensionName]=p)}catch{Zu(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${s===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,m,h,H)=>{if(!f)return Jh(r,m||401,h,H);this.completeUpgrade(l,o,u,e,r,n,i)});return}if(!this.options.verifyClient(p))return Jh(r,401)}this.completeUpgrade(l,o,u,e,r,n,i)}completeUpgrade(e,r,n,i,o,s,a){if(!o.readable||!o.writable)return o.destroy();if(o[ese])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>tN)return Jh(o,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Joe("sha1").update(r+Zoe).digest("base64")}`],l=new this.options.WebSocket(null);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[Qu.extensionName]){let p=e[Qu.extensionName].params,f=eN.format({[Qu.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${f}`),l._extensions=e}this.emit("headers",c,i),o.write(c.concat(`\r
`).join(`\r
`)),o.removeListener("error",nN),l.setSocket(o,s,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Xh,this)})),a(l,i)}};oN.exports=yE;function rse(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Xh(t){t._state=iN,t.emit("close")}function nN(){this.destroy()}function Jh(t,e,r,n){r=r||Rb.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Rb.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Zu(t,e,r,n,i){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,Zu),t.emit("wsClientError",o,r,e)}else Jh(r,n,i)}});var _N=y((lxe,wN)=>{"use strict";wN.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var IN=y((pxe,AN)=>{AN.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var DN=y((fxe,EN)=>{"use strict";var pse=IN(),fse=Array.prototype.concat,dse=Array.prototype.slice,SN=EN.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];pse(o)?r=fse.call(r,dse.call(o)):r.push(o)}return r};SN.wrap=function(t){return function(){return t(SN(arguments))}}});var LN=y((dxe,xN)=>{var Qh=_N(),Zh=DN(),CN=Object.hasOwnProperty,PN={};for(Nb in Qh)CN.call(Qh,Nb)&&(PN[Qh[Nb]]=Nb);var Nb,Pn=xN.exports={to:{},get:{}};Pn.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=Pn.get.hsl(t),n="hsl";break;case"hwb":r=Pn.get.hwb(t),n="hwb";break;default:r=Pn.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};Pn.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){var l=u*2;s[u]=parseInt(a.slice(l,l+2),16)}c&&(s[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)s[u]=parseInt(a[u]+a[u],16);c&&(s[3]=parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)s[u]=parseInt(a[u+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)s[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=t.match(o))?a[1]==="transparent"?[0,0,0,0]:CN.call(Qh,a[1])?(s=Qh[a[1]],s[3]=1,s):null:null;for(u=0;u<3;u++)s[u]=ba(s[u],0,255);return s[3]=ba(s[3],0,1),s};Pn.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=ba(parseFloat(r[2]),0,100),s=ba(parseFloat(r[3]),0,100),a=ba(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Pn.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=ba(parseFloat(r[2]),0,100),s=ba(parseFloat(r[3]),0,100),a=ba(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Pn.to.hex=function(){var t=Zh(arguments);return"#"+Ub(t[0])+Ub(t[1])+Ub(t[2])+(t[3]<1?Ub(Math.round(t[3]*255)):"")};Pn.to.rgb=function(){var t=Zh(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Pn.to.rgb.percent=function(){var t=Zh(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};Pn.to.hsl=function(){var t=Zh(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Pn.to.hwb=function(){var t=Zh(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Pn.to.keyword=function(t){return PN[t.slice(0,3)]};function ba(t,e,r){return Math.min(Math.max(e,t),r)}function Ub(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var $N=y((hxe,TN)=>{"use strict";TN.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var IE=y((mxe,MN)=>{var em=$N(),RN={};for(let t of Object.keys(em))RN[em[t]]=t;var he={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};MN.exports=he;for(let t of Object.keys(he)){if(!("channels"in he[t]))throw new Error("missing channels property: "+t);if(!("labels"in he[t]))throw new Error("missing channel labels property: "+t);if(he[t].labels.length!==he[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=he[t];delete he[t].channels,delete he[t].labels,Object.defineProperty(he[t],"channels",{value:e}),Object.defineProperty(he[t],"labels",{value:r})}he.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=o-i,a,u;o===i?a=0:e===o?a=(r-n)/s:r===o?a=2+(n-e)/s:n===o&&(a=4+(e-r)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+o)/2;return o===i?u=0:c<=.5?u=s/(o+i):u=s/(2-o-i),[a,u*100,c*100]};he.rgb.hsv=function(t){let e,r,n,i,o,s=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(s,a,u),l=c-Math.min(s,a,u),p=function(f){return(c-f)/6/l+1/2};return l===0?(i=0,o=0):(o=l/c,e=p(s),r=p(a),n=p(u),s===c?i=n-r:a===c?i=1/3+e-n:u===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};he.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=he.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,o*100,n*100]};he.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),o=(1-e-i)/(1-i)||0,s=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function hse(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}he.rgb.keyword=function(t){let e=RN[t];if(e)return e;let r=1/0,n;for(let i of Object.keys(em)){let o=em[i],s=hse(t,o);s<r&&(r=s,n=i)}return n};he.keyword.rgb=function(t){return em[t]};he.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+r*.3576+n*.1805,o=e*.2126+r*.7152+n*.0722,s=e*.0193+r*.1192+n*.9505;return[i*100,o*100,s*100]};he.rgb.lab=function(t){let e=he.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(r-n),a=200*(n-i);return[o,s,a]};he.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,o,s;if(r===0)return s=n*255,[s,s,s];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,u[c]=s*255;return u};he.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[e,a*100,s*100]};he.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-r),a=255*n*(1-r*o),u=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}};he.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),o,s;s=(2-r)*n;let a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};he.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,o;i>1&&(r/=i,n/=i);let s=Math.floor(6*e),a=1-n;o=6*e-s,s&1&&(o=1-o);let u=r+o*(a-r),c,l,p;switch(s){default:case 6:case 0:c=a,l=u,p=r;break;case 1:c=u,l=a,p=r;break;case 2:c=r,l=a,p=u;break;case 3:c=r,l=u,p=a;break;case 4:c=u,l=r,p=a;break;case 5:c=a,l=r,p=u;break}return[c*255,l*255,p*255]};he.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};he.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,o,s;return i=e*3.2406+r*-1.5372+n*-.4986,o=e*-.9689+r*1.8758+n*.0415,s=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};he.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,o=500*(e-r),s=200*(r-n);return[i,o,s]};he.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,o,s;o=(e+16)/116,i=r/500+o,s=o-n/200;let a=o**3,u=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};he.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(r*r+n*n);return[e,s,i]};he.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,o=r*Math.cos(i),s=r*Math.sin(i);return[e,o,s]};he.rgb.ansi16=function(t,e=null){let[r,n,i]=t,o=e===null?he.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(s+=60),s};he.hsv.ansi16=function(t){return he.rgb.ansi16(he.hsv.rgb(t),t[2])};he.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};he.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,o=(e>>2&1)*r*255;return[n,i,o]};he.ansi256.rgb=function(t){if(t>=232){let o=(t-232)*10+8;return[o,o,o]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};he.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};he.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};he.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),o=Math.min(Math.min(e,r),n),s=i-o,a,u;return s<1?a=o/(1-s):a=0,s<=0?u=0:i===e?u=(r-n)/s%6:i===r?u=2+(n-e)/s:u=4+(e-r)/s,u/=6,u%=1,[u*360,s*100,a*100]};he.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};he.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};he.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],o=e%1*6,s=o%1,a=1-s,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};he.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};he.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};he.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};he.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],i*100,o*100]};he.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};he.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};he.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};he.gray.hsl=function(t){return[0,0,t[0]]};he.gray.hsv=he.gray.hsl;he.gray.hwb=function(t){return[0,100,t[0]]};he.gray.cmyk=function(t){return[0,0,0,t[0]]};he.gray.lab=function(t){return[t[0],0,0]};he.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};he.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var ON=y((gxe,kN)=>{var jb=IE();function mse(){let t={},e=Object.keys(jb);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function gse(t){let e=mse(),r=[t];for(e[t].distance=0;r.length;){let n=r.pop(),i=Object.keys(jb[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function Hse(t,e){return function(r){return e(t(r))}}function yse(t,e){let r=[e[t].parent,t],n=jb[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=Hse(jb[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}kN.exports=function(t){let e=gse(t),r={},n=Object.keys(e);for(let i=n.length,o=0;o<i;o++){let s=n[o];e[s].parent!==null&&(r[s]=yse(s,e))}return r}});var BN=y((Hxe,FN)=>{var SE=IE(),bse=ON(),gp={},vse=Object.keys(SE);function wse(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function _se(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}vse.forEach(t=>{gp[t]={},Object.defineProperty(gp[t],"channels",{value:SE[t].channels}),Object.defineProperty(gp[t],"labels",{value:SE[t].labels});let e=bse(t);Object.keys(e).forEach(n=>{let i=e[n];gp[t][n]=_se(i),gp[t][n].raw=wse(i)})});FN.exports=gp});var jN=y((yxe,UN)=>{var Hp=LN(),xn=BN(),CE=[].slice,NN=["keyword","gray","hex"],EE={};for(let t of Object.keys(xn))EE[CE.call(xn[t].labels).sort().join("")]=t;var qb={};function cr(t,e){if(!(this instanceof cr))return new cr(t,e);if(e&&e in NN&&(e=null),e&&!(e in xn))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof cr)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){let i=Hp.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=xn[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=xn[this.model].channels;let i=CE.call(t,0,n);this.color=DE(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let o=i.sort().join("");if(!(o in EE))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=EE[o];let s=xn[this.model].labels,a=[];for(r=0;r<s.length;r++)a.push(t[s[r]]);this.color=DE(a)}if(qb[this.model])for(n=xn[this.model].channels,r=0;r<n;r++){let i=qb[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}cr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Hp.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:e.color.concat(this.valpha);return Hp.to[e.model](r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return Hp.to.rgb.percent(r)},array(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object(){let t={},e=xn[this.model].channels,r=xn[this.model].labels;for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new cr(this.color.map(Ise(t)).concat(this.valpha),this.model)},alpha(t){return arguments.length>0?new cr(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Pt("rgb",0,Xt(255)),green:Pt("rgb",1,Xt(255)),blue:Pt("rgb",2,Xt(255)),hue:Pt(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Pt("hsl",1,Xt(100)),lightness:Pt("hsl",2,Xt(100)),saturationv:Pt("hsv",1,Xt(100)),value:Pt("hsv",2,Xt(100)),chroma:Pt("hcg",1,Xt(100)),gray:Pt("hcg",2,Xt(100)),white:Pt("hwb",1,Xt(100)),wblack:Pt("hwb",2,Xt(100)),cyan:Pt("cmyk",0,Xt(100)),magenta:Pt("cmyk",1,Xt(100)),yellow:Pt("cmyk",2,Xt(100)),black:Pt("cmyk",3,Xt(100)),x:Pt("xyz",0,Xt(100)),y:Pt("xyz",1,Xt(100)),z:Pt("xyz",2,Xt(100)),l:Pt("lab",0,Xt(100)),a:Pt("lab",1),b:Pt("lab",2),keyword(t){return arguments.length>0?new cr(t):xn[this.model].keyword(this.color)},hex(t){return arguments.length>0?new cr(t):Hp.to.hex(this.rgb().round().color)},hexa(t){if(arguments.length>0)return new cr(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),Hp.to.hex(e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.03928?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*299+t[1]*587+t[2]*114)/1e3<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return cr.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,u=1-a;return cr.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(xn)){if(NN.includes(t))continue;let e=xn[t].channels;cr.prototype[t]=function(){if(this.model===t)return new cr(this);if(arguments.length>0)return new cr(arguments,t);let r=typeof arguments[e]=="number"?e:this.valpha;return new cr(Sse(xn[this.model][t].raw(this.color)).concat(r),t)},cr[t]=function(r){return typeof r=="number"&&(r=DE(CE.call(arguments),e)),new cr(r,t)}}function Ase(t,e){return Number(t.toFixed(e))}function Ise(t){return function(e){return Ase(e,t)}}function Pt(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(qb[n]||(qb[n]=[]))[e]=r;return t=t[0],function(n){let i;return arguments.length>0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Xt(t){return function(e){return Math.max(0,Math.min(t,e))}}function Sse(t){return Array.isArray(t)?t:[t]}function DE(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}UN.exports=cr});var OU=y((jRe,kU)=>{"use strict";function iae(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,o=r[0]||"text/plain",s=o;for(let l=1;l<r.length;l++)r[l]==="base64"?i=!0:(s+=`;${r[l]}`,r[l].indexOf("charset=")===0&&(n=r[l].substring(8)));!r[0]&&!n.length&&(s+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",u=unescape(t.substring(e+1)),c=Buffer.from(u,a);return c.type=o,c.typeFull=s,c.charset=n,c}kU.exports=iae});var ds=y((fs,_v)=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var FU=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function oae(t){return FU.includes(t)}var sae=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...FU];function aae(t){return sae.includes(t)}var uae=["null","undefined","string","number","bigint","boolean","symbol"];function cae(t){return uae.includes(t)}function Dp(t){return e=>typeof e===t}var{toString:BU}=Object.prototype,dm=t=>{let e=BU.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&E.domElement(t))return"HTMLElement";if(aae(e))return e},tt=t=>e=>dm(e)===t;function E(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(E.observable(t))return"Observable";if(E.array(t))return"Array";if(E.buffer(t))return"Buffer";let e=dm(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}E.undefined=Dp("undefined");E.string=Dp("string");var lae=Dp("number");E.number=t=>lae(t)&&!E.nan(t);E.bigint=Dp("bigint");E.function_=Dp("function");E.null_=t=>t===null;E.class_=t=>E.function_(t)&&t.toString().startsWith("class ");E.boolean=t=>t===!0||t===!1;E.symbol=Dp("symbol");E.numericString=t=>E.string(t)&&!E.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));E.array=(t,e)=>Array.isArray(t)?E.function_(e)?t.every(e):!0:!1;E.buffer=t=>{var e,r,n,i;return(i=(n=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||n===void 0?void 0:n.call(r,t))!==null&&i!==void 0?i:!1};E.blob=t=>tt("Blob")(t);E.nullOrUndefined=t=>E.null_(t)||E.undefined(t);E.object=t=>!E.null_(t)&&(typeof t=="object"||E.function_(t));E.iterable=t=>{var e;return E.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};E.asyncIterable=t=>{var e;return E.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};E.generator=t=>{var e,r;return E.iterable(t)&&E.function_((e=t)===null||e===void 0?void 0:e.next)&&E.function_((r=t)===null||r===void 0?void 0:r.throw)};E.asyncGenerator=t=>E.asyncIterable(t)&&E.function_(t.next)&&E.function_(t.throw);E.nativePromise=t=>tt("Promise")(t);var pae=t=>{var e,r;return E.function_((e=t)===null||e===void 0?void 0:e.then)&&E.function_((r=t)===null||r===void 0?void 0:r.catch)};E.promise=t=>E.nativePromise(t)||pae(t);E.generatorFunction=tt("GeneratorFunction");E.asyncGeneratorFunction=t=>dm(t)==="AsyncGeneratorFunction";E.asyncFunction=t=>dm(t)==="AsyncFunction";E.boundFunction=t=>E.function_(t)&&!t.hasOwnProperty("prototype");E.regExp=tt("RegExp");E.date=tt("Date");E.error=tt("Error");E.map=t=>tt("Map")(t);E.set=t=>tt("Set")(t);E.weakMap=t=>tt("WeakMap")(t);E.weakSet=t=>tt("WeakSet")(t);E.int8Array=tt("Int8Array");E.uint8Array=tt("Uint8Array");E.uint8ClampedArray=tt("Uint8ClampedArray");E.int16Array=tt("Int16Array");E.uint16Array=tt("Uint16Array");E.int32Array=tt("Int32Array");E.uint32Array=tt("Uint32Array");E.float32Array=tt("Float32Array");E.float64Array=tt("Float64Array");E.bigInt64Array=tt("BigInt64Array");E.bigUint64Array=tt("BigUint64Array");E.arrayBuffer=tt("ArrayBuffer");E.sharedArrayBuffer=tt("SharedArrayBuffer");E.dataView=tt("DataView");E.enumCase=(t,e)=>Object.values(e).includes(t);E.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;E.urlInstance=t=>tt("URL")(t);E.urlString=t=>{if(!E.string(t))return!1;try{return new URL(t),!0}catch{return!1}};E.truthy=t=>Boolean(t);E.falsy=t=>!t;E.nan=t=>Number.isNaN(t);E.primitive=t=>E.null_(t)||cae(typeof t);E.integer=t=>Number.isInteger(t);E.safeInteger=t=>Number.isSafeInteger(t);E.plainObject=t=>{if(BU.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};E.typedArray=t=>oae(dm(t));var fae=t=>E.safeInteger(t)&&t>=0;E.arrayLike=t=>!E.nullOrUndefined(t)&&!E.function_(t)&&fae(t.length);E.inRange=(t,e)=>{if(E.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(E.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var dae=1,hae=["innerHTML","ownerDocument","style","attributes","nodeValue"];E.domElement=t=>E.object(t)&&t.nodeType===dae&&E.string(t.nodeName)&&!E.plainObject(t)&&hae.every(e=>e in t);E.observable=t=>{var e,r,n,i;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((i=(n=t)["@@observable"])===null||i===void 0?void 0:i.call(n)):!1};E.nodeStream=t=>E.object(t)&&E.function_(t.pipe)&&!E.observable(t);E.infinite=t=>t===1/0||t===-1/0;var NU=t=>e=>E.integer(e)&&Math.abs(e%2)===t;E.evenInteger=NU(0);E.oddInteger=NU(1);E.emptyArray=t=>E.array(t)&&t.length===0;E.nonEmptyArray=t=>E.array(t)&&t.length>0;E.emptyString=t=>E.string(t)&&t.length===0;var mae=t=>E.string(t)&&!/\S/.test(t);E.emptyStringOrWhitespace=t=>E.emptyString(t)||mae(t);E.nonEmptyString=t=>E.string(t)&&t.length>0;E.nonEmptyStringAndNotWhitespace=t=>E.string(t)&&!E.emptyStringOrWhitespace(t);E.emptyObject=t=>E.object(t)&&!E.map(t)&&!E.set(t)&&Object.keys(t).length===0;E.nonEmptyObject=t=>E.object(t)&&!E.map(t)&&!E.set(t)&&Object.keys(t).length>0;E.emptySet=t=>E.set(t)&&t.size===0;E.nonEmptySet=t=>E.set(t)&&t.size>0;E.emptyMap=t=>E.map(t)&&t.size===0;E.nonEmptyMap=t=>E.map(t)&&t.size>0;E.propertyKey=t=>E.any([E.string,E.number,E.symbol],t);E.formData=t=>tt("FormData")(t);E.urlSearchParams=t=>tt("URLSearchParams")(t);var UU=(t,e,r)=>{if(!E.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};E.any=(t,...e)=>(E.array(t)?t:[t]).some(n=>UU(Array.prototype.some,n,e));E.all=(t,...e)=>UU(Array.prototype.every,t,e);var ie=(t,e,r,n={})=>{if(!t){let{multipleValues:i}=n,o=i?`received values of types ${[...new Set(r.map(s=>`\`${E(s)}\``))].join(", ")}`:`received value of type \`${E(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${o}.`)}};fs.assert={undefined:t=>ie(E.undefined(t),"undefined",t),string:t=>ie(E.string(t),"string",t),number:t=>ie(E.number(t),"number",t),bigint:t=>ie(E.bigint(t),"bigint",t),function_:t=>ie(E.function_(t),"Function",t),null_:t=>ie(E.null_(t),"null",t),class_:t=>ie(E.class_(t),"Class",t),boolean:t=>ie(E.boolean(t),"boolean",t),symbol:t=>ie(E.symbol(t),"symbol",t),numericString:t=>ie(E.numericString(t),"string with a number",t),array:(t,e)=>{ie(E.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>ie(E.buffer(t),"Buffer",t),blob:t=>ie(E.blob(t),"Blob",t),nullOrUndefined:t=>ie(E.nullOrUndefined(t),"null or undefined",t),object:t=>ie(E.object(t),"Object",t),iterable:t=>ie(E.iterable(t),"Iterable",t),asyncIterable:t=>ie(E.asyncIterable(t),"AsyncIterable",t),generator:t=>ie(E.generator(t),"Generator",t),asyncGenerator:t=>ie(E.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>ie(E.nativePromise(t),"native Promise",t),promise:t=>ie(E.promise(t),"Promise",t),generatorFunction:t=>ie(E.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>ie(E.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>ie(E.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>ie(E.boundFunction(t),"Function",t),regExp:t=>ie(E.regExp(t),"RegExp",t),date:t=>ie(E.date(t),"Date",t),error:t=>ie(E.error(t),"Error",t),map:t=>ie(E.map(t),"Map",t),set:t=>ie(E.set(t),"Set",t),weakMap:t=>ie(E.weakMap(t),"WeakMap",t),weakSet:t=>ie(E.weakSet(t),"WeakSet",t),int8Array:t=>ie(E.int8Array(t),"Int8Array",t),uint8Array:t=>ie(E.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>ie(E.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>ie(E.int16Array(t),"Int16Array",t),uint16Array:t=>ie(E.uint16Array(t),"Uint16Array",t),int32Array:t=>ie(E.int32Array(t),"Int32Array",t),uint32Array:t=>ie(E.uint32Array(t),"Uint32Array",t),float32Array:t=>ie(E.float32Array(t),"Float32Array",t),float64Array:t=>ie(E.float64Array(t),"Float64Array",t),bigInt64Array:t=>ie(E.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>ie(E.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>ie(E.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>ie(E.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>ie(E.dataView(t),"DataView",t),enumCase:(t,e)=>ie(E.enumCase(t,e),"EnumCase",t),urlInstance:t=>ie(E.urlInstance(t),"URL",t),urlString:t=>ie(E.urlString(t),"string with a URL",t),truthy:t=>ie(E.truthy(t),"truthy",t),falsy:t=>ie(E.falsy(t),"falsy",t),nan:t=>ie(E.nan(t),"NaN",t),primitive:t=>ie(E.primitive(t),"primitive",t),integer:t=>ie(E.integer(t),"integer",t),safeInteger:t=>ie(E.safeInteger(t),"integer",t),plainObject:t=>ie(E.plainObject(t),"plain object",t),typedArray:t=>ie(E.typedArray(t),"TypedArray",t),arrayLike:t=>ie(E.arrayLike(t),"array-like",t),domElement:t=>ie(E.domElement(t),"HTMLElement",t),observable:t=>ie(E.observable(t),"Observable",t),nodeStream:t=>ie(E.nodeStream(t),"Node.js Stream",t),infinite:t=>ie(E.infinite(t),"infinite number",t),emptyArray:t=>ie(E.emptyArray(t),"empty array",t),nonEmptyArray:t=>ie(E.nonEmptyArray(t),"non-empty array",t),emptyString:t=>ie(E.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>ie(E.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>ie(E.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>ie(E.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>ie(E.emptyObject(t),"empty object",t),nonEmptyObject:t=>ie(E.nonEmptyObject(t),"non-empty object",t),emptySet:t=>ie(E.emptySet(t),"empty set",t),nonEmptySet:t=>ie(E.nonEmptySet(t),"non-empty set",t),emptyMap:t=>ie(E.emptyMap(t),"empty map",t),nonEmptyMap:t=>ie(E.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>ie(E.propertyKey(t),"PropertyKey",t),formData:t=>ie(E.formData(t),"FormData",t),urlSearchParams:t=>ie(E.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>ie(E.evenInteger(t),"even integer",t),oddInteger:t=>ie(E.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>ie(E.directInstanceOf(t,e),"T",t),inRange:(t,e)=>ie(E.inRange(t,e),"in range",t),any:(t,...e)=>ie(E.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>ie(E.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(E,{class:{value:E.class_},function:{value:E.function_},null:{value:E.null_}});Object.defineProperties(fs.assert,{class:{value:fs.assert.class_},function:{value:fs.assert.function_},null:{value:fs.assert.null_}});fs.default=E;_v.exports=E;_v.exports.default=E;_v.exports.assert=fs.assert});var jU=y((qRe,cD)=>{"use strict";var Av=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},Cp=class{static fn(e){return(...r)=>new Cp((n,i,o)=>{r.push(o),e(...r).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!s.shouldReject)&&(this._isPending=!1,r(a))},o=a=>{this._isPending=!1,n(a)},s=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,o,s)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new Av(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Cp.prototype,Promise.prototype);cD.exports=Cp;cD.exports.CancelError=Av});var qU=y((pD,fD)=>{"use strict";Object.defineProperty(pD,"__esModule",{value:!0});function gae(t){return t.encrypted}var lD=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",i=typeof r.secureConnect=="function",o=typeof r.close=="function",s=()=>{n&&r.connect(),gae(t)&&i&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),o&&t.once("close",r.close)};t.writable&&!t.connecting?s():t.connecting?t.once("connect",s):t.destroyed&&o&&r.close(t._hadError)};pD.default=lD;fD.exports=lD;fD.exports.default=lD});var WU=y((hD,mD)=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});var Hae=qU(),yae=require("util"),bae=Number(process.versions.node.split(".")[0]),dD=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=a=>{let u=a.emit.bind(a);a.emit=(c,...l)=>(c==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,a.emit=u),u(c,...l))};r(t);let n=()=>{e.abort=Date.now(),(!e.response||bae>=13)&&(e.phases.total=Date.now()-e.start)};t.prependOnceListener("abort",n);let i=a=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,yae.types.isProxy(a))return;let u=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};a.prependOnceListener("lookup",u),Hae.default(a,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(a.removeListener("lookup",u),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?i(t.socket):t.prependOnceListener("socket",i);let o=()=>{var a;e.upload=Date.now(),e.phases.request=e.upload-((a=e.secureConnect)!==null&&a!==void 0?a:e.connect)};return(()=>typeof t.writableFinished=="boolean"?t.writableFinished:t.finished&&t.outputSize===0&&(!t.socket||t.socket.writableLength===0))()?o():t.prependOnceListener("finish",o),t.prependOnceListener("response",a=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,a.timings=e,r(a),a.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),a.prependOnceListener("aborted",n)}),e};hD.default=dD;mD.exports=dD;mD.exports.default=dD});var YU=y((WRe,yD)=>{"use strict";var{V4MAPPED:vae,ADDRCONFIG:wae,ALL:JU,promises:{Resolver:VU},lookup:_ae}=require("dns"),{promisify:gD}=require("util"),Aae=require("os"),Pp=Symbol("cacheableLookupCreateConnection"),HD=Symbol("cacheableLookupInstance"),GU=Symbol("expires"),Iae=typeof JU=="number",KU=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},Sae=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},zU=()=>{let t=!1,e=!1;for(let r of Object.values(Aae.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},Eae=t=>Symbol.iterator in t,XU={ttl:!0},Dae={all:!0},Iv=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:i=.15,resolver:o=new VU,lookup:s=_ae}={}){if(this.maxTtl=r,this.errorTtl=i,this._cache=e,this._resolver=o,this._dnsLookup=gD(s),this._resolver instanceof VU?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=gD(this._resolver.resolve4.bind(this._resolver)),this._resolve6=gD(this._resolver.resolve6.bind(this._resolver))),this._iface=zU(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,n<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(i=>{r.all?n(null,i):n(null,i.address,i.family,i.expires,i.ttl)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let i=n.filter(o=>o.family===6);r.hints&vae&&(Iae&&r.hints&JU||i.length===0)?Sae(n):n=i}else r.family===4&&(n=n.filter(i=>i.family===4));if(r.hints&wae){let{_iface:i}=this;n=n.filter(o=>o.family===6?i.has6:i.has4)}if(n.length===0){let i=new Error(`cacheableLookup ENOTFOUND ${e}`);throw i.code="ENOTFOUND",i.hostname=e,i}return r.all?n:n[0]}async query(e){let r=await this._cache.get(e);if(!r){let n=this._pending[e];if(n)r=await n;else{let i=this.queryAndCache(e);this._pending[e]=i;try{r=await i}finally{delete this._pending[e]}}}return r=r.map(n=>({...n})),r}async _resolve(e){let r=async c=>{try{return await c}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[n,i]=await Promise.all([this._resolve4(e,XU),this._resolve6(e,XU)].map(c=>r(c))),o=0,s=0,a=0,u=Date.now();for(let c of n)c.family=4,c.expires=u+c.ttl*1e3,o=Math.max(o,c.ttl);for(let c of i)c.family=6,c.expires=u+c.ttl*1e3,s=Math.max(s,c.ttl);return n.length>0?i.length>0?a=Math.min(o,s):a=o:a=s,{entries:[...n,...i],cacheTtl:a}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[GU]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(i){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=i,o}}Eae(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,Dae);let r=await this._resolve(e);r.entries.length===0&&this._fallback&&(r=await this._lookup(e),r.entries.length!==0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,i=Date.now();for(let[o,s]of this._cache){let a=s[GU];i>=a?this._cache.delete(o):a<n&&(n=a)}n!==1/0&&this._tick(n-i)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(KU(e),Pp in e)throw new Error("CacheableLookup has been already installed");e[Pp]=e.createConnection,e[HD]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[Pp](r,n))}uninstall(e){if(KU(e),e[Pp]){if(e[HD]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Pp],delete e[Pp],delete e[HD]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=zU(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};yD.exports=Iv;yD.exports.default=Iv});var e3=y((VRe,ZU)=>{"use strict";var Cae="text/plain",Pae="us-ascii",QU=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),xae=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,s=n.split(";");o=e?"":o;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let u=(s.shift()||"").toLowerCase(),l=[...s.map(p=>{let[f,m=""]=p.split("=").map(h=>h.trim());return f==="charset"&&(m=m.toLowerCase(),m===Pae)?"":`${f}${m?`=${m}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||u&&u!==Cae)&&l.unshift(u),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`},Lae=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return xae(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname&&(i.pathname=i.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];QU(a,e.removeDirectoryIndex)&&(s=s.slice(0,s.length-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])QU(s,e.removeQueryParameters)&&i.searchParams.delete(s);e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters&&i.searchParams.sort(),e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};ZU.exports=Lae});var bD=y((GRe,r3)=>{r3.exports=t3;function t3(t,e){if(t&&e)return t3(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=t.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var xp=y((KRe,vD)=>{var n3=bD();vD.exports=n3(Sv);vD.exports.strict=n3(i3);Sv.proto=Sv(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Sv(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i3(this)},configurable:!0})});function Sv(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function i3(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Ev=y((zRe,s3)=>{var Tae=xp(),$ae=function(){},Rae=function(t){return t.setHeader&&typeof t.abort=="function"},Mae=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},o3=function(t,e,r){if(typeof e=="function")return o3(t,null,e);e||(e={}),r=Tae(r||$ae);var n=t._writableState,i=t._readableState,o=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||c()},c=function(){s=!1,o||r.call(t)},l=function(){o=!1,s||r.call(t)},p=function(b){r.call(t,b?new Error("exited with error code: "+b):null)},f=function(b){r.call(t,b)},m=function(){process.nextTick(h)},h=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},H=function(){t.req.on("finish",c)};return Rae(t)?(t.on("complete",c),t.on("abort",m),t.req?H():t.on("request",H)):s&&!n&&(t.on("end",u),t.on("close",u)),Mae(t)&&t.on("exit",p),t.on("end",l),t.on("finish",c),e.error!==!1&&t.on("error",f),t.on("close",m),function(){a=!0,t.removeListener("complete",c),t.removeListener("abort",m),t.removeListener("request",H),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("exit",p),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",m)}};s3.exports=o3});var c3=y((XRe,u3)=>{var kae=xp(),Oae=Ev(),wD=require("fs"),hm=function(){},Fae=/^v?\.0/.test(process.version),Dv=function(t){return typeof t=="function"},Bae=function(t){return!Fae||!wD?!1:(t instanceof(wD.ReadStream||hm)||t instanceof(wD.WriteStream||hm))&&Dv(t.close)},Nae=function(t){return t.setHeader&&Dv(t.abort)},Uae=function(t,e,r,n){n=kae(n);var i=!1;t.on("close",function(){i=!0}),Oae(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Bae(t))return t.close(hm);if(Nae(t))return t.abort();if(Dv(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},a3=function(t){t()},jae=function(t,e){return t.pipe(e)},qae=function(){var t=Array.prototype.slice.call(arguments),e=Dv(t[t.length-1]||hm)&&t.pop()||hm;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return Uae(i,s,a,function(u){r||(r=u),u&&n.forEach(a3),!s&&(n.forEach(a3),e(r))})});return t.reduce(jae)};u3.exports=qae});var p3=y((JRe,l3)=>{"use strict";var{PassThrough:Wae}=require("stream");l3.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new Wae({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var f3=y((YRe,Lp)=>{"use strict";var{constants:Vae}=require("buffer"),Gae=c3(),Kae=p3(),Cv=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Pv(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n;return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=Vae.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};n=Gae(t,Kae(e),a=>{if(a){s(a);return}i()}),n.on("data",()=>{n.getBufferedLength()>r&&s(new Cv)})}),n.getBufferedValue()}Lp.exports=Pv;Lp.exports.default=Pv;Lp.exports.buffer=(t,e)=>Pv(t,{...e,encoding:"buffer"});Lp.exports.array=(t,e)=>Pv(t,{...e,array:!0});Lp.exports.MaxBufferError=Cv});var h3=y((ZRe,d3)=>{"use strict";var zae=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Xae=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Jae=new Set([500,502,503,504]),Yae={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Qae={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function pc(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Zae(t){return t?Jae.has(t.status):!0}function _D(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function eue(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}d3.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=_D(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=_D(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":eue(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Xae.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||zae.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=_D(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Yae[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return pc(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return pc(this._rescc["s-maxage"])}if(this._rescc["max-age"])return pc(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+pc(this._rescc["stale-if-error"]),n=e+pc(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+pc(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+pc(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Zae(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Qae[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var xv=y((eMe,m3)=>{"use strict";m3.exports=t=>{let e={};for(let[r,n]of Object.entries(t))e[r.toLowerCase()]=n;return e}});var H3=y((tMe,g3)=>{"use strict";var tue=require("stream").Readable,rue=xv(),AD=class extends tue{constructor(e,r,n,i){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof i!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=rue(r),this.body=n,this.url=i}_read(){this.push(this.body),this.push(null)}};g3.exports=AD});var b3=y((rMe,y3)=>{"use strict";var nue=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];y3.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(nue));for(let n of r)n in e||(e[n]=typeof t[n]=="function"?t[n].bind(t):t[n])}});var w3=y((nMe,v3)=>{"use strict";var iue=require("stream").PassThrough,oue=b3(),sue=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new iue;return oue(t,e),t.pipe(e)};v3.exports=sue});var _3=y(ID=>{ID.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var i=!0;for(var o in e){var s=typeof e[o]=="function"||!n&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!s&&(i||(r+=","),i=!1,n?e[o]==null?r+="null":r+=t(e[o]):e[o]!==void 0&&(r+=t(o)+":"+t(e[o])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};ID.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var E3=y((oMe,S3)=>{"use strict";var aue=require("events"),A3=_3(),uue=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},I3=["sqlite","postgres","mysql","mongo","redis","tiered"],SD=class extends aue{constructor(e,{emitErrors:r=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:A3.stringify,deserialize:A3.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let o={...this.opts};this.opts.store=uue(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let i=o=>async function*(){for await(let[s,a]of typeof o=="function"?o(this.opts.store.namespace):o){let u=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!s.includes(this.opts.store.namespace))){if(typeof u.expires=="number"&&Date.now()>u.expires){this.delete(s);continue}yield[this._getKeyUnprefix(s),u.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=i(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=i(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return I3.includes(this.opts.store.opts.dialect)||I3.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:n}=this.opts,i=Array.isArray(e),o=i?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(i&&n.getMany===void 0){let s=[];for(let a of o)s.push(Promise.resolve().then(()=>n.get(a)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(a).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(s).then(a=>{let u=[];for(let c of a)u.push(c.value);return u})}return Promise.resolve().then(()=>i?n.getMany(o):n.get(o)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null){if(i){let a=[];for(let u of s){if(typeof u=="string"&&(u=this.opts.deserialize(u)),u==null){a.push(void 0);continue}typeof u.expires=="number"&&Date.now()>u.expires?(this.delete(e).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?u:u.value)}return a}return typeof s.expires=="number"&&Date.now()>s.expires?this.delete(e).then(()=>{}):r&&r.raw?s:s.value}})}set(e,r,n){let i=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:s},this.opts.serialize(r)}).then(s=>o.set(i,s,n)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let i=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let o=[];for(let s of i)o.push(r.delete(s));return Promise.allSettled(o).then(s=>s.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(i))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(r):await n.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};S3.exports=SD});var P3=y((sMe,C3)=>{"use strict";var cue=require("events"),Lv=require("url"),lue=e3(),pue=f3(),ED=h3(),D3=H3(),fue=xv(),due=w3(),hue=E3(),Pi=class{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new hue({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,n)=>{let i;if(typeof r=="string")i=DD(Lv.parse(r)),r={};else if(r instanceof Lv.URL)i=DD(Lv.parse(r.toString())),r={};else{let[p,...f]=(r.path||"").split("?"),m=f.length>0?`?${f.join("?")}`:"";i=DD({...r,pathname:p,search:m})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...mue(i)},r.headers=fue(r.headers);let o=new cue,s=lue(Lv.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${s}`,u=!1,c=!1,l=p=>{c=!0;let f=!1,m,h=new Promise(b=>{m=()=>{f||(f=!0,b())}}),H=b=>{if(u&&!p.forceRefresh){b.status=b.statusCode;let $=ED.fromObject(u.cachePolicy).revalidatedPolicy(p,b);if(!$.modified){let U=$.policy.responseHeaders();b=new D3(u.statusCode,U,u.body,u.url),b.cachePolicy=$.policy,b.fromCache=!0}}b.fromCache||(b.cachePolicy=new ED(p,b,p),b.fromCache=!1);let _;p.cache&&b.cachePolicy.storable()?(_=due(b),(async()=>{try{let $=pue.buffer(b);if(await Promise.race([h,new Promise(j=>b.once("end",j))]),f)return;let U=await $,D={cachePolicy:b.cachePolicy.toObject(),url:b.url,statusCode:b.fromCache?u.statusCode:b.statusCode,body:U},P=p.strictTtl?b.cachePolicy.timeToLive():void 0;p.maxTtl&&(P=P?Math.min(P,p.maxTtl):p.maxTtl),await this.cache.set(a,D,P)}catch($){o.emit("error",new Pi.CacheError($))}})()):p.cache&&u&&(async()=>{try{await this.cache.delete(a)}catch($){o.emit("error",new Pi.CacheError($))}})(),o.emit("response",_||b),typeof n=="function"&&n(_||b)};try{let b=e(p,H);b.once("error",m),b.once("abort",m),o.emit("request",b)}catch(b){o.emit("error",new Pi.RequestError(b))}};return(async()=>{let p=async m=>{await Promise.resolve();let h=m.cache?await this.cache.get(a):void 0;if(typeof h>"u")return l(m);let H=ED.fromObject(h.cachePolicy);if(H.satisfiesWithoutRevalidation(m)&&!m.forceRefresh){let b=H.responseHeaders(),_=new D3(h.statusCode,b,h.body,h.url);_.cachePolicy=H,_.fromCache=!0,o.emit("response",_),typeof n=="function"&&n(_)}else u=h,m.headers=H.revalidationHeaders(m),l(m)},f=m=>o.emit("error",new Pi.CacheError(m));this.cache.once("error",f),o.on("response",()=>this.cache.removeListener("error",f));try{await p(r)}catch(m){r.automaticFailover&&!c&&l(r),o.emit("error",new Pi.CacheError(m))}})(),o}}};function mue(t){let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function DD(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}Pi.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}};Pi.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}};C3.exports=Pi});var L3=y((cMe,x3)=>{"use strict";var gue=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];x3.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(gue)),n={};for(let i of r)i in e||(n[i]={get(){let o=t[i];return typeof o=="function"?o.bind(t):o},set(o){t[i]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var $3=y((lMe,T3)=>{"use strict";var{Transform:Hue,PassThrough:yue}=require("stream"),CD=require("zlib"),bue=L3();T3.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof CD.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,i=new Hue({transform(a,u,c){n=!1,c(null,a)},flush(a){a()}}),o=new yue({autoDestroy:!1,destroy(a,u){t.destroy(),u(a)}}),s=r?CD.createBrotliDecompress():CD.createUnzip();return s.once("error",a=>{if(n&&!t.readable){o.end();return}o.destroy(a)}),bue(t,o),t.pipe(i).pipe(s).pipe(o),o}});var xD=y((pMe,R3)=>{"use strict";var PD=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,i]of this.oldCache.entries())this.onEviction(n,i);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};R3.exports=PD});var TD=y((fMe,F3)=>{"use strict";var vue=require("events"),wue=require("tls"),_ue=require("http2"),Aue=xD(),Jr=Symbol("currentStreamsCount"),M3=Symbol("request"),ti=Symbol("cachedOriginSet"),Tp=Symbol("gracefullyClosing"),Iue=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],Sue=(t,e,r)=>{let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n},Eue=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,LD=(t,e)=>{for(let r of t)r[ti].length<e[ti].length&&r[ti].every(n=>e[ti].includes(n))&&r[Jr]+e[Jr]<=e.remoteSettings.maxConcurrentStreams&&O3(r)},Due=(t,e)=>{for(let r of t)e[ti].length<r[ti].length&&e[ti].every(n=>r[ti].includes(n))&&e[Jr]+r[Jr]<=r.remoteSettings.maxConcurrentStreams&&O3(e)},k3=({agent:t,isFree:e})=>{let r={};for(let n in t.sessions){let o=t.sessions[n].filter(s=>{let a=s[xo.kCurrentStreamsCount]<s.remoteSettings.maxConcurrentStreams;return e?a:!a});o.length!==0&&(r[n]=o)}return r},O3=t=>{t[Tp]=!0,t[Jr]===0&&t.close()},xo=class extends vue{constructor({timeout:e=6e4,maxSessions:r=1/0,maxFreeSessions:n=10,maxCachedTlsSessions:i=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxFreeSessions=n,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new Aue({maxSize:i})}static normalizeOrigin(e,r){return typeof e=="string"&&(e=new URL(e)),r&&e.hostname!==r&&(e.hostname=r),e.origin}normalizeOptions(e){let r="";if(e)for(let n of Iue)e[n]&&(r+=`:${e[n]}`);return r}_tryToCreateNewSession(e,r){if(!(e in this.queue)||!(r in this.queue[e]))return;let n=this.queue[e][r];this._sessionsCount<this.maxSessions&&!n.completed&&(n.completed=!0,n())}getSession(e,r,n){return new Promise((i,o)=>{Array.isArray(n)?(n=[...n],i()):n=[{resolve:i,reject:o}];let s=this.normalizeOptions(r),a=xo.normalizeOrigin(e,r&&r.servername);if(a===void 0){for(let{reject:l}of n)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(s in this.sessions){let l=this.sessions[s],p=-1,f=-1,m;for(let h of l){let H=h.remoteSettings.maxConcurrentStreams;if(H<p)break;if(h[ti].includes(a)){let b=h[Jr];if(b>=H||h[Tp]||h.destroyed)continue;m||(p=H),b>f&&(m=h,f=b)}}if(m){if(n.length!==1){for(let{reject:h}of n){let H=new Error(`Expected the length of listeners to be 1, got ${n.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);h(H)}return}n[0].resolve(m);return}}if(s in this.queue){if(a in this.queue[s]){this.queue[s][a].listeners.push(...n),this._tryToCreateNewSession(s,a);return}}else this.queue[s]={};let u=()=>{s in this.queue&&this.queue[s][a]===c&&(delete this.queue[s][a],Object.keys(this.queue[s]).length===0&&delete this.queue[s])},c=()=>{let l=`${a}:${s}`,p=!1;try{let f=_ue.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...r});f[Jr]=0,f[Tp]=!1;let m=()=>f[Jr]<f.remoteSettings.maxConcurrentStreams,h=!0;f.socket.once("session",b=>{this.tlsSessionCache.set(l,b)}),f.once("error",b=>{for(let{reject:_}of n)_(b);this.tlsSessionCache.delete(l)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(p){h&&this._freeSessionsCount--,this._sessionsCount--;let b=this.sessions[s];b.splice(b.indexOf(f),1),b.length===0&&delete this.sessions[s]}else{let b=new Error("Session closed without receiving a SETTINGS frame");b.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:_}of n)_(b);u()}this._tryToCreateNewSession(s,a)});let H=()=>{if(!(!(s in this.queue)||!m())){for(let b of f[ti])if(b in this.queue[s]){let{listeners:_}=this.queue[s][b];for(;_.length!==0&&m();)_.shift().resolve(f);let $=this.queue[s];if($[b].listeners.length===0&&(delete $[b],Object.keys($).length===0)){delete this.queue[s];break}if(!m())break}}};f.on("origin",()=>{f[ti]=f.originSet,m()&&(H(),LD(this.sessions[s],f))}),f.once("remoteSettings",()=>{if(f.ref(),f.unref(),this._sessionsCount++,c.destroyed){let b=new Error("Agent has been destroyed");for(let _ of n)_.reject(b);f.destroy();return}f[ti]=f.originSet;{let b=this.sessions;if(s in b){let _=b[s];_.splice(Sue(_,f,Eue),0,f)}else b[s]=[f]}this._freeSessionsCount+=1,p=!0,this.emit("session",f),H(),u(),f[Jr]===0&&this._freeSessionsCount>this.maxFreeSessions&&f.close(),n.length!==0&&(this.getSession(a,r,n),n.length=0),f.on("remoteSettings",()=>{H(),LD(this.sessions[s],f)})}),f[M3]=f.request,f.request=(b,_)=>{if(f[Tp])throw new Error("The session is gracefully closing. No new streams are allowed.");let $=f[M3](b,_);return f.ref(),++f[Jr],f[Jr]===f.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,$.once("close",()=>{if(h=m(),--f[Jr],!f.destroyed&&!f.closed&&(Due(this.sessions[s],f),m()&&!f.closed)){h||(this._freeSessionsCount++,h=!0);let U=f[Jr]===0;U&&f.unref(),U&&(this._freeSessionsCount>this.maxFreeSessions||f[Tp])?f.close():(LD(this.sessions[s],f),H())}}),$}}catch(f){for(let m of n)m.reject(f);u()}};c.listeners=n,c.completed=!1,c.destroyed=!1,this.queue[s][a]=c,this._tryToCreateNewSession(s,a)})}request(e,r,n,i){return new Promise((o,s)=>{this.getSession(e,r,[{reject:s,resolve:a=>{try{o(a.request(n,i))}catch(u){s(u)}}}])})}createConnection(e,r){return xo.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,i=e.hostname||e.host;return typeof r.servername>"u"&&(r.servername=i),wue.connect(n,i,r)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let r of e)r[Jr]===0&&r.close()}destroy(e){for(let r of Object.values(this.sessions))for(let n of r)n.destroy(e);for(let r of Object.values(this.queue))for(let n of Object.values(r))n.destroyed=!0;this.queue={}}get freeSessions(){return k3({agent:this,isFree:!0})}get busySessions(){return k3({agent:this,isFree:!1})}};xo.kCurrentStreamsCount=Jr;xo.kGracefullyClosing=Tp;F3.exports={Agent:xo,globalAgent:new xo}});var RD=y((dMe,B3)=>{"use strict";var{Readable:Cue}=require("stream"),$D=class extends Cue{constructor(e,r){super({highWaterMark:r,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};B3.exports=$D});var MD=y((hMe,N3)=>{"use strict";N3.exports=t=>{let e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return typeof t.port=="string"&&t.port.length!==0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var j3=y((mMe,U3)=>{"use strict";U3.exports=(t,e,r)=>{for(let n of r)t.on(n,(...i)=>e.emit(n,...i))}});var W3=y((gMe,q3)=>{"use strict";q3.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var G3=y((yMe,V3)=>{"use strict";var $p=(t,e,r)=>{V3.exports[e]=class extends t{constructor(...i){super(typeof r=="string"?r:r(i)),this.name=`${super.name} [${e}]`,this.code=e}}};$p(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});$p(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);$p(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);$p(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);$p(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);$p(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`)});var ND=y((bMe,Z3)=>{"use strict";var Pue=require("http2"),{Writable:xue}=require("stream"),{Agent:K3,globalAgent:Lue}=TD(),Tue=RD(),$ue=MD(),Rue=j3(),Mue=W3(),{ERR_INVALID_ARG_TYPE:kD,ERR_INVALID_PROTOCOL:kue,ERR_HTTP_HEADERS_SENT:z3,ERR_INVALID_HTTP_TOKEN:Oue,ERR_HTTP_INVALID_HEADER_VALUE:Fue,ERR_INVALID_CHAR:Bue}=G3(),{HTTP2_HEADER_STATUS:X3,HTTP2_HEADER_METHOD:J3,HTTP2_HEADER_PATH:Y3,HTTP2_METHOD_CONNECT:Nue}=Pue.constants,Fr=Symbol("headers"),OD=Symbol("origin"),FD=Symbol("session"),Q3=Symbol("options"),Tv=Symbol("flushedHeaders"),mm=Symbol("jobs"),Uue=/^[\^`\-\w!#$%&*+.|~]+$/,jue=/[^\t\u0020-\u007E\u0080-\u00FF]/,BD=class extends xue{constructor(e,r,n){super({autoDestroy:!1});let i=typeof e=="string"||e instanceof URL;if(i&&(e=$ue(e instanceof URL?e:new URL(e))),typeof r=="function"||r===void 0?(n=r,r=i?e:{...e}):r={...e,...r},r.h2session)this[FD]=r.h2session;else if(r.agent===!1)this.agent=new K3({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new K3({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=Lue;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new kD("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new kue(r.protocol,"https:");let o=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,s=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[Fr]=Object.create(null),this[mm]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[u,c]of Object.entries(r.headers))this.setHeader(u,c);r.auth&&!("authorization"in this[Fr])&&(this[Fr].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Q3]=r,o===443?(this[OD]=`https://${s}`,":authority"in this[Fr]||(this[Fr][":authority"]=s)):(this[OD]=`https://${s}:${o}`,":authority"in this[Fr]||(this[Fr][":authority"]=`${s}:${o}`)),a&&this.setTimeout(a),n&&this.once("response",n),this[Tv]=!1}get method(){return this[Fr][J3]}set method(e){e&&(this[Fr][J3]=e.toUpperCase())}get path(){return this[Fr][Y3]}set path(e){e&&(this[Fr][Y3]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let i=()=>this._request.write(e,r,n);this._request?i():this[mm].push(i)}_final(e){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?r():this[mm].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(e)}async flushHeaders(){if(this[Tv]||this.destroyed)return;this[Tv]=!0;let e=this.method===Nue,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||Rue(n,this,["timeout","continue","close","error"]);let i=s=>(...a)=>{!this.writable&&!this.destroyed?s(...a):this.once("finish",()=>{s(...a)})};n.once("response",i((s,a,u)=>{let c=new Tue(this.socket,n.readableHighWaterMark);this.res=c,c.req=this,c.statusCode=s[X3],c.headers=s,c.rawHeaders=u,c.once("end",()=>{this.aborted?(c.aborted=!0,c.emit("aborted")):(c.complete=!0,c.socket=null,c.connection=null)}),e?(c.upgrade=!0,this.emit("connect",c,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",l=>{!c._dumped&&!c.push(l)&&n.pause()}),n.once("end",()=>{c.push(null)}),this.emit("response",c)||c._dump())})),n.once("headers",i(s=>this.emit("information",{statusCode:s[X3]}))),n.once("trailers",i((s,a,u)=>{let{res:c}=this;c.trailers=s,c.rawTrailers=u}));let{socket:o}=n.session;this.socket=o,this.connection=o;for(let s of this[mm])s();this.emit("socket",this.socket)};if(this[FD])try{r(this[FD].request(this[Fr]))}catch(n){this.emit("error",n)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[OD],this[Q3],this[Fr]))}catch(n){this.emit("error",n)}}}getHeader(e){if(typeof e!="string")throw new kD("name","string",e);return this[Fr][e.toLowerCase()]}get headersSent(){return this[Tv]}removeHeader(e){if(typeof e!="string")throw new kD("name","string",e);if(this.headersSent)throw new z3("remove");delete this[Fr][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new z3("set");if(typeof e!="string"||!Uue.test(e)&&!Mue(e))throw new Oue("Header name",e);if(typeof r>"u")throw new Fue(r,e);if(jue.test(r))throw new Bue("header content",e);this[Fr][e.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[mm].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};Z3.exports=BD});var t2=y((vMe,e2)=>{"use strict";var que=require("tls");e2.exports=(t={},e=que.connect)=>new Promise((r,n)=>{let i=!1,o,s=async()=>{await u,o.off("timeout",a),o.off("error",n),t.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:i}),i&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:i}))},a=async()=>{i=!0,s()},u=(async()=>{try{o=await e(t,s),o.on("error",n),o.once("timeout",a)}catch(c){n(c)}})()})});var n2=y((wMe,r2)=>{"use strict";var Wue=require("net");r2.exports=t=>{let e=t.host,r=t.headers&&t.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?e=r:e=r.slice(1,-1):e=r.split(":",1)[0]),Wue.isIP(e)?"":e}});var s2=y((_Me,jD)=>{"use strict";var i2=require("http"),UD=require("https"),Vue=t2(),Gue=xD(),Kue=ND(),zue=n2(),Xue=MD(),$v=new Gue({maxSize:100}),gm=new Map,o2=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let i=()=>{t.removeSocket(e,r)};e.on("close",i);let o=()=>{t.removeSocket(e,r),e.off("close",i),e.off("free",n),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},Jue=async t=>{let e=`${t.host}:${t.port}:${t.ALPNProtocols.sort()}`;if(!$v.has(e)){if(gm.has(e))return(await gm.get(e)).alpnProtocol;let{path:r,agent:n}=t;t.path=t.socketPath;let i=Vue(t);gm.set(e,i);try{let{socket:o,alpnProtocol:s}=await i;if($v.set(e,s),t.path=r,s==="h2")o.destroy();else{let{globalAgent:a}=UD,u=UD.Agent.prototype.createConnection;n?n.createConnection===u?o2(n,o,t):o.destroy():a.createConnection===u?o2(a,o,t):o.destroy()}return gm.delete(e),s}catch(o){throw gm.delete(e),o}}return $v.get(e)};jD.exports=async(t,e,r)=>{if((typeof t=="string"||t instanceof URL)&&(t=Xue(new URL(t))),typeof e=="function"&&(r=e,e=void 0),e={ALPNProtocols:["h2","http/1.1"],...t,...e,resolveSocket:!0},!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||zue(e),e.port=e.port||(n?443:80),e._defaultAgent=n?UD.globalAgent:i2.globalAgent;let i=e.agent;if(i){if(i.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=i[n?"https":"http"]}return n&&await Jue(e)==="h2"?(i&&(e.agent=i.http2),new Kue(e,r)):i2.request(e,r)};jD.exports.protocolCache=$v});var u2=y((AMe,a2)=>{"use strict";var Yue=require("http2"),Que=TD(),qD=ND(),Zue=RD(),ece=s2(),tce=(t,e,r)=>new qD(t,e,r),rce=(t,e,r)=>{let n=new qD(t,e,r);return n.end(),n};a2.exports={...Yue,ClientRequest:qD,IncomingMessage:Zue,...Que,request:tce,get:rce,auto:ece}});var VD=y(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});var c2=ds();WD.default=t=>c2.default.nodeStream(t)&&c2.default.function_(t.getBoundary)});var d2=y(GD=>{"use strict";Object.defineProperty(GD,"__esModule",{value:!0});var p2=require("fs"),f2=require("util"),l2=ds(),nce=VD(),ice=f2.promisify(p2.stat);GD.default=async(t,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(l2.default.string(t))return Buffer.byteLength(t);if(l2.default.buffer(t))return t.length;if(nce.default(t))return f2.promisify(t.getLength.bind(t))();if(t instanceof p2.ReadStream){let{size:r}=await ice(t.path);return r===0?void 0:r}}});var zD=y(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});function oce(t,e,r){let n={};for(let i of r)n[i]=(...o)=>{e.emit(i,...o)},t.on(i,n[i]);return()=>{for(let i of r)t.off(i,n[i])}}KD.default=oce});var h2=y(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});XD.default=()=>{let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:i}=e;r.removeListener(n,i)}t.length=0}}}});var g2=y(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.TimeoutError=void 0;var sce=require("net"),ace=h2(),m2=Symbol("reentry"),uce=()=>{},Rv=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};Hm.TimeoutError=Rv;Hm.default=(t,e,r)=>{if(m2 in t)return uce;t[m2]=!0;let n=[],{once:i,unhandleAll:o}=ace.default(),s=(p,f,m)=>{var h;let H=setTimeout(f,p,p,m);(h=H.unref)===null||h===void 0||h.call(H);let b=()=>{clearTimeout(H)};return n.push(b),b},{host:a,hostname:u}=r,c=(p,f)=>{t.destroy(new Rv(p,f))},l=()=>{for(let p of n)p();o()};if(t.once("error",p=>{if(l(),t.listenerCount("error")===0)throw p}),t.once("close",l),i(t,"response",p=>{i(p,"end",l)}),typeof e.request<"u"&&s(e.request,c,"request"),typeof e.socket<"u"){let p=()=>{c(e.socket,"socket")};t.setTimeout(e.socket,p),n.push(()=>{t.removeListener("timeout",p)})}return i(t,"socket",p=>{var f;let{socketPath:m}=t;if(p.connecting){let h=Boolean(m??sce.isIP((f=u??a)!==null&&f!==void 0?f:"")!==0);if(typeof e.lookup<"u"&&!h&&typeof p.address().address>"u"){let H=s(e.lookup,c,"lookup");i(p,"lookup",H)}if(typeof e.connect<"u"){let H=()=>s(e.connect,c,"connect");h?i(p,"connect",H()):i(p,"lookup",b=>{b===null&&i(p,"connect",H())})}typeof e.secureConnect<"u"&&r.protocol==="https:"&&i(p,"connect",()=>{let H=s(e.secureConnect,c,"secureConnect");i(p,"secureConnect",H)})}if(typeof e.send<"u"){let h=()=>s(e.send,c,"send");p.connecting?i(p,"connect",()=>{i(t,"upload-complete",h())}):i(t,"upload-complete",h())}}),typeof e.response<"u"&&i(t,"upload-complete",()=>{let p=s(e.response,c,"response");i(t,"response",p)}),l}});var y2=y(JD=>{"use strict";Object.defineProperty(JD,"__esModule",{value:!0});var H2=ds();JD.default=t=>{t=t;let e={protocol:t.protocol,hostname:H2.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return H2.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var b2=y(YD=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});var cce=require("url"),lce=["protocol","host","hostname","port","pathname","search"];YD.default=(t,e)=>{var r,n;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!t){if(!e.protocol)throw new TypeError("No URL protocol specified");t=`${e.protocol}//${(n=(r=e.hostname)!==null&&r!==void 0?r:e.host)!==null&&n!==void 0?n:""}`}let i=new cce.URL(t);if(e.path){let o=e.path.indexOf("?");o===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,o),e.search=e.path.slice(o+1)),delete e.path}for(let o of lce)e[o]&&(i[o]=e[o].toString());return i}});var v2=y(ZD=>{"use strict";Object.defineProperty(ZD,"__esModule",{value:!0});var QD=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};ZD.default=QD});var tC=y(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0});var pce=async t=>{let e=[],r=0;for await(let n of t)e.push(n),r+=Buffer.byteLength(n);return Buffer.isBuffer(e[0])?Buffer.concat(e,r):Buffer.from(e.join(""))};eC.default=pce});var _2=y(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.dnsLookupIpVersionToFamily=fc.isDnsLookupIpVersion=void 0;var w2={auto:0,ipv4:4,ipv6:6};fc.isDnsLookupIpVersion=t=>t in w2;fc.dnsLookupIpVersionToFamily=t=>{if(fc.isDnsLookupIpVersion(t))return w2[t];throw new Error("Invalid DNS lookup IP version")}});var rC=y(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.isResponseOk=void 0;Mv.isResponseOk=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304}});var I2=y(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});var A2=new Set;nC.default=t=>{A2.has(t)||(A2.add(t),process.emitWarning(`Got: ${t}`,{type:"DeprecationWarning"}))}});var S2=y(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});var ct=ds(),fce=(t,e)=>{if(ct.default.null_(t.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");ct.assert.any([ct.default.string,ct.default.undefined],t.encoding),ct.assert.any([ct.default.boolean,ct.default.undefined],t.resolveBodyOnly),ct.assert.any([ct.default.boolean,ct.default.undefined],t.methodRewriting),ct.assert.any([ct.default.boolean,ct.default.undefined],t.isStream),ct.assert.any([ct.default.string,ct.default.undefined],t.responseType),t.responseType===void 0&&(t.responseType="text");let{retry:r}=t;if(e?t.retry={...e.retry}:t.retry={calculateDelay:n=>n.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},ct.default.object(r)?(t.retry={...t.retry,...r},t.retry.methods=[...new Set(t.retry.methods.map(n=>n.toUpperCase()))],t.retry.statusCodes=[...new Set(t.retry.statusCodes)],t.retry.errorCodes=[...new Set(t.retry.errorCodes)]):ct.default.number(r)&&(t.retry.limit=r),ct.default.undefined(t.retry.maxRetryAfter)&&(t.retry.maxRetryAfter=Math.min(...[t.timeout.request,t.timeout.connect].filter(ct.default.number))),ct.default.object(t.pagination)){e&&(t.pagination={...e.pagination,...t.pagination});let{pagination:n}=t;if(!ct.default.function_(n.transform))throw new Error("`options.pagination.transform` must be implemented");if(!ct.default.function_(n.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!ct.default.function_(n.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!ct.default.function_(n.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return t.responseType==="json"&&t.headers.accept===void 0&&(t.headers.accept="application/json"),t};iC.default=fce});var E2=y(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.retryAfterStatusCodes=void 0;ym.retryAfterStatusCodes=new Set([413,429,503]);var dce=({attemptCount:t,retryOptions:e,error:r,retryAfter:n})=>{if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),s=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!s)return 0;if(r.response){if(n)return e.maxRetryAfter===void 0||n>e.maxRetryAfter?0:n;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(t-1)*1e3+a};ym.default=dce});var wm=y(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.UnsupportedProtocolError=Be.ReadError=Be.TimeoutError=Be.UploadError=Be.CacheError=Be.HTTPError=Be.MaxRedirectsError=Be.RequestError=Be.setNonEnumerableProperties=Be.knownHookEvents=Be.withoutBody=Be.kIsNormalizedAlready=void 0;var D2=require("util"),C2=require("stream"),hce=require("fs"),xa=require("url"),P2=require("http"),oC=require("http"),mce=require("https"),gce=WU(),Hce=YU(),x2=P3(),yce=$3(),bce=u2(),vce=xv(),G=ds(),wce=d2(),L2=VD(),_ce=zD(),T2=g2(),Ace=y2(),$2=b2(),Ice=v2(),Sce=tC(),R2=_2(),Ece=rC(),La=I2(),Dce=S2(),Cce=E2(),sC,yr=Symbol("request"),Fv=Symbol("response"),Rp=Symbol("responseSize"),Mp=Symbol("downloadedSize"),kp=Symbol("bodySize"),Op=Symbol("uploadedSize"),kv=Symbol("serverResponsesPiped"),M2=Symbol("unproxyEvents"),k2=Symbol("isFromCache"),aC=Symbol("cancelTimeouts"),O2=Symbol("startedReading"),Fp=Symbol("stopReading"),Ov=Symbol("triggerRead"),Ta=Symbol("body"),bm=Symbol("jobs"),F2=Symbol("originalResponse"),B2=Symbol("retryTimeout");Be.kIsNormalizedAlready=Symbol("isNormalizedAlready");var Pce=G.default.string(process.versions.brotli);Be.withoutBody=new Set(["GET","HEAD"]);Be.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function xce(t){for(let e in t){let r=t[e];if(!G.default.string(r)&&!G.default.number(r)&&!G.default.boolean(r)&&!G.default.null_(r)&&!G.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function Lce(t){return G.default.object(t)&&!("statusCode"in t)}var uC=new Ice.default,Tce=async t=>new Promise((e,r)=>{let n=i=>{r(i)};t.pending||e(),t.once("error",n),t.once("ready",()=>{t.off("error",n),e()})}),$ce=new Set([300,301,302,303,304,307,308]),Rce=["context","body","json","form"];Be.setNonEnumerableProperties=(t,e)=>{let r={};for(let n of t)if(n)for(let i of Rce)i in n&&(r[i]={writable:!0,configurable:!0,enumerable:!1,value:n[i]});Object.defineProperties(e,r)};var Mt=class extends Error{constructor(e,r,n){var i,o;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(i=r.code)!==null&&i!==void 0?i:"ERR_GOT_REQUEST_ERROR",n instanceof Vv?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n[Fv]}),Object.defineProperty(this,"options",{enumerable:!1,value:n.options})):Object.defineProperty(this,"options",{enumerable:!1,value:n}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,G.default.string(r.stack)&&G.default.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(s).split(`
`).reverse(),u=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;u.length!==0&&u[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,s)}${a.reverse().join(`
`)}${u.reverse().join(`
`)}`}}};Be.RequestError=Mt;var Bv=class extends Mt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};Be.MaxRedirectsError=Bv;var Nv=class extends Mt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};Be.HTTPError=Nv;var Uv=class extends Mt{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};Be.CacheError=Uv;var jv=class extends Mt{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};Be.UploadError=jv;var qv=class extends Mt{constructor(e,r,n){super(e.message,e,n),this.name="TimeoutError",this.event=e.event,this.timings=r}};Be.TimeoutError=qv;var vm=class extends Mt{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};Be.ReadError=vm;var Wv=class extends Mt{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};Be.UnsupportedProtocolError=Wv;var Mce=["socket","connect","continue","information","upgrade","timeout"],Vv=class extends C2.Duplex{constructor(e,r={},n){super({autoDestroy:!1,highWaterMark:0}),this[Mp]=0,this[Op]=0,this.requestInitialized=!1,this[kv]=new Set,this.redirects=[],this[Fp]=!1,this[Ov]=!1,this[bm]=[],this.retryCount=0,this._progressCallbacks=[];let i=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",c=>{c.prependListener("data",i),c.on("data",o),c.prependListener("end",i),c.on("end",o)}),this.on("unpipe",c=>{c.off("data",i),c.off("data",o),c.off("end",i),c.off("end",o)}),this.on("pipe",c=>{c instanceof oC.IncomingMessage&&(this.options.headers={...c.headers,...this.options.headers})});let{json:s,body:a,form:u}=r;if((s||a||u)&&this._lockWrite(),Be.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,n)}catch(c){G.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(c);return}(async()=>{var c;try{this.options.body instanceof hce.ReadStream&&await Tce(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(c=this[yr])===null||c===void 0||c.destroy();return}for(let p of this[bm])p();this[bm].length=0,this.requestInitialized=!0}catch(l){if(l instanceof Mt){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(e,r,n){var i,o,s,a,u;let c=r;if(G.default.object(e)&&!G.default.urlInstance(e))r={...n,...e,...r};else{if(e&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...n,...r},e!==void 0&&(r.url=e),G.default.urlInstance(r.url)&&(r.url=new xa.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),G.assert.any([G.default.string,G.default.undefined],r.method),G.assert.any([G.default.object,G.default.undefined],r.headers),G.assert.any([G.default.string,G.default.urlInstance,G.default.undefined],r.prefixUrl),G.assert.any([G.default.object,G.default.undefined],r.cookieJar),G.assert.any([G.default.object,G.default.string,G.default.undefined],r.searchParams),G.assert.any([G.default.object,G.default.string,G.default.undefined],r.cache),G.assert.any([G.default.object,G.default.number,G.default.undefined],r.timeout),G.assert.any([G.default.object,G.default.undefined],r.context),G.assert.any([G.default.object,G.default.undefined],r.hooks),G.assert.any([G.default.boolean,G.default.undefined],r.decompress),G.assert.any([G.default.boolean,G.default.undefined],r.ignoreInvalidCookies),G.assert.any([G.default.boolean,G.default.undefined],r.followRedirect),G.assert.any([G.default.number,G.default.undefined],r.maxRedirects),G.assert.any([G.default.boolean,G.default.undefined],r.throwHttpErrors),G.assert.any([G.default.boolean,G.default.undefined],r.http2),G.assert.any([G.default.boolean,G.default.undefined],r.allowGetBody),G.assert.any([G.default.string,G.default.undefined],r.localAddress),G.assert.any([R2.isDnsLookupIpVersion,G.default.undefined],r.dnsLookupIpVersion),G.assert.any([G.default.object,G.default.undefined],r.https),G.assert.any([G.default.boolean,G.default.undefined],r.rejectUnauthorized),r.https&&(G.assert.any([G.default.boolean,G.default.undefined],r.https.rejectUnauthorized),G.assert.any([G.default.function_,G.default.undefined],r.https.checkServerIdentity),G.assert.any([G.default.string,G.default.object,G.default.array,G.default.undefined],r.https.certificateAuthority),G.assert.any([G.default.string,G.default.object,G.default.array,G.default.undefined],r.https.key),G.assert.any([G.default.string,G.default.object,G.default.array,G.default.undefined],r.https.certificate),G.assert.any([G.default.string,G.default.undefined],r.https.passphrase),G.assert.any([G.default.string,G.default.buffer,G.default.array,G.default.undefined],r.https.pfx)),G.assert.any([G.default.object,G.default.undefined],r.cacheOptions),G.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===n?.headers?r.headers={...r.headers}:r.headers=vce({...n?.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==n?.searchParams){let m;if(G.default.string(r.searchParams)||r.searchParams instanceof xa.URLSearchParams)m=new xa.URLSearchParams(r.searchParams);else{xce(r.searchParams),m=new xa.URLSearchParams;for(let h in r.searchParams){let H=r.searchParams[h];H===null?m.append(h,""):H!==void 0&&m.append(h,H)}}(i=n?.searchParams)===null||i===void 0||i.forEach((h,H)=>{m.has(H)||m.append(H,h)}),r.searchParams=m}if(r.username=(o=r.username)!==null&&o!==void 0?o:"",r.password=(s=r.password)!==null&&s!==void 0?s:"",G.default.undefined(r.prefixUrl)?r.prefixUrl=(a=n?.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),G.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=$2.default(r.prefixUrl+r.url,r)}else(G.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=$2.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:m}=r;Object.defineProperty(r,"prefixUrl",{set:H=>{let b=r.url;if(!b.href.startsWith(H))throw new Error(`Cannot change \`prefixUrl\` from ${m} to ${H}: ${b.href}`);r.url=new xa.URL(H+b.href.slice(m.length)),m=H},get:()=>m});let{protocol:h}=r.url;if(h==="unix:"&&(h="http:",r.url=new xa.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),h!=="http:"&&h!=="https:")throw new Wv(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:l}=r;if(l){let{setCookie:m,getCookieString:h}=l;G.assert.function_(m),G.assert.function_(h),m.length===4&&h.length===0&&(m=D2.promisify(m.bind(r.cookieJar)),h=D2.promisify(h.bind(r.cookieJar)),r.cookieJar={setCookie:m,getCookieString:h})}let{cache:p}=r;if(p&&(uC.has(p)||uC.set(p,new x2((m,h)=>{let H=m[yr](m,h);return G.default.promise(H)&&(H.once=(b,_)=>{if(b==="error")H.catch(_);else if(b==="abort")(async()=>{try{(await H).once("abort",_)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${b}`);return H}),H},p))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)sC||(sC=new Hce.default),r.dnsCache=sC;else if(!G.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${G.default(r.dnsCache)}`);G.default.number(r.timeout)?r.timeout={request:r.timeout}:n&&r.timeout!==n.timeout?r.timeout={...n.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let f=r.hooks===n?.hooks;r.hooks={...r.hooks};for(let m of Be.knownHookEvents)if(m in r.hooks)if(G.default.array(r.hooks[m]))r.hooks[m]=[...r.hooks[m]];else throw new TypeError(`Parameter \`${m}\` must be an Array, got ${G.default(r.hooks[m])}`);else r.hooks[m]=[];if(n&&!f)for(let m of Be.knownHookEvents)n.hooks[m].length>0&&(r.hooks[m]=[...n.hooks[m],...r.hooks[m]]);if("family"in r&&La.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),n?.https&&(r.https={...n.https,...r.https}),"rejectUnauthorized"in r&&La.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&La.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&La.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&La.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&La.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&La.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&La.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let m in r.agent)if(m!=="http"&&m!=="https"&&m!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${m}\``)}return r.maxRedirects=(u=r.maxRedirects)!==null&&u!==void 0?u:0,Be.setNonEnumerableProperties([n,c],r),Dce.default(r,n)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!G.default.undefined(e.form),i=!G.default.undefined(e.json),o=!G.default.undefined(e.body),s=n||i||o,a=Be.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=a,s){if(a)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([o,n,i].filter(u=>u).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(e.body instanceof C2.Readable)&&!G.default.string(e.body)&&!G.default.buffer(e.body)&&!L2.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!G.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let u=!G.default.string(r["content-type"]);o?(L2.default(e.body)&&u&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[Ta]=e.body):n?(u&&(r["content-type"]="application/x-www-form-urlencoded"),this[Ta]=new xa.URLSearchParams(e.form).toString()):(u&&(r["content-type"]="application/json"),this[Ta]=e.stringifyJson(e.json));let c=await wce.default(this[Ta],e.headers);G.default.undefined(r["content-length"])&&G.default.undefined(r["transfer-encoding"])&&!a&&!G.default.undefined(c)&&(r["content-length"]=String(c))}}else a?this._lockWrite():this._unlockWrite();this[kp]=Number(r["content-length"])||void 0}async _onResponseBase(e){let{options:r}=this,{url:n}=r;this[F2]=e,r.decompress&&(e=yce(e));let i=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:P2.STATUS_CODES[i],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[k2]=o.isFromCache,this[Rp]=Number(e.headers["content-length"])||void 0,this[Fv]=e,e.once("end",()=>{this[Rp]=this[Mp],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{e.destroy(),this._beforeError(new vm(a,this))}),e.once("aborted",()=>{this._beforeError(new vm({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let s=e.headers["set-cookie"];if(G.default.object(r.cookieJar)&&s){let a=s.map(async u=>r.cookieJar.setCookie(u,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async u=>u.catch(()=>{})));try{await Promise.all(a)}catch(u){this._beforeError(u);return}}if(r.followRedirect&&e.headers.location&&$ce.has(i)){if(e.resume(),this[yr]&&(this[aC](),delete this[yr],this[M2]()),(i===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[Ta]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new Bv(this));return}try{let p=function(f){return f.protocol==="unix:"||f.hostname==="unix"},u=Buffer.from(e.headers.location,"binary").toString(),c=new xa.URL(u,n),l=c.toString();if(decodeURI(l),!p(n)&&p(c)){this._beforeError(new Mt("Cannot redirect to UNIX socket",{},this));return}c.hostname!==n.hostname||c.port!==n.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(c.username=r.username,c.password=r.password),this.redirects.push(l),r.url=c;for(let f of r.hooks.beforeRedirect)await f(r,o);this.emit("redirect",o,r),await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!Ece.isResponseOk(o)){this._beforeError(new Nv(o));return}e.on("readable",()=>{this[Ov]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let a of this[kv])if(!a.headersSent){for(let u in e.headers){let c=r.decompress?u!=="content-encoding":!0,l=e.headers[u];c&&a.setHeader(u,l)}a.statusCode=i}}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:i}=r;gce.default(e),this[aC]=T2.default(e,n,i);let o=r.cache?"cacheableResponse":"response";e.once(o,u=>{this._onResponse(u)}),e.once("error",u=>{var c;e.destroy(),(c=e.res)===null||c===void 0||c.removeAllListeners("end"),u=u instanceof T2.TimeoutError?new qv(u,this.timings,this):new Mt(u.message,u,this),this._beforeError(u)}),this[M2]=_ce.default(e,this,Mce),this[yr]=e,this.emit("uploadProgress",this.uploadProgress);let s=this[Ta],a=this.redirects.length===0?this:e;G.default.nodeStream(s)?(s.pipe(a),s.once("error",u=>{this._beforeError(new jv(u,this))})):(this._unlockWrite(),G.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,r){return new Promise((n,i)=>{Object.assign(r,Ace.default(e)),delete r.url;let o,s=uC.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",a),n(a)});r.url=e,s.once("error",i),s.once("request",async a=>{o=a,n(o)})})}async _makeRequest(){var e,r,n,i,o;let{options:s}=this,{headers:a}=s;for(let _ in a)if(G.default.undefined(a[_]))delete a[_];else if(G.default.null_(a[_]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${_}\` header`);if(s.decompress&&G.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=Pce?"gzip, deflate, br":"gzip, deflate"),s.cookieJar){let _=await s.cookieJar.getCookieString(s.url.toString());G.default.nonEmptyString(_)&&(s.headers.cookie=_)}for(let _ of s.hooks.beforeRequest){let $=await _(s);if(!G.default.undefined($)){s.request=()=>$;break}}s.body&&this[Ta]!==s.body&&(this[Ta]=s.body);let{agent:u,request:c,timeout:l,url:p}=s;if(s.dnsCache&&!("lookup"in s)&&(s.lookup=s.dnsCache.lookup),p.hostname==="unix"){let _=/(?<socketPath>.+?):(?<path>.+)/.exec(`${p.pathname}${p.search}`);if(_?.groups){let{socketPath:$,path:U}=_.groups;Object.assign(s,{socketPath:$,path:U,host:""})}}let f=p.protocol==="https:",m;s.http2?m=bce.auto:m=f?mce.request:P2.request;let h=(e=s.request)!==null&&e!==void 0?e:m,H=s.cache?this._createCacheableRequest:h;u&&!s.http2&&(s.agent=u[f?"https":"http"]),s[yr]=h,delete s.request,delete s.timeout;let b=s;if(b.shared=(r=s.cacheOptions)===null||r===void 0?void 0:r.shared,b.cacheHeuristic=(n=s.cacheOptions)===null||n===void 0?void 0:n.cacheHeuristic,b.immutableMinTimeToLive=(i=s.cacheOptions)===null||i===void 0?void 0:i.immutableMinTimeToLive,b.ignoreCargoCult=(o=s.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,s.dnsLookupIpVersion!==void 0)try{b.family=R2.dnsLookupIpVersionToFamily(s.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}s.https&&("rejectUnauthorized"in s.https&&(b.rejectUnauthorized=s.https.rejectUnauthorized),s.https.checkServerIdentity&&(b.checkServerIdentity=s.https.checkServerIdentity),s.https.certificateAuthority&&(b.ca=s.https.certificateAuthority),s.https.certificate&&(b.cert=s.https.certificate),s.https.key&&(b.key=s.https.key),s.https.passphrase&&(b.passphrase=s.https.passphrase),s.https.pfx&&(b.pfx=s.https.pfx));try{let _=await H(p,b);G.default.undefined(_)&&(_=m(p,b)),s.request=c,s.timeout=l,s.agent=u,s.https&&("rejectUnauthorized"in s.https&&delete b.rejectUnauthorized,s.https.checkServerIdentity&&delete b.checkServerIdentity,s.https.certificateAuthority&&delete b.ca,s.https.certificate&&delete b.cert,s.https.key&&delete b.key,s.https.passphrase&&delete b.passphrase,s.https.pfx&&delete b.pfx),Lce(_)?this._onRequest(_):this.writable?(this.once("finish",()=>{this._onResponse(_)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(_)}catch(_){throw _ instanceof x2.CacheError?new Uv(_,this):new Mt(_.message,_,this)}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new Mt(r.message,r,this)}this.destroy(e)}_beforeError(e){if(this[Fp])return;let{options:r}=this,n=this.retryCount+1;this[Fp]=!0,e instanceof Mt||(e=new Mt(e.message,e,this));let i=e,{response:o}=i;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await Sce.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let s;try{let a;o&&"retry-after"in o.headers&&(a=Number(o.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(o.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),s=await r.retry.calculateDelay({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:Cce.default({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:0})})}catch(a){this._error(new Mt(a.message,a,this));return}if(s){let a=async()=>{try{for(let u of this.options.hooks.beforeRetry)await u(this.options,i,n)}catch(u){this._error(new Mt(u.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",n,e))};this[B2]=setTimeout(a,s);return}}this._error(i)})()}_read(){this[Ov]=!0;let e=this[Fv];if(e&&!this[Fp]){e.readableLength&&(this[Ov]=!1);let r;for(;(r=e.read())!==null;){this[Mp]+=r.length,this[O2]=!0;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let i=()=>{this._writeRequest(e,r,n)};this.requestInitialized?i():this[bm].push(i)}_writeRequest(e,r,n){this[yr].destroyed||(this._progressCallbacks.push(()=>{this[Op]+=Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}),this[yr].write(e,r,i=>{!i&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),n(i)}))}_final(e){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(yr in this)){e();return}if(this[yr].destroyed){e();return}this[yr].end(n=>{n||(this[kp]=this[Op],this.emit("uploadProgress",this.uploadProgress),this[yr].emit("upload-complete")),e(n)})};this.requestInitialized?r():this[bm].push(r)}_destroy(e,r){var n;this[Fp]=!0,clearTimeout(this[B2]),yr in this&&(this[aC](),!((n=this[Fv])===null||n===void 0)&&n.complete||this[yr].destroy()),e!==null&&!G.default.undefined(e)&&!(e instanceof Mt)&&(e=new Mt(e.message,e,this)),r(e)}get _isAboutToError(){return this[Fp]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,r,n;return((r=(e=this[yr])===null||e===void 0?void 0:e.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!(!((n=this[F2])===null||n===void 0)&&n.complete)}get socket(){var e,r;return(r=(e=this[yr])===null||e===void 0?void 0:e.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let e;return this[Rp]?e=this[Mp]/this[Rp]:this[Rp]===this[Mp]?e=1:e=0,{percent:e,transferred:this[Mp],total:this[Rp]}}get uploadProgress(){let e;return this[kp]?e=this[Op]/this[kp]:this[kp]===this[Op]?e=1:e=0,{percent:e,transferred:this[Op],total:this[kp]}}get timings(){var e;return(e=this[yr])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[k2]}pipe(e,r){if(this[O2])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof oC.ServerResponse&&this[kv].add(e),super.pipe(e,r)}unpipe(e){return e instanceof oC.ServerResponse&&this[kv].delete(e),super.unpipe(e),this}};Be.default=Vv});var _m=y(xi=>{"use strict";var kce=xi&&xi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Oce=xi&&xi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kce(e,t,r)};Object.defineProperty(xi,"__esModule",{value:!0});xi.CancelError=xi.ParseError=void 0;var N2=wm(),cC=class extends N2.RequestError{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};xi.ParseError=cC;var lC=class extends N2.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};xi.CancelError=lC;Oce(wm(),xi)});var j2=y(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0});var U2=_m(),Fce=(t,e,r,n)=>{let{rawBody:i}=t;try{if(e==="text")return i.toString(n);if(e==="json")return i.length===0?"":r(i.toString());if(e==="buffer")return i;throw new U2.ParseError({message:`Unknown body type '${e}'`,name:"Error"},t)}catch(o){throw new U2.ParseError(o,t)}};pC.default=Fce});var fC=y($a=>{"use strict";var Bce=$a&&$a.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Nce=$a&&$a.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bce(e,t,r)};Object.defineProperty($a,"__esModule",{value:!0});var Uce=require("events"),jce=ds(),qce=jU(),Gv=_m(),q2=j2(),W2=wm(),Wce=zD(),Vce=tC(),V2=rC(),Gce=["request","response","redirect","uploadProgress","downloadProgress"];function G2(t){let e,r,n=new Uce.EventEmitter,i=new qce((s,a,u)=>{let c=l=>{let p=new W2.default(void 0,t);p.retryCount=l,p._noPipe=!0,u(()=>p.destroy()),u.shouldReject=!1,u(()=>a(new Gv.CancelError(p))),e=p,p.once("response",async h=>{var H;if(h.retryCount=l,h.request.aborted)return;let b;try{b=await Vce.default(p),h.rawBody=b}catch{return}if(p._isAboutToError)return;let _=((H=h.headers["content-encoding"])!==null&&H!==void 0?H:"").toLowerCase(),$=["gzip","deflate","br"].includes(_),{options:U}=p;if($&&!U.decompress)h.body=b;else try{h.body=q2.default(h,U.responseType,U.parseJson,U.encoding)}catch(D){if(h.body=b.toString(),V2.isResponseOk(h)){p._beforeError(D);return}}try{for(let[D,P]of U.hooks.afterResponse.entries())h=await P(h,async j=>{let N=W2.default.normalizeArguments(void 0,{...j,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},U);N.hooks.afterResponse=N.hooks.afterResponse.slice(0,D);for(let L of N.hooks.beforeRetry)await L(N);let M=G2(N);return u(()=>{M.catch(()=>{}),M.cancel()}),M})}catch(D){p._beforeError(new Gv.RequestError(D.message,D,p));return}if(r=h,!V2.isResponseOk(h)){p._beforeError(new Gv.HTTPError(h));return}p.destroy(),s(p.options.resolveBodyOnly?h.body:h)});let f=h=>{if(i.isCanceled)return;let{options:H}=p;if(h instanceof Gv.HTTPError&&!H.throwHttpErrors){let{response:b}=h;s(p.options.resolveBodyOnly?b.body:b);return}a(h)};p.once("error",f);let m=p.options.body;p.once("retry",(h,H)=>{var b,_;if(m===((b=H.request)===null||b===void 0?void 0:b.options.body)&&jce.default.nodeStream((_=H.request)===null||_===void 0?void 0:_.options.body)){f(H);return}c(h)}),Wce.default(p,n,Gce)};c(0)});i.on=(s,a)=>(n.on(s,a),i);let o=s=>{let a=(async()=>{await i;let{options:u}=r.request;return q2.default(r,s,u.parseJson,u.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)),a};return i.json=()=>{let{headers:s}=e.options;return!e.writableFinished&&s.accept===void 0&&(s.accept="application/json"),o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}$a.default=G2;Nce(_m(),$a)});var K2=y(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});var Kce=_m();function zce(t,...e){let r=(async()=>{if(t instanceof Kce.RequestError)try{for(let i of e)if(i)for(let o of i)t=await o(t)}catch(i){t=i}throw t})(),n=()=>r;return r.json=n,r.text=n,r.buffer=n,r.on=n,r}dC.default=zce});var J2=y(hC=>{"use strict";Object.defineProperty(hC,"__esModule",{value:!0});var z2=ds();function X2(t){for(let e of Object.values(t))(z2.default.plainObject(e)||z2.default.array(e))&&X2(e);return Object.freeze(t)}hC.default=X2});var Q2=y(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0})});var mC=y(ni=>{"use strict";var Xce=ni&&ni.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jce=ni&&ni.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xce(e,t,r)};Object.defineProperty(ni,"__esModule",{value:!0});ni.defaultHandler=void 0;var Z2=ds(),ri=fC(),Yce=K2(),zv=wm(),Qce=J2(),Zce={RequestError:ri.RequestError,CacheError:ri.CacheError,ReadError:ri.ReadError,HTTPError:ri.HTTPError,MaxRedirectsError:ri.MaxRedirectsError,TimeoutError:ri.TimeoutError,ParseError:ri.ParseError,CancelError:ri.CancelError,UnsupportedProtocolError:ri.UnsupportedProtocolError,UploadError:ri.UploadError},ele=async t=>new Promise(e=>{setTimeout(e,t)}),{normalizeArguments:Kv}=zv.default,ej=(...t)=>{let e;for(let r of t)e=Kv(void 0,r,e);return e},tle=t=>t.isStream?new zv.default(void 0,t):ri.default(t),rle=t=>"defaults"in t&&"options"in t.defaults,nle=["get","post","put","patch","head","delete"];ni.defaultHandler=(t,e)=>e(t);var tj=(t,e)=>{if(t)for(let r of t)r(e)},rj=t=>{t._rawHandlers=t.handlers,t.handlers=t.handlers.map(n=>(i,o)=>{let s,a=n(i,u=>(s=o(u),s));if(a!==s&&!i.isStream&&s){let u=a,{then:c,catch:l,finally:p}=u;Object.setPrototypeOf(u,Object.getPrototypeOf(s)),Object.defineProperties(u,Object.getOwnPropertyDescriptors(s)),u.then=c,u.catch=l,u.finally=p}return a});let e=(n,i={},o)=>{var s,a;let u=0,c=l=>t.handlers[u++](l,u===t.handlers.length?tle:c);if(Z2.default.plainObject(n)){let l={...n,...i};zv.setNonEnumerableProperties([n,i],l),i=l,n=void 0}try{let l;try{tj(t.options.hooks.init,i),tj((s=i.hooks)===null||s===void 0?void 0:s.init,i)}catch(f){l=f}let p=Kv(n,i,o??t.options);if(p[zv.kIsNormalizedAlready]=!0,l)throw new ri.RequestError(l.message,l,p);return c(p)}catch(l){if(i.isStream)throw l;return Yce.default(l,t.options.hooks.beforeError,(a=i.hooks)===null||a===void 0?void 0:a.beforeError)}};e.extend=(...n)=>{let i=[t.options],o=[...t._rawHandlers],s;for(let a of n)rle(a)?(i.push(a.defaults.options),o.push(...a.defaults._rawHandlers),s=a.defaults.mutableDefaults):(i.push(a),"handlers"in a&&o.push(...a.handlers),s=a.mutableDefaults);return o=o.filter(a=>a!==ni.defaultHandler),o.length===0&&o.push(ni.defaultHandler),rj({options:ej(...i),handlers:o,mutableDefaults:Boolean(s)})};let r=async function*(n,i){let o=Kv(n,i,t.options);o.resolveBodyOnly=!1;let s=o.pagination;if(!Z2.default.object(s))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:u}=s,c=0;for(;c<s.requestLimit;){c!==0&&await ele(s.backoff);let l=await e(void 0,void 0,o),p=await s.transform(l),f=[];for(let h of p)if(s.filter(h,a,f)&&(!s.shouldContinue(h,a,f)||(yield h,s.stackAllItems&&a.push(h),f.push(h),--u<=0)))return;let m=s.paginate(l,a,f);if(m===!1)return;m===l.request.options?o=l.request.options:m!==void 0&&(o=Kv(void 0,m,o)),c++}};e.paginate=r,e.paginate.all=async(n,i)=>{let o=[];for await(let s of r(n,i))o.push(s);return o},e.paginate.each=r,e.stream=(n,i)=>e(n,{...i,isStream:!0});for(let n of nle)e[n]=(i,o)=>e(i,{...o,method:n}),e.stream[n]=(i,o)=>e(i,{...o,method:n,isStream:!0});return Object.assign(e,Zce),Object.defineProperty(e,"defaults",{value:t.mutableDefaults?t:Qce.default(t),writable:t.mutableDefaults,configurable:t.mutableDefaults,enumerable:!0}),e.mergeOptions=ej,e};ni.default=rj;Jce(Q2(),ni)});var oj=y((hs,Xv)=>{"use strict";var ile=hs&&hs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nj=hs&&hs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ile(e,t,r)};Object.defineProperty(hs,"__esModule",{value:!0});var ole=require("url"),ij=mC(),sle={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:t=>{if(!Reflect.has(t.headers,"link"))return!1;let e=t.headers.link.split(","),r;for(let n of e){let i=n.split(";");if(i[1].includes("next")){r=i[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new ole.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:t=>JSON.parse(t),stringifyJson:t=>JSON.stringify(t),cacheOptions:{}},handlers:[ij.defaultHandler],mutableDefaults:!1},gC=ij.default(sle);hs.default=gC;Xv.exports=gC;Xv.exports.default=gC;Xv.exports.__esModule=!0;nj(mC(),hs);nj(fC(),hs)});var hj=y((Xke,Yv)=>{var Jt=function(t){"use strict";var e=1e7,r=7,n=9007199254740992,i=f(n),o="0123456789abcdefghijklmnopqrstuvwxyz",s=typeof BigInt=="function";function a(d,g,w,I){return typeof d>"u"?a[0]:typeof g<"u"?+g==10&&!w?be(d):yt(d,g,w,I):be(d)}function u(d,g){this.value=d,this.sign=g,this.isSmall=!1}u.prototype=Object.create(a.prototype);function c(d){this.value=d,this.sign=d<0,this.isSmall=!0}c.prototype=Object.create(a.prototype);function l(d){this.value=d}l.prototype=Object.create(a.prototype);function p(d){return-n<d&&d<n}function f(d){return d<1e7?[d]:d<1e14?[d%1e7,Math.floor(d/1e7)]:[d%1e7,Math.floor(d/1e7)%1e7,Math.floor(d/1e14)]}function m(d){h(d);var g=d.length;if(g<4&&re(d,i)<0)switch(g){case 0:return 0;case 1:return d[0];case 2:return d[0]+d[1]*e;default:return d[0]+(d[1]+d[2]*e)*e}return d}function h(d){for(var g=d.length;d[--g]===0;);d.length=g+1}function H(d){for(var g=new Array(d),w=-1;++w<d;)g[w]=0;return g}function b(d){return d>0?Math.floor(d):Math.ceil(d)}function _(d,g){var w=d.length,I=g.length,R=new Array(w),B=0,W=e,V,q;for(q=0;q<I;q++)V=d[q]+g[q]+B,B=V>=W?1:0,R[q]=V-B*W;for(;q<w;)V=d[q]+B,B=V===W?1:0,R[q++]=V-B*W;return B>0&&R.push(B),R}function $(d,g){return d.length>=g.length?_(d,g):_(g,d)}function U(d,g){var w=d.length,I=new Array(w),R=e,B,W;for(W=0;W<w;W++)B=d[W]-R+g,g=Math.floor(B/R),I[W]=B-g*R,g+=1;for(;g>0;)I[W++]=g%R,g=Math.floor(g/R);return I}u.prototype.add=function(d){var g=be(d);if(this.sign!==g.sign)return this.subtract(g.negate());var w=this.value,I=g.value;return g.isSmall?new u(U(w,Math.abs(I)),this.sign):new u($(w,I),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(d){var g=be(d),w=this.value;if(w<0!==g.sign)return this.subtract(g.negate());var I=g.value;if(g.isSmall){if(p(w+I))return new c(w+I);I=f(Math.abs(I))}return new u(U(I,Math.abs(w)),w<0)},c.prototype.plus=c.prototype.add,l.prototype.add=function(d){return new l(this.value+be(d).value)},l.prototype.plus=l.prototype.add;function D(d,g){var w=d.length,I=g.length,R=new Array(w),B=0,W=e,V,q;for(V=0;V<I;V++)q=d[V]-B-g[V],q<0?(q+=W,B=1):B=0,R[V]=q;for(V=I;V<w;V++){if(q=d[V]-B,q<0)q+=W;else{R[V++]=q;break}R[V]=q}for(;V<w;V++)R[V]=d[V];return h(R),R}function P(d,g,w){var I;return re(d,g)>=0?I=D(d,g):(I=D(g,d),w=!w),I=m(I),typeof I=="number"?(w&&(I=-I),new c(I)):new u(I,w)}function j(d,g,w){var I=d.length,R=new Array(I),B=-g,W=e,V,q;for(V=0;V<I;V++)q=d[V]+B,B=Math.floor(q/W),q%=W,R[V]=q<0?q+W:q;return R=m(R),typeof R=="number"?(w&&(R=-R),new c(R)):new u(R,w)}u.prototype.subtract=function(d){var g=be(d);if(this.sign!==g.sign)return this.add(g.negate());var w=this.value,I=g.value;return g.isSmall?j(w,Math.abs(I),this.sign):P(w,I,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(d){var g=be(d),w=this.value;if(w<0!==g.sign)return this.add(g.negate());var I=g.value;return g.isSmall?new c(w-I):j(I,Math.abs(w),w>=0)},c.prototype.minus=c.prototype.subtract,l.prototype.subtract=function(d){return new l(this.value-be(d).value)},l.prototype.minus=l.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var d=this.sign,g=new c(-this.value);return g.sign=!d,g},l.prototype.negate=function(){return new l(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)};function N(d,g){var w=d.length,I=g.length,R=w+I,B=H(R),W=e,V,q,ae,fe,ge;for(ae=0;ae<w;++ae){fe=d[ae];for(var $e=0;$e<I;++$e)ge=g[$e],V=fe*ge+B[ae+$e],q=Math.floor(V/W),B[ae+$e]=V-q*W,B[ae+$e+1]+=q}return h(B),B}function M(d,g){var w=d.length,I=new Array(w),R=e,B=0,W,V;for(V=0;V<w;V++)W=d[V]*g+B,B=Math.floor(W/R),I[V]=W-B*R;for(;B>0;)I[V++]=B%R,B=Math.floor(B/R);return I}function L(d,g){for(var w=[];g-- >0;)w.push(0);return w.concat(d)}function F(d,g){var w=Math.max(d.length,g.length);if(w<=30)return N(d,g);w=Math.ceil(w/2);var I=d.slice(w),R=d.slice(0,w),B=g.slice(w),W=g.slice(0,w),V=F(R,W),q=F(I,B),ae=F($(R,I),$(W,B)),fe=$($(V,L(D(D(ae,V),q),w)),L(q,2*w));return h(fe),fe}function S(d,g){return-.012*d-.012*g+15e-6*d*g>0}u.prototype.multiply=function(d){var g=be(d),w=this.value,I=g.value,R=this.sign!==g.sign,B;if(g.isSmall){if(I===0)return a[0];if(I===1)return this;if(I===-1)return this.negate();if(B=Math.abs(I),B<e)return new u(M(w,B),R);I=f(B)}return S(w.length,I.length)?new u(F(w,I),R):new u(N(w,I),R)},u.prototype.times=u.prototype.multiply;function k(d,g,w){return d<e?new u(M(g,d),w):new u(N(g,f(d)),w)}c.prototype._multiplyBySmall=function(d){return p(d.value*this.value)?new c(d.value*this.value):k(Math.abs(d.value),f(Math.abs(this.value)),this.sign!==d.sign)},u.prototype._multiplyBySmall=function(d){return d.value===0?a[0]:d.value===1?this:d.value===-1?this.negate():k(Math.abs(d.value),this.value,this.sign!==d.sign)},c.prototype.multiply=function(d){return be(d)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,l.prototype.multiply=function(d){return new l(this.value*be(d).value)},l.prototype.times=l.prototype.multiply;function O(d){var g=d.length,w=H(g+g),I=e,R,B,W,V,q;for(W=0;W<g;W++){V=d[W],B=0-V*V;for(var ae=W;ae<g;ae++)q=d[ae],R=2*(V*q)+w[W+ae]+B,B=Math.floor(R/I),w[W+ae]=R-B*I;w[W+g]=B}return h(w),w}u.prototype.square=function(){return new u(O(this.value),!1)},c.prototype.square=function(){var d=this.value*this.value;return p(d)?new c(d):new u(O(f(Math.abs(this.value))),!1)},l.prototype.square=function(d){return new l(this.value*this.value)};function K(d,g){var w=d.length,I=g.length,R=e,B=H(g.length),W=g[I-1],V=Math.ceil(R/(2*W)),q=M(d,V),ae=M(g,V),fe,ge,$e,bn,Zr,cA,lA;for(q.length<=w&&q.push(0),ae.push(0),W=ae[I-1],ge=w-I;ge>=0;ge--){for(fe=R-1,q[ge+I]!==W&&(fe=Math.floor((q[ge+I]*R+q[ge+I-1])/W)),$e=0,bn=0,cA=ae.length,Zr=0;Zr<cA;Zr++)$e+=fe*ae[Zr],lA=Math.floor($e/R),bn+=q[ge+Zr]-($e-lA*R),$e=lA,bn<0?(q[ge+Zr]=bn+R,bn=-1):(q[ge+Zr]=bn,bn=0);for(;bn!==0;){for(fe-=1,$e=0,Zr=0;Zr<cA;Zr++)$e+=q[ge+Zr]-R+ae[Zr],$e<0?(q[ge+Zr]=$e+R,$e=0):(q[ge+Zr]=$e,$e=1);bn+=$e}B[ge]=fe}return q=x(q,V)[0],[m(B),m(q)]}function C(d,g){for(var w=d.length,I=g.length,R=[],B=[],W=e,V,q,ae,fe,ge;w;){if(B.unshift(d[--w]),h(B),re(B,g)<0){R.push(0);continue}q=B.length,ae=B[q-1]*W+B[q-2],fe=g[I-1]*W+g[I-2],q>I&&(ae=(ae+1)*W),V=Math.ceil(ae/fe);do{if(ge=M(g,V),re(ge,B)<=0)break;V--}while(V);R.push(V),B=D(B,ge)}return R.reverse(),[m(R),m(B)]}function x(d,g){var w=d.length,I=H(w),R=e,B,W,V,q;for(V=0,B=w-1;B>=0;--B)q=V*R+d[B],W=b(q/g),V=q-W*g,I[B]=W|0;return[I,V|0]}function Z(d,g){var w,I=be(g);if(s)return[new l(d.value/I.value),new l(d.value%I.value)];var R=d.value,B=I.value,W;if(B===0)throw new Error("Cannot divide by zero");if(d.isSmall)return I.isSmall?[new c(b(R/B)),new c(R%B)]:[a[0],d];if(I.isSmall){if(B===1)return[d,a[0]];if(B==-1)return[d.negate(),a[0]];var V=Math.abs(B);if(V<e){w=x(R,V),W=m(w[0]);var q=w[1];return d.sign&&(q=-q),typeof W=="number"?(d.sign!==I.sign&&(W=-W),[new c(W),new c(q)]):[new u(W,d.sign!==I.sign),new c(q)]}B=f(V)}var ae=re(R,B);if(ae===-1)return[a[0],d];if(ae===0)return[a[d.sign===I.sign?1:-1],a[0]];R.length+B.length<=200?w=K(R,B):w=C(R,B),W=w[0];var fe=d.sign!==I.sign,ge=w[1],$e=d.sign;return typeof W=="number"?(fe&&(W=-W),W=new c(W)):W=new u(W,fe),typeof ge=="number"?($e&&(ge=-ge),ge=new c(ge)):ge=new u(ge,$e),[W,ge]}u.prototype.divmod=function(d){var g=Z(this,d);return{quotient:g[0],remainder:g[1]}},l.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(d){return Z(this,d)[0]},l.prototype.over=l.prototype.divide=function(d){return new l(this.value/be(d).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(d){return Z(this,d)[1]},l.prototype.mod=l.prototype.remainder=function(d){return new l(this.value%be(d).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(d){var g=be(d),w=this.value,I=g.value,R,B,W;if(I===0)return a[1];if(w===0)return a[0];if(w===1)return a[1];if(w===-1)return g.isEven()?a[1]:a[-1];if(g.sign)return a[0];if(!g.isSmall)throw new Error("The exponent "+g.toString()+" is too large.");if(this.isSmall&&p(R=Math.pow(w,I)))return new c(b(R));for(B=this,W=a[1];I&!0&&(W=W.times(B),--I),I!==0;)I/=2,B=B.square();return W},c.prototype.pow=u.prototype.pow,l.prototype.pow=function(d){var g=be(d),w=this.value,I=g.value,R=BigInt(0),B=BigInt(1),W=BigInt(2);if(I===R)return a[1];if(w===R)return a[0];if(w===B)return a[1];if(w===BigInt(-1))return g.isEven()?a[1]:a[-1];if(g.isNegative())return new l(R);for(var V=this,q=a[1];(I&B)===B&&(q=q.times(V),--I),I!==R;)I/=W,V=V.square();return q},u.prototype.modPow=function(d,g){if(d=be(d),g=be(g),g.isZero())throw new Error("Cannot take modPow with modulus 0");var w=a[1],I=this.mod(g);for(d.isNegative()&&(d=d.multiply(a[-1]),I=I.modInv(g));d.isPositive();){if(I.isZero())return a[0];d.isOdd()&&(w=w.multiply(I).mod(g)),d=d.divide(2),I=I.square().mod(g)}return w},l.prototype.modPow=c.prototype.modPow=u.prototype.modPow;function re(d,g){if(d.length!==g.length)return d.length>g.length?1:-1;for(var w=d.length-1;w>=0;w--)if(d[w]!==g[w])return d[w]>g[w]?1:-1;return 0}u.prototype.compareAbs=function(d){var g=be(d),w=this.value,I=g.value;return g.isSmall?1:re(w,I)},c.prototype.compareAbs=function(d){var g=be(d),w=Math.abs(this.value),I=g.value;return g.isSmall?(I=Math.abs(I),w===I?0:w>I?1:-1):-1},l.prototype.compareAbs=function(d){var g=this.value,w=be(d).value;return g=g>=0?g:-g,w=w>=0?w:-w,g===w?0:g>w?1:-1},u.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=be(d),w=this.value,I=g.value;return this.sign!==g.sign?g.sign?1:-1:g.isSmall?this.sign?-1:1:re(w,I)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=be(d),w=this.value,I=g.value;return g.isSmall?w==I?0:w>I?1:-1:w<0!==g.sign?w<0?-1:1:w<0?1:-1},c.prototype.compareTo=c.prototype.compare,l.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var g=this.value,w=be(d).value;return g===w?0:g>w?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.equals=function(d){return this.compare(d)===0},l.prototype.eq=l.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(d){return this.compare(d)!==0},l.prototype.neq=l.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(d){return this.compare(d)>0},l.prototype.gt=l.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(d){return this.compare(d)<0},l.prototype.lt=l.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(d){return this.compare(d)>=0},l.prototype.geq=l.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(d){return this.compare(d)<=0},l.prototype.leq=l.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},l.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(d){var g=be(d);return g.isZero()?!1:g.isUnit()?!0:g.compareAbs(2)===0?this.isEven():this.mod(g).isZero()},l.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function ne(d){var g=d.abs();if(g.isUnit())return!1;if(g.equals(2)||g.equals(3)||g.equals(5))return!0;if(g.isEven()||g.isDivisibleBy(3)||g.isDivisibleBy(5))return!1;if(g.lesser(49))return!0}function X(d,g){for(var w=d.prev(),I=w,R=0,B,W,V,q;I.isEven();)I=I.divide(2),R++;e:for(V=0;V<g.length;V++)if(!d.lesser(g[V])&&(q=Jt(g[V]).modPow(I,d),!(q.isUnit()||q.equals(w)))){for(B=R-1;B!=0;B--){if(q=q.square().mod(d),q.isUnit())return!1;if(q.equals(w))continue e}return!1}return!0}u.prototype.isPrime=function(d){var g=ne(this);if(g!==t)return g;var w=this.abs(),I=w.bitLength();if(I<=64)return X(w,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var R=Math.log(2)*I.toJSNumber(),B=Math.ceil(d===!0?2*Math.pow(R,2):R),W=[],V=0;V<B;V++)W.push(Jt(V+2));return X(w,W)},l.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(d,g){var w=ne(this);if(w!==t)return w;for(var I=this.abs(),R=d===t?5:d,B=[],W=0;W<R;W++)B.push(Jt.randBetween(2,I.minus(2),g));return X(I,B)},l.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(d){for(var g=Jt.zero,w=Jt.one,I=be(d),R=this.abs(),B,W,V;!R.isZero();)B=I.divide(R),W=g,V=I,g=w,I=R,w=W.subtract(B.multiply(w)),R=V.subtract(B.multiply(R));if(!I.isUnit())throw new Error(this.toString()+" and "+d.toString()+" are not co-prime");return g.compare(0)===-1&&(g=g.add(d)),this.isNegative()?g.negate():g},l.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var d=this.value;return this.sign?j(d,1,this.sign):new u(U(d,1),this.sign)},c.prototype.next=function(){var d=this.value;return d+1<n?new c(d+1):new u(i,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},u.prototype.prev=function(){var d=this.value;return this.sign?new u(U(d,1),!0):j(d,1,this.sign)},c.prototype.prev=function(){var d=this.value;return d-1>-n?new c(d-1):new u(i,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var te=[1];2*te[te.length-1]<=e;)te.push(2*te[te.length-1]);var ue=te.length,se=te[ue-1];function de(d){return Math.abs(d)<=e}u.prototype.shiftLeft=function(d){var g=be(d).toJSNumber();if(!de(g))throw new Error(String(g)+" is too large for shifting.");if(g<0)return this.shiftRight(-g);var w=this;if(w.isZero())return w;for(;g>=ue;)w=w.multiply(se),g-=ue-1;return w.multiply(te[g])},l.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(d){var g,w=be(d).toJSNumber();if(!de(w))throw new Error(String(w)+" is too large for shifting.");if(w<0)return this.shiftLeft(-w);for(var I=this;w>=ue;){if(I.isZero()||I.isNegative()&&I.isUnit())return I;g=Z(I,se),I=g[1].isNegative()?g[0].prev():g[0],w-=ue-1}return g=Z(I,te[w]),g[1].isNegative()?g[0].prev():g[0]},l.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight;function nt(d,g,w){g=be(g);for(var I=d.isNegative(),R=g.isNegative(),B=I?d.not():d,W=R?g.not():g,V=0,q=0,ae=null,fe=null,ge=[];!B.isZero()||!W.isZero();)ae=Z(B,se),V=ae[1].toJSNumber(),I&&(V=se-1-V),fe=Z(W,se),q=fe[1].toJSNumber(),R&&(q=se-1-q),B=ae[0],W=fe[0],ge.push(w(V,q));for(var $e=w(I?1:0,R?1:0)!==0?Jt(-1):Jt(0),bn=ge.length-1;bn>=0;bn-=1)$e=$e.multiply(se).add(Jt(ge[bn]));return $e}u.prototype.not=function(){return this.negate().prev()},l.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(d){return nt(this,d,function(g,w){return g&w})},l.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(d){return nt(this,d,function(g,w){return g|w})},l.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(d){return nt(this,d,function(g,w){return g^w})},l.prototype.xor=c.prototype.xor=u.prototype.xor;var me=1<<30,kt=(e&-e)*(e&-e)|me;function Pr(d){var g=d.value,w=typeof g=="number"?g|me:typeof g=="bigint"?g|BigInt(me):g[0]+g[1]*e|kt;return w&-w}function Q(d,g){if(g.compareTo(d)<=0){var w=Q(d,g.square(g)),I=w.p,R=w.e,B=I.multiply(g);return B.compareTo(d)<=0?{p:B,e:R*2+1}:{p:I,e:R*2}}return{p:Jt(1),e:0}}u.prototype.bitLength=function(){var d=this;return d.compareTo(Jt(0))<0&&(d=d.negate().subtract(Jt(1))),d.compareTo(Jt(0))===0?Jt(0):Jt(Q(d,Jt(2)).e).add(Jt(1))},l.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength;function ve(d,g){return d=be(d),g=be(g),d.greater(g)?d:g}function Y(d,g){return d=be(d),g=be(g),d.lesser(g)?d:g}function ye(d,g){if(d=be(d).abs(),g=be(g).abs(),d.equals(g))return d;if(d.isZero())return g;if(g.isZero())return d;for(var w=a[1],I,R;d.isEven()&&g.isEven();)I=Y(Pr(d),Pr(g)),d=d.divide(I),g=g.divide(I),w=w.multiply(I);for(;d.isEven();)d=d.divide(Pr(d));do{for(;g.isEven();)g=g.divide(Pr(g));d.greater(g)&&(R=g,g=d,d=R),g=g.subtract(d)}while(!g.isZero());return w.isUnit()?d:d.multiply(w)}function Ne(d,g){return d=be(d).abs(),g=be(g).abs(),d.divide(ye(d,g)).multiply(g)}function dt(d,g,w){d=be(d),g=be(g);var I=w||Math.random,R=Y(d,g),B=ve(d,g),W=B.subtract(R).add(1);if(W.isSmall)return R.add(Math.floor(I()*W));for(var V=_u(W,e).value,q=[],ae=!0,fe=0;fe<V.length;fe++){var ge=ae?V[fe]:e,$e=b(I()*ge);q.push($e),$e<ge&&(ae=!1)}return R.add(a.fromArray(q,e,!1))}var yt=function(d,g,w,I){w=w||o,d=String(d),I||(d=d.toLowerCase(),w=w.toLowerCase());var R=d.length,B,W=Math.abs(g),V={};for(B=0;B<w.length;B++)V[w[B]]=B;for(B=0;B<R;B++){var q=d[B];if(q!=="-"&&q in V&&V[q]>=W){if(q==="1"&&W===1)continue;throw new Error(q+" is not a valid digit in base "+g+".")}}g=be(g);var ae=[],fe=d[0]==="-";for(B=fe?1:0;B<d.length;B++){var q=d[B];if(q in V)ae.push(be(V[q]));else if(q==="<"){var ge=B;do B++;while(d[B]!==">"&&B<d.length);ae.push(be(d.slice(ge+1,B)))}else throw new Error(q+" is not a valid character")}return Ws(ae,g,fe)};function Ws(d,g,w){var I=a[0],R=a[1],B;for(B=d.length-1;B>=0;B--)I=I.add(d[B].times(R)),R=R.times(g);return w?I.negate():I}function Vs(d,g){return g=g||o,d<g.length?g[d]:"<"+d+">"}function _u(d,g){if(g=Jt(g),g.isZero()){if(d.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(g.equals(-1)){if(d.isZero())return{value:[0],isNegative:!1};if(d.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-d.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var w=Array.apply(null,Array(d.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return w.unshift([1]),{value:[].concat.apply([],w),isNegative:!1}}var I=!1;if(d.isNegative()&&g.isPositive()&&(I=!0,d=d.abs()),g.isUnit())return d.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(d.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:I};for(var R=[],B=d,W;B.isNegative()||B.compareAbs(g)>=0;){W=B.divmod(g),B=W.quotient;var V=W.remainder;V.isNegative()&&(V=g.minus(V).abs(),B=B.next()),R.push(V.toJSNumber())}return R.push(B.toJSNumber()),{value:R.reverse(),isNegative:I}}function rl(d,g,w){var I=_u(d,g);return(I.isNegative?"-":"")+I.value.map(function(R){return Vs(R,w)}).join("")}u.prototype.toArray=function(d){return _u(this,d)},c.prototype.toArray=function(d){return _u(this,d)},l.prototype.toArray=function(d){return _u(this,d)},u.prototype.toString=function(d,g){if(d===t&&(d=10),d!==10)return rl(this,d,g);for(var w=this.value,I=w.length,R=String(w[--I]),B="0000000",W;--I>=0;)W=String(w[I]),R+=B.slice(W.length)+W;var V=this.sign?"-":"";return V+R},c.prototype.toString=function(d,g){return d===t&&(d=10),d!=10?rl(this,d,g):String(this.value)},l.prototype.toString=c.prototype.toString,l.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function tH(d){if(p(+d)){var g=+d;if(g===b(g))return s?new l(BigInt(g)):new c(g);throw new Error("Invalid integer: "+d)}var w=d[0]==="-";w&&(d=d.slice(1));var I=d.split(/e/i);if(I.length>2)throw new Error("Invalid integer: "+I.join("e"));if(I.length===2){var R=I[1];if(R[0]==="+"&&(R=R.slice(1)),R=+R,R!==b(R)||!p(R))throw new Error("Invalid integer: "+R+" is not a valid exponent.");var B=I[0],W=B.indexOf(".");if(W>=0&&(R-=B.length-W-1,B=B.slice(0,W)+B.slice(W+1)),R<0)throw new Error("Cannot include negative exponent part for integers");B+=new Array(R+1).join("0"),d=B}var V=/^([0-9][0-9]*)$/.test(d);if(!V)throw new Error("Invalid integer: "+d);if(s)return new l(BigInt(w?"-"+d:d));for(var q=[],ae=d.length,fe=r,ge=ae-fe;ae>0;)q.push(+d.slice(ge,ae)),ge-=fe,ge<0&&(ge=0),ae-=fe;return h(q),new u(q,w)}function uA(d){if(s)return new l(BigInt(d));if(p(d)){if(d!==b(d))throw new Error(d+" is not an integer.");return new c(d)}return tH(d.toString())}function be(d){return typeof d=="number"?uA(d):typeof d=="string"?tH(d):typeof d=="bigint"?new l(d):d}for(var Hi=0;Hi<1e3;Hi++)a[Hi]=be(Hi),Hi>0&&(a[-Hi]=be(-Hi));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=ve,a.min=Y,a.gcd=ye,a.lcm=Ne,a.isInstance=function(d){return d instanceof u||d instanceof c||d instanceof l},a.randBetween=dt,a.fromArray=function(d,g,w){return Ws(d.map(be),be(g||10),w)},a}();typeof Yv<"u"&&Yv.hasOwnProperty("exports")&&(Yv.exports=Jt);typeof define=="function"&&define.amd&&define(function(){return Jt})});var mj=y(Yt=>{"use strict";var lle=require("fs"),ple=hj(),Oa=!1;Yt.maxObjectSize=100*1e3*1e3;Yt.maxObjectCount=32768;var fle=9783072e5,dle=Yt.UID=function(t){this.UID=t},Jke=Yt.parseFile=function(t,e){function r(n){var i=null,o;try{o=hle(n)}catch(s){i=s}e(i,o)}if(Buffer.isBuffer(t))return r(t);lle.readFile(t,function(n,i){if(n)return e(n);r(i)})},hle=Yt.parseBuffer=function(t){var e={},r=t.slice(0,6).toString("utf8");if(r!=="bplist")throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");var n=t.slice(t.length-32,t.length),i=n.readUInt8(6);Oa&&console.log("offsetSize: "+i);var o=n.readUInt8(7);Oa&&console.log("objectRefSize: "+o);var s=HC(n,8);Oa&&console.log("numObjects: "+s);var a=HC(n,16);Oa&&console.log("topObject: "+a);var u=HC(n,24);if(Oa&&console.log("offsetTableOffset: "+u),s>Yt.maxObjectCount)throw new Error("maxObjectCount exceeded");for(var c=[],l=0;l<s;l++){var p=t.slice(u+l*i,u+(l+1)*i);c[l]=hn(p,0),Oa&&console.log("Offset for Object #"+l+" is "+c[l]+" ["+c[l].toString(16)+"]")}function f(m){var h=c[m],H=t[h],b=(H&240)>>4,_=H&15;switch(b){case 0:return $();case 1:return D();case 8:return P();case 2:return j();case 3:return N();case 4:return M();case 5:return L();case 6:return L(!0);case 10:return F();case 13:return S();default:throw new Error("Unhandled type 0x"+b.toString(16))}function $(){switch(_){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+b.toString(16))}}function U(k){var O="",K;for(K=0;K<k.length&&k[K]==0;K++);for(;K<k.length;K++){var C="00"+k[K].toString(16);O+=C.substr(C.length-2)}return O}function D(){var k=Math.pow(2,_);if(k>4){var O=t.slice(h+1,h+1+k),K=U(O);return ple(K,16)}if(k<Yt.maxObjectSize)return hn(t.slice(h+1,h+1+k));throw new Error("To little heap space available! Wanted to read "+k+" bytes, but only "+Yt.maxObjectSize+" are available.")}function P(){var k=_+1;if(k<Yt.maxObjectSize)return new dle(hn(t.slice(h+1,h+1+k)));throw new Error("To little heap space available! Wanted to read "+k+" bytes, but only "+Yt.maxObjectSize+" are available.")}function j(){var k=Math.pow(2,_);if(k<Yt.maxObjectSize){var O=t.slice(h+1,h+1+k);if(k===4)return O.readFloatBE(0);if(k===8)return O.readDoubleBE(0)}else throw new Error("To little heap space available! Wanted to read "+k+" bytes, but only "+Yt.maxObjectSize+" are available.")}function N(){_!=3&&console.error("Unknown date type :"+_+". Parsing anyway...");var k=t.slice(h+1,h+9);return new Date(fle+1e3*k.readDoubleBE(0))}function M(){var k=1,O=_;if(_==15){var K=t[h+1],C=(K&240)/16;C!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+C);var x=K&15,Z=Math.pow(2,x);k=2+Z,Z<3,O=hn(t.slice(h+2,h+2+Z))}if(O<Yt.maxObjectSize)return t.slice(h+k,h+k+O);throw new Error("To little heap space available! Wanted to read "+O+" bytes, but only "+Yt.maxObjectSize+" are available.")}function L(k){k=k||0;var O="utf8",K=_,C=1;if(_==15){var x=t[h+1],Z=(x&240)/16;Z!=1&&console.err("UNEXPECTED LENGTH-INT TYPE! "+Z);var re=x&15,ne=Math.pow(2,re),C=2+ne;ne<3,K=hn(t.slice(h+2,h+2+ne))}if(K*=k+1,K<Yt.maxObjectSize){var X=new Buffer(t.slice(h+C,h+C+K));return k&&(X=mle(X),O="ucs2"),X.toString(O)}else throw new Error("To little heap space available! Wanted to read "+K+" bytes, but only "+Yt.maxObjectSize+" are available.")}function F(){var k=_,O=1;if(_==15){var K=t[h+1],C=(K&240)/16;C!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+C);var x=K&15,Z=Math.pow(2,x);O=2+Z,Z<3,k=hn(t.slice(h+2,h+2+Z))}if(k*o>Yt.maxObjectSize)throw new Error("To little heap space available!");for(var re=[],ne=0;ne<k;ne++){var X=hn(t.slice(h+O+ne*o,h+O+(ne+1)*o));re[ne]=f(X)}return re}function S(){var k=_,O=1;if(_==15){var K=t[h+1],C=(K&240)/16;C!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+C);var x=K&15,Z=Math.pow(2,x);O=2+Z,Z<3,k=hn(t.slice(h+2,h+2+Z))}if(k*2*o>Yt.maxObjectSize)throw new Error("To little heap space available!");Oa&&console.log("Parsing dictionary #"+m);for(var re={},ne=0;ne<k;ne++){var X=hn(t.slice(h+O+ne*o,h+O+(ne+1)*o)),te=hn(t.slice(h+O+k*o+ne*o,h+O+k*o+(ne+1)*o)),ue=f(X),se=f(te);Oa&&console.log("  DICT #"+m+": Mapped "+ue+" to "+se),re[ue]=se}return re}}return[f(a)]};function hn(t,e){e=e||0;for(var r=0,n=e;n<t.length;n++)r<<=8,r|=t[n]&255;return r}function HC(t,e){var r=t.slice(e,e+8);return r.readUInt32BE(4,8)}function mle(t){for(var e=t.length,r=0;r<e;r+=2){var n=t[r];t[r]=t[r+1],t[r+1]=n}return t}});var yj=y((Qke,Hj)=>{"use strict";var gj=require("os");function gle(){var t=process.env,e=t.HOME,r=t.LOGNAME||t.USER||t.LNAME||t.USERNAME;return process.platform==="win32"?t.USERPROFILE||t.HOMEDRIVE+t.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}Hj.exports=typeof gj.homedir=="function"?gj.homedir:gle});var wj=y((Zke,vj)=>{"use strict";var Hle=yj(),bj=Hle();vj.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return bj?t.replace(/^~($|\/|\\)/,bj+"$1"):t}});var yC=y((e1e,Ij)=>{"use strict";var _j=function(t,e,r){return function(){for(var n=this,i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=arguments[o];return new e(function(s,a){i.push(function(u,c){if(u)a(u);else if(r.multiArgs){for(var l=new Array(arguments.length-1),p=1;p<arguments.length;p++)l[p-1]=arguments[p];s(l)}else s(c)}),t.apply(n,i)})}},Aj=Ij.exports=function(t,e,r){typeof e!="function"&&(r=e,e=Promise),r=r||{},r.exclude=r.exclude||[/.+Sync$/];var n=function(o){var s=function(a){return typeof a=="string"?o===a:a.test(o)};return r.include?r.include.some(s):!r.exclude.some(s)},i=typeof t=="function"?function(){return r.excludeMain?t.apply(this,arguments):_j(t,e,r).apply(this,arguments)}:{};return Object.keys(t).reduce(function(o,s){var a=t[s];return o[s]=typeof a=="function"&&n(s)?_j(a,e,r):a,o},i)};Aj.all=Aj});var Ej=y((t1e,Sj)=>{"use strict";var yle=require("os"),ble=mj(),vle=wj(),wle=yC(),_le=Number(yle.release().split(".")[0]),Ale=vle(_le>=14?"~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist":"~/Library/Preferences/com.apple.LaunchServices.plist");Sj.exports=()=>{if(process.platform!=="darwin")return Promise.reject(new Error("Only OS X is supported"));let t="com.apple.Safari";return wle(ble.parseFile)(Ale).then(e=>{let r=e&&e[0].LSHandlers;if(!r||r.length===0)return t;for(let n of r)if(n.LSHandlerURLScheme==="http"&&n.LSHandlerRoleAll){t=n.LSHandlerRoleAll;break}return t})}});var Rj=y((r1e,$j)=>{"use strict";var vC="pending",Dj="settled",Qv="fulfilled",Zv="rejected",Ile=function(){},Cj=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",Sle=typeof setImmediate>"u"?setTimeout:setImmediate,Im=[],bC;function Ele(){for(var t=0;t<Im.length;t++)Im[t][0](Im[t][1]);Im=[],bC=!1}function ew(t,e){Im.push([t,e]),bC||(bC=!0,Sle(Ele,0))}function Dle(t,e){function r(i){wC(e,i)}function n(i){Sm(e,i)}try{t(r,n)}catch(i){n(i)}}function Pj(t){var e=t.owner,r=e._state,n=e._data,i=t[r],o=t.then;if(typeof i=="function"){r=Qv;try{n=i(n)}catch(s){Sm(o,s)}}xj(o,n)||(r===Qv&&wC(o,n),r===Zv&&Sm(o,n))}function xj(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||typeof e=="object")){var n=e.then;if(typeof n=="function")return n.call(e,function(i){r||(r=!0,e===i?Lj(t,i):wC(t,i))},function(i){r||(r=!0,Sm(t,i))}),!0}}catch(i){return r||Sm(t,i),!0}return!1}function wC(t,e){(t===e||!xj(t,e))&&Lj(t,e)}function Lj(t,e){t._state===vC&&(t._state=Dj,t._data=e,ew(Cle,t))}function Sm(t,e){t._state===vC&&(t._state=Dj,t._data=e,ew(Ple,t))}function Tj(t){t._then=t._then.forEach(Pj)}function Cle(t){t._state=Qv,Tj(t)}function Ple(t){t._state=Zv,Tj(t),!t._handled&&Cj&&global.process.emit("unhandledRejection",t._data,t)}function xle(t){global.process.emit("rejectionHandled",t)}function $n(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof $n))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],Dle(t,this)}$n.prototype={constructor:$n,_state:vC,_then:null,_data:void 0,_handled:!1,then:function(t,e){var r={owner:this,then:new this.constructor(Ile),fulfilled:t,rejected:e};return(e||t)&&!this._handled&&(this._handled=!0,this._state===Zv&&Cj&&ew(xle,this)),this._state===Qv||this._state===Zv?ew(Pj,r):this._then.push(r),r.then},catch:function(t){return this.then(null,t)}};$n.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new $n(function(e,r){var n=[],i=0;function o(u){return i++,function(c){n[u]=c,--i||e(n)}}for(var s=0,a;s<t.length;s++)a=t[s],a&&typeof a.then=="function"?a.then(o(s),r):n[s]=a;i||e(n)})};$n.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new $n(function(e,r){for(var n=0,i;n<t.length;n++)i=t[n],i&&typeof i.then=="function"?i.then(e,r):e(i)})};$n.resolve=function(t){return t&&typeof t=="object"&&t.constructor===$n?t:new $n(function(e){e(t)})};$n.reject=function(t){return new $n(function(e,r){r(t)})};$j.exports=$n});var kj=y((n1e,Mj)=>{"use strict";Mj.exports=typeof Promise=="function"?Promise:Rj()});var Bj=y((i1e,Fj)=>{"use strict";var Lle=require("child_process").execFile,Oj=kj(),Tle=yC();Fj.exports=function(t){return process.platform!=="darwin"?Oj.reject(new Error("Only OS X systems are supported")):Tle(Lle,Oj)("osascript",["-e",t]).then(function(e){return e.trim()})}});var Uj=y((o1e,Nj)=>{"use strict";var $le=Bj();Nj.exports=t=>$le(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)});var Vj=y((s1e,Wj)=>{var jj=Object.prototype.hasOwnProperty;Wj.exports=Rn;function Rn(t){if(!(this instanceof Rn))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof Rn||typeof Map=="function"&&t instanceof Map)t.forEach(function(e,r){this.set(r,e)},this);else if(Array.isArray(t))t.forEach(function(e){this.set(e[0],e[1])},this);else throw new TypeError("invalid argument")}Rn.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach(function(r){r!=="size"&&t.call(e,this._data[r].value,this._data[r].key)},this)};Rn.prototype.has=function(t){return!!_C(this._data,t)};Rn.prototype.get=function(t){var e=_C(this._data,t);return e&&e.value};Rn.prototype.set=function(t,e){Mle(this._data,t,e)};Rn.prototype.delete=function(t){var e=_C(this._data,t);e&&(delete this._data[e._index],this._data.size--)};Rn.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})};Object.defineProperty(Rn.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0});Rn.prototype.values=Rn.prototype.keys=Rn.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};function qj(t,e){return t===e||t!==t&&e!==e}function Rle(t,e,r){this.key=t,this.value=e,this._index=r}function _C(t,e){for(var r=0,n="_"+e,i=n;jj.call(t,i);i=n+r++)if(qj(t[i].key,e))return t[i]}function Mle(t,e,r){for(var n=0,i="_"+e,o=i;jj.call(t,o);o=i+n++)if(qj(t[o].key,e)){t[o].value=r;return}t.size++,t[o]=new Rle(e,r,o)}});var Gj=y((a1e,AC)=>{process.env.npm_package_name==="pseudomap"&&process.env.npm_lifecycle_script==="test"&&(process.env.TEST_PSEUDOMAP="true");typeof Map=="function"&&!process.env.TEST_PSEUDOMAP?AC.exports=Map:AC.exports=Vj()});var zj=y((u1e,Kj)=>{Kj.exports=We;We.Node=Em;We.create=We;function We(t){var e=this;if(e instanceof We||(e=new We),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}We.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null};We.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};We.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};We.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)kle(this,arguments[t]);return this.length};We.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ole(this,arguments[t]);return this.length};We.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};We.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};We.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};We.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};We.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};We.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};We.prototype.map=function(t,e){e=e||this;for(var r=new We,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};We.prototype.mapReverse=function(t,e){e=e||this;for(var r=new We,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};We.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};We.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};We.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};We.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};We.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new We;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};We.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new We;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};We.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function kle(t,e){t.tail=new Em(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ole(t,e){t.head=new Em(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Em(t,e,r,n){if(!(this instanceof Em))return new Em(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}});var SC=y((c1e,Yj)=>{"use strict";Yj.exports=lt;var Fle=Gj(),Dm=require("util"),Ble=zj(),Nle=typeof Symbol=="function"&&process.env._nodeLRUCacheForceNoSymbol!=="1",Ti;Nle?Ti=function(t){return Symbol(t)}:Ti=function(t){return"_"+t};var gs=Ti("max"),$o=Ti("length"),mc=Ti("lengthCalculator"),jp=Ti("allowStale"),Fa=Ti("maxAge"),ms=Ti("dispose"),Xj=Ti("noDisposeOnSet"),Qt=Ti("lruList"),Li=Ti("cache");function Cm(){return 1}function lt(t){if(!(this instanceof lt))return new lt(t);typeof t=="number"&&(t={max:t}),t||(t={});var e=this[gs]=t.max;(!e||typeof e!="number"||e<=0)&&(this[gs]=1/0);var r=t.length||Cm;typeof r!="function"&&(r=Cm),this[mc]=r,this[jp]=t.stale||!1,this[Fa]=t.maxAge||0,this[ms]=t.dispose,this[Xj]=t.noDisposeOnSet||!1,this.reset()}Object.defineProperty(lt.prototype,"max",{set:function(t){(!t||typeof t!="number"||t<=0)&&(t=1/0),this[gs]=t,Pm(this)},get:function(){return this[gs]},enumerable:!0});Object.defineProperty(lt.prototype,"allowStale",{set:function(t){this[jp]=!!t},get:function(){return this[jp]},enumerable:!0});Object.defineProperty(lt.prototype,"maxAge",{set:function(t){(!t||typeof t!="number"||t<0)&&(t=0),this[Fa]=t,Pm(this)},get:function(){return this[Fa]},enumerable:!0});Object.defineProperty(lt.prototype,"lengthCalculator",{set:function(t){typeof t!="function"&&(t=Cm),t!==this[mc]&&(this[mc]=t,this[$o]=0,this[Qt].forEach(function(e){e.length=this[mc](e.value,e.key),this[$o]+=e.length},this)),Pm(this)},get:function(){return this[mc]},enumerable:!0});Object.defineProperty(lt.prototype,"length",{get:function(){return this[$o]},enumerable:!0});Object.defineProperty(lt.prototype,"itemCount",{get:function(){return this[Qt].length},enumerable:!0});lt.prototype.rforEach=function(t,e){e=e||this;for(var r=this[Qt].tail;r!==null;){var n=r.prev;Jj(this,t,r,e),r=n}};function Jj(t,e,r,n){var i=r.value;xm(t,i)&&(qp(t,r),t[jp]||(i=void 0)),i&&e.call(n,i.value,i.key,t)}lt.prototype.forEach=function(t,e){e=e||this;for(var r=this[Qt].head;r!==null;){var n=r.next;Jj(this,t,r,e),r=n}};lt.prototype.keys=function(){return this[Qt].toArray().map(function(t){return t.key},this)};lt.prototype.values=function(){return this[Qt].toArray().map(function(t){return t.value},this)};lt.prototype.reset=function(){this[ms]&&this[Qt]&&this[Qt].length&&this[Qt].forEach(function(t){this[ms](t.key,t.value)},this),this[Li]=new Fle,this[Qt]=new Ble,this[$o]=0};lt.prototype.dump=function(){return this[Qt].map(function(t){if(!xm(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}},this).toArray().filter(function(t){return t})};lt.prototype.dumpLru=function(){return this[Qt]};lt.prototype.inspect=function(t,e){var r="LRUCache {",n=!1,i=this[jp];i&&(r+=`
  allowStale: true`,n=!0);var o=this[gs];o&&o!==1/0&&(n&&(r+=","),r+=`
  max: `+Dm.inspect(o,e),n=!0);var s=this[Fa];s&&(n&&(r+=","),r+=`
  maxAge: `+Dm.inspect(s,e),n=!0);var a=this[mc];a&&a!==Cm&&(n&&(r+=","),r+=`
  length: `+Dm.inspect(this[$o],e),n=!0);var u=!1;return this[Qt].forEach(function(c){u?r+=`,
  `:(n&&(r+=`,
`),u=!0,r+=`
  `);var l=Dm.inspect(c.key).split(`
`).join(`
  `),p={value:c.value};c.maxAge!==s&&(p.maxAge=c.maxAge),a!==Cm&&(p.length=c.length),xm(this,c)&&(p.stale=!0),p=Dm.inspect(p,e).split(`
`).join(`
  `),r+=l+" => "+p}),(u||n)&&(r+=`
`),r+="}",r};lt.prototype.set=function(t,e,r){r=r||this[Fa];var n=r?Date.now():0,i=this[mc](e,t);if(this[Li].has(t)){if(i>this[gs])return qp(this,this[Li].get(t)),!1;var o=this[Li].get(t),s=o.value;return this[ms]&&(this[Xj]||this[ms](t,s.value)),s.now=n,s.maxAge=r,s.value=e,this[$o]+=i-s.length,s.length=i,this.get(t),Pm(this),!0}var a=new Ule(t,e,i,n,r);return a.length>this[gs]?(this[ms]&&this[ms](t,e),!1):(this[$o]+=a.length,this[Qt].unshift(a),this[Li].set(t,this[Qt].head),Pm(this),!0)};lt.prototype.has=function(t){if(!this[Li].has(t))return!1;var e=this[Li].get(t).value;return!xm(this,e)};lt.prototype.get=function(t){return IC(this,t,!0)};lt.prototype.peek=function(t){return IC(this,t,!1)};lt.prototype.pop=function(){var t=this[Qt].tail;return t?(qp(this,t),t.value):null};lt.prototype.del=function(t){qp(this,this[Li].get(t))};lt.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var n=t[r],i=n.e||0;if(i===0)this.set(n.k,n.v);else{var o=i-e;o>0&&this.set(n.k,n.v,o)}}};lt.prototype.prune=function(){var t=this;this[Li].forEach(function(e,r){IC(t,r,!1)})};function IC(t,e,r){var n=t[Li].get(e);if(n){var i=n.value;xm(t,i)?(qp(t,n),t[jp]||(i=void 0)):r&&t[Qt].unshiftNode(n),i&&(i=i.value)}return i}function xm(t,e){if(!e||!e.maxAge&&!t[Fa])return!1;var r=!1,n=Date.now()-e.now;return e.maxAge?r=n>e.maxAge:r=t[Fa]&&n>t[Fa],r}function Pm(t){if(t[$o]>t[gs])for(var e=t[Qt].tail;t[$o]>t[gs]&&e!==null;){var r=e.prev;qp(t,e),e=r}}function qp(t,e){if(e){var r=e.value;t[ms]&&t[ms](r.key,r.value),t[$o]-=r.length,t[Li].delete(r.key),t[Qt].removeNode(e)}}function Ule(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}});var iq=y((l1e,nq)=>{nq.exports=rq;rq.sync=qle;var EC=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Qj=require("path"),jle=EC?";":":",Zj=kA();function eq(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function tq(t,e){var r=e.colon||jle,n=e.path||process.env.PATH||"",i=[""];n=n.split(r);var o="";return EC&&(n.unshift(process.cwd()),o=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",i=o.split(r),t.indexOf(".")!==-1&&i[0]!==""&&i.unshift("")),(t.match(/\//)||EC&&t.match(/\\/))&&(n=[""]),{env:n,ext:i,extExe:o}}function rq(t,e,r){typeof e=="function"&&(r=e,e={});var n=tq(t,e),i=n.env,o=n.ext,s=n.extExe,a=[];(function u(c,l){if(c===l)return e.all&&a.length?r(null,a):r(eq(t));var p=i[c];p.charAt(0)==='"'&&p.slice(-1)==='"'&&(p=p.slice(1,-1));var f=Qj.join(p,t);!p&&/^\.[\\\/]/.test(t)&&(f=t.slice(0,2)+f),function m(h,H){if(h===H)return u(c+1,l);var b=o[h];Zj(f+b,{pathExt:s},function(_,$){if(!_&&$)if(e.all)a.push(f+b);else return r(null,f+b);return m(h+1,H)})}(0,o.length)})(0,i.length)}function qle(t,e){e=e||{};for(var r=tq(t,e),n=r.env,i=r.ext,o=r.extExe,s=[],a=0,u=n.length;a<u;a++){var c=n[a];c.charAt(0)==='"'&&c.slice(-1)==='"'&&(c=c.slice(1,-1));var l=Qj.join(c,t);!c&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l);for(var p=0,f=i.length;p<f;p++){var m=l+i[p],h;try{if(h=Zj.sync(m,{pathExt:o}),h)if(e.all)s.push(m);else return m}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw eq(t)}});var uq=y((p1e,aq)=>{"use strict";var oq=require("path"),sq=iq(),Wle=SC(),tw=new Wle({max:50,maxAge:30*1e3}),Vle=new RegExp(process.platform==="win32"?/[\/\\]/:/\//);function Gle(t,e){var r;if(Vle.test(t)&&(t=oq.resolve(t)),e=!!e,r=tw.get(t+"!"+e),tw.has(t))return tw.get(t);try{r=e?sq.sync(t,{pathExt:oq.delimiter+(process.env.PATHEXT||"")}):sq.sync(t)}catch{}return tw.set(t+"!"+e,r),r}aq.exports=Gle});var fq=y((f1e,pq)=>{"use strict";var DC=require("fs"),Kle=SC(),cq=uq(),zle=process.platform==="win32",CC=new Kle({max:50,maxAge:30*1e3});function Xle(t){var e,r,n,i;if(CC.has(t))return CC.get(t);e=new Buffer(150);try{r=DC.openSync(t,"r"),DC.readSync(r,e,0,150,0),DC.closeSync(r)}catch{}return n=e.toString().trim().match(/#!(.+)/i),n&&(i=n[1].replace(/\/usr\/bin\/env\s+/i,"")),CC.set(t,i),i}function lq(t,e){return t=""+t,e?(t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t='"'+t+'"'):t=t.replace(/([\(\)%!\^<>&|;,"'\s])/g,"^$1"),t}function Jle(t){return/^[a-z0-9_-]+$/i.test(t)?t:lq(t,!0)}function Yle(t,e,r){var n,i,o,s;return e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=r||{},s=t,zle&&(o=cq(t),o=o||cq(t,!0),n=o&&Xle(o),n&&(e.unshift(o),t=n),i=t!=="echo",t=Jle(t),e=e.map(function(a){return lq(a,i)}),e=["/s","/c",'"'+t+(e.length?" "+e.join(" "):"")+'"'],t=process.env.comspec||"cmd.exe",r.windowsVerbatimArguments=!0),{command:t,args:e,options:r,file:o,original:s}}pq.exports=Yle});var gq=y((d1e,rw)=>{"use strict";var dq=process.platform==="win32";function hq(t,e){var r;return r=new Error(e+" "+t+" ENOENT"),r.code=r.errno="ENOENT",r.syscall=e+" "+t,r}function Qle(t,e){var r;dq&&(r=t.emit,t.emit=function(n,i){var o;return n==="exit"&&(o=mq(i,e,"spawn"),o)?r.call(t,"error",o):r.apply(t,arguments)})}function mq(t,e,r){return dq&&t===1&&!e.file?hq(e.original,r):null}rw.exports.hookChildProcess=Qle;rw.exports.verifyENOENT=mq;rw.exports.notFoundError=hq});var vq=y((h1e,Lm)=>{"use strict";var Zle=require("child_process"),Hq=fq(),yq=gq();function bq(t,e,r){var n,i;return n=Hq(t,e,r),i=Zle.spawn(n.command,n.args,n.options),yq.hookChildProcess(i,n),i}Lm.exports=bq;Lm.exports.spawn=bq;Lm.exports._parse=Hq;Lm.exports._enoent=yq});var _q=y((m1e,wq)=>{"use strict";wq.exports=function(t){var e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var Sq=y((g1e,Iq)=>{"use strict";var Aq=Object.getOwnPropertySymbols,epe=Object.prototype.hasOwnProperty,tpe=Object.prototype.propertyIsEnumerable;function rpe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function npe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Iq.exports=npe()?Object.assign:function(t,e){for(var r,n=rpe(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)epe.call(r,s)&&(n[s]=r[s]);if(Aq){i=Aq(r);for(var a=0;a<i.length;a++)tpe.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var PC=y((H1e,Eq)=>{"use strict";Eq.exports=function(t){t=t||{};var e=t.env||process.env,r=t.platform||process.platform;return r!=="win32"?"PATH":Object.keys(e).filter(function(n){return n.toUpperCase()==="PATH"})[0]||"Path"}});var Cq=y((y1e,Dq)=>{"use strict";var Tm=require("path"),ipe=PC();Dq.exports=function(t){t=t||{};for(var e,r=Tm.resolve(t.cwd||"."),n=[];e!==r;)n.push(Tm.join(r,"node_modules/.bin")),e=r,r=Tm.resolve(r,"..");return n.push(Tm.dirname(process.execPath)),n.concat(t.path||process.env[ipe()]).join(Tm.delimiter)}});var xq=y((b1e,$m)=>{"use strict";var ope=require("child_process"),xC=vq(),spe=_q(),LC=Sq(),ape=Cq(),Pq=PC()(),upe=1024*1024*10;$m.exports=function(t,e,r){return new Promise(function(n,i){var o=xC._parse(t,e,r);r=LC({maxBuffer:upe,stripEof:!0,preferLocal:!0},o.options);var s=function(u){return r.stripEof&&(u=spe(u)),u};r.preferLocal&&(r.env=LC({},r.env||process.env),r.env[Pq]=ape({cwd:r.cwd,path:r.env[Pq]}));var a=ope.execFile(o.command,o.args,r,function(u,c,l){if(u){u.stdout=c,u.stderr=l,i(u);return}n({stdout:s(c),stderr:s(l)})});xC._enoent.hookChildProcess(a,o)})};$m.exports.shell=function(t,e){var r,n;return e=LC({},e),process.platform==="win32"?(r=process.env.comspec||"cmd.exe",n=["/s","/c",'"'+t+'"'],e.windowsVerbatimArguments=!0):(r="/bin/sh",n=["-c",t]),e.shell&&(r=e.shell),$m.exports(r,n,e)};$m.exports.spawn=xC});var Tq=y((v1e,Lq)=>{"use strict";Lq.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}});var Rq=y((w1e,$q)=>{"use strict";var cpe=xq(),lpe=Tq();$q.exports=function(){return process.platform!=="linux"?Promise.reject(new Error("Only Linux systems are supported")):cpe("xdg-mime",["query","default","x-scheme-handler/http"]).then(t=>{let e=t.stdout.trim();return{name:lpe(e.replace(/.desktop$/,"").replace("-"," ")),id:e}})}});var kq=y((_1e,Mq)=>{"use strict";var ppe=Ej(),fpe=Uj();Mq.exports=()=>process.platform==="linux"?Rq()():process.platform==="darwin"?ppe().then(t=>fpe(t).then(e=>({name:e,id:t}))):Promise.reject(new Error("Only macOS and Linux are supported"))});var ys=y((G1e,$C)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?$C.exports={nextTick:mpe}:$C.exports=process;function mpe(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,s;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return process.nextTick(function(){t.apply(null,o)})}}});var RC=y((K1e,qq)=>{var gpe={}.toString;qq.exports=Array.isArray||function(t){return gpe.call(t)=="[object Array]"}});var MC=y((z1e,Wq)=>{Wq.exports=require("stream")});var vs=y((kC,Gq)=>{var aw=require("buffer"),bs=aw.Buffer;function Vq(t,e){for(var r in t)e[r]=t[r]}bs.from&&bs.alloc&&bs.allocUnsafe&&bs.allocUnsafeSlow?Gq.exports=aw:(Vq(aw,kC),kC.Buffer=Gp);function Gp(t,e,r){return bs(t,e,r)}Vq(bs,Gp);Gp.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return bs(t,e,r)};Gp.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=bs(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Gp.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return bs(t)};Gp.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return aw.SlowBuffer(t)}});var $i=y(Br=>{function Hpe(t){return Array.isArray?Array.isArray(t):uw(t)==="[object Array]"}Br.isArray=Hpe;function ype(t){return typeof t=="boolean"}Br.isBoolean=ype;function bpe(t){return t===null}Br.isNull=bpe;function vpe(t){return t==null}Br.isNullOrUndefined=vpe;function wpe(t){return typeof t=="number"}Br.isNumber=wpe;function _pe(t){return typeof t=="string"}Br.isString=_pe;function Ape(t){return typeof t=="symbol"}Br.isSymbol=Ape;function Ipe(t){return t===void 0}Br.isUndefined=Ipe;function Spe(t){return uw(t)==="[object RegExp]"}Br.isRegExp=Spe;function Epe(t){return typeof t=="object"&&t!==null}Br.isObject=Epe;function Dpe(t){return uw(t)==="[object Date]"}Br.isDate=Dpe;function Cpe(t){return uw(t)==="[object Error]"||t instanceof Error}Br.isError=Cpe;function Ppe(t){return typeof t=="function"}Br.isFunction=Ppe;function xpe(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Br.isPrimitive=xpe;Br.isBuffer=Buffer.isBuffer;function uw(t){return Object.prototype.toString.call(t)}});var Kq=y((J1e,OC)=>{typeof Object.create=="function"?OC.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:OC.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Zt=y((Y1e,BC)=>{try{if(FC=require("util"),typeof FC.inherits!="function")throw"";BC.exports=FC.inherits}catch{BC.exports=Kq()}var FC});var Xq=y((Q1e,NC)=>{"use strict";function Lpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var zq=vs().Buffer,Mm=require("util");function Tpe(t,e,r){t.copy(e,r)}NC.exports=function(){function t(){Lpe(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return zq.alloc(0);if(this.length===1)return this.head.data;for(var n=zq.allocUnsafe(r>>>0),i=this.head,o=0;i;)Tpe(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();Mm&&Mm.inspect&&Mm.inspect.custom&&(NC.exports.prototype[Mm.inspect.custom]=function(){var t=Mm.inspect({length:this.length});return this.constructor.name+" "+t})});var UC=y((Z1e,Qq)=>{"use strict";var Jq=ys();function $pe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&Jq.nextTick(Yq,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(Jq.nextTick(Yq,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function Rpe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Yq(t,e){t.emit("error",e)}Qq.exports={destroy:$pe,undestroy:Rpe}});var cw=y((eOe,Zq)=>{Zq.exports=require("util").deprecate});var qC=y((tOe,aW)=>{"use strict";var gc=ys();aW.exports=qt;function tW(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Qpe(e,t)}}var Mpe=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:gc.nextTick,Kp;qt.WritableState=Om;var rW=Object.create($i());rW.inherits=Zt();var kpe={deprecate:cw()},nW=MC(),pw=vs().Buffer,Ope=global.Uint8Array||function(){};function Fpe(t){return pw.from(t)}function Bpe(t){return pw.isBuffer(t)||t instanceof Ope}var iW=UC();rW.inherits(qt,nW);function Npe(){}function Om(t,e){Kp=Kp||Hc(),t=t||{};var r=e instanceof Kp;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Kpe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new tW(this)}Om.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Om.prototype,"buffer",{get:kpe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var lw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(lw=Function.prototype[Symbol.hasInstance],Object.defineProperty(qt,Symbol.hasInstance,{value:function(t){return lw.call(this,t)?!0:this!==qt?!1:t&&t._writableState instanceof Om}})):lw=function(t){return t instanceof this};function qt(t){if(Kp=Kp||Hc(),!lw.call(qt,this)&&!(this instanceof Kp))return new qt(t);this._writableState=new Om(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),nW.call(this)}qt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Upe(t,e){var r=new Error("write after end");t.emit("error",r),gc.nextTick(e,r)}function jpe(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),gc.nextTick(n,o),i=!1),i}qt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Bpe(t);return o&&!pw.isBuffer(t)&&(t=Fpe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Npe),n.ended?Upe(this,r):(o||jpe(this,n,t,r))&&(n.pendingcb++,i=Wpe(this,n,o,t,e,r)),i};qt.prototype.cork=function(){var t=this._writableState;t.corked++};qt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&oW(this,t))};qt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function qpe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=pw.from(e,r)),e}Object.defineProperty(qt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Wpe(t,e,r,n,i,o){if(!r){var s=qpe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else jC(t,e,!1,a,n,i,o);return u}function jC(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Vpe(t,e,r,n,i){--e.pendingcb,r?(gc.nextTick(i,n),gc.nextTick(km,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),km(t,e))}function Gpe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Kpe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Gpe(r),e)Vpe(t,r,n,e,i);else{var o=sW(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&oW(t,r),n?Mpe(eW,t,r,o,i):eW(t,r,o,i)}}function eW(t,e,r,n){r||zpe(t,e),e.pendingcb--,n(),km(t,e)}function zpe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function oW(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,jC(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new tW(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(jC(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}qt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};qt.prototype._writev=null;qt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Ype(this,n,r)};function sW(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Xpe(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),km(t,e)})}function Jpe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,gc.nextTick(Xpe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function km(t,e){var r=sW(e);return r&&(Jpe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function Ype(t,e,r){e.ending=!0,km(t,e),r&&(e.finished?gc.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Qpe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(qt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});qt.prototype.destroy=iW.destroy;qt.prototype._undestroy=iW.undestroy;qt.prototype._destroy=function(t,e){this.end(),e(t)}});var Hc=y((rOe,pW)=>{"use strict";var uW=ys(),Zpe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};pW.exports=ws;var cW=Object.create($i());cW.inherits=Zt();var lW=GC(),VC=qC();cW.inherits(ws,lW);for(WC=Zpe(VC.prototype),fw=0;fw<WC.length;fw++)dw=WC[fw],ws.prototype[dw]||(ws.prototype[dw]=VC.prototype[dw]);var WC,dw,fw;function ws(t){if(!(this instanceof ws))return new ws(t);lW.call(this,t),VC.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",efe)}Object.defineProperty(ws.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function efe(){this.allowHalfOpen||this._writableState.ended||uW.nextTick(tfe,this)}function tfe(t){t.end()}Object.defineProperty(ws.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});ws.prototype._destroy=function(t,e){this.push(null),this.end(),uW.nextTick(e,t)}});var XC=y(dW=>{"use strict";var zC=vs().Buffer,fW=zC.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rfe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function nfe(t){var e=rfe(t);if(typeof e!="string"&&(zC.isEncoding===fW||!fW(t)))throw new Error("Unknown encoding: "+t);return e||t}dW.StringDecoder=Fm;function Fm(t){this.encoding=nfe(t);var e;switch(this.encoding){case"utf16le":this.text=cfe,this.end=lfe,e=4;break;case"utf8":this.fillLast=sfe,e=4;break;case"base64":this.text=pfe,this.end=ffe,e=3;break;default:this.write=dfe,this.end=hfe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=zC.allocUnsafe(e)}Fm.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Fm.prototype.end=ufe;Fm.prototype.text=afe;Fm.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function KC(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function ife(t,e,r){var n=e.length-1;if(n<r)return 0;var i=KC(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=KC(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=KC(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function ofe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function sfe(t){var e=this.lastTotal-this.lastNeed,r=ofe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function afe(t,e){var r=ife(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function ufe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function cfe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function lfe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function pfe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function ffe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function dfe(t){return t.toString(this.encoding)}function hfe(t){return t&&t.length?this.write(t):""}});var GC=y((oOe,SW)=>{"use strict";var Xp=ys();SW.exports=pt;var mfe=RC(),Bm;pt.ReadableState=vW;var iOe=require("events").EventEmitter,HW=function(t,e){return t.listeners(e).length},eP=MC(),Nm=vs().Buffer,gfe=global.Uint8Array||function(){};function Hfe(t){return Nm.from(t)}function yfe(t){return Nm.isBuffer(t)||t instanceof gfe}var yW=Object.create($i());yW.inherits=Zt();var JC=require("util"),je=void 0;JC&&JC.debuglog?je=JC.debuglog("stream"):je=function(){};var bfe=Xq(),bW=UC(),zp;yW.inherits(pt,eP);var YC=["error","close","destroy","pause","resume"];function vfe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):mfe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function vW(t,e){Bm=Bm||Hc(),t=t||{};var r=e instanceof Bm;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new bfe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(zp||(zp=XC().StringDecoder),this.decoder=new zp(t.encoding),this.encoding=t.encoding)}function pt(t){if(Bm=Bm||Hc(),!(this instanceof pt))return new pt(t);this._readableState=new vW(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),eP.call(this)}Object.defineProperty(pt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});pt.prototype.destroy=bW.destroy;pt.prototype._undestroy=bW.undestroy;pt.prototype._destroy=function(t,e){this.push(null),e(t)};pt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Nm.from(t,e),e=""),n=!0),wW(this,t,e,!1,n)};pt.prototype.unshift=function(t){return wW(this,t,null,!0,!1)};function wW(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,Ife(t,o);else{var s;i||(s=wfe(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Nm.prototype&&(e=Hfe(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):QC(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?QC(t,o,e,!1):_W(t,o)):QC(t,o,e,!1))):n||(o.reading=!1)}return _fe(o)}function QC(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&hw(t)),_W(t,e)}function wfe(t,e){var r;return!yfe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function _fe(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}pt.prototype.isPaused=function(){return this._readableState.flowing===!1};pt.prototype.setEncoding=function(t){return zp||(zp=XC().StringDecoder),this._readableState.decoder=new zp(t),this._readableState.encoding=t,this};var hW=8388608;function Afe(t){return t>=hW?t=hW:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function mW(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Afe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}pt.prototype.read=function(t){je("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return je("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ZC(this):hw(this),null;if(t=mW(t,e),t===0&&e.ended)return e.length===0&&ZC(this),null;var n=e.needReadable;je("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,je("length less than watermark",n)),e.ended||e.reading?(n=!1,je("reading or ended",n)):n&&(je("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=mW(r,e)));var i;return t>0?i=AW(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ZC(this)),i!==null&&this.emit("data",i),i};function Ife(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,hw(t)}}function hw(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(je("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Xp.nextTick(gW,t):gW(t))}function gW(t){je("emit readable"),t.emit("readable"),tP(t)}function _W(t,e){e.readingMore||(e.readingMore=!0,Xp.nextTick(Sfe,t,e))}function Sfe(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(je("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}pt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};pt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,je("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:b;n.endEmitted?Xp.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,$){je("onunpipe"),_===r&&$&&$.hasUnpiped===!1&&($.hasUnpiped=!0,l())}function a(){je("onend"),t.end()}var u=Efe(r);t.on("drain",u);var c=!1;function l(){je("cleanup"),t.removeListener("close",h),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){je("ondata"),p=!1;var $=t.write(_);$===!1&&!p&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&IW(n.pipes,t)!==-1)&&!c&&(je("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(_){je("onerror",_),b(),t.removeListener("error",m),HW(t,"error")===0&&t.emit("error",_)}vfe(t,"error",m);function h(){t.removeListener("finish",H),b()}t.once("close",h);function H(){je("onfinish"),t.removeListener("close",h),b()}t.once("finish",H);function b(){je("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(je("pipe resume"),r.resume()),t};function Efe(t){return function(){var e=t._readableState;je("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&HW(t,"data")&&(e.flowing=!0,tP(t))}}pt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=IW(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};pt.prototype.on=function(t,e){var r=eP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&hw(this):Xp.nextTick(Dfe,this))}return r};pt.prototype.addListener=pt.prototype.on;function Dfe(t){je("readable nexttick read 0"),t.read(0)}pt.prototype.resume=function(){var t=this._readableState;return t.flowing||(je("resume"),t.flowing=!0,Cfe(this,t)),this};function Cfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Xp.nextTick(Pfe,t,e))}function Pfe(t,e){e.reading||(je("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),tP(t),e.flowing&&!e.reading&&t.read(0)}pt.prototype.pause=function(){return je("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(je("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function tP(t){var e=t._readableState;for(je("flow",e.flowing);e.flowing&&t.read()!==null;);}pt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(je("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(je("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<YC.length;o++)t.on(YC[o],this.emit.bind(this,YC[o]));return this._read=function(s){je("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(pt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});pt._fromList=AW;function AW(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=xfe(t,e.buffer,e.decoder),r}function xfe(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?Lfe(t,e):Tfe(t,e),n}function Lfe(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function Tfe(t,e){var r=Nm.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function ZC(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Xp.nextTick($fe,e,t))}function $fe(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function IW(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var rP=y((sOe,CW)=>{"use strict";CW.exports=_s;var mw=Hc(),DW=Object.create($i());DW.inherits=Zt();DW.inherits(_s,mw);function Rfe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function _s(t){if(!(this instanceof _s))return new _s(t);mw.call(this,t),this._transformState={afterTransform:Rfe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Mfe)}function Mfe(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){EW(t,e,r)}):EW(this,null,null)}_s.prototype.push=function(t,e){return this._transformState.needTransform=!1,mw.prototype.push.call(this,t,e)};_s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};_s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};_s.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};_s.prototype._destroy=function(t,e){var r=this;mw.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function EW(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var TW=y((aOe,LW)=>{"use strict";LW.exports=Um;var PW=rP(),xW=Object.create($i());xW.inherits=Zt();xW.inherits(Um,PW);function Um(t){if(!(this instanceof Um))return new Um(t);PW.call(this,t)}Um.prototype._transform=function(t,e,r){r(null,t)}});var $W=y((br,gw)=>{var Ro=require("stream");process.env.READABLE_STREAM==="disable"&&Ro?(gw.exports=Ro,br=gw.exports=Ro.Readable,br.Readable=Ro.Readable,br.Writable=Ro.Writable,br.Duplex=Ro.Duplex,br.Transform=Ro.Transform,br.PassThrough=Ro.PassThrough,br.Stream=Ro):(br=gw.exports=GC(),br.Stream=Ro||br,br.Readable=br,br.Writable=qC(),br.Duplex=Hc(),br.Transform=rP(),br.PassThrough=TW())});var kW=y((uOe,MW)=>{var RW=$W(),kfe=require("util");function Ofe(t){return!(typeof t.pipe!="function"||!t.readable||typeof t._read!="function"||!t._readableState)}function Ffe(t,e){if(!Ofe(e))throw new Error("All input streams must be readable");var r=this;e._buffer=[],e.on("readable",function(){for(var n=e.read();n;)this===t[0]?r.push(n):this._buffer.push(n),n=e.read()}),e.on("end",function(){for(var n=t[0];n&&n._readableState.ended;n=t[0]){for(;n._buffer.length;)r.push(n._buffer.shift());t.shift()}t.length||r.push(null)}),e.on("error",this.emit.bind(this,"error")),t.push(e)}function jm(t,e){if(!(this instanceof jm))return new jm(t,e);if(t=t||[],e=e||{},e.objectMode=!0,RW.call(this,e),Array.isArray(t)||(t=[t]),!t.length)return this.push(null);var r=Ffe.bind(this,[]);t.forEach(function(n){Array.isArray(n)?n.forEach(r):r(n)})}kfe.inherits(jm,RW);jm.prototype._read=function(){};MW.exports=jm});var nP=y((cOe,OW)=>{OW.exports=require("stream")});var BW=y((lOe,iP)=>{"use strict";function Bfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var FW=vs().Buffer,qm=require("util");function Nfe(t,e,r){t.copy(e,r)}iP.exports=function(){function t(){Bfe(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return FW.alloc(0);if(this.length===1)return this.head.data;for(var n=FW.allocUnsafe(r>>>0),i=this.head,o=0;i;)Nfe(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();qm&&qm.inspect&&qm.inspect.custom&&(iP.exports.prototype[qm.inspect.custom]=function(){var t=qm.inspect({length:this.length});return this.constructor.name+" "+t})});var oP=y((pOe,jW)=>{"use strict";var NW=ys();function Ufe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&NW.nextTick(UW,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(NW.nextTick(UW,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function jfe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function UW(t,e){t.emit("error",e)}jW.exports={destroy:Ufe,undestroy:jfe}});var aP=y((fOe,JW)=>{"use strict";var yc=ys();JW.exports=Wt;function WW(t){var e=this;this.next=null,this.entry=null,this.finish=function(){sde(e,t)}}var qfe=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:yc.nextTick,Jp;Wt.WritableState=Vm;var VW=$i();VW.inherits=Zt();var Wfe={deprecate:cw()},GW=nP(),yw=vs().Buffer,Vfe=global.Uint8Array||function(){};function Gfe(t){return yw.from(t)}function Kfe(t){return yw.isBuffer(t)||t instanceof Vfe}var KW=oP();VW.inherits(Wt,GW);function zfe(){}function Vm(t,e){Jp=Jp||bc(),t=t||{};var r=e instanceof Jp;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){tde(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new WW(this)}Vm.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Vm.prototype,"buffer",{get:Wfe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Hw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Hw=Function.prototype[Symbol.hasInstance],Object.defineProperty(Wt,Symbol.hasInstance,{value:function(t){return Hw.call(this,t)?!0:this!==Wt?!1:t&&t._writableState instanceof Vm}})):Hw=function(t){return t instanceof this};function Wt(t){if(Jp=Jp||bc(),!Hw.call(Wt,this)&&!(this instanceof Jp))return new Wt(t);this._writableState=new Vm(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),GW.call(this)}Wt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Xfe(t,e){var r=new Error("write after end");t.emit("error",r),yc.nextTick(e,r)}function Jfe(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),yc.nextTick(n,o),i=!1),i}Wt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Kfe(t);return o&&!yw.isBuffer(t)&&(t=Gfe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=zfe),n.ended?Xfe(this,r):(o||Jfe(this,n,t,r))&&(n.pendingcb++,i=Qfe(this,n,o,t,e,r)),i};Wt.prototype.cork=function(){var t=this._writableState;t.corked++};Wt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&zW(this,t))};Wt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Yfe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=yw.from(e,r)),e}Object.defineProperty(Wt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Qfe(t,e,r,n,i,o){if(!r){var s=Yfe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sP(t,e,!1,a,n,i,o);return u}function sP(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Zfe(t,e,r,n,i){--e.pendingcb,r?(yc.nextTick(i,n),yc.nextTick(Wm,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Wm(t,e))}function ede(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function tde(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(ede(r),e)Zfe(t,r,n,e,i);else{var o=XW(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&zW(t,r),n?qfe(qW,t,r,o,i):qW(t,r,o,i)}}function qW(t,e,r,n){r||rde(t,e),e.pendingcb--,n(),Wm(t,e)}function rde(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function zW(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,sP(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new WW(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(sP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Wt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Wt.prototype._writev=null;Wt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&ode(this,n,r)};function XW(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function nde(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Wm(t,e)})}function ide(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,yc.nextTick(nde,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Wm(t,e){var r=XW(e);return r&&(ide(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function ode(t,e,r){e.ending=!0,Wm(t,e),r&&(e.finished?yc.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function sde(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(Wt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Wt.prototype.destroy=KW.destroy;Wt.prototype._undestroy=KW.undestroy;Wt.prototype._destroy=function(t,e){this.end(),e(t)}});var bc=y((dOe,e8)=>{"use strict";var YW=ys(),ade=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e8.exports=As;var QW=$i();QW.inherits=Zt();var ZW=lP(),cP=aP();QW.inherits(As,ZW);for(uP=ade(cP.prototype),bw=0;bw<uP.length;bw++)vw=uP[bw],As.prototype[vw]||(As.prototype[vw]=cP.prototype[vw]);var uP,vw,bw;function As(t){if(!(this instanceof As))return new As(t);ZW.call(this,t),cP.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ude)}Object.defineProperty(As.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ude(){this.allowHalfOpen||this._writableState.ended||YW.nextTick(cde,this)}function cde(t){t.end()}Object.defineProperty(As.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});As.prototype._destroy=function(t,e){this.push(null),this.end(),YW.nextTick(e,t)}});var dP=y(r8=>{"use strict";var fP=vs().Buffer,t8=fP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function lde(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function pde(t){var e=lde(t);if(typeof e!="string"&&(fP.isEncoding===t8||!t8(t)))throw new Error("Unknown encoding: "+t);return e||t}r8.StringDecoder=Gm;function Gm(t){this.encoding=pde(t);var e;switch(this.encoding){case"utf16le":this.text=Hde,this.end=yde,e=4;break;case"utf8":this.fillLast=hde,e=4;break;case"base64":this.text=bde,this.end=vde,e=3;break;default:this.write=wde,this.end=_de;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=fP.allocUnsafe(e)}Gm.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Gm.prototype.end=gde;Gm.prototype.text=mde;Gm.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function pP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function fde(t,e,r){var n=e.length-1;if(n<r)return 0;var i=pP(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=pP(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=pP(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function dde(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function hde(t){var e=this.lastTotal-this.lastNeed,r=dde(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function mde(t,e){var r=fde(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function gde(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Hde(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function yde(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function bde(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function vde(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function wde(t){return t.toString(this.encoding)}function _de(t){return t&&t.length?this.write(t):""}});var lP=y((gOe,h8)=>{"use strict";var Qp=ys();h8.exports=ft;var Ade=RC(),Km;ft.ReadableState=c8;var mOe=require("events").EventEmitter,s8=function(t,e){return t.listeners(e).length},yP=nP(),zm=vs().Buffer,Ide=global.Uint8Array||function(){};function Sde(t){return zm.from(t)}function Ede(t){return zm.isBuffer(t)||t instanceof Ide}var a8=$i();a8.inherits=Zt();var hP=require("util"),qe=void 0;hP&&hP.debuglog?qe=hP.debuglog("stream"):qe=function(){};var Dde=BW(),u8=oP(),Yp;a8.inherits(ft,yP);var mP=["error","close","destroy","pause","resume"];function Cde(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Ade(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function c8(t,e){Km=Km||bc(),t=t||{};var r=e instanceof Km;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Dde,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Yp||(Yp=dP().StringDecoder),this.decoder=new Yp(t.encoding),this.encoding=t.encoding)}function ft(t){if(Km=Km||bc(),!(this instanceof ft))return new ft(t);this._readableState=new c8(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),yP.call(this)}Object.defineProperty(ft.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});ft.prototype.destroy=u8.destroy;ft.prototype._undestroy=u8.undestroy;ft.prototype._destroy=function(t,e){this.push(null),e(t)};ft.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=zm.from(t,e),e=""),n=!0),l8(this,t,e,!1,n)};ft.prototype.unshift=function(t){return l8(this,t,null,!0,!1)};function l8(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,Tde(t,o);else{var s;i||(s=Pde(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==zm.prototype&&(e=Sde(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):gP(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?gP(t,o,e,!1):p8(t,o)):gP(t,o,e,!1))):n||(o.reading=!1)}return xde(o)}function gP(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ww(t)),p8(t,e)}function Pde(t,e){var r;return!Ede(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function xde(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ft.prototype.isPaused=function(){return this._readableState.flowing===!1};ft.prototype.setEncoding=function(t){return Yp||(Yp=dP().StringDecoder),this._readableState.decoder=new Yp(t),this._readableState.encoding=t,this};var n8=8388608;function Lde(t){return t>=n8?t=n8:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function i8(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Lde(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ft.prototype.read=function(t){qe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return qe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?HP(this):ww(this),null;if(t=i8(t,e),t===0&&e.ended)return e.length===0&&HP(this),null;var n=e.needReadable;qe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,qe("length less than watermark",n)),e.ended||e.reading?(n=!1,qe("reading or ended",n)):n&&(qe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=i8(r,e)));var i;return t>0?i=f8(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&HP(this)),i!==null&&this.emit("data",i),i};function Tde(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,ww(t)}}function ww(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(qe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Qp.nextTick(o8,t):o8(t))}function o8(t){qe("emit readable"),t.emit("readable"),bP(t)}function p8(t,e){e.readingMore||(e.readingMore=!0,Qp.nextTick($de,t,e))}function $de(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(qe("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}ft.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};ft.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,qe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:b;n.endEmitted?Qp.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,$){qe("onunpipe"),_===r&&$&&$.hasUnpiped===!1&&($.hasUnpiped=!0,l())}function a(){qe("onend"),t.end()}var u=Rde(r);t.on("drain",u);var c=!1;function l(){qe("cleanup"),t.removeListener("close",h),t.removeListener("finish",H),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var p=!1;r.on("data",f);function f(_){qe("ondata"),p=!1;var $=t.write(_);$===!1&&!p&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&d8(n.pipes,t)!==-1)&&!c&&(qe("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(_){qe("onerror",_),b(),t.removeListener("error",m),s8(t,"error")===0&&t.emit("error",_)}Cde(t,"error",m);function h(){t.removeListener("finish",H),b()}t.once("close",h);function H(){qe("onfinish"),t.removeListener("close",h),b()}t.once("finish",H);function b(){qe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(qe("pipe resume"),r.resume()),t};function Rde(t){return function(){var e=t._readableState;qe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&s8(t,"data")&&(e.flowing=!0,bP(t))}}ft.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=d8(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ft.prototype.on=function(t,e){var r=yP.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ww(this):Qp.nextTick(Mde,this))}return r};ft.prototype.addListener=ft.prototype.on;function Mde(t){qe("readable nexttick read 0"),t.read(0)}ft.prototype.resume=function(){var t=this._readableState;return t.flowing||(qe("resume"),t.flowing=!0,kde(this,t)),this};function kde(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Qp.nextTick(Ode,t,e))}function Ode(t,e){e.reading||(qe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),bP(t),e.flowing&&!e.reading&&t.read(0)}ft.prototype.pause=function(){return qe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(qe("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function bP(t){var e=t._readableState;for(qe("flow",e.flowing);e.flowing&&t.read()!==null;);}ft.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(qe("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(qe("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<mP.length;o++)t.on(mP[o],this.emit.bind(this,mP[o]));return this._read=function(s){qe("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(ft.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});ft._fromList=f8;function f8(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Fde(t,e.buffer,e.decoder),r}function Fde(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?Bde(t,e):Nde(t,e),n}function Bde(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function Nde(t,e){var r=zm.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function HP(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Qp.nextTick(Ude,e,t))}function Ude(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function d8(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var vP=y((HOe,H8)=>{"use strict";H8.exports=Is;var _w=bc(),g8=$i();g8.inherits=Zt();g8.inherits(Is,_w);function jde(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Is(t){if(!(this instanceof Is))return new Is(t);_w.call(this,t),this._transformState={afterTransform:jde.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",qde)}function qde(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){m8(t,e,r)}):m8(this,null,null)}Is.prototype.push=function(t,e){return this._transformState.needTransform=!1,_w.prototype.push.call(this,t,e)};Is.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Is.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Is.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Is.prototype._destroy=function(t,e){var r=this;_w.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function m8(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var w8=y((yOe,v8)=>{"use strict";v8.exports=Xm;var y8=vP(),b8=$i();b8.inherits=Zt();b8.inherits(Xm,y8);function Xm(t){if(!(this instanceof Xm))return new Xm(t);y8.call(this,t)}Xm.prototype._transform=function(t,e,r){r(null,t)}});var _8=y((vr,Aw)=>{var Mo=require("stream");process.env.READABLE_STREAM==="disable"&&Mo?(Aw.exports=Mo,vr=Aw.exports=Mo.Readable,vr.Readable=Mo.Readable,vr.Writable=Mo.Writable,vr.Duplex=Mo.Duplex,vr.Transform=Mo.Transform,vr.PassThrough=Mo.PassThrough,vr.Stream=Mo):(vr=Aw.exports=lP(),vr.Stream=Mo||vr,vr.Readable=vr,vr.Writable=aP(),vr.Duplex=bc(),vr.Transform=vP(),vr.PassThrough=w8())});var wP=y((bOe,A8)=>{A8.exports=Vde;var Wde=Object.prototype.hasOwnProperty;function Vde(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Wde.call(r,n)&&(t[n]=r[n])}return t}});var D8=y((vOe,Iw)=>{var I8=_8().Transform,S8=require("util").inherits,E8=wP();function Zp(t){I8.call(this,t),this._destroyed=!1}S8(Zp,I8);Zp.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}};function Gde(t,e,r){r(null,t)}function _P(t){return function(e,r,n){return typeof e=="function"&&(n=r,r=e,e={}),typeof r!="function"&&(r=Gde),typeof n!="function"&&(n=null),t(e,r,n)}}Iw.exports=_P(function(t,e,r){var n=new Zp(t);return n._transform=e,r&&(n._flush=r),n});Iw.exports.ctor=_P(function(t,e,r){function n(i){if(!(this instanceof n))return new n(i);this.options=E8(t,i),Zp.call(this,this.options)}return S8(n,Zp),n.prototype._transform=e,r&&(n.prototype._flush=r),n});Iw.exports.obj=_P(function(t,e,r){var n=new Zp(E8({objectMode:!0,highWaterMark:16},t));return n._transform=e,r&&(n._flush=r),n})});var x8=y((wOe,Jm)=>{"use strict";Jm.exports=P8;Jm.exports.ctor=AP;Jm.exports.objCtor=zde;Jm.exports.obj=Xde;var Kde=D8(),C8=wP();function AP(t,e){typeof t=="function"&&(e=t,t={});var r=Kde.ctor(t,function(n,i,o){this.options.wantStrings&&(n=n.toString());try{return e.call(this,n,this._index++)&&this.push(n),o()}catch(s){return o(s)}});return r.prototype._index=0,r}function zde(t,e){return typeof t=="function"&&(e=t,t={}),t=C8({objectMode:!0,highWaterMark:16},t),AP(t,e)}function P8(t,e){return AP(t,e)()}function Xde(t,e){return typeof t=="function"&&(e=t,t={}),t=C8({objectMode:!0,highWaterMark:16},t),P8(t,e)}});var T8=y((_Oe,L8)=>{L8.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=e.space||"";typeof r=="number"&&(r=Array(r+1).join(" "));var n=typeof e.cycles=="boolean"?e.cycles:!1,i=e.replacer||function(a,u){return u},o=e.cmp&&function(a){return function(u){return function(c,l){var p={key:c,value:u[c]},f={key:l,value:u[l]};return a(p,f)}}}(e.cmp),s=[];return function a(u,c,l,p){var f=r?`
`+new Array(p+1).join(r):"",m=r?": ":":";if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l=i.call(u,c,l),l!==void 0){if(typeof l!="object"||l===null)return JSON.stringify(l);if(Jde(l)){for(var h=[],H=0;H<l.length;H++){var b=a(l,H,l[H],p+1)||JSON.stringify(null);h.push(f+r+b)}return"["+h.join(",")+f+"]"}else{if(s.indexOf(l)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else s.push(l);for(var _=Yde(l).sort(o&&o(l)),h=[],H=0;H<_.length;H++){var c=_[H],$=a(l,c,l[c],p+1);if($){var U=JSON.stringify(c)+m+$;h.push(f+r+U)}}return s.splice(s.indexOf(l),1),"{"+h.join(",")+f+"}"}}}({"":t},"",t,0)};var Jde=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},Yde=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in t)e.call(t,n)&&r.push(n);return r}});var R8=y((AOe,$8)=>{"use strict";var Qde=x8().obj,Zde=T8(),IP;typeof global.Set=="function"?IP=global.Set:IP=function(){this.keys=[],this.has=function(t){return this.keys.indexOf(t)!==-1},this.add=function(t){this.keys.push(t)}};function ehe(t){return function(e){return e[t]}}$8.exports=the;function the(t,e){e=e||new IP;var r=Zde;return typeof t=="string"?r=ehe(t):typeof t=="function"&&(r=t),Qde(function(n){var i=r(n);return e.has(i)?!1:(e.add(i),!0)})}});var O8=y((IOe,k8)=>{var rhe=xp(),nhe=Ev(),SP=require("fs"),Ym=function(){},ihe=/^v?\.0/.test(process.version),Sw=function(t){return typeof t=="function"},ohe=function(t){return!ihe||!SP?!1:(t instanceof(SP.ReadStream||Ym)||t instanceof(SP.WriteStream||Ym))&&Sw(t.close)},she=function(t){return t.setHeader&&Sw(t.abort)},ahe=function(t,e,r,n){n=rhe(n);var i=!1;t.on("close",function(){i=!0}),nhe(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,ohe(t))return t.close(Ym);if(she(t))return t.abort();if(Sw(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},M8=function(t){t()},uhe=function(t,e){return t.pipe(e)},che=function(){var t=Array.prototype.slice.call(arguments),e=Sw(t[t.length-1]||Ym)&&t.pop()||Ym;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return ahe(i,s,a,function(u){r||(r=u),u&&n.forEach(M8),!s&&(n.forEach(M8),e(r))})});return t.reduce(uhe)};k8.exports=che});var EP=y((SOe,F8)=>{F8.exports=require("stream")});var j8=y((EOe,U8)=>{"use strict";function B8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(r),!0).forEach(function(n){phe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function phe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dhe(t,e,r){return e&&N8(t.prototype,e),r&&N8(t,r),t}var hhe=require("buffer"),Ew=hhe.Buffer,mhe=require("util"),DP=mhe.inspect,ghe=DP&&DP.custom||"inspect";function Hhe(t,e,r){Ew.prototype.copy.call(t,e,r)}U8.exports=function(){function t(){fhe(this,t),this.head=null,this.tail=null,this.length=0}return dhe(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Ew.alloc(0);for(var n=Ew.allocUnsafe(r>>>0),i=this.head,o=0;i;)Hhe(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Ew.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:ghe,value:function(r,n){return DP(this,lhe({},n,{depth:0,customInspect:!1}))}}]),t}()});var PP=y((DOe,W8)=>{"use strict";function yhe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(CP,this,t)):process.nextTick(CP,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(Dw,r):(r._writableState.errorEmitted=!0,process.nextTick(q8,r,o)):process.nextTick(q8,r,o):e?(process.nextTick(Dw,r),e(o)):process.nextTick(Dw,r)}),this)}function q8(t,e){CP(t,e),Dw(t)}function Dw(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function bhe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function CP(t,e){t.emit("error",e)}function vhe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}W8.exports={destroy:yhe,undestroy:bhe,errorOrDestroy:vhe}});var Ba=y((COe,K8)=>{"use strict";var G8={};function si(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}class i extends r{constructor(s,a,u){super(n(s,a,u))}}i.prototype.name=r.name,i.prototype.code=t,G8[t]=i}function V8(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function whe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function _he(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Ahe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}si("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);si("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&whe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(_he(t," argument"))i=`The ${t} ${n} ${V8(e,"type")}`;else{let o=Ahe(t,".")?"property":"argument";i=`The "${t}" ${o} ${n} ${V8(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);si("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");si("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});si("ERR_STREAM_PREMATURE_CLOSE","Premature close");si("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});si("ERR_MULTIPLE_CALLBACK","Callback called multiple times");si("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");si("ERR_STREAM_WRITE_AFTER_END","write after end");si("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);si("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);si("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");K8.exports.codes=G8});var xP=y((POe,z8)=>{"use strict";var Ihe=Ba().codes.ERR_INVALID_OPT_VALUE;function She(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Ehe(t,e,r,n){var i=She(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new Ihe(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}z8.exports={getHighWaterMark:Ehe}});var $P=y((xOe,eV)=>{"use strict";eV.exports=xt;function J8(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Zhe(e,t)}}var ef;xt.WritableState=Zm;var Dhe={deprecate:cw()},Y8=EP(),Pw=require("buffer").Buffer,Che=global.Uint8Array||function(){};function Phe(t){return Pw.from(t)}function xhe(t){return Pw.isBuffer(t)||t instanceof Che}var TP=PP(),Lhe=xP(),The=Lhe.getHighWaterMark,Na=Ba().codes,$he=Na.ERR_INVALID_ARG_TYPE,Rhe=Na.ERR_METHOD_NOT_IMPLEMENTED,Mhe=Na.ERR_MULTIPLE_CALLBACK,khe=Na.ERR_STREAM_CANNOT_PIPE,Ohe=Na.ERR_STREAM_DESTROYED,Fhe=Na.ERR_STREAM_NULL_VALUES,Bhe=Na.ERR_STREAM_WRITE_AFTER_END,Nhe=Na.ERR_UNKNOWN_ENCODING,tf=TP.errorOrDestroy;Zt()(xt,Y8);function Uhe(){}function Zm(t,e,r){ef=ef||vc(),t=t||{},typeof r!="boolean"&&(r=e instanceof ef),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=The(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){zhe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new J8(this)}Zm.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Zm.prototype,"buffer",{get:Dhe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Cw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Cw=Function.prototype[Symbol.hasInstance],Object.defineProperty(xt,Symbol.hasInstance,{value:function(e){return Cw.call(this,e)?!0:this!==xt?!1:e&&e._writableState instanceof Zm}})):Cw=function(e){return e instanceof this};function xt(t){ef=ef||vc();var e=this instanceof ef;if(!e&&!Cw.call(xt,this))return new xt(t);this._writableState=new Zm(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Y8.call(this)}xt.prototype.pipe=function(){tf(this,new khe)};function jhe(t,e){var r=new Bhe;tf(t,r),process.nextTick(e,r)}function qhe(t,e,r,n){var i;return r===null?i=new Fhe:typeof r!="string"&&!e.objectMode&&(i=new $he("chunk",["string","Buffer"],r)),i?(tf(t,i),process.nextTick(n,i),!1):!0}xt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&xhe(t);return o&&!Pw.isBuffer(t)&&(t=Phe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Uhe),n.ending?jhe(this,r):(o||qhe(this,n,t,r))&&(n.pendingcb++,i=Vhe(this,n,o,t,e,r)),i};xt.prototype.cork=function(){this._writableState.corked++};xt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Q8(this,t))};xt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Nhe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(xt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Whe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Pw.from(e,r)),e}Object.defineProperty(xt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Vhe(t,e,r,n,i,o){if(!r){var s=Whe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else LP(t,e,!1,a,n,i,o);return u}function LP(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ohe("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Ghe(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Qm,t,e),t._writableState.errorEmitted=!0,tf(t,n)):(i(n),t._writableState.errorEmitted=!0,tf(t,n),Qm(t,e))}function Khe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function zhe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Mhe;if(Khe(r),e)Ghe(t,r,n,e,i);else{var o=Z8(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Q8(t,r),n?process.nextTick(X8,t,r,o,i):X8(t,r,o,i)}}function X8(t,e,r,n){r||Xhe(t,e),e.pendingcb--,n(),Qm(t,e)}function Xhe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Q8(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,LP(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new J8(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,p=e.objectMode?1:u.length;if(LP(t,e,!1,p,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}xt.prototype._write=function(t,e,r){r(new Rhe("_write()"))};xt.prototype._writev=null;xt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Qhe(this,n,r),this};Object.defineProperty(xt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z8(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Jhe(t,e){t._final(function(r){e.pendingcb--,r&&tf(t,r),e.prefinished=!0,t.emit("prefinish"),Qm(t,e)})}function Yhe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Jhe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Qm(t,e){var r=Z8(e);if(r&&(Yhe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Qhe(t,e,r){e.ending=!0,Qm(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Zhe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(xt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});xt.prototype.destroy=TP.destroy;xt.prototype._undestroy=TP.undestroy;xt.prototype._destroy=function(t,e){e(t)}});var vc=y((LOe,rV)=>{"use strict";var eme=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};rV.exports=ko;var tV=kP(),MP=$P();Zt()(ko,tV);for(RP=eme(MP.prototype),xw=0;xw<RP.length;xw++)Lw=RP[xw],ko.prototype[Lw]||(ko.prototype[Lw]=MP.prototype[Lw]);var RP,Lw,xw;function ko(t){if(!(this instanceof ko))return new ko(t);tV.call(this,t),MP.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",tme)))}Object.defineProperty(ko.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ko.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ko.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function tme(){this._writableState.ended||process.nextTick(rme,this)}function rme(t){t.end()}Object.defineProperty(ko.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var oV=y((OP,iV)=>{var Tw=require("buffer"),Oo=Tw.Buffer;function nV(t,e){for(var r in t)e[r]=t[r]}Oo.from&&Oo.alloc&&Oo.allocUnsafe&&Oo.allocUnsafeSlow?iV.exports=Tw:(nV(Tw,OP),OP.Buffer=wc);function wc(t,e,r){return Oo(t,e,r)}wc.prototype=Object.create(Oo.prototype);nV(Oo,wc);wc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Oo(t,e,r)};wc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Oo(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};wc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Oo(t)};wc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Tw.SlowBuffer(t)}});var NP=y(aV=>{"use strict";var BP=oV().Buffer,sV=BP.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function nme(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function ime(t){var e=nme(t);if(typeof e!="string"&&(BP.isEncoding===sV||!sV(t)))throw new Error("Unknown encoding: "+t);return e||t}aV.StringDecoder=eg;function eg(t){this.encoding=ime(t);var e;switch(this.encoding){case"utf16le":this.text=lme,this.end=pme,e=4;break;case"utf8":this.fillLast=ame,e=4;break;case"base64":this.text=fme,this.end=dme,e=3;break;default:this.write=hme,this.end=mme;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=BP.allocUnsafe(e)}eg.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};eg.prototype.end=cme;eg.prototype.text=ume;eg.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function FP(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function ome(t,e,r){var n=e.length-1;if(n<r)return 0;var i=FP(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=FP(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=FP(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function sme(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function ame(t){var e=this.lastTotal-this.lastNeed,r=sme(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ume(t,e){var r=ome(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function cme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function lme(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function pme(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function fme(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function dme(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function hme(t){return t.toString(this.encoding)}function mme(t){return t&&t.length?this.write(t):""}});var $w=y(($Oe,lV)=>{"use strict";var uV=Ba().codes.ERR_STREAM_PREMATURE_CLOSE;function gme(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Hme(){}function yme(t){return t.setHeader&&typeof t.abort=="function"}function cV(t,e,r){if(typeof e=="function")return cV(t,null,e);e||(e={}),r=gme(r||Hme);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},p=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new uV),r.call(t,h);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(h=new uV),r.call(t,h)},f=function(){t.req.on("finish",a)};return yme(t)?(t.on("complete",a),t.on("abort",p),t.req?f():t.on("request",f)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",p),function(){t.removeListener("complete",a),t.removeListener("abort",p),t.removeListener("request",f),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",p)}}lV.exports=cV});var fV=y((ROe,pV)=>{"use strict";var Rw;function Ua(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bme=$w(),ja=Symbol("lastResolve"),_c=Symbol("lastReject"),tg=Symbol("error"),Mw=Symbol("ended"),Ac=Symbol("lastPromise"),UP=Symbol("handlePromise"),Ic=Symbol("stream");function qa(t,e){return{value:t,done:e}}function vme(t){var e=t[ja];if(e!==null){var r=t[Ic].read();r!==null&&(t[Ac]=null,t[ja]=null,t[_c]=null,e(qa(r,!1)))}}function wme(t){process.nextTick(vme,t)}function _me(t,e){return function(r,n){t.then(function(){if(e[Mw]){r(qa(void 0,!0));return}e[UP](r,n)},n)}}var Ame=Object.getPrototypeOf(function(){}),Ime=Object.setPrototypeOf((Rw={get stream(){return this[Ic]},next:function(){var e=this,r=this[tg];if(r!==null)return Promise.reject(r);if(this[Mw])return Promise.resolve(qa(void 0,!0));if(this[Ic].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[tg]?a(e[tg]):s(qa(void 0,!0))})});var n=this[Ac],i;if(n)i=new Promise(_me(n,this));else{var o=this[Ic].read();if(o!==null)return Promise.resolve(qa(o,!1));i=new Promise(this[UP])}return this[Ac]=i,i}},Ua(Rw,Symbol.asyncIterator,function(){return this}),Ua(Rw,"return",function(){var e=this;return new Promise(function(r,n){e[Ic].destroy(null,function(i){if(i){n(i);return}r(qa(void 0,!0))})})}),Rw),Ame),Sme=function(e){var r,n=Object.create(Ime,(r={},Ua(r,Ic,{value:e,writable:!0}),Ua(r,ja,{value:null,writable:!0}),Ua(r,_c,{value:null,writable:!0}),Ua(r,tg,{value:null,writable:!0}),Ua(r,Mw,{value:e._readableState.endEmitted,writable:!0}),Ua(r,UP,{value:function(o,s){var a=n[Ic].read();a?(n[Ac]=null,n[ja]=null,n[_c]=null,o(qa(a,!1))):(n[ja]=o,n[_c]=s)},writable:!0}),r));return n[Ac]=null,bme(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[_c];o!==null&&(n[Ac]=null,n[ja]=null,n[_c]=null,o(i)),n[tg]=i;return}var s=n[ja];s!==null&&(n[Ac]=null,n[ja]=null,n[_c]=null,s(qa(void 0,!0))),n[Mw]=!0}),e.on("readable",wme.bind(null,n)),n};pV.exports=Sme});var gV=y((MOe,mV)=>{"use strict";function dV(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Eme(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(u){dV(o,n,i,s,a,"next",u)}function a(u){dV(o,n,i,s,a,"throw",u)}s(void 0)})}}function hV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dme(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(r),!0).forEach(function(n){Cme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cme(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Pme=Ba().codes.ERR_INVALID_ARG_TYPE;function xme(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Pme("iterable",["Iterable"],e);var i=new t(Dme({objectMode:!0},r)),o=!1;i._read=function(){o||(o=!0,s())};function s(){return a.apply(this,arguments)}function a(){return a=Eme(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?s():o=!1}catch(p){i.destroy(p)}}),a.apply(this,arguments)}return i}mV.exports=xme});var kP=y((OOe,EV)=>{"use strict";EV.exports=Re;var rf;Re.ReadableState=vV;var kOe=require("events").EventEmitter,bV=function(e,r){return e.listeners(r).length},ng=EP(),kw=require("buffer").Buffer,Lme=global.Uint8Array||function(){};function Tme(t){return kw.from(t)}function $me(t){return kw.isBuffer(t)||t instanceof Lme}var jP=require("util"),Ce;jP&&jP.debuglog?Ce=jP.debuglog("stream"):Ce=function(){};var Rme=j8(),XP=PP(),Mme=xP(),kme=Mme.getHighWaterMark,Ow=Ba().codes,Ome=Ow.ERR_INVALID_ARG_TYPE,Fme=Ow.ERR_STREAM_PUSH_AFTER_EOF,Bme=Ow.ERR_METHOD_NOT_IMPLEMENTED,Nme=Ow.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,nf,qP,WP;Zt()(Re,ng);var rg=XP.errorOrDestroy,VP=["error","close","destroy","pause","resume"];function Ume(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function vV(t,e,r){rf=rf||vc(),t=t||{},typeof r!="boolean"&&(r=e instanceof rf),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=kme(this,t,"readableHighWaterMark",r),this.buffer=new Rme,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(nf||(nf=NP().StringDecoder),this.decoder=new nf(t.encoding),this.encoding=t.encoding)}function Re(t){if(rf=rf||vc(),!(this instanceof Re))return new Re(t);var e=this instanceof rf;this._readableState=new vV(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ng.call(this)}Object.defineProperty(Re.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Re.prototype.destroy=XP.destroy;Re.prototype._undestroy=XP.undestroy;Re.prototype._destroy=function(t,e){e(t)};Re.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=kw.from(t,e),e=""),n=!0),wV(this,t,e,!1,n)};Re.prototype.unshift=function(t){return wV(this,t,null,!0,!1)};function wV(t,e,r,n,i){Ce("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Wme(t,o);else{var s;if(i||(s=jme(o,e)),s)rg(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==kw.prototype&&(e=Tme(e)),n)o.endEmitted?rg(t,new Nme):GP(t,o,e,!0);else if(o.ended)rg(t,new Fme);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?GP(t,o,e,!1):zP(t,o)):GP(t,o,e,!1)}else n||(o.reading=!1,zP(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function GP(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Fw(t)),zP(t,e)}function jme(t,e){var r;return!$me(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Ome("chunk",["string","Buffer","Uint8Array"],e)),r}Re.prototype.isPaused=function(){return this._readableState.flowing===!1};Re.prototype.setEncoding=function(t){nf||(nf=NP().StringDecoder);var e=new nf(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var HV=1073741824;function qme(t){return t>=HV?t=HV:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function yV(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=qme(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Re.prototype.read=function(t){Ce("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ce("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?KP(this):Fw(this),null;if(t=yV(t,e),t===0&&e.ended)return e.length===0&&KP(this),null;var n=e.needReadable;Ce("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ce("length less than watermark",n)),e.ended||e.reading?(n=!1,Ce("reading or ended",n)):n&&(Ce("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=yV(r,e)));var i;return t>0?i=IV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&KP(this)),i!==null&&this.emit("data",i),i};function Wme(t,e){if(Ce("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Fw(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,_V(t)))}}function Fw(t){var e=t._readableState;Ce("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ce("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(_V,t))}function _V(t){var e=t._readableState;Ce("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,JP(t)}function zP(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Vme,t,e))}function Vme(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Ce("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Re.prototype._read=function(t){rg(this,new Bme("_read()"))};Re.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ce("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:H;n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(b,_){Ce("onunpipe"),b===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,l())}function a(){Ce("onend"),t.end()}var u=Gme(r);t.on("drain",u);var c=!1;function l(){Ce("cleanup"),t.removeListener("close",m),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",p),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",p);function p(b){Ce("ondata");var _=t.write(b);Ce("dest.write",_),_===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&SV(n.pipes,t)!==-1)&&!c&&(Ce("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(b){Ce("onerror",b),H(),t.removeListener("error",f),bV(t,"error")===0&&rg(t,b)}Ume(t,"error",f);function m(){t.removeListener("finish",h),H()}t.once("close",m);function h(){Ce("onfinish"),t.removeListener("close",m),H()}t.once("finish",h);function H(){Ce("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ce("pipe resume"),r.resume()),t};function Gme(t){return function(){var r=t._readableState;Ce("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&bV(t,"data")&&(r.flowing=!0,JP(t))}}Re.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=SV(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Re.prototype.on=function(t,e){var r=ng.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ce("on readable",n.length,n.reading),n.length?Fw(this):n.reading||process.nextTick(Kme,this)),r};Re.prototype.addListener=Re.prototype.on;Re.prototype.removeListener=function(t,e){var r=ng.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(AV,this),r};Re.prototype.removeAllListeners=function(t){var e=ng.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(AV,this),e};function AV(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Kme(t){Ce("readable nexttick read 0"),t.read(0)}Re.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ce("resume"),t.flowing=!t.readableListening,zme(this,t)),t.paused=!1,this};function zme(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Xme,t,e))}function Xme(t,e){Ce("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),JP(t),e.flowing&&!e.reading&&t.read(0)}Re.prototype.pause=function(){return Ce("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ce("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function JP(t){var e=t._readableState;for(Ce("flow",e.flowing);e.flowing&&t.read()!==null;);}Re.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ce("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Ce("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<VP.length;o++)t.on(VP[o],this.emit.bind(this,VP[o]));return this._read=function(s){Ce("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Re.prototype[Symbol.asyncIterator]=function(){return qP===void 0&&(qP=fV()),qP(this)});Object.defineProperty(Re.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Re.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Re.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Re._fromList=IV;Object.defineProperty(Re.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function IV(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function KP(t){var e=t._readableState;Ce("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Jme,e,t))}function Jme(t,e){if(Ce("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Re.from=function(t,e){return WP===void 0&&(WP=gV()),WP(Re,t,e)});function SV(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var YP=y((FOe,CV)=>{"use strict";CV.exports=Ss;var Bw=Ba().codes,Yme=Bw.ERR_METHOD_NOT_IMPLEMENTED,Qme=Bw.ERR_MULTIPLE_CALLBACK,Zme=Bw.ERR_TRANSFORM_ALREADY_TRANSFORMING,ege=Bw.ERR_TRANSFORM_WITH_LENGTH_0,Nw=vc();Zt()(Ss,Nw);function tge(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Qme);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ss(t){if(!(this instanceof Ss))return new Ss(t);Nw.call(this,t),this._transformState={afterTransform:tge.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",rge)}function rge(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){DV(t,e,r)}):DV(this,null,null)}Ss.prototype.push=function(t,e){return this._transformState.needTransform=!1,Nw.prototype.push.call(this,t,e)};Ss.prototype._transform=function(t,e,r){r(new Yme("_transform()"))};Ss.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ss.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ss.prototype._destroy=function(t,e){Nw.prototype._destroy.call(this,t,function(r){e(r)})};function DV(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new ege;if(t._transformState.transforming)throw new Zme;return t.push(null)}});var LV=y((BOe,xV)=>{"use strict";xV.exports=ig;var PV=YP();Zt()(ig,PV);function ig(t){if(!(this instanceof ig))return new ig(t);PV.call(this,t)}ig.prototype._transform=function(t,e,r){r(null,t)}});var kV=y((NOe,MV)=>{"use strict";var QP;function nge(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var RV=Ba().codes,ige=RV.ERR_MISSING_ARGS,oge=RV.ERR_STREAM_DESTROYED;function TV(t){if(t)throw t}function sge(t){return t.setHeader&&typeof t.abort=="function"}function age(t,e,r,n){n=nge(n);var i=!1;t.on("close",function(){i=!0}),QP===void 0&&(QP=$w()),QP(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,sge(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new oge("pipe"))}}}function $V(t){t()}function uge(t,e){return t.pipe(e)}function cge(t){return!t.length||typeof t[t.length-1]!="function"?TV:t.pop()}function lge(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=cge(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ige("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return age(s,u,c,function(l){i||(i=l),l&&o.forEach($V),!u&&(o.forEach($V),n(i))})});return e.reduce(uge)}MV.exports=lge});var ZP=y((ai,sg)=>{var og=require("stream");process.env.READABLE_STREAM==="disable"&&og?(sg.exports=og.Readable,Object.assign(sg.exports,og),sg.exports.Stream=og):(ai=sg.exports=kP(),ai.Stream=og||ai,ai.Readable=ai,ai.Writable=$P(),ai.Duplex=vc(),ai.Transform=YP(),ai.PassThrough=LV(),ai.finished=$w(),ai.pipeline=kV())});var FV=y((UOe,OV)=>{OV.exports=pge;function pge(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(fge(e)):null}function fge(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}});var qV=y((jOe,jV)=>{var Uw=ZP(),BV=Ev(),dge=Zt(),hge=FV(),NV=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),ex=function(t,e){t._corked?t.once("uncork",e):e()},mge=function(t,e){t._autoDestroy&&t.destroy(e)},UV=function(t,e){return function(r){r?mge(t,r.message==="premature close"?null:r):e&&!t._ended&&t.end()}},gge=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},Hge=function(){},yge=function(t){return new Uw.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},wr=function(t,e,r){if(!(this instanceof wr))return new wr(t,e,r);Uw.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||r.autoDestroy!==!1,this._forwardDestroy=!r||r.destroy!==!1,this._forwardEnd=!r||r.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};dge(wr,Uw.Duplex);wr.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new wr(t,e,r)};wr.prototype.cork=function(){++this._corked===1&&this.emit("cork")};wr.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};wr.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,r=BV(t,{writable:!0,readable:!1},UV(this,this._forwardEnd)),n=function(){var o=e._ondrain;e._ondrain=null,o&&o()},i=function(){e._writable.removeListener("drain",n),r()};this._unwrite&&process.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=i,this.uncork()};wr.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,r=BV(t,{writable:!1,readable:!0},UV(this)),n=function(){e._forward()},i=function(){e.push(null)},o=function(){e._readable2.removeListener("readable",n),e._readable2.removeListener("end",i),r()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:yge(t),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=o,this._forward()};wr.prototype._read=function(){this._drained=!0,this._forward()};wr.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=hge(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};wr.prototype.destroy=function(t,e){if(e||(e=Hge),this.destroyed)return e(null);this.destroyed=!0;var r=this;process.nextTick(function(){r._destroy(t),e(null)})};wr.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};wr.prototype._write=function(t,e,r){if(!this.destroyed){if(this._corked)return ex(this,this._write.bind(this,t,e,r));if(t===NV)return this._finish(r);if(!this._writable)return r();this._writable.write(t)===!1?this._ondrain=r:this.destroyed||r()}};wr.prototype._finish=function(t){var e=this;this.emit("preend"),ex(this,function(){gge(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),ex(e,t)})})};wr.prototype.end=function(t,e,r){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(NV),Uw.Writable.prototype.end.call(this,r))};jV.exports=wr});var GV=y((qOe,jw)=>{var bge=O8(),vge=Zt(),WV=qV(),VV=function(t){return t.length?Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t):[]},tx=function(t){var e=function(){var r=VV(arguments);if(!(this instanceof e))return new e(r);WV.call(this,null,null,t),r.length&&this.setPipeline(r)};return vge(e,WV),e.prototype.setPipeline=function(){var r=VV(arguments),n=this,i=!1,o=r[0],s=r[r.length-1];s=s.readable?s:null,o=o.writable?o:null;var a=function(){r[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",function(){i||n.cork()}),bge(r,function(u){if(n.removeListener("close",a),u)return n.destroy(u.message==="premature close"?null:u);i=!0,n._autoDestroy===!1&&(n._autoDestroy=!0),n.uncork()}),this.destroyed)return a();this.setWritable(o),this.setReadable(s)},e};jw.exports=tx({autoDestroy:!1,destroy:!1});jw.exports.obj=tx({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16});jw.exports.ctor=tx});var rx=y((WOe,KV)=>{"use strict";KV.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");var e={negated:!1,pattern:t,original:t};return t.charAt(0)==="!"&&t.charAt(1)!=="("&&(e.negated=!0,e.pattern=t.slice(1)),e}});var nx=y((VOe,t4)=>{"use strict";var qw=Object.prototype.hasOwnProperty,e4=Object.prototype.toString,zV=Object.defineProperty,XV=Object.getOwnPropertyDescriptor,JV=function(e){return typeof Array.isArray=="function"?Array.isArray(e):e4.call(e)==="[object Array]"},YV=function(e){if(!e||e4.call(e)!=="[object Object]")return!1;var r=qw.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&qw.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||qw.call(e,i)},QV=function(e,r){zV&&r.name==="__proto__"?zV(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},ZV=function(e,r){if(r==="__proto__")if(qw.call(e,r)){if(XV)return XV(e,r).value}else return;return e[r]};t4.exports=function t(){var e,r,n,i,o,s,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=ZV(a,r),i=ZV(e,r),a!==i&&(l&&i&&(YV(i)||(o=JV(i)))?(o?(o=!1,s=n&&JV(n)?n:[]):s=n&&YV(n)?n:{},QV(a,{name:r,newValue:t(l,s,i)})):typeof i<"u"&&QV(a,{name:r,newValue:i}));return a}});var r4=y(ix=>{var Sc=require("path"),Va=process.platform==="win32",Wa=require("fs"),wge=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function _ge(){var t;if(wge){var e=new Error;t=r}else t=n;return t;function r(i){i&&(e.message=i.message,i=e,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var o="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(o):console.error(o)}}}}function Age(t){return typeof t=="function"?t:_ge()}var GOe=Sc.normalize;Va?Es=/(.*?)(?:[\/\\]+|$)/g:Es=/(.*?)(?:[\/]+|$)/g;var Es;Va?ag=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ag=/^[\/]*/;var ag;ix.realpathSync=function(e,r){if(e=Sc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];var n=e,i={},o={},s,a,u,c;l();function l(){var b=ag.exec(e);s=b[0].length,a=b[0],u=b[0],c="",Va&&!o[u]&&(Wa.lstatSync(u),o[u]=!0)}for(;s<e.length;){Es.lastIndex=s;var p=Es.exec(e);if(c=a,a+=p[0],u=c+p[1],s=Es.lastIndex,!(o[u]||r&&r[u]===u)){var f;if(r&&Object.prototype.hasOwnProperty.call(r,u))f=r[u];else{var m=Wa.lstatSync(u);if(!m.isSymbolicLink()){o[u]=!0,r&&(r[u]=u);continue}var h=null;if(!Va){var H=m.dev.toString(32)+":"+m.ino.toString(32);i.hasOwnProperty(H)&&(h=i[H])}h===null&&(Wa.statSync(u),h=Wa.readlinkSync(u)),f=Sc.resolve(c,h),r&&(r[u]=f),Va||(i[H]=h)}e=Sc.resolve(f,e.slice(s)),l()}}return r&&(r[n]=e),e};ix.realpath=function(e,r,n){if(typeof n!="function"&&(n=Age(r),r=null),e=Sc.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return process.nextTick(n.bind(null,null,r[e]));var i=e,o={},s={},a,u,c,l;p();function p(){var b=ag.exec(e);a=b[0].length,u=b[0],c=b[0],l="",Va&&!s[c]?Wa.lstat(c,function(_){if(_)return n(_);s[c]=!0,f()}):process.nextTick(f)}function f(){if(a>=e.length)return r&&(r[i]=e),n(null,e);Es.lastIndex=a;var b=Es.exec(e);return l=u,u+=b[0],c=l+b[1],a=Es.lastIndex,s[c]||r&&r[c]===c?process.nextTick(f):r&&Object.prototype.hasOwnProperty.call(r,c)?H(r[c]):Wa.lstat(c,m)}function m(b,_){if(b)return n(b);if(!_.isSymbolicLink())return s[c]=!0,r&&(r[c]=c),process.nextTick(f);if(!Va){var $=_.dev.toString(32)+":"+_.ino.toString(32);if(o.hasOwnProperty($))return h(null,o[$],c)}Wa.stat(c,function(U){if(U)return n(U);Wa.readlink(c,function(D,P){Va||(o[$]=P),h(D,P)})})}function h(b,_,$){if(b)return n(b);var U=Sc.resolve(l,_);r&&(r[$]=U),H(U)}function H(b){e=Sc.resolve(b,e.slice(a)),p()}}});var ux=y((zOe,s4)=>{s4.exports=Ga;Ga.realpath=Ga;Ga.sync=ax;Ga.realpathSync=ax;Ga.monkeypatch=Sge;Ga.unmonkeypatch=Ege;var of=require("fs"),ox=of.realpath,sx=of.realpathSync,Ige=process.version,n4=/^v[0-5]\./.test(Ige),i4=r4();function o4(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function Ga(t,e,r){if(n4)return ox(t,e,r);typeof e=="function"&&(r=e,e=null),ox(t,e,function(n,i){o4(n)?i4.realpath(t,e,r):r(n,i)})}function ax(t,e){if(n4)return sx(t,e);try{return sx(t,e)}catch(r){if(o4(r))return i4.realpathSync(t,e);throw r}}function Sge(){of.realpath=Ga,of.realpathSync=ax}function Ege(){of.realpath=ox,of.realpathSync=sx}});var u4=y((XOe,a4)=>{a4.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);Dge(i)?r.push.apply(r,i):r.push(i)}return r};var Dge=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var d4=y((JOe,f4)=>{"use strict";f4.exports=l4;function l4(t,e,r){t instanceof RegExp&&(t=c4(t,r)),e instanceof RegExp&&(e=c4(e,r));var n=p4(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function c4(t,e){var r=e.match(t);return r?r[0]:null}l4.range=p4;function p4(t,e,r){var n,i,o,s,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(n=[],o=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var w4=y((YOe,v4)=>{var Cge=u4(),h4=d4();v4.exports=Lge;var m4="\0SLASH"+Math.random()+"\0",g4="\0OPEN"+Math.random()+"\0",lx="\0CLOSE"+Math.random()+"\0",H4="\0COMMA"+Math.random()+"\0",y4="\0PERIOD"+Math.random()+"\0";function cx(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Pge(t){return t.split("\\\\").join(m4).split("\\{").join(g4).split("\\}").join(lx).split("\\,").join(H4).split("\\.").join(y4)}function xge(t){return t.split(m4).join("\\").split(g4).join("{").split(lx).join("}").split(H4).join(",").split(y4).join(".")}function b4(t){if(!t)return[""];var e=[],r=h4("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=b4(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function Lge(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),sf(Pge(t),!0).map(xge)):[]}function Tge(t){return"{"+t+"}"}function $ge(t){return/^-?0\d/.test(t)}function Rge(t,e){return t<=e}function Mge(t,e){return t>=e}function sf(t,e){var r=[],n=h4("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+lx+n.post,sf(t)):[t];var u;if(s)u=n.body.split(/\.\./);else if(u=b4(n.body),u.length===1&&(u=sf(u[0],!1).map(Tge),u.length===1)){var l=n.post.length?sf(n.post,!1):[""];return l.map(function(S){return n.pre+u[0]+S})}var c=n.pre,l=n.post.length?sf(n.post,!1):[""],p;if(s){var f=cx(u[0]),m=cx(u[1]),h=Math.max(u[0].length,u[1].length),H=u.length==3?Math.abs(cx(u[2])):1,b=Rge,_=m<f;_&&(H*=-1,b=Mge);var $=u.some($ge);p=[];for(var U=f;b(U,m);U+=H){var D;if(o)D=String.fromCharCode(U),D==="\\"&&(D="");else if(D=String(U),$){var P=h-D.length;if(P>0){var j=new Array(P+1).join("0");U<0?D="-"+j+D.slice(1):D=j+D}}p.push(D)}}else p=Cge(u,function(F){return sf(F,!1)});for(var N=0;N<p.length;N++)for(var M=0;M<l.length;M++){var L=c+p[N]+l[M];(!e||s||L)&&r.push(L)}return r}});var Gw=y((QOe,E4)=>{E4.exports=Mn;Mn.Minimatch=_r;var ug=function(){try{return require("path")}catch{}}()||{sep:"/"};Mn.sep=ug.sep;var dx=Mn.GLOBSTAR=_r.GLOBSTAR={},kge=w4(),_4={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},px="[^/]",fx=px+"*?",Oge="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Fge="(?:(?!(?:\\/|^)\\.).)*?",A4=Bge("().*{}+?[]^$\\!");function Bge(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var I4=/\/+/;Mn.filter=Nge;function Nge(t,e){return e=e||{},function(r,n,i){return Mn(r,t,e)}}function Ka(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}Mn.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return Mn;var e=Mn,r=function(i,o,s){return e(i,o,Ka(t,s))};return r.Minimatch=function(i,o){return new e.Minimatch(i,Ka(t,o))},r.Minimatch.defaults=function(i){return e.defaults(Ka(t,i)).Minimatch},r.filter=function(i,o){return e.filter(i,Ka(t,o))},r.defaults=function(i){return e.defaults(Ka(t,i))},r.makeRe=function(i,o){return e.makeRe(i,Ka(t,o))},r.braceExpand=function(i,o){return e.braceExpand(i,Ka(t,o))},r.match=function(n,i,o){return e.match(n,i,Ka(t,o))},r};_r.defaults=function(t){return Mn.defaults(t).Minimatch};function Mn(t,e,r){return Vw(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new _r(e,r).match(t)}function _r(t,e){if(!(this instanceof _r))return new _r(t,e);Vw(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&ug.sep!=="/"&&(t=t.split(ug.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}_r.prototype.debug=function(){};_r.prototype.make=Uge;function Uge(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(I4)}),this.debug(this.pattern,r),r=r.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}_r.prototype.parseNegate=jge;function jge(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,o=t.length;i<o&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}Mn.braceExpand=function(t,e){return S4(t,e)};_r.prototype.braceExpand=S4;function S4(t,e){return e||(this instanceof _r?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Vw(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:kge(t)}var qge=1024*64,Vw=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>qge)throw new TypeError("pattern is too long")};_r.prototype.parse=Wge;var Ww={};function Wge(t,e){Vw(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return dx;if(t==="")return"";var n="",i=!!r.nocase,o=!1,s=[],a=[],u,c=!1,l=-1,p=-1,f=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function h(){if(u){switch(u){case"*":n+=fx,i=!0;break;case"?":n+=px,i=!0;break;default:n+="\\"+u;break}m.debug("clearStateChar %j %j",u,n),u=!1}}for(var H=0,b=t.length,_;H<b&&(_=t.charAt(H));H++){if(this.debug("%s	%s %s %j",t,H,n,_),o&&A4[_]){n+="\\"+_,o=!1;continue}switch(_){case"/":return!1;case"\\":h(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,H,n,_),c){this.debug("  in class"),_==="!"&&H===p+1&&(_="^"),n+=_;continue}m.debug("call clearStateChar %j",u),h(),u=_,r.noext&&h();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:H-1,reStart:n.length,open:_4[u].open,close:_4[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}h(),i=!0;var $=s.pop();n+=$.close,$.type==="!"&&a.push($),$.reEnd=n.length;continue;case"|":if(c||!s.length||o){n+="\\|",o=!1;continue}h(),n+="|";continue;case"[":if(h(),c){n+="\\"+_;continue}c=!0,p=H,l=n.length,n+=_;continue;case"]":if(H===p+1||!c){n+="\\"+_,o=!1;continue}var U=t.substring(p+1,H);try{RegExp("["+U+"]")}catch{var D=this.parse(U,Ww);n=n.substr(0,l)+"\\["+D[0]+"\\]",i=i||D[1],c=!1;continue}i=!0,c=!1,n+=_;continue;default:h(),o?o=!1:A4[_]&&!(_==="^"&&c)&&(n+="\\"),n+=_}}for(c&&(U=t.substr(p+1),D=this.parse(U,Ww),n=n.substr(0,l)+"\\["+D[0],i=i||D[1]),$=s.pop();$;$=s.pop()){var P=n.slice($.reStart+$.open.length);this.debug("setting tail",n,$),P=P.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(X,te,ue){return ue||(ue="\\"),te+te+ue+"|"}),this.debug(`tail=%j
   %s`,P,P,$,n);var j=$.type==="*"?fx:$.type==="?"?px:"\\"+$.type;i=!0,n=n.slice(0,$.reStart)+j+"\\("+P}h(),o&&(n+="\\\\");var N=!1;switch(n.charAt(0)){case"[":case".":case"(":N=!0}for(var M=a.length-1;M>-1;M--){var L=a[M],F=n.slice(0,L.reStart),S=n.slice(L.reStart,L.reEnd-8),k=n.slice(L.reEnd-8,L.reEnd),O=n.slice(L.reEnd);k+=O;var K=F.split("(").length-1,C=O;for(H=0;H<K;H++)C=C.replace(/\)[+*?]?/,"");O=C;var x="";O===""&&e!==Ww&&(x="$");var Z=F+S+O+x+k;n=Z}if(n!==""&&i&&(n="(?=.)"+n),N&&(n=f+n),e===Ww)return[n,i];if(!i)return Gge(t);var re=r.nocase?"i":"";try{var ne=new RegExp("^"+n+"$",re)}catch{return new RegExp("$.")}return ne._glob=t,ne._src=n,ne}Mn.makeRe=function(t,e){return new _r(t,e||{}).makeRe()};_r.prototype.makeRe=Vge;function Vge(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?fx:e.dot?Oge:Fge,n=e.nocase?"i":"",i=t.map(function(o){return o.map(function(s){return s===dx?r:typeof s=="string"?Kge(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}Mn.match=function(t,e,r){r=r||{};var n=new _r(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};_r.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;ug.sep!=="/"&&(e=e.split(ug.sep).join("/")),e=e.split(I4),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o,s;for(s=e.length-1;s>=0&&(o=e[s],!o);s--);for(s=0;s<i.length;s++){var a=i[s],u=e;n.matchBase&&a.length===1&&(u=[o]);var c=this.matchOne(u,a,r);if(c)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};_r.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var u=e[o],c=t[i];if(this.debug(e,u,c),u===!1)return!1;if(u===dx){this.debug("GLOBSTAR",[e,u,c]);var l=i,p=o+1;if(p===a){for(this.debug("** at the end");i<s;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;l<s;){var f=t[l];if(this.debug(`
globstar while`,t,l,e,p,f),this.matchOne(t.slice(l),e.slice(p),r))return this.debug("globstar found match!",l,s,f),!0;if(f==="."||f===".."||!n.dot&&f.charAt(0)==="."){this.debug("dot detected!",t,l,e,p);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,l,e,p),l===s))}var m;if(typeof u=="string"?(m=c===u,this.debug("string match",u,c,m)):(m=c.match(u),this.debug("pattern match",u,c,m)),!m)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&t[i]==="";throw new Error("wtf?")};function Gge(t){return t.replace(/\\(.)/g,"$1")}function Kge(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var zw=y((ZOe,Kw)=>{"use strict";function D4(t){return t.charAt(0)==="/"}function C4(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=e.exec(t),n=r[1]||"",i=Boolean(n&&n.charAt(1)!==":");return Boolean(r[2]||i)}Kw.exports=process.platform==="win32"?C4:D4;Kw.exports.posix=D4;Kw.exports.win32=C4});var mx=y(za=>{za.setopts=Zge;za.ownProp=P4;za.makeAbs=cg;za.finish=eHe;za.mark=tHe;za.isIgnored=L4;za.childrenIgnored=rHe;function P4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var zge=require("fs"),af=require("path"),Xge=Gw(),x4=zw(),hx=Xge.Minimatch;function Jge(t,e){return t.localeCompare(e,"en")}function Yge(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Qge))}function Qge(t){var e=null;if(t.slice(-3)==="/**"){var r=t.replace(/(\/\*\*)+$/,"");e=new hx(r,{dot:!0})}return{matcher:new hx(t,{dot:!0}),gmatcher:e}}function Zge(t,e,r){if(r||(r={}),r.matchBase&&e.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!r.silent,t.pattern=e,t.strict=r.strict!==!1,t.realpath=!!r.realpath,t.realpathCache=r.realpathCache||Object.create(null),t.follow=!!r.follow,t.dot=!!r.dot,t.mark=!!r.mark,t.nodir=!!r.nodir,t.nodir&&(t.mark=!0),t.sync=!!r.sync,t.nounique=!!r.nounique,t.nonull=!!r.nonull,t.nosort=!!r.nosort,t.nocase=!!r.nocase,t.stat=!!r.stat,t.noprocess=!!r.noprocess,t.absolute=!!r.absolute,t.fs=r.fs||zge,t.maxLength=r.maxLength||1/0,t.cache=r.cache||Object.create(null),t.statCache=r.statCache||Object.create(null),t.symlinks=r.symlinks||Object.create(null),Yge(t,r),t.changedCwd=!1;var n=process.cwd();P4(r,"cwd")?(t.cwd=af.resolve(r.cwd),t.changedCwd=t.cwd!==n):t.cwd=n,t.root=r.root||af.resolve(t.cwd,"/"),t.root=af.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=x4(t.cwd)?t.cwd:cg(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,t.minimatch=new hx(e,r),t.options=t.minimatch.options}function eHe(t){for(var e=t.nounique,r=e?[]:Object.create(null),n=0,i=t.matches.length;n<i;n++){var o=t.matches[n];if(!o||Object.keys(o).length===0){if(t.nonull){var s=t.minimatch.globSet[n];e?r.push(s):r[s]=!0}}else{var a=Object.keys(o);e?r.push.apply(r,a):a.forEach(function(u){r[u]=!0})}}if(e||(r=Object.keys(r)),t.nosort||(r=r.sort(Jge)),t.mark){for(var n=0;n<r.length;n++)r[n]=t._mark(r[n]);t.nodir&&(r=r.filter(function(u){var c=!/\/$/.test(u),l=t.cache[u]||t.cache[cg(t,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}t.ignore.length&&(r=r.filter(function(u){return!L4(t,u)})),t.found=r}function tHe(t,e){var r=cg(t,e),n=t.cache[r],i=e;if(n){var o=n==="DIR"||Array.isArray(n),s=e.slice(-1)==="/";if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=cg(t,i);t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r]}}return i}function cg(t,e){var r=e;return e.charAt(0)==="/"?r=af.join(t.root,e):x4(e)||e===""?r=e:t.changedCwd?r=af.resolve(t.cwd,e):r=af.resolve(e),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function L4(t,e){return t.ignore.length?t.ignore.some(function(r){return r.matcher.match(e)||!!(r.gmatcher&&r.gmatcher.match(e))}):!1}function rHe(t,e){return t.ignore.length?t.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(e))}):!1}});var k4=y((iFe,M4)=>{M4.exports=R4;R4.GlobSync=er;var nHe=ux(),T4=Gw(),tFe=T4.Minimatch,rFe=yx().Glob,nFe=require("util"),gx=require("path"),$4=require("assert"),Xw=zw(),Ec=mx(),iHe=Ec.setopts,Hx=Ec.ownProp,oHe=Ec.childrenIgnored,sHe=Ec.isIgnored;function R4(t,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new er(t,e).found}function er(t,e){if(!t)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof er))return new er(t,e);if(iHe(this,t,e),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}er.prototype._finish=function(){if($4(this instanceof er),this.realpath){var t=this;this.matches.forEach(function(e,r){var n=t.matches[r]=Object.create(null);for(var i in e)try{i=t._makeAbs(i);var o=nHe.realpathSync(i,t.realpathCache);n[o]=!0}catch(s){if(s.syscall==="stat")n[t._makeAbs(i)]=!0;else throw s}})}Ec.finish(this)};er.prototype._process=function(t,e,r){$4(this instanceof er);for(var n=0;typeof t[n]=="string";)n++;var i;switch(n){case t.length:this._processSimple(t.join("/"),e);return;case 0:i=null;break;default:i=t.slice(0,n).join("/");break}var o=t.slice(n),s;i===null?s=".":((Xw(i)||Xw(t.join("/")))&&(!i||!Xw(i))&&(i="/"+i),s=i);var a=this._makeAbs(s);if(!oHe(this,s)){var u=o[0]===T4.GLOBSTAR;u?this._processGlobStar(i,s,a,o,e,r):this._processReaddir(i,s,a,o,e,r)}};er.prototype._processReaddir=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,l=this.dot||c.charAt(0)===".",p=[],f=0;f<s.length;f++){var m=s[f];if(m.charAt(0)!=="."||l){var h;u&&!t?h=!m.match(a):h=m.match(a),h&&p.push(m)}}var H=p.length;if(H!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<H;f++){var m=p[f];t&&(t.slice(-1)!=="/"?m=t+"/"+m:m=t+m),m.charAt(0)==="/"&&!this.nomount&&(m=gx.join(this.root,m)),this._emitMatch(i,m)}return}n.shift();for(var f=0;f<H;f++){var m=p[f],b;t?b=[t,m]:b=[m],this._process(b.concat(n),i,o)}}}};er.prototype._emitMatch=function(t,e){if(!sHe(this,e)){var r=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}};er.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,r,n;try{r=this.fs.lstatSync(t)}catch(o){if(o.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[t]=i,!i&&r&&!r.isDirectory()?this.cache[t]="FILE":e=this._readdir(t,!1),e};er.prototype._readdir=function(t,e){var r;if(e&&!Hx(this.symlinks,t))return this._readdirInGlobStar(t);if(Hx(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(i){return this._readdirError(t,i),null}};er.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var n=e[r];t==="/"?n=t+n:n=t+"/"+n,this.cache[n]=!0}return this.cache[t]=e,e};er.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=e.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};er.prototype._processGlobStar=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),u=t?[t]:[],c=u.concat(a);this._process(c,i,!1);var l=s.length,p=this.symlinks[r];if(!(p&&o))for(var f=0;f<l;f++){var m=s[f];if(!(m.charAt(0)==="."&&!this.dot)){var h=u.concat(s[f],a);this._process(h,i,!0);var H=u.concat(s[f],n);this._process(H,i,!0)}}}};er.prototype._processSimple=function(t,e){var r=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!r){if(t&&Xw(t)&&!this.nomount){var n=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=gx.join(this.root,t):(t=gx.resolve(this.root,t),n&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}};er.prototype._stat=function(t){var e=this._makeAbs(t),r=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&Hx(this.cache,e)){var s=this.cache[e];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var n,i=this.statCache[e];if(!i){var o;try{o=this.fs.lstatSync(e)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(e)}catch{i=o}else i=o}this.statCache[e]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,r&&s==="FILE"?!1:s};er.prototype._mark=function(t){return Ec.mark(this,t)};er.prototype._makeAbs=function(t){return Ec.makeAbs(this,t)}});var F4=y((oFe,O4)=>{var aHe=bD(),lg=Object.create(null),uHe=xp();O4.exports=aHe(cHe);function cHe(t,e){return lg[t]?(lg[t].push(e),null):(lg[t]=[e],lHe(t))}function lHe(t){return uHe(function e(){var r=lg[t],n=r.length,i=pHe(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){e.apply(null,i)})):delete lg[t]}})}function pHe(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n]=t[n];return r}});var yx=y((uFe,N4)=>{N4.exports=Dc;var fHe=ux(),B4=Gw(),sFe=B4.Minimatch,dHe=Zt(),hHe=require("events").EventEmitter,bx=require("path"),vx=require("assert"),pg=zw(),_x=k4(),Cc=mx(),mHe=Cc.setopts,wx=Cc.ownProp,Ax=F4(),aFe=require("util"),gHe=Cc.childrenIgnored,HHe=Cc.isIgnored,yHe=xp();function Dc(t,e,r){if(typeof e=="function"&&(r=e,e={}),e||(e={}),e.sync){if(r)throw new TypeError("callback provided to sync glob");return _x(t,e)}return new Ve(t,e,r)}Dc.sync=_x;var bHe=Dc.GlobSync=_x.GlobSync;Dc.glob=Dc;function vHe(t,e){if(e===null||typeof e!="object")return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}Dc.hasMagic=function(t,e){var r=vHe({},e);r.noprocess=!0;var n=new Ve(t,r),i=n.minimatch.set;if(!t)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if(typeof i[0][o]!="string")return!0;return!1};Dc.Glob=Ve;dHe(Ve,hHe);function Ve(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError("callback provided to sync glob");return new bHe(t,e)}if(!(this instanceof Ve))return new Ve(t,e,r);mHe(this,t,e),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=yHe(r),this.on("error",r),this.on("end",function(u){r(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);o=!1;function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}}Ve.prototype._finish=function(){if(vx(this instanceof Ve),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Cc.finish(this),this.emit("end",this.found)}};Ve.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var e=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--t===0&&e._finish()}};Ve.prototype._realpathSet=function(t,e){var r=this.matches[t];if(!r)return e();var n=Object.keys(r),i=this,o=n.length;if(o===0)return e();var s=this.matches[t]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),fHe.realpath(a,i.realpathCache,function(c,l){c?c.syscall==="stat"?s[a]=!0:i.emit("error",c):s[l]=!0,--o===0&&(i.matches[t]=s,e())})})};Ve.prototype._mark=function(t){return Cc.mark(this,t)};Ve.prototype._makeAbs=function(t){return Cc.makeAbs(this,t)};Ve.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Ve.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Ve.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var r=t[e];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<n.length;e++){var i=n[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};Ve.prototype._process=function(t,e,r,n){if(vx(this instanceof Ve),vx(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,e,r,n]);return}for(var i=0;typeof t[i]=="string";)i++;var o;switch(i){case t.length:this._processSimple(t.join("/"),e,n);return;case 0:o=null;break;default:o=t.slice(0,i).join("/");break}var s=t.slice(i),a;o===null?a=".":((pg(o)||pg(t.join("/")))&&(!o||!pg(o))&&(o="/"+o),a=o);var u=this._makeAbs(a);if(gHe(this,a))return n();var c=s[0]===B4.GLOBSTAR;c?this._processGlobStar(o,a,u,s,e,r,n):this._processReaddir(o,a,u,s,e,r,n)}};Ve.prototype._processReaddir=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){return a._processReaddir2(t,e,r,n,i,o,c,s)})};Ve.prototype._processReaddir2=function(t,e,r,n,i,o,s,a){if(!s)return a();for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,p=this.dot||l.charAt(0)===".",f=[],m=0;m<s.length;m++){var h=s[m];if(h.charAt(0)!=="."||p){var H;c&&!t?H=!h.match(u):H=h.match(u),H&&f.push(h)}}var b=f.length;if(b===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var m=0;m<b;m++){var h=f[m];t&&(t!=="/"?h=t+"/"+h:h=t+h),h.charAt(0)==="/"&&!this.nomount&&(h=bx.join(this.root,h)),this._emitMatch(i,h)}return a()}n.shift();for(var m=0;m<b;m++){var h=f[m],_;t&&(t!=="/"?h=t+"/"+h:h=t+h),this._process([h].concat(n),i,o,a)}a()};Ve.prototype._emitMatch=function(t,e){if(!this.aborted&&!HHe(this,e)){if(this.paused){this._emitQueue.push([t,e]);return}var r=pg(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0;var i=this.statCache[r];i&&this.emit("stat",e,i),this.emit("match",e)}}};Ve.prototype._readdirInGlobStar=function(t,e){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,e);var r="lstat\0"+t,n=this,i=Ax(r,o);i&&n.fs.lstat(t,i);function o(s,a){if(s&&s.code==="ENOENT")return e();var u=a&&a.isSymbolicLink();n.symlinks[t]=u,!u&&a&&!a.isDirectory()?(n.cache[t]="FILE",e()):n._readdir(t,!1,e)}};Ve.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=Ax("readdir\0"+t+"\0"+e,r),!!r)){if(e&&!wx(this.symlinks,t))return this._readdirInGlobStar(t,r);if(wx(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(t,wHe(this,t,r))}};function wHe(t,e,r){return function(n,i){n?t._readdirError(e,n,r):t._readdirEntries(e,i,r)}}Ve.prototype._readdirEntries=function(t,e,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];t==="/"?i=t+i:i=t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,r(null,e)}};Ve.prototype._readdirError=function(t,e,r){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return r()}};Ve.prototype._processGlobStar=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){a._processGlobStar2(t,e,r,n,i,o,c,s)})};Ve.prototype._processGlobStar2=function(t,e,r,n,i,o,s,a){if(!s)return a();var u=n.slice(1),c=t?[t]:[],l=c.concat(u);this._process(l,i,!1,a);var p=this.symlinks[r],f=s.length;if(p&&o)return a();for(var m=0;m<f;m++){var h=s[m];if(!(h.charAt(0)==="."&&!this.dot)){var H=c.concat(s[m],u);this._process(H,i,!0,a);var b=c.concat(s[m],n);this._process(b,i,!0,a)}}a()};Ve.prototype._processSimple=function(t,e,r){var n=this;this._stat(t,function(i,o){n._processSimple2(t,e,i,o,r)})};Ve.prototype._processSimple2=function(t,e,r,n,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!n)return i();if(t&&pg(t)&&!this.nomount){var o=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=bx.join(this.root,t):(t=bx.resolve(this.root,t),o&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()};Ve.prototype._stat=function(t,e){var r=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return e();if(!this.stat&&wx(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return e(null,i);if(n&&i==="FILE")return e()}var o,s=this.statCache[r];if(s!==void 0){if(s===!1)return e(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?e():e(null,a,s)}var u=this,c=Ax("stat\0"+r,l);c&&u.fs.lstat(r,c);function l(p,f){if(f&&f.isSymbolicLink())return u.fs.stat(r,function(m,h){m?u._stat2(t,r,null,f,e):u._stat2(t,r,m,h,e)});u._stat2(t,r,p,f,e)}};Ve.prototype._stat2=function(t,e,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[e]=!1,i();var o=t.slice(-1)==="/";if(this.statCache[e]=n,e.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&s==="FILE"?i():i(null,s,n)}});var j4=y((cFe,U4)=>{U4.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(r[2])return!0;e=e.slice(r.index+r[0].length)}return!1}});var V4=y((lFe,W4)=>{var _He=j4(),q4={"{":"}","(":")","[":"]"},AHe=function(t){if(t[0]==="!")return!0;for(var e=0,r=-2,n=-2,i=-2,o=-2,s=-2;e<t.length;){if(t[e]==="*"||t[e+1]==="?"&&/[\].+)]/.test(t[e])||n!==-1&&t[e]==="["&&t[e+1]!=="]"&&(n<e&&(n=t.indexOf("]",e)),n>e&&(s===-1||s>n||(s=t.indexOf("\\",e),s===-1||s>n)))||i!==-1&&t[e]==="{"&&t[e+1]!=="}"&&(i=t.indexOf("}",e),i>e&&(s=t.indexOf("\\",e),s===-1||s>i))||o!==-1&&t[e]==="("&&t[e+1]==="?"&&/[:!=]/.test(t[e+2])&&t[e+3]!==")"&&(o=t.indexOf(")",e),o>e&&(s=t.indexOf("\\",e),s===-1||s>o))||r!==-1&&t[e]==="("&&t[e+1]!=="|"&&(r<e&&(r=t.indexOf("|",e)),r!==-1&&t[r+1]!==")"&&(o=t.indexOf(")",r),o>r&&(s=t.indexOf("\\",r),s===-1||s>o))))return!0;if(t[e]==="\\"){var a=t[e+1];e+=2;var u=q4[a];if(u){var c=t.indexOf(u,e);c!==-1&&(e=c+1)}if(t[e]==="!")return!0}else e++}return!1},IHe=function(t){if(t[0]==="!")return!0;for(var e=0;e<t.length;){if(/[*?{}()[\]]/.test(t[e]))return!0;if(t[e]==="\\"){var r=t[e+1];e+=2;var n=q4[r];if(n){var i=t.indexOf(n,e);i!==-1&&(e=i+1)}if(t[e]==="!")return!0}else e++}return!1};W4.exports=function(e,r){if(typeof e!="string"||e==="")return!1;if(_He(e))return!0;var n=AHe;return r&&r.strict===!1&&(n=IHe),n(e)}});var K4=y((pFe,G4)=>{"use strict";var SHe=V4(),EHe=require("path").posix.dirname,DHe=require("os").platform()==="win32",Jw="/",CHe=/\\/g,PHe=/\\([!*?|[\](){}])/g;G4.exports=function(e,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&DHe&&e.indexOf(Jw)<0&&(e=e.replace(CHe,Jw)),xHe(e)&&(e+=Jw),e+="a";do e=EHe(e);while(LHe(e));return e.replace(PHe,"$1")};function xHe(t){var e=t.slice(-1),r;switch(e){case"}":r="{";break;case"]":r="[";break;default:return!1}var n=t.indexOf(r);return n<0?!1:t.slice(n+1,-1).includes(Jw)}function LHe(t){return/\([^()]+$/.test(t)||t[0]==="{"||t[0]==="["||/[^\\][{[]/.test(t)?!0:SHe(t)}});var X4=y((fFe,z4)=>{"use strict";z4.exports=function(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}});var Y4=y((dFe,J4)=>{"use strict";var THe=X4()();J4.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");return THe.test(t)}});var Z4=y((hFe,Q4)=>{"use strict";var $He=Y4();Q4.exports=function(e){if(typeof e!="string")throw new TypeError("expected filepath to be a string");return!$He(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}});var e5=y((Ix,Sx)=>{(function(t){Ix&&typeof Ix=="object"&&typeof Sx<"u"?Sx.exports=t():typeof define=="function"&&define.amd?define([],t):typeof window<"u"?window.isWindows=t():typeof global<"u"?global.isWindows=t():typeof self<"u"?self.isWindows=t():this.isWindows=t()})(function(){"use strict";return function(){return process&&(process.platform==="win32"||/^(msys|cygwin)$/.test(process.env.OSTYPE))}})});var r5=y((mFe,t5)=>{"use strict";var RHe=Z4(),MHe=e5();t5.exports=fg;function fg(t){if(typeof t!="string")throw new TypeError("isAbsolute expects a string.");return MHe()?fg.win32(t):fg.posix(t)}fg.posix=function(e){return e.charAt(0)==="/"};fg.win32=function(e){return/[a-z]/i.test(e.charAt(0))&&e.charAt(1)===":"&&e.charAt(2)==="\\"||e.slice(0,2)==="\\\\"?!0:!RHe(e)}});var Dx=y((gFe,s5)=>{"use strict";var n5=require("path"),kHe=rx(),i5=r5();s5.exports=function(t,e){var r=e||{},n=n5.resolve(r.cwd?r.cwd:process.cwd());n=Ex(n);var i=r.root;i&&(i=Ex(i),(process.platform==="win32"||!i5(i))&&(i=Ex(n5.resolve(i)))),t.slice(0,2)==="./"&&(t=t.slice(2)),t.length===1&&t==="."&&(t="");var o=t.slice(-1),s=kHe(t);return t=s.pattern,i&&t.charAt(0)==="/"?t=o5(i,t):(!i5(t)||t.slice(0,1)==="\\")&&(t=o5(n,t)),o==="/"&&t.slice(-1)!=="/"&&(t+="/"),s.negated?"!"+t:t};function Ex(t){return t.replace(/\\/g,"/")}function o5(t,e){return t.charAt(t.length-1)==="/"&&(t=t.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),e?t+"/"+e:t}});var u5=y((HFe,a5)=>{var OHe=process.platform==="win32";a5.exports=function(t){var e=t.length-1;if(e<2)return t;for(;FHe(t,e);)e--;return t.substr(0,e+1)};function FHe(t,e){var r=t[e];return e>0&&(r==="/"||OHe&&r==="\\")}});var p5=y((yFe,l5)=>{"use strict";var BHe=require("util").inherits,NHe=yx(),UHe=nx(),c5=ZP().Readable,jHe=K4(),Cx=Dx(),qHe=u5(),WHe="File not found with singular glob: ",VHe=" (if this was purposeful, use `allowEmpty` option)";function GHe(t,e){return jHe(Cx(t,e))}function KHe(t){var e=t.minimatch.set;return e.length!==1?!1:e[0].every(function(n){return typeof n=="string"})}function uf(t,e,r){if(!(this instanceof uf))return new uf(t,e,r);var n=UHe({},r);c5.call(this,{objectMode:!0,highWaterMark:n.highWaterMark||16}),delete n.highWaterMark;var i=this;function o(m){return Cx(m,n)}var s=e.map(o);n.ignore=s;var a=n.cwd,u=n.allowEmpty||!1,c=n.base||GHe(t,n);t=Cx(t,n),delete n.root;var l=new NHe.Glob(t,n);this._globber=l;var p=!1;l.on("match",function(m){p=!0;var h={cwd:a,base:c,path:qHe(m)};i.push(h)||l.pause()}),l.once("end",function(){if(u!==!0&&!p&&KHe(l)){var m=new Error(WHe+t+VHe);return i.destroy(m)}i.push(null)});function f(m){i.destroy(m)}l.once("error",f)}BHe(uf,c5);uf.prototype._read=function(){this._globber.resume()};uf.prototype.destroy=function(t){var e=this;this._globber.abort(),process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})};l5.exports=uf});var d5=y((bFe,f5)=>{"use strict";var zHe=kW(),XHe=R8(),JHe=GV(),YHe=rx(),QHe=nx(),ZHe=p5();function eye(t,e){e||(e={});var r=QHe({},e),n=r.ignore;r.cwd=typeof r.cwd=="string"?r.cwd:process.cwd(),r.dot=typeof r.dot=="boolean"?r.dot:!1,r.silent=typeof r.silent=="boolean"?r.silent:!0,r.cwdbase=typeof r.cwdbase=="boolean"?r.cwdbase:!1,r.uniqueBy=typeof r.uniqueBy=="string"||typeof r.uniqueBy=="function"?r.uniqueBy:"path",r.cwdbase&&(r.base=r.cwd),typeof n=="string"&&(n=[n]),Array.isArray(n)||(n=[]),Array.isArray(t)||(t=[t]);var i=[],o=[];t.forEach(s);function s(p,f){if(typeof p!="string")throw new Error("Invalid glob at index "+f);var m=YHe(p),h=m.negated?o:i;h.push({index:f,glob:m.pattern})}if(i.length===0)throw new Error("Missing positive glob");var a=i.map(l),u=new zHe(a),c=XHe(r.uniqueBy);return JHe.obj(u,c);function l(p){var f=o.filter(tye(p.index)).map(rye).concat(n);return new ZHe(p.glob,f,r)}}function tye(t){return function(e){return e.index>t}}function rye(t){return t.glob}f5.exports=eye});var i_=y((pBe,I5)=>{"use strict";var{Transform:aye}=require("stream"),{StringDecoder:uye}=require("string_decoder"),Qa=Symbol("last"),n_=Symbol("decoder");function cye(t,e,r){let n;if(this.overflow){if(n=this[n_].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Qa]+=this[n_].write(t),n=this[Qa].split(this.matcher);this[Qa]=n.pop();for(let i=0;i<n.length;i++)try{A5(this,this.mapper(n[i]))}catch(o){return r(o)}if(this.overflow=this[Qa].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function lye(t){if(this[Qa]+=this[n_].end(),this[Qa])try{A5(this,this.mapper(this[Qa]))}catch(e){return t(e)}t()}function A5(t,e){e!==void 0&&t.push(e)}function _5(t){return t}function pye(t,e,r){switch(t=t||/\r?\n/,e=e||_5,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=_5)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=cye,r.flush=lye,r.readableObjectMode=!0;let n=new aye(r);return n[Qa]="",n[n_]=new uye("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,o){this._writableState.errorEmitted=!1,o(i)},n}I5.exports=pye});var G5,V5=Zz(()=>{G5="./w32appcontainertokens-XTRA77NA.node"});var z5=y((FUe,K5)=>{V5();try{K5.exports=require(G5)}catch{}});var J5=y(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.getAppContainerProcessTokens=void 0;var Hye=require("path"),X5,yye=()=>{if(process.platform==="win32")return X5??=z5(),X5},bye=t=>yye()?.getAppContainerProcessTokens().map(e=>(0,Hye.join)(e,t));p_.getAppContainerProcessTokens=bye});var hG=y((k2e,__)=>{var Dye=require("fs"),dG=require("path"),Cye=require("os"),Pye=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function xye(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=Pye.exec(r))!=null;){let i=n[1],o=n[2]||"";o=o.trim();let s=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),s==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),e[i]=o}return e}function jx(t){console.log(`[dotenv][DEBUG] ${t}`)}function Lye(t){return t[0]==="~"?dG.join(Cye.homedir(),t.slice(1)):t}function Tye(t){let e=dG.resolve(process.cwd(),".env"),r="utf8",n=Boolean(t&&t.debug),i=Boolean(t&&t.override);t&&(t.path!=null&&(e=Lye(t.path)),t.encoding!=null&&(r=t.encoding));try{let o=w_.parse(Dye.readFileSync(e,{encoding:r}));return Object.keys(o).forEach(function(s){Object.prototype.hasOwnProperty.call(process.env,s)?(i===!0&&(process.env[s]=o[s]),n&&jx(i===!0?`"${s}" is already defined in \`process.env\` and WAS overwritten`:`"${s}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[s]=o[s]}),{parsed:o}}catch(o){return n&&jx(`Failed to load ${e} ${o.message}`),{error:o}}}var w_={config:Tye,parse:xye};__.exports.config=w_.config;__.exports.parse=w_.parse;__.exports=w_});var Qx=y(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var N_=require("vscode"),Bf=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Ms.ApplicationVersion:return Bf.trimVersionSuffix(N_.version);case Ms.Build:return N_.env.appName;case Ms.ClientId:return N_.env.machineId;case Ms.ExtensionName:return this.extensionName;case Ms.ExtensionVersion:return Bf.trimVersionSuffix(this.extensionVersion);case Ms.Language:return N_.env.language;case Ms.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Ms);for(let n of r)e.set(n,this.getFilterValue(n));return e}};Bc.VSCodeFilterProvider=Bf;var Ms;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Ms=Bc.Filters||(Bc.Filters={}));var Jye;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Jye=Bc.TargetPopulation||(Bc.TargetPopulation={}))});var QG=y(eL=>{"use strict";Object.defineProperty(eL,"__esModule",{value:!0});var Zx=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};eL.BaseFeatureProvider=Zx});var ZG=y(rL=>{"use strict";Object.defineProperty(rL,"__esModule",{value:!0});var Yye=QG(),tL=class extends Yye.BaseFeatureProvider{constructor(e,r){super(e),this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};rL.FilteredFeatureProvider=tL});var e6=y(iL=>{"use strict";Object.defineProperty(iL,"__esModule",{value:!0});var Qye=ZG(),nL=class extends Qye.FilteredFeatureProvider{constructor(e,r,n){super(r,n),this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let u=e.get(a);r[a]=u}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let u of Object.keys(a.Parameters)){let c=u+(a.Parameters[u]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};iL.TasApiFeatureProvider=nL});var oL=y((q8e,t6)=>{"use strict";t6.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var Nr=y((W8e,o6)=>{"use strict";var Zye=oL(),uu=Object.prototype.toString;function uL(t){return Array.isArray(t)}function sL(t){return typeof t>"u"}function ebe(t){return t!==null&&!sL(t)&&t.constructor!==null&&!sL(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function r6(t){return uu.call(t)==="[object ArrayBuffer]"}function tbe(t){return uu.call(t)==="[object FormData]"}function rbe(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&r6(t.buffer),e}function nbe(t){return typeof t=="string"}function ibe(t){return typeof t=="number"}function n6(t){return t!==null&&typeof t=="object"}function U_(t){if(uu.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function obe(t){return uu.call(t)==="[object Date]"}function sbe(t){return uu.call(t)==="[object File]"}function abe(t){return uu.call(t)==="[object Blob]"}function i6(t){return uu.call(t)==="[object Function]"}function ube(t){return n6(t)&&i6(t.pipe)}function cbe(t){return uu.call(t)==="[object URLSearchParams]"}function lbe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function pbe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function cL(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),uL(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function aL(){var t={};function e(i,o){U_(t[o])&&U_(i)?t[o]=aL(t[o],i):U_(i)?t[o]=aL({},i):uL(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)cL(arguments[r],e);return t}function fbe(t,e,r){return cL(e,function(i,o){r&&typeof i=="function"?t[o]=Zye(i,r):t[o]=i}),t}function dbe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}o6.exports={isArray:uL,isArrayBuffer:r6,isBuffer:ebe,isFormData:tbe,isArrayBufferView:rbe,isString:nbe,isNumber:ibe,isObject:n6,isPlainObject:U_,isUndefined:sL,isDate:obe,isFile:sbe,isBlob:abe,isFunction:i6,isStream:ube,isURLSearchParams:cbe,isStandardBrowserEnv:pbe,forEach:cL,merge:aL,extend:fbe,trim:lbe,stripBOM:dbe}});var j_=y((V8e,a6)=>{"use strict";var Nf=Nr();function s6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}a6.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Nf.isURLSearchParams(r))i=r.toString();else{var o=[];Nf.forEach(r,function(u,c){u===null||typeof u>"u"||(Nf.isArray(u)?c=c+"[]":u=[u],Nf.forEach(u,function(p){Nf.isDate(p)?p=p.toISOString():Nf.isObject(p)&&(p=JSON.stringify(p)),o.push(s6(c)+"="+s6(p))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var c6=y((G8e,u6)=>{"use strict";var hbe=Nr();function q_(){this.handlers=[]}q_.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};q_.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};q_.prototype.forEach=function(e){hbe.forEach(this.handlers,function(n){n!==null&&e(n)})};u6.exports=q_});var p6=y((K8e,l6)=>{"use strict";var mbe=Nr();l6.exports=function(e,r){mbe.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var W_=y((z8e,f6)=>{"use strict";f6.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var V_=y((X8e,d6)=>{"use strict";d6.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var G_=y((J8e,h6)=>{"use strict";var gbe=W_();h6.exports=function(e,r,n,i,o){var s=new Error(e);return gbe(s,r,n,i,o)}});var lL=y((Y8e,m6)=>{"use strict";var Hbe=G_();m6.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Hbe("Request failed with status code "+n.status,n.config,null,n.request,n))}});var H6=y((Q8e,g6)=>{"use strict";var K_=Nr();g6.exports=K_.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var u=[];u.push(r+"="+encodeURIComponent(n)),K_.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),K_.isString(o)&&u.push("path="+o),K_.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var b6=y((Z8e,y6)=>{"use strict";y6.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var w6=y((eVe,v6)=>{"use strict";v6.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var pL=y((tVe,_6)=>{"use strict";var ybe=b6(),bbe=w6();_6.exports=function(e,r){return e&&!ybe(r)?bbe(e,r):r}});var I6=y((rVe,A6)=>{"use strict";var fL=Nr(),vbe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];A6.exports=function(e){var r={},n,i,o;return e&&fL.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=fL.trim(a.substr(0,o)).toLowerCase(),i=fL.trim(a.substr(o+1)),n){if(r[n]&&vbe.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var D6=y((nVe,E6)=>{"use strict";var S6=Nr();E6.exports=S6.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=S6.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Uf=y((iVe,C6)=>{"use strict";function dL(t){this.message=t}dL.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};dL.prototype.__CANCEL__=!0;C6.exports=dL});var x6=y((oVe,P6)=>{"use strict";var z_=Nr(),wbe=lL(),_be=H6(),Abe=j_(),Ibe=pL(),Sbe=I6(),Ebe=D6(),hL=G_(),Dbe=V_(),Cbe=Uf();P6.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,u;function c(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}z_.isFormData(o)&&delete s["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(p+":"+f)}var m=Ibe(e.baseURL,e.url);l.open(e.method.toUpperCase(),Abe(m,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function h(){if(l){var b="getAllResponseHeaders"in l?Sbe(l.getAllResponseHeaders()):null,_=!a||a==="text"||a==="json"?l.responseText:l.response,$={data:_,status:l.status,statusText:l.statusText,headers:b,config:e,request:l};wbe(function(D){n(D),c()},function(D){i(D),c()},$),l=null}}if("onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(i(hL("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){i(hL("Network Error",e,null,l)),l=null},l.ontimeout=function(){var _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",$=e.transitional||Dbe;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),i(hL(_,e,$.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},z_.isStandardBrowserEnv()){var H=(e.withCredentials||Ebe(m))&&e.xsrfCookieName?_be.read(e.xsrfCookieName):void 0;H&&(s[e.xsrfHeaderName]=H)}"setRequestHeader"in l&&z_.forEach(s,function(_,$){typeof o>"u"&&$.toLowerCase()==="content-type"?delete s[$]:l.setRequestHeader($,_)}),z_.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&a!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(b){l&&(i(!b||b&&b.type?new Cbe("canceled"):b),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),o||(o=null),l.send(o)})}});var T6=y((sVe,L6)=>{var jf=1e3,qf=jf*60,Wf=qf*60,Nc=Wf*24,Pbe=Nc*7,xbe=Nc*365.25;L6.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Lbe(t);if(r==="number"&&isFinite(t))return e.long?$be(t):Tbe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Lbe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*xbe;case"weeks":case"week":case"w":return r*Pbe;case"days":case"day":case"d":return r*Nc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wf;case"minutes":case"minute":case"mins":case"min":case"m":return r*qf;case"seconds":case"second":case"secs":case"sec":case"s":return r*jf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Tbe(t){var e=Math.abs(t);return e>=Nc?Math.round(t/Nc)+"d":e>=Wf?Math.round(t/Wf)+"h":e>=qf?Math.round(t/qf)+"m":e>=jf?Math.round(t/jf)+"s":t+"ms"}function $be(t){var e=Math.abs(t);return e>=Nc?X_(t,e,Nc,"day"):e>=Wf?X_(t,e,Wf,"hour"):e>=qf?X_(t,e,qf,"minute"):e>=jf?X_(t,e,jf,"second"):t+" ms"}function X_(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var mL=y((aVe,$6)=>{function Rbe(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=s,r.humanize=T6(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let p=0;for(let f=0;f<l.length;f++)p=(p<<5)-p+l.charCodeAt(f),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(l){let p,f=null,m,h;function H(...b){if(!H.enabled)return;let _=H,$=Number(new Date),U=$-(p||$);_.diff=U,_.prev=p,_.curr=$,p=$,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let D=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(j,N)=>{if(j==="%%")return"%";D++;let M=r.formatters[N];if(typeof M=="function"){let L=b[D];j=M.call(_,L),b.splice(D,1),D--}return j}),r.formatArgs.call(_,b),(_.log||r.log).apply(_,b)}return H.namespace=l,H.useColors=r.useColors(),H.color=r.selectColor(l),H.extend=n,H.destroy=r.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==r.namespaces&&(m=r.namespaces,h=r.enabled(l)),h),set:b=>{f=b}}),typeof r.init=="function"&&r.init(H),H}function n(l,p){let f=r(this.namespace+(typeof p>"u"?":":p)+l);return f.log=this.log,f}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p,f=(typeof l=="string"?l:"").split(/[\s,]+/),m=f.length;for(p=0;p<m;p++)f[p]&&(l=f[p].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let p,f;for(p=0,f=r.skips.length;p<f;p++)if(r.skips[p].test(l))return!1;for(p=0,f=r.names.length;p<f;p++)if(r.names[p].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}$6.exports=Rbe});var R6=y((Fn,J_)=>{Fn.formatArgs=kbe;Fn.save=Obe;Fn.load=Fbe;Fn.useColors=Mbe;Fn.storage=Bbe();Fn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Fn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Mbe(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function kbe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+J_.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Fn.log=console.debug||console.log||(()=>{});function Obe(t){try{t?Fn.storage.setItem("debug",t):Fn.storage.removeItem("debug")}catch{}}function Fbe(){let t;try{t=Fn.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Bbe(){try{return localStorage}catch{}}J_.exports=mL()(Fn);var{formatters:Nbe}=J_.exports;Nbe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k6=y((uVe,M6)=>{"use strict";M6.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var F6=y((cVe,O6)=>{"use strict";var Ube=require("os"),Ni=k6(),Ur=process.env,Vf;Ni("no-color")||Ni("no-colors")||Ni("color=false")?Vf=!1:(Ni("color")||Ni("colors")||Ni("color=true")||Ni("color=always"))&&(Vf=!0);"FORCE_COLOR"in Ur&&(Vf=Ur.FORCE_COLOR.length===0||parseInt(Ur.FORCE_COLOR,10)!==0);function jbe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function qbe(t){if(Vf===!1)return 0;if(Ni("color=16m")||Ni("color=full")||Ni("color=truecolor"))return 3;if(Ni("color=256"))return 2;if(t&&!t.isTTY&&Vf!==!0)return 0;let e=Vf?1:0;if(process.platform==="win32"){let r=Ube.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ur)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in Ur)||Ur.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Ur)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ur.TEAMCITY_VERSION)?1:0;if(Ur.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ur){let r=parseInt((Ur.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ur.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ur.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Ur.TERM)||"COLORTERM"in Ur?1:(Ur.TERM==="dumb",e)}function gL(t){let e=qbe(t);return jbe(e)}O6.exports={supportsColor:gL,stdout:gL(process.stdout),stderr:gL(process.stderr)}});var N6=y((Ir,Q_)=>{var Wbe=require("tty"),Y_=require("util");Ir.init=Ybe;Ir.log=zbe;Ir.formatArgs=Gbe;Ir.save=Xbe;Ir.load=Jbe;Ir.useColors=Vbe;Ir.destroy=Y_.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ir.colors=[6,2,3,4,5,1];try{let t=F6();t&&(t.stderr||t).level>=2&&(Ir.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ir.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Vbe(){return"colors"in Ir.inspectOpts?Boolean(Ir.inspectOpts.colors):Wbe.isatty(process.stderr.fd)}function Gbe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Q_.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Kbe()+e+" "+t[0]}function Kbe(){return Ir.inspectOpts.hideDate?"":new Date().toISOString()+" "}function zbe(...t){return process.stderr.write(Y_.format(...t)+`
`)}function Xbe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Jbe(){return process.env.DEBUG}function Ybe(t){t.inspectOpts={};let e=Object.keys(Ir.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ir.inspectOpts[e[r]]}Q_.exports=mL()(Ir);var{formatters:B6}=Q_.exports;B6.o=function(t){return this.inspectOpts.colors=this.useColors,Y_.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};B6.O=function(t){return this.inspectOpts.colors=this.useColors,Y_.inspect(t,this.inspectOpts)}});var U6=y((lVe,HL)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?HL.exports=R6():HL.exports=N6()});var q6=y((pVe,j6)=>{var Cg;j6.exports=function(){if(!Cg){try{Cg=U6()("follow-redirects")}catch{}typeof Cg!="function"&&(Cg=function(){})}Cg.apply(null,arguments)}});var _L=y((fVe,wL)=>{var Uc=require("url"),yL=Uc.URL,Qbe=require("http"),Zbe=require("https"),G6=require("stream").Writable,eve=require("assert"),K6=q6(),jc=["abort","aborted","connect","error","socket","timeout"],vL=Object.create(null);jc.forEach(function(t){vL[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var W6=Z_("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),tve=Z_("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),rve=Z_("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),nve=Z_("ERR_STREAM_WRITE_AFTER_END","write after end");function Bn(t,e){G6.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Bn.prototype=Object.create(G6.prototype);Bn.prototype.abort=function(){X6(this._currentRequest),this.emit("abort")};Bn.prototype.write=function(t,e,r){if(this._ending)throw new nve;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new rve),this.abort())};Bn.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Bn.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Bn.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Bn.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Bn.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Bn.prototype,t,{get:function(){return this._currentRequest[t]}})});Bn.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Bn.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Uc.format(this._options),n._redirectable=this;for(var i=0;i<jc.length;i++)n.on(jc[i],vL[jc[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function u(c){if(n===s._currentRequest)if(c)s.emit("error",c);else if(o<a.length){var l=a[o++];n.finished||n.write(l.data,l.encoding,u)}else s._ended&&n.end()})()}};Bn.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(X6(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new tve);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var o=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],bL(/^content-/i,this._options.headers));var s=bL(/^host$/i,this._options.headers),a=Uc.parse(this._currentUrl),u=s||a.host,c=/^\w+:/.test(r)?this._currentUrl:Uc.format(Object.assign(a,{host:u})),l;try{l=Uc.resolve(c,r)}catch(h){this.emit("error",new W6(h));return}K6("redirecting to",l),this._isRedirect=!0;var p=Uc.parse(l);if(Object.assign(this._options,p),(p.protocol!==a.protocol&&p.protocol!=="https:"||p.host!==u&&!ove(p.host,u))&&bL(/^(?:authorization|cookie)$/i,this._options.headers),typeof i=="function"){var f={headers:t.headers,statusCode:e},m={url:c,method:o,headers:n};try{i(this._options,f,m)}catch(h){this.emit("error",h);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(h){this.emit("error",new W6(h))}};function z6(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(c,l,p){if(typeof c=="string"){var f=c;try{c=V6(new yL(f))}catch{c=Uc.parse(f)}}else yL&&c instanceof yL?c=V6(c):(p=l,l=c,c={protocol:i});return typeof l=="function"&&(p=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},c,l),l.nativeProtocols=r,eve.equal(l.protocol,i,"protocol mismatch"),K6("options",l),new Bn(l,p)}function u(c,l,p){var f=s.request(c,l,p);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),e}function ive(){}function V6(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function bL(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function Z_(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function X6(t){for(var e=0;e<jc.length;e++)t.removeListener(jc[e],vL[jc[e]]);t.on("error",ive),t.abort()}function ove(t,e){let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}wL.exports=z6({http:Qbe,https:Zbe});wL.exports.wrap=z6});var e0=y((dVe,J6)=>{J6.exports={version:"0.26.1"}});var n9=y((hVe,r9)=>{"use strict";var Pg=Nr(),Y6=lL(),sve=pL(),Q6=j_(),ave=require("http"),uve=require("https"),cve=_L().http,lve=_L().https,Z6=require("url"),pve=require("zlib"),fve=e0().version,Gf=G_(),t0=W_(),dve=V_(),hve=Uf(),e9=/https:?/;function t9(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,t9(o,e,o.href)}}r9.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(se){s(),n(se)},u=!1,c=function(se){s(),u=!0,i(se)},l=e.data,p=e.headers,f={};if(Object.keys(p).forEach(function(se){f[se.toLowerCase()]=se}),"user-agent"in f?p[f["user-agent"]]||delete p[f["user-agent"]]:p["User-Agent"]="axios/"+fve,l&&!Pg.isStream(l)){if(!Buffer.isBuffer(l))if(Pg.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Pg.isString(l))l=Buffer.from(l,"utf-8");else return c(Gf("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));if(e.maxBodyLength>-1&&l.length>e.maxBodyLength)return c(Gf("Request body larger than maxBodyLength limit",e));f["content-length"]||(p["Content-Length"]=l.length)}var m=void 0;if(e.auth){var h=e.auth.username||"",H=e.auth.password||"";m=h+":"+H}var b=sve(e.baseURL,e.url),_=Z6.parse(b),$=_.protocol||"http:";if(!m&&_.auth){var U=_.auth.split(":"),D=U[0]||"",P=U[1]||"";m=D+":"+P}m&&f.authorization&&delete p[f.authorization];var j=e9.test($),N=j?e.httpsAgent:e.httpAgent;try{Q6(_.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(ue){var M=new Error(ue.message);M.config=e,M.url=e.url,M.exists=!0,c(M)}var L={path:Q6(_.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:p,agent:N,agents:{http:e.httpAgent,https:e.httpsAgent},auth:m};e.socketPath?L.socketPath=e.socketPath:(L.hostname=_.hostname,L.port=_.port);var F=e.proxy;if(!F&&F!==!1){var S=$.slice(0,-1)+"_proxy",k=process.env[S]||process.env[S.toUpperCase()];if(k){var O=Z6.parse(k),K=process.env.no_proxy||process.env.NO_PROXY,C=!0;if(K){var x=K.split(",").map(function(se){return se.trim()});C=!x.some(function(se){return se?se==="*"||se[0]==="."&&_.hostname.substr(_.hostname.length-se.length)===se?!0:_.hostname===se:!1})}if(C&&(F={host:O.hostname,port:O.port,protocol:O.protocol},O.auth)){var Z=O.auth.split(":");F.auth={username:Z[0],password:Z[1]}}}}F&&(L.headers.host=_.hostname+(_.port?":"+_.port:""),t9(L,F,$+"//"+_.hostname+(_.port?":"+_.port:"")+L.path));var re,ne=j&&(F?e9.test(F.protocol):!0);e.transport?re=e.transport:e.maxRedirects===0?re=ne?uve:ave:(e.maxRedirects&&(L.maxRedirects=e.maxRedirects),re=ne?lve:cve),e.maxBodyLength>-1&&(L.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(L.insecureHTTPParser=e.insecureHTTPParser);var X=re.request(L,function(se){if(!X.aborted){var de=se,nt=se.req||X;if(se.statusCode!==204&&nt.method!=="HEAD"&&e.decompress!==!1)switch(se.headers["content-encoding"]){case"gzip":case"compress":case"deflate":de=de.pipe(pve.createUnzip()),delete se.headers["content-encoding"];break}var me={status:se.statusCode,statusText:se.statusMessage,headers:se.headers,config:e,request:nt};if(e.responseType==="stream")me.data=de,Y6(a,c,me);else{var kt=[],Pr=0;de.on("data",function(ve){kt.push(ve),Pr+=ve.length,e.maxContentLength>-1&&Pr>e.maxContentLength&&(u=!0,de.destroy(),c(Gf("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,nt)))}),de.on("aborted",function(){u||(de.destroy(),c(Gf("error request aborted",e,"ERR_REQUEST_ABORTED",nt)))}),de.on("error",function(ve){X.aborted||c(t0(ve,e,null,nt))}),de.on("end",function(){try{var ve=kt.length===1?kt[0]:Buffer.concat(kt);e.responseType!=="arraybuffer"&&(ve=ve.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(ve=Pg.stripBOM(ve))),me.data=ve}catch(Y){c(t0(Y,e,Y.code,me.request,me))}Y6(a,c,me)})}}});if(X.on("error",function(se){X.aborted&&se.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(t0(se,e,null,X))}),X.on("socket",function(se){se.setKeepAlive(!0,1e3*60)}),e.timeout){var te=parseInt(e.timeout,10);if(isNaN(te)){c(Gf("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",X));return}X.setTimeout(te,function(){X.abort();var se="";e.timeoutErrorMessage?se=e.timeoutErrorMessage:se="timeout of "+e.timeout+"ms exceeded";var de=e.transitional||dve;c(Gf(se,e,de.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",X))})}(e.cancelToken||e.signal)&&(o=function(ue){X.aborted||(X.abort(),c(!ue||ue&&ue.type?new hve("canceled"):ue))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),Pg.isStream(l)?l.on("error",function(se){c(t0(se,e,null,X))}).pipe(X):X.end(l)})}});var n0=y((mVe,s9)=>{"use strict";var Sr=Nr(),i9=p6(),mve=W_(),gve=V_(),Hve={"Content-Type":"application/x-www-form-urlencoded"};function o9(t,e){!Sr.isUndefined(t)&&Sr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function yve(){var t;return typeof XMLHttpRequest<"u"?t=x6():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=n9()),t}function bve(t,e,r){if(Sr.isString(t))try{return(e||JSON.parse)(t),Sr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var r0={transitional:gve,adapter:yve(),transformRequest:[function(e,r){return i9(r,"Accept"),i9(r,"Content-Type"),Sr.isFormData(e)||Sr.isArrayBuffer(e)||Sr.isBuffer(e)||Sr.isStream(e)||Sr.isFile(e)||Sr.isBlob(e)?e:Sr.isArrayBufferView(e)?e.buffer:Sr.isURLSearchParams(e)?(o9(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Sr.isObject(e)||r&&r["Content-Type"]==="application/json"?(o9(r,"application/json"),bve(e)):e}],transformResponse:[function(e){var r=this.transitional||r0.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Sr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?mve(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Sr.forEach(["delete","get","head"],function(e){r0.headers[e]={}});Sr.forEach(["post","put","patch"],function(e){r0.headers[e]=Sr.merge(Hve)});s9.exports=r0});var u9=y((gVe,a9)=>{"use strict";var vve=Nr(),wve=n0();a9.exports=function(e,r,n){var i=this||wve;return vve.forEach(n,function(s){e=s.call(i,e,r)}),e}});var AL=y((HVe,c9)=>{"use strict";c9.exports=function(e){return!!(e&&e.__CANCEL__)}});var f9=y((yVe,p9)=>{"use strict";var l9=Nr(),IL=u9(),_ve=AL(),Ave=n0(),Ive=Uf();function SL(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ive("canceled")}p9.exports=function(e){SL(e),e.headers=e.headers||{},e.data=IL.call(e,e.data,e.headers,e.transformRequest),e.headers=l9.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),l9.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Ave.adapter;return r(e).then(function(i){return SL(e),i.data=IL.call(e,i.data,i.headers,e.transformResponse),i},function(i){return _ve(i)||(SL(e),i&&i.response&&(i.response.data=IL.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var EL=y((bVe,d9)=>{"use strict";var Nn=Nr();d9.exports=function(e,r){r=r||{};var n={};function i(l,p){return Nn.isPlainObject(l)&&Nn.isPlainObject(p)?Nn.merge(l,p):Nn.isPlainObject(p)?Nn.merge({},p):Nn.isArray(p)?p.slice():p}function o(l){if(Nn.isUndefined(r[l])){if(!Nn.isUndefined(e[l]))return i(void 0,e[l])}else return i(e[l],r[l])}function s(l){if(!Nn.isUndefined(r[l]))return i(void 0,r[l])}function a(l){if(Nn.isUndefined(r[l])){if(!Nn.isUndefined(e[l]))return i(void 0,e[l])}else return i(void 0,r[l])}function u(l){if(l in r)return i(e[l],r[l]);if(l in e)return i(void 0,e[l])}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Nn.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var f=c[p]||o,m=f(p);Nn.isUndefined(m)&&f!==u||(n[p]=m)}),n}});var g9=y((vVe,m9)=>{"use strict";var Sve=e0().version,DL={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){DL[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var h9={};DL.transitional=function(e,r,n){function i(o,s){return"[Axios v"+Sve+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!h9[s]&&(h9[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function Eve(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],u=a===void 0||s(a,o,t);if(u!==!0)throw new TypeError("option "+o+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+o)}}m9.exports={assertOptions:Eve,validators:DL}});var _9=y((wVe,w9)=>{"use strict";var b9=Nr(),Dve=j_(),H9=c6(),y9=f9(),i0=EL(),v9=g9(),Kf=v9.validators;function xg(t){this.defaults=t,this.interceptors={request:new H9,response:new H9}}xg.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=i0(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&v9.assertOptions(n,{silentJSONParsing:Kf.transitional(Kf.boolean),forcedJSONParsing:Kf.transitional(Kf.boolean),clarifyTimeoutError:Kf.transitional(Kf.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(o=o&&m.synchronous,i.unshift(m.fulfilled,m.rejected))});var s=[];this.interceptors.response.forEach(function(m){s.push(m.fulfilled,m.rejected)});var a;if(!o){var u=[y9,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),a=Promise.resolve(r);u.length;)a=a.then(u.shift(),u.shift());return a}for(var c=r;i.length;){var l=i.shift(),p=i.shift();try{c=l(c)}catch(f){p(f);break}}try{a=y9(c)}catch(f){return Promise.reject(f)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};xg.prototype.getUri=function(e){return e=i0(this.defaults,e),Dve(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};b9.forEach(["delete","get","head","options"],function(e){xg.prototype[e]=function(r,n){return this.request(i0(n||{},{method:e,url:r,data:(n||{}).data}))}});b9.forEach(["post","put","patch"],function(e){xg.prototype[e]=function(r,n,i){return this.request(i0(i||{},{method:e,url:r,data:n}))}});w9.exports=xg});var I9=y((_Ve,A9)=>{"use strict";var Cve=Uf();function zf(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new Cve(i),e(r.reason))})}zf.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};zf.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};zf.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};zf.source=function(){var e,r=new zf(function(i){e=i});return{token:r,cancel:e}};A9.exports=zf});var E9=y((AVe,S9)=>{"use strict";S9.exports=function(e){return function(n){return e.apply(null,n)}}});var C9=y((IVe,D9)=>{"use strict";var Pve=Nr();D9.exports=function(e){return Pve.isObject(e)&&e.isAxiosError===!0}});var L9=y((SVe,CL)=>{"use strict";var P9=Nr(),xve=oL(),o0=_9(),Lve=EL(),Tve=n0();function x9(t){var e=new o0(t),r=xve(o0.prototype.request,e);return P9.extend(r,o0.prototype,e),P9.extend(r,e),r.create=function(i){return x9(Lve(t,i))},r}var Vo=x9(Tve);Vo.Axios=o0;Vo.Cancel=Uf();Vo.CancelToken=I9();Vo.isCancel=AL();Vo.VERSION=e0().version;Vo.all=function(e){return Promise.all(e)};Vo.spread=E9();Vo.isAxiosError=C9();CL.exports=Vo;CL.exports.default=Vo});var $9=y((EVe,T9)=>{T9.exports=L9()});var R9=y(xL=>{"use strict";Object.defineProperty(xL,"__esModule",{value:!0});var $ve=$9(),PL=class{constructor(e){this.endpoint=e}get(e){return $ve.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};xL.AxiosHttpClient=PL});var M9=y(TL=>{"use strict";Object.defineProperty(TL,"__esModule",{value:!0});var LL=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};TL.MemoryKeyValueStorage=LL});var k9=y(RL=>{"use strict";Object.defineProperty(RL,"__esModule",{value:!0});var Rve=M9(),$L=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new Rve.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,u)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};RL.ExperimentationServiceBase=$L});var O9=y(kL=>{"use strict";Object.defineProperty(kL,"__esModule",{value:!0});var ML=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};kL.PollingService=ML});var F9=y(FL=>{"use strict";Object.defineProperty(FL,"__esModule",{value:!0});var Mve=k9(),kve=O9(),OL=class extends Mve.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,u){if(super(e,i,o,s,a,u),this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=u,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new kve.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};FL.ExperimentationServiceAutoPolling=OL});var B9=y(BL=>{"use strict";Object.defineProperty(BL,"__esModule",{value:!0});var Ove=e6(),Fve=R9(),Bve=F9(),s0=class extends Bve.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Ove.TasApiFeatureProvider(new Fve.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};BL.ExperimentationService=s0;s0.REFRESH_RATE_IN_MINUTES=30});var N9=y(NL=>{"use strict";Object.defineProperty(NL,"__esModule",{value:!0});var Nve=B9();NL.ExperimentationService=Nve.ExperimentationService});var U9=y(jL=>{"use strict";Object.defineProperty(jL,"__esModule",{value:!0});var UL=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};jL.MementoKeyValueStorage=UL});var j9=y(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});var qL=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};WL.default=qL});var W9=y(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});var Uve=Qx(),jve=N9(),VL=require("vscode"),qve=U9(),Wve=j9(),Vve="https://default.exp-tas.com/vscode/ab",Gve="query-expfeature",Kve="VSCode.ABExp.Features",zve="abexp.assignmentcontext",Xve="VSCode.ABExp.FeatureData",Jve=1e3*60*30;function q9(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=VL.workspace.getConfiguration("telemetry");if(!(VL.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):VL.env.isTelemetryEnabled))return new Wve.default;let c=[new Uve.VSCodeFilterProvider(t,e,r),...o],l=new qve.MementoKeyValueStorage(i);return new jve.ExperimentationService({filterProviders:c,telemetry:n,storageKey:Xve,keyValueStorage:l,featuresTelemetryPropertyName:Kve,assignmentContextTelemetryPropertyName:zve,telemetryEventName:Gve,endpoint:Vve,refetchInterval:Jve})}a0.getExperimentationService=q9;async function Yve(t,e,r,n,i,...o){let s=q9(t,e,r,n,i,...o);return await s.initializePromise,s}a0.getExperimentationServiceAsync=Yve});var G9=y(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});var V9=W9();Lg.getExperimentationService=V9.getExperimentationService;Lg.getExperimentationServiceAsync=V9.getExperimentationServiceAsync;var Qve=Qx();Lg.TargetPopulation=Qve.TargetPopulation});var ez=y(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});function hT(t){this.j={},this.jr=[],this.jd=null,this.t=t}hT.prototype={accepts:function(){return!!this.t},tt:function(e,r){if(r&&r.j)return this.j[e]=r,r;var n=r,i=this.j[e];if(i)return n&&(i.t=n),i;i=Qe();var o=C0(this,e);return o?(Object.assign(i.j,o.j),i.jr.append(o.jr),i.jr=o.jd,i.t=n||o.t):i.t=n,this.j[e]=i,i}};var Qe=function(){return new hT},He=function(e){return new hT(e)},oe=function(e,r,n){e.j[r]||(e.j[r]=n)},fr=function(e,r,n){e.jr.push([r,n])},C0=function(e,r){var n=e.j[r];if(n)return n;for(var i=0;i<e.jr.length;i++){var o=e.jr[i][0],s=e.jr[i][1];if(o.test(r))return s}return e.jd},Pe=function(e,r,n){for(var i=0;i<r.length;i++)oe(e,r[i],n)},Iwe=function(e,r){for(var n=0;n<r.length;n++){var i=r[n][0],o=r[n][1];oe(e,i,o)}},Yc=function(e,r,n,i){for(var o=0,s=r.length,a;o<s&&(a=e.j[r[o]]);)e=a,o++;if(o>=s)return[];for(;o<s-1;)a=i(),oe(e,r[o],a),e=a,o++;oe(e,r[s-1],n)},qi="DOMAIN",Us="LOCALHOST",zo="TLD",mi="NUM",kd="PROTOCOL",mT="MAILTO",JK="WS",gT="NL",Ld="OPENBRACE",Kg="OPENBRACKET",zg="OPENANGLEBRACKET",Xg="OPENPAREN",Qc="CLOSEBRACE",Td="CLOSEBRACKET",$d="CLOSEANGLEBRACKET",Rd="CLOSEPAREN",P0="AMPERSAND",x0="APOSTROPHE",L0="ASTERISK",Md="AT",T0="BACKSLASH",$0="BACKTICK",R0="CARET",Jg="COLON",HT="COMMA",M0="DOLLAR",Hu="DOT",k0="EQUALS",yT="EXCLAMATION",O0="HYPHEN",F0="PERCENT",B0="PIPE",N0="PLUS",U0="POUND",j0="QUERY",bT="QUOTE",vT="SEMI",js="SLASH",q0="TILDE",W0="UNDERSCORE",V0="SYM",Swe=Object.freeze({__proto__:null,DOMAIN:qi,LOCALHOST:Us,TLD:zo,NUM:mi,PROTOCOL:kd,MAILTO:mT,WS:JK,NL:gT,OPENBRACE:Ld,OPENBRACKET:Kg,OPENANGLEBRACKET:zg,OPENPAREN:Xg,CLOSEBRACE:Qc,CLOSEBRACKET:Td,CLOSEANGLEBRACKET:$d,CLOSEPAREN:Rd,AMPERSAND:P0,APOSTROPHE:x0,ASTERISK:L0,AT:Md,BACKSLASH:T0,BACKTICK:$0,CARET:R0,COLON:Jg,COMMA:HT,DOLLAR:M0,DOT:Hu,EQUALS:k0,EXCLAMATION:yT,HYPHEN:O0,PERCENT:F0,PIPE:B0,PLUS:N0,POUND:U0,QUERY:j0,QUOTE:bT,SEMI:vT,SLASH:js,TILDE:q0,UNDERSCORE:W0,SYM:V0}),KK="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),qg=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Wg=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Vg=/\uFE0F/,Gg=/\d/,zK=/\s/;function Ewe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=Qe(),r=He(mi),n=He(qi),i=Qe(),o=He(JK),s=[[Gg,n],[qg,n],[Wg,n],[Vg,n]],a=function(){var D=He(qi);return D.j={"-":i},D.jr=[].concat(s),D},u=function(D){var P=a();return P.t=D,P};Iwe(e,[["'",He(x0)],["{",He(Ld)],["[",He(Kg)],["<",He(zg)],["(",He(Xg)],["}",He(Qc)],["]",He(Td)],[">",He($d)],[")",He(Rd)],["&",He(P0)],["*",He(L0)],["@",He(Md)],["`",He($0)],["^",He(R0)],[":",He(Jg)],[",",He(HT)],["$",He(M0)],[".",He(Hu)],["=",He(k0)],["!",He(yT)],["-",He(O0)],["%",He(F0)],["|",He(B0)],["+",He(N0)],["#",He(U0)],["?",He(j0)],['"',He(bT)],["/",He(js)],[";",He(vT)],["~",He(q0)],["_",He(W0)],["\\",He(T0)]]),oe(e,`
`,He(gT)),fr(e,zK,o),oe(o,`
`,Qe()),fr(o,zK,o);for(var c=0;c<KK.length;c++)Yc(e,KK[c],u(zo),a);var l=a(),p=a(),f=a(),m=a();Yc(e,"file",l,a),Yc(e,"ftp",p,a),Yc(e,"http",f,a),Yc(e,"mailto",m,a);var h=a(),H=He(kd),b=He(mT);oe(p,"s",h),oe(p,":",H),oe(f,"s",h),oe(f,":",H),oe(l,":",H),oe(h,":",H),oe(m,":",b);for(var _=a(),$=0;$<t.length;$++)Yc(e,t[$],_,a);return oe(_,":",H),Yc(e,"localhost",u(Us),a),fr(e,Gg,r),fr(e,qg,n),fr(e,Wg,n),fr(e,Vg,n),fr(r,Gg,r),fr(r,qg,n),fr(r,Wg,n),fr(r,Vg,n),oe(r,"-",i),oe(n,"-",i),oe(i,"-",i),fr(n,Gg,n),fr(n,qg,n),fr(n,Wg,n),fr(n,Vg,n),fr(i,Gg,n),fr(i,qg,n),fr(i,Wg,n),fr(i,Vg,n),e.jd=He(V0),e}function Dwe(t,e){for(var r=Cwe(e.replace(/[A-Z]/g,function(m){return m.toLowerCase()})),n=r.length,i=[],o=0,s=0;s<n;){for(var a=t,u=null,c=0,l=null,p=-1,f=-1;s<n&&(u=C0(a,r[s]));)a=u,a.accepts()?(p=0,f=0,l=a):p>=0&&(p+=r[s].length,f++),c+=r[s].length,o+=r[s].length,s++;o-=p,s-=f,c-=p,i.push({t:l.t,v:e.substr(o-c,c),s:o-c,e:o})}return i}function Cwe(t){for(var e=[],r=t.length,n=0;n<r;){var i=t.charCodeAt(n),o=void 0,s=i<55296||i>56319||n+1===r||(o=t.charCodeAt(n+1))<56320||o>57343?t[n]:t.slice(n,n+2);e.push(s),n+=s.length}return e}function D0(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D0=function(e){return typeof e}:D0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D0(t)}var Dr={defaultProtocol:"http",events:null,format:XK,formatHref:XK,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function wT(t){t=t||{},this.defaultProtocol="defaultProtocol"in t?t.defaultProtocol:Dr.defaultProtocol,this.events="events"in t?t.events:Dr.events,this.format="format"in t?t.format:Dr.format,this.formatHref="formatHref"in t?t.formatHref:Dr.formatHref,this.nl2br="nl2br"in t?t.nl2br:Dr.nl2br,this.tagName="tagName"in t?t.tagName:Dr.tagName,this.target="target"in t?t.target:Dr.target,this.rel="rel"in t?t.rel:Dr.rel,this.validate="validate"in t?t.validate:Dr.validate,this.truncate="truncate"in t?t.truncate:Dr.truncate,this.className="className"in t?t.className:Dr.className,this.attributes=t.attributes||Dr.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in t)?t.ignoreTags:Dr.ignoreTags,r=0;r<e.length;r++)this.ignoreTags.push(e[r].toUpperCase())}wT.prototype={resolve:function(e){var r=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",r,e),tagName:this.get("tagName",r,e),className:this.get("className",r,e),target:this.get("target",r,e),rel:this.get("rel",r,e),events:this.getObject("events",r,e),attributes:this.getObject("attributes",r,e),truncate:this.get("truncate",r,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,r,n){var i=this[e];if(!i)return i;var o;switch(D0(i)){case"function":return i(r,n.t);case"object":return o=n.t in i?i[n.t]:Dr[e],typeof o=="function"?o(r,n.t):o}return i},getObject:function(e,r,n){var i=this[e];return typeof i=="function"?i(r,n.t):i}};function XK(t){return t}var Pwe=Object.freeze({__proto__:null,defaults:Dr,Options:wT});function xwe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n.constructor=e,e.prototype=n,e}function G0(){}G0.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dr.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}}};function Zc(t,e){function r(n,i){this.t=t,this.v=n,this.tk=i}return xwe(G0,r,e),r}var YK=Zc("email",{isLink:!0}),pT=Zc("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),fT=Zc("text"),QK=Zc("nl"),gu=Zc("url",{isLink:!0,toHref:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dr.defaultProtocol,r=this.tk,n=!1,i=!1,o=[],s=0;r[s].t===kd;)n=!0,o.push(r[s].v),s++;for(;r[s].t===js;)i=!0,o.push(r[s].v),s++;for(;s<r.length;s++)o.push(r[s].v);return o=o.join(""),n||i||(o="".concat(e,"://").concat(o)),o},hasProtocol:function(){return this.tk[0].t===kd}}),Lwe=Object.freeze({__proto__:null,MultiToken:G0,Base:G0,createTokenClass:Zc,MailtoEmail:YK,Email:pT,Text:fT,Nl:QK,Url:gu});function Twe(){var t=Qe(),e=Qe(),r=Qe(),n=Qe(),i=Qe(),o=Qe(),s=Qe(),a=He(gu),u=Qe(),c=He(gu),l=He(gu),p=Qe(),f=Qe(),m=Qe(),h=Qe(),H=Qe(),b=He(gu),_=He(gu),$=He(gu),U=He(gu),D=Qe(),P=Qe(),j=Qe(),N=Qe(),M=Qe(),L=Qe(),F=He(pT),S=Qe(),k=He(pT),O=He(YK),K=Qe(),C=Qe(),x=Qe(),Z=Qe(),re=He(QK);oe(t,gT,re),oe(t,kd,e),oe(t,mT,r),oe(e,js,n),oe(n,js,i),oe(t,zo,o),oe(t,qi,o),oe(t,Us,a),oe(t,mi,o),oe(i,zo,l),oe(i,qi,l),oe(i,mi,l),oe(i,Us,l),oe(o,Hu,s),oe(M,Hu,L),oe(s,zo,a),oe(s,qi,o),oe(s,mi,o),oe(s,Us,o),oe(L,zo,F),oe(L,qi,M),oe(L,mi,M),oe(L,Us,M),oe(a,Hu,s),oe(F,Hu,L),oe(a,Jg,u),oe(a,js,l),oe(u,mi,c),oe(c,js,l),oe(F,Jg,S),oe(S,mi,k);var ne=[P0,L0,Md,T0,$0,R0,M0,qi,k0,O0,Us,mi,F0,B0,N0,U0,kd,js,V0,q0,zo,W0],X=[x0,$d,Qc,Td,Rd,Jg,HT,Hu,yT,zg,Ld,Kg,Xg,j0,bT,vT];oe(l,Ld,f),oe(l,Kg,m),oe(l,zg,h),oe(l,Xg,H),oe(p,Ld,f),oe(p,Kg,m),oe(p,zg,h),oe(p,Xg,H),oe(f,Qc,l),oe(m,Td,l),oe(h,$d,l),oe(H,Rd,l),oe(b,Qc,l),oe(_,Td,l),oe($,$d,l),oe(U,Rd,l),oe(D,Qc,l),oe(P,Td,l),oe(j,$d,l),oe(N,Rd,l),Pe(f,ne,b),Pe(m,ne,_),Pe(h,ne,$),Pe(H,ne,U),Pe(f,X,D),Pe(m,X,P),Pe(h,X,j),Pe(H,X,N),Pe(b,ne,b),Pe(_,ne,_),Pe($,ne,$),Pe(U,ne,U),Pe(b,X,b),Pe(_,X,_),Pe($,X,$),Pe(U,X,U),Pe(D,ne,b),Pe(P,ne,_),Pe(j,ne,$),Pe(N,ne,U),Pe(D,X,D),Pe(P,X,P),Pe(j,X,j),Pe(N,X,N),Pe(l,ne,l),Pe(p,ne,l),Pe(l,X,p),Pe(p,X,p),oe(r,zo,O),oe(r,qi,O),oe(r,mi,O),oe(r,Us,O),Pe(O,ne,O),Pe(O,X,K),Pe(K,ne,O),Pe(K,X,K);var te=[P0,x0,L0,T0,$0,R0,Qc,M0,qi,k0,O0,mi,Ld,F0,B0,N0,U0,j0,js,V0,q0,zo,W0];return Pe(o,te,C),oe(o,Md,x),Pe(a,te,C),oe(a,Md,x),Pe(s,te,C),Pe(C,te,C),oe(C,Md,x),oe(C,Hu,Z),Pe(Z,te,C),oe(x,zo,M),oe(x,qi,M),oe(x,mi,M),oe(x,Us,F),t}function $we(t,e,r){for(var n=r.length,i=0,o=[],s=[];i<n;){for(var a=t,u=null,c=null,l=0,p=null,f=-1;i<n&&!(u=C0(a,r[i].t));)s.push(r[i++]);for(;i<n&&(c=u||C0(a,r[i].t));)u=null,a=c,a.accepts()?(f=0,p=a):f>=0&&f++,i++,l++;if(f<0)for(var m=i-l;m<i;m++)s.push(r[m]);else{s.length>0&&(o.push(lT(fT,e,s)),s=[]),i-=f,l-=f;var h=p.t,H=r.slice(i-l,i);o.push(lT(h,e,H))}}return s.length>0&&o.push(lT(fT,e,s)),o}function lT(t,e,r){var n=r[0].s,i=r[r.length-1].e,o=e.substr(n,i-n);return new t(o,r)}var dT=typeof console<"u"&&console&&console.warn||function(){},It={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function Rwe(){It.scanner=null,It.parser=null,It.pluginQueue=[],It.customProtocols=[],It.initialized=!1}function Mwe(t,e){for(var r=0;r<It.pluginQueue.length;r++)if(t===It.pluginQueue[r][0]){dT('linkifyjs: plugin "'.concat(t,'" already registered - will be overwritten')),It.pluginQueue[r]=[t,e];return}It.pluginQueue.push([t,e]),It.initialized&&dT('linkifyjs: already initialized - will not register plugin "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all plugins before invoking linkify the first time.'))}function kwe(t){if(It.initialized&&dT('linkifyjs: already initialized - will not register custom protocol "'.concat(t,'" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.')),!/^[a-z-]+$/.test(t))throw Error("linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported");It.customProtocols.push(t)}function ZK(){It.scanner={start:Ewe(It.customProtocols),tokens:Swe},It.parser={start:Twe(),tokens:Lwe};for(var t={createTokenClass:Zc},e=0;e<It.pluginQueue.length;e++)It.pluginQueue[e][1]({scanner:It.scanner,parser:It.parser,utils:t});It.initialized=!0}function _T(t){return It.initialized||ZK(),$we(It.parser.start,t,Dwe(It.scanner.start,t))}function Owe(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_T(t),n=[],i=0;i<r.length;i++){var o=r[i];o.isLink&&(!e||o.t===e)&&n.push(o.toObject())}return n}function Fwe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_T(t);return r.length===1&&r[0].isLink&&(!e||r[0].t===e)}Wi.Options=wT;Wi.find=Owe;Wi.init=ZK;Wi.options=Pwe;Wi.registerCustomProtocol=kwe;Wi.registerPlugin=Mwe;Wi.reset=Rwe;Wi.test=Fwe;Wi.tokenize=_T});var rz=y((Y6e,tz)=>{tz.exports=ez()});var e_e={};eX(e_e,{activate:()=>Qwe,deactivate:()=>Zwe});module.exports=tX(e_e);var Kz=A(_e()),zz=require("os"),Gt=A(require("vscode"));var jd=new Map([["pwa-node","node"],["pwa-chrome","chrome"],["pwa-extensionHost","extensionHost"],["pwa-msedge","msedge"]]),il=t=>jd.get(t)||t,yX={["pwa-extensionHost"]:null,["node-terminal"]:null,["pwa-node"]:null,["pwa-chrome"]:null,["pwa-msedge"]:null},bX={["extension.js-debug.addCustomBreakpoints"]:null,["extension.pwa-node-debug.attachNodeProcess"]:null,["extension.js-debug.clearAutoAttachVariables"]:null,["extension.js-debug.setAutoAttachVariables"]:null,["extension.js-debug.autoAttachToProcess"]:null,["extension.js-debug.createDebuggerTerminal"]:null,["extension.js-debug.createDiagnostics"]:null,["extension.js-debug.getDiagnosticLogs"]:null,["extension.js-debug.debugLink"]:null,["extension.js-debug.npmScript"]:null,["extension.js-debug.pickNodeProcess"]:null,["extension.js-debug.prettyPrint"]:null,["extension.js-debug.removeAllCustomBreakpoints"]:null,["extension.js-debug.removeCustomBreakpoint"]:null,["extension.js-debug.revealPage"]:null,["extension.js-debug.startProfile"]:null,["extension.js-debug.stopProfile"]:null,["extension.js-debug.toggleSkippingFile"]:null,["extension.node-debug.startWithStopOnEntry"]:null,["extension.js-debug.requestCDPProxy"]:null,["extension.js-debug.openEdgeDevTools"]:null,["extension.js-debug.callers.add"]:null,["extension.js-debug.callers.goToCaller"]:null,["extension.js-debug.callers.gotToTarget"]:null,["extension.js-debug.callers.remove"]:null,["extension.js-debug.callers.removeAll"]:null,["extension.js-debug.enableSourceMapStepping"]:null,["extension.js-debug.disableSourceMapStepping"]:null},n_e=new Set(Object.keys(bX)),pA=new Set(Object.keys(yX)),Gs=t=>pA.has(t);var xe=(t,e,r)=>t.registerCommand(e,r),nH=async(t,e,...r)=>await t.executeCommand(e,...r);var Dt=(t,e,r)=>t.getConfiguration(void 0,r).get(e),fA=(t,e,r,n)=>t.getConfiguration().update(e,r,n);var qd=async(t,e,r)=>await t.executeCommand("setContext",e,r);var Ct=t=>!!t,ol=t=>oH(t,e=>e!==null),BT=t=>oH(t,e=>e!==void 0),Au=t=>e=>e instanceof t,iH=(t,e)=>{debugger;throw new Error(e.replace("{value}",JSON.stringify(t)))};function oH(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];e(i,n)&&(r[n]=i)}return r}function Xo(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];r[n]=e(i,n)}return r}function NT(t,e){let r={};for(let n of Object.keys(t))e(n,t[n])&&(r[n]=t[n]);return r}function UT(...t){if(t.length===0)return{};let e={},r=Object.create(null);for(let n of t)if(n)for(let i of Object.keys(n)){let o=i.toLowerCase();r[o]?e[r[o]]=n[i]:(r[o]=i,e[i]=n[i])}return e}function jT(t,e){if(t.hasOwnProperty(e))return t[e];let r=e.toLowerCase();for(let n of Object.keys(t))if(n.toLowerCase()===r)return t[n]}var dA=Symbol("unset");function Ae(t){let e=dA,r=(...n)=>(e===dA&&(r.value=e=t(...n)),e);return r.forget=()=>{e=dA,r.value=void 0},r.value=void 0,r}function Jo(t){let e=new Map,r=n=>{if(e.has(n))return e.get(n);let i=t(n);return e.set(n,i),i};return r.clear=()=>e.clear(),r}function qT(t){let e,r=n=>(e?.arg===n||(e={arg:n,val:t(n)}),e.val);return r.clear=()=>e=void 0,r}function WT(t,e){let r,n=()=>{r!==void 0&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e()},t)};return n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}function VT(t,e){let r,n=()=>{r===void 0&&(r=setTimeout(()=>{r=void 0,e()},t))};return n.queued=()=>!!r,n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}async function GT(t,e){let r=[],n=[];for(let i of t)await e(i)?r.push(i):n.push(i);return[r,n]}function Yo(t){let e=[];for(let r of t)e=e.concat(r);return e}var vX=2**31-1,sH=()=>{let t=0;return()=>t++&vX};var Me=Symbol("AnyLaunchConfiguration"),aH={type:"",name:"",request:"",trace:!1,outputCapture:"console",timeout:1e4,timeouts:{},showAsyncStacks:!0,skipFiles:[],smartStep:!0,sourceMaps:!0,sourceMapRenames:!0,pauseForSourceMap:!0,resolveSourceMapLocations:null,rootPath:"${workspaceFolder}",outFiles:["${workspaceFolder}/**/*.js","!**/node_modules/**"],sourceMapPathOverrides:yA("${workspaceFolder}"),enableContentValidation:!0,cascadeTerminateToConfigurations:[],enableDWARF:!0,__workspaceFolder:"",__remoteFilePrefix:void 0,__breakOnConditionalError:!1,customDescriptionGenerator:void 0,customPropertiesGenerator:void 0},Wd={...aH,cwd:"${workspaceFolder}",env:{},envFile:null,pauseForSourceMap:!1,sourceMaps:!0,localRoot:null,remoteRoot:null,resolveSourceMapLocations:["**","!**/node_modules/**"],autoAttachChildProcesses:!0,runtimeSourcemapPausePatterns:[],skipFiles:["<node_internals>/**"]},uH={...Wd,showAsyncStacks:{onceBreakpointResolved:16},type:"node-terminal",request:"launch",name:"JavaScript Debug Terminal"},wX={...Wd,type:"node-terminal",request:"attach",name:uH.name,showAsyncStacks:{onceBreakpointResolved:16},delegateId:-1},hA={...Wd,type:"pwa-extensionHost",name:"Debug Extension",request:"launch",args:["--extensionDevelopmentPath=${workspaceFolder}"],outFiles:["${workspaceFolder}/out/**/*.js"],resolveSourceMapLocations:["${workspaceFolder}/**","!**/node_modules/**"],rendererDebugOptions:{},runtimeExecutable:"${execPath}",autoAttachChildProcesses:!1,debugWebviews:!1,debugWebWorkerHost:!1,__sessionId:""},_X={...Wd,type:"pwa-node",request:"launch",program:"",cwd:"${workspaceFolder}",stopOnEntry:!1,console:"internalConsole",restart:!1,args:[],runtimeExecutable:"node",runtimeVersion:"default",runtimeArgs:[],profileStartup:!1,attachSimplePort:null,killBehavior:"forceful"},Vd={...aH,type:"pwa-chrome",request:"attach",address:"localhost",port:0,disableNetworkCache:!0,pathMapping:{},url:null,restart:!1,urlFilter:"",sourceMapPathOverrides:yA("${webRoot}"),webRoot:"${workspaceFolder}",server:null,browserAttachLocation:"workspace",targetSelection:"automatic",vueComponentPaths:["${workspaceFolder}/**/*.vue","!**/node_modules/**"],perScriptSourcemaps:"auto"},mA={...Vd,type:"pwa-msedge",useWebView:!1},cH={...Vd,type:"pwa-chrome",request:"launch",cwd:null,file:null,env:{},urlFilter:"*",includeDefaultArgs:!0,includeLaunchArgs:!0,runtimeArgs:null,runtimeExecutable:"*",userDataDir:!0,browserLaunchLocation:"workspace",profileStartup:!1,cleanUp:"wholeBrowser"},gA={...cH,type:"pwa-msedge",useWebView:!1},HA={...Wd,type:"pwa-node",attachExistingChildren:!0,address:"localhost",port:9229,restart:!1,request:"attach",continueOnAttach:!1};function yA(t){return{"webpack:///./~/*":`${t}/node_modules/*`,"webpack:////*":"/*","webpack://@?:*/?:*/*":`${t}/*`,"webpack://?:*/*":`${t}/*`,"webpack:///([a-z]):/(.+)":"$1:/$2","meteor://\u{1F4BB}app/*":`${t}/*`}}var lH=t=>{!t.sourceMapPathOverrides&&t.cwd&&(t.sourceMapPathOverrides=yA(t.cwd)),t.resolveSourceMapLocations===void 0&&!t.remoteRoot&&(t.resolveSourceMapLocations=t.outFiles)};function bA({...t}){return lH(t),t.request==="attach"?{...HA,...t}:{..._X,...t}}function AX(t,e){return t.request==="attach"?{...Vd,browserAttachLocation:e,...t}:{...cH,browserLaunchLocation:e,...t}}function IX(t,e){return t.request==="attach"?{...mA,browserAttachLocation:e,...t}:{...gA,browserLaunchLocation:e,...t}}function SX(t){let e={...hA,...t};return e.skipFiles=[...e.skipFiles,"**/node_modules.asar/**","**/bootstrap-fork.js"],e}function vA(t){return lH(t),t.request==="launch"?{...uH,...t}:{...wX,...t}}function Ks(t,e){let r,n=e==="remote"?"ui":"workspace";switch(t.type){case"pwa-node":r=bA(t);break;case"pwa-msedge":r=IX(t,n);break;case"pwa-chrome":r=AX(t,n);break;case"pwa-extensionHost":r=SX(t);break;case"node-terminal":r=vA(t);break;default:throw iH(t,"Unknown config: {value}")}return _A(r)}function wA(t){let e="${workspaceFolder}",r={...t,rootPath:void 0,outFiles:t.outFiles.filter(n=>!n.includes(e)),sourceMapPathOverrides:oH(t.sourceMapPathOverrides,n=>!n.includes("${workspaceFolder}"))};return"vueComponentPaths"in r&&(r.vueComponentPaths=r.vueComponentPaths.filter(n=>!n.includes(e))),"resolveSourceMapLocations"in r&&(r.resolveSourceMapLocations=r.resolveSourceMapLocations?.filter(n=>!n.includes(e))??null),"cwd"in r&&r.cwd?.includes(e)&&(r.cwd=void 0),"webRoot"in r&&r.webRoot?.includes(e)&&(r.webRoot="/"),r}function _A(t){return t.__workspaceFolder||(t=wA(t)),t=Vi(t,"workspaceFolder",t.__workspaceFolder),t=Vi(t,"webRoot","webRoot"in t?t.webRoot:t.__workspaceFolder),t}function Vi(t,e,r){let n;if(typeof t=="string")n=t.replace(new RegExp(`\\$\\{${e}\\}`,"g"),()=>{if(!r)throw new Error(`Unable to resolve \${${e}} in configuration (${JSON.stringify(e)})`);return r});else if(t instanceof Array)n=t.map(i=>Vi(i,e,r));else if(typeof t=="object"&&t){let i={};for(let[o,s]of Object.entries(t))i[Vi(o,e,r)]=Vi(s,e,r);n=i}else n=t;return n}var pH=["javascript","typescript","typescriptreact","javascriptreact","fsharp","html","wat","c","cpp","rust","zig"],fH="js-debug",Iu="1.84.0",EX="ms-vscode",dH=fH.includes("nightly"),KT=`${EX}.${fH}`;var J0=A(RA()),cz=A(rI()),X0=require("fs"),Y0=A(J());var pk;(function(t){(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(t);typeof r.Reflect>"u"?r.Reflect=t:n=i(r.Reflect,n),e(n);function i(o,s){return function(a,u){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:u}),s&&s(a,u)}}})(function(e){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!s&&!a,c={create:s?function(){return Hi(Object.create(null))}:a?function(){return Hi({__proto__:null})}:function(){return Hi({})},has:u?function(d,g){return r.call(d,g)}:function(d,g){return g in d},get:u?function(d,g){return r.call(d,g)?d[g]:void 0}:function(d,g){return d[g]}},l=Object.getPrototypeOf(Function),p=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!p&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:tH(),m=!p&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:uA(),h=!p&&typeof WeakMap=="function"?WeakMap:be(),H=new h;function b(d,g,w,I){if(te(w)){if(!ve(d))throw new TypeError;if(!ye(g))throw new TypeError;return F(d,g)}else{if(!ve(d))throw new TypeError;if(!de(g))throw new TypeError;if(!de(I)&&!te(I)&&!ue(I))throw new TypeError;return ue(I)&&(I=void 0),w=Q(w),S(d,g,w,I)}}e("decorate",b);function _(d,g){function w(I,R){if(!de(I))throw new TypeError;if(!te(R)&&!Ne(R))throw new TypeError;Z(d,g,I,R)}return w}e("metadata",_);function $(d,g,w,I){if(!de(w))throw new TypeError;return te(I)||(I=Q(I)),Z(d,g,w,I)}e("defineMetadata",$);function U(d,g,w){if(!de(g))throw new TypeError;return te(w)||(w=Q(w)),O(d,g,w)}e("hasMetadata",U);function D(d,g,w){if(!de(g))throw new TypeError;return te(w)||(w=Q(w)),K(d,g,w)}e("hasOwnMetadata",D);function P(d,g,w){if(!de(g))throw new TypeError;return te(w)||(w=Q(w)),C(d,g,w)}e("getMetadata",P);function j(d,g,w){if(!de(g))throw new TypeError;return te(w)||(w=Q(w)),x(d,g,w)}e("getOwnMetadata",j);function N(d,g){if(!de(d))throw new TypeError;return te(g)||(g=Q(g)),re(d,g)}e("getMetadataKeys",N);function M(d,g){if(!de(d))throw new TypeError;return te(g)||(g=Q(g)),ne(d,g)}e("getOwnMetadataKeys",M);function L(d,g,w){if(!de(g))throw new TypeError;te(w)||(w=Q(w));var I=k(g,w,!1);if(te(I)||!I.delete(d))return!1;if(I.size>0)return!0;var R=H.get(g);return R.delete(w),R.size>0||H.delete(g),!0}e("deleteMetadata",L);function F(d,g){for(var w=d.length-1;w>=0;--w){var I=d[w],R=I(g);if(!te(R)&&!ue(R)){if(!ye(R))throw new TypeError;g=R}}return g}function S(d,g,w,I){for(var R=d.length-1;R>=0;--R){var B=d[R],W=B(g,w,I);if(!te(W)&&!ue(W)){if(!de(W))throw new TypeError;I=W}}return I}function k(d,g,w){var I=H.get(d);if(te(I)){if(!w)return;I=new f,H.set(d,I)}var R=I.get(g);if(te(R)){if(!w)return;R=new f,I.set(g,R)}return R}function O(d,g,w){var I=K(d,g,w);if(I)return!0;var R=rl(g);return ue(R)?!1:O(d,R,w)}function K(d,g,w){var I=k(g,w,!1);return te(I)?!1:kt(I.has(d))}function C(d,g,w){var I=K(d,g,w);if(I)return x(d,g,w);var R=rl(g);if(!ue(R))return C(d,R,w)}function x(d,g,w){var I=k(g,w,!1);if(!te(I))return I.get(d)}function Z(d,g,w,I){var R=k(w,I,!0);R.set(d,g)}function re(d,g){var w=ne(d,g),I=rl(d);if(I===null)return w;var R=re(I,g);if(R.length<=0)return w;if(w.length<=0)return R;for(var B=new m,W=[],V=0,q=w;V<q.length;V++){var ae=q[V],fe=B.has(ae);fe||(B.add(ae),W.push(ae))}for(var ge=0,$e=R;ge<$e.length;ge++){var ae=$e[ge],fe=B.has(ae);fe||(B.add(ae),W.push(ae))}return W}function ne(d,g){var w=[],I=k(d,g,!1);if(te(I))return w;for(var R=I.keys(),B=yt(R),W=0;;){var V=Vs(B);if(!V)return w.length=W,w;var q=Ws(V);try{w[W]=q}catch(ae){try{_u(B)}finally{throw ae}}W++}}function X(d){if(d===null)return 1;switch(typeof d){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function te(d){return d===void 0}function ue(d){return d===null}function se(d){return typeof d=="symbol"}function de(d){return typeof d=="object"?d!==null:typeof d=="function"}function nt(d,g){switch(X(d)){case 0:return d;case 1:return d;case 2:return d;case 3:return d;case 4:return d;case 5:return d}var w=g===3?"string":g===5?"number":"default",I=dt(d,i);if(I!==void 0){var R=I.call(d,w);if(de(R))throw new TypeError;return R}return me(d,w==="default"?"number":w)}function me(d,g){if(g==="string"){var w=d.toString;if(Y(w)){var I=w.call(d);if(!de(I))return I}var R=d.valueOf;if(Y(R)){var I=R.call(d);if(!de(I))return I}}else{var R=d.valueOf;if(Y(R)){var I=R.call(d);if(!de(I))return I}var B=d.toString;if(Y(B)){var I=B.call(d);if(!de(I))return I}}throw new TypeError}function kt(d){return!!d}function Pr(d){return""+d}function Q(d){var g=nt(d,3);return se(g)?g:Pr(g)}function ve(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function Y(d){return typeof d=="function"}function ye(d){return typeof d=="function"}function Ne(d){switch(X(d)){case 3:return!0;case 4:return!0;default:return!1}}function dt(d,g){var w=d[g];if(w!=null){if(!Y(w))throw new TypeError;return w}}function yt(d){var g=dt(d,o);if(!Y(g))throw new TypeError;var w=g.call(d);if(!de(w))throw new TypeError;return w}function Ws(d){return d.value}function Vs(d){var g=d.next();return g.done?!1:g}function _u(d){var g=d.return;g&&g.call(d)}function rl(d){var g=Object.getPrototypeOf(d);if(typeof d!="function"||d===l||g!==l)return g;var w=d.prototype,I=w&&Object.getPrototypeOf(w);if(I==null||I===Object.prototype)return g;var R=I.constructor;return typeof R!="function"||R===d?g:R}function tH(){var d={},g=[],w=function(){function W(V,q,ae){this._index=0,this._keys=V,this._values=q,this._selector=ae}return W.prototype["@@iterator"]=function(){return this},W.prototype[o]=function(){return this},W.prototype.next=function(){var V=this._index;if(V>=0&&V<this._keys.length){var q=this._selector(this._keys[V],this._values[V]);return V+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:q,done:!1}}return{value:void 0,done:!0}},W.prototype.throw=function(V){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),V},W.prototype.return=function(V){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:V,done:!0}},W}();return function(){function W(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty(W.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),W.prototype.has=function(V){return this._find(V,!1)>=0},W.prototype.get=function(V){var q=this._find(V,!1);return q>=0?this._values[q]:void 0},W.prototype.set=function(V,q){var ae=this._find(V,!0);return this._values[ae]=q,this},W.prototype.delete=function(V){var q=this._find(V,!1);if(q>=0){for(var ae=this._keys.length,fe=q+1;fe<ae;fe++)this._keys[fe-1]=this._keys[fe],this._values[fe-1]=this._values[fe];return this._keys.length--,this._values.length--,V===this._cacheKey&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},W.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},W.prototype.keys=function(){return new w(this._keys,this._values,I)},W.prototype.values=function(){return new w(this._keys,this._values,R)},W.prototype.entries=function(){return new w(this._keys,this._values,B)},W.prototype["@@iterator"]=function(){return this.entries()},W.prototype[o]=function(){return this.entries()},W.prototype._find=function(V,q){return this._cacheKey!==V&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=V)),this._cacheIndex<0&&q&&(this._cacheIndex=this._keys.length,this._keys.push(V),this._values.push(void 0)),this._cacheIndex},W}();function I(W,V){return W}function R(W,V){return V}function B(W,V){return[W,V]}}function uA(){return function(){function d(){this._map=new f}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(g){return this._map.has(g)},d.prototype.add=function(g){return this._map.set(g,g),this},d.prototype.delete=function(g){return this._map.delete(g)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.values()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[o]=function(){return this.keys()},d}()}function be(){var d=16,g=c.create(),w=I();return function(){function q(){this._key=I()}return q.prototype.has=function(ae){var fe=R(ae,!1);return fe!==void 0?c.has(fe,this._key):!1},q.prototype.get=function(ae){var fe=R(ae,!1);return fe!==void 0?c.get(fe,this._key):void 0},q.prototype.set=function(ae,fe){var ge=R(ae,!0);return ge[this._key]=fe,this},q.prototype.delete=function(ae){var fe=R(ae,!1);return fe!==void 0?delete fe[this._key]:!1},q.prototype.clear=function(){this._key=I()},q}();function I(){var q;do q="@@WeakMap@@"+V();while(c.has(g,q));return g[q]=!0,q}function R(q,ae){if(!r.call(q,w)){if(!ae)return;Object.defineProperty(q,w,{value:c.create()})}return q[w]}function B(q,ae){for(var fe=0;fe<ae;++fe)q[fe]=Math.random()*255|0;return q}function W(q){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(q)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(q)):B(new Uint8Array(q),q):B(new Array(q),q)}function V(){var q=W(d);q[6]=q[6]&79|64,q[8]=q[8]&191|128;for(var ae="",fe=0;fe<d;++fe){var ge=q[fe];(fe===4||fe===6||fe===8)&&(ae+="-"),ge<16&&(ae+="0"),ae+=ge.toString(16).toLowerCase()}return ae}}function Hi(d){return d.__=void 0,delete d.__,d}})})(pk||(pk={}));var Sh=require("fs"),ir=A(J()),Gy=A(require("path"));var z=class{constructor(){this._listeners=new Set;this.event=(e,r,n)=>{let i={listener:e,thisArg:r};this._listeners.add(i);let o={dispose:()=>{o.dispose=()=>{},this._listeners.delete(i)}};return n&&n.push(o),o}}get size(){return this._listeners.size}fire(e){let r=!this._deliveryQueue;this._deliveryQueue||(this._deliveryQueue=[]);for(let n of this._listeners)this._deliveryQueue.push({data:n,event:e});if(r){for(let n=0;n<this._deliveryQueue.length;n++){let{data:i,event:o}=this._deliveryQueue[n];i.listener.call(i.thisArg,o)}this._deliveryQueue=void 0}}dispose(){this._listeners.clear(),this._deliveryQueue&&(this._deliveryQueue=[])}},ih=class{constructor(){this.map=new Map;this.listeners=this.map}listen(e,r){let n=this.map.get(e);n||(n=new z,this.map.set(e,n));let i=n.event(r);return{dispose:Ae(()=>{i.dispose(),n?.size===0&&this.map.delete(e)})}}emit(e,r){this.listeners.get(e)?.fire(r)}};var xu=A(J()),ah=A(require("path"));var mk=require("crypto"),gk=A(rI()),Hk=require("os"),ke=A(require("path"));var es=A(require("fs")),fk=A(require("util"));async function Pu({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}async function MI(t,e,r){try{await t.copyFile(e,r)}catch(n){try{if(await Pu(t,r))await t.unlink(r),await t.copyFile(e,r);else throw n}catch{throw n}}}async function wn({stat:t},e){if(e)try{return await t(e)}catch{return}}async function dk({lstat:t},e){if(e)try{return await t(e)}catch{return}}async function hk({copyFile:t,rename:e,unlink:r},n,i){try{await e(n,i)}catch{await t(n,i),await r(n)}}function py(t){return new Promise(e=>{es.readFile(t,"utf8",async(r,n)=>{e(r?"":n)})})}var tAe=fk.promisify(es.writeFile);var Mr=Symbol("FsUtils"),vn=class{constructor(e){this.fs=e}realPath(e){return this.fs.realpath(e)}async exists(e){try{return await this.fs.access(e,es.constants.F_OK),!0}catch{return!1}}readFile(e){return this.fs.readFile(e)}},RI=class{constructor(e){this.dap=e}async realPath(){throw new Error("not implemented")}async exists(e){try{let{doesExists:r}=await this.dap.remoteFileExistsRequest({localFilePath:e});return r}catch{return!1}}readFile(){throw new Error("not implemented")}},ly=class{constructor(e,r,n){this.remoteFilePrefix=e;this.localFsUtils=r;this.remoteFsUtils=n}static create(e,r,n){let i=new vn(r);return e!==void 0?new this(e.toLowerCase(),i,new RI(n)):i}async exists(e){return this.selectFs(e).exists(e)}async readFile(e){return this.selectFs(e).readFile(e)}async realPath(e){return this.selectFs(e).realPath(e)}selectFs(e){return e.toLowerCase().startsWith(this.remoteFilePrefix)?this.remoteFsUtils:this.localFsUtils}};var $te=process.platform==="win32"?"\\\\.\\pipe\\":(0,Hk.tmpdir)(),Rte=0,fy=()=>ke.join($te,`node-cdp.${process.pid}-${(0,mk.randomBytes)(4).toString("hex")}-${Rte++}.sock`);async function dy(t,e,r){let n;if(process.platform==="win32"){let i=r.WINDIR||"C:\\Windows";n=ke.join(i,"System32","where.exe")}else n="/usr/bin/which";try{if(await wn(t,n)){let o=(await(0,gk.default)(n,[e],{env:ol(r)})).stdout.split(/\r?\n/);if(process.platform==="win32"){let s=String(r.PATHEXT||".exe").toUpperCase().split(";");for(let a of o){let u=ke.extname(a).toUpperCase();if(u&&s.includes(u))return a}}else if(o.length>0)return o[0];return}return e}catch{}}async function yk(t,e,r){if(e){if(process.platform==="win32"&&!ke.extname(e)){let n=r.lookup("PATHEXT");if(n){let i=n.split(";");for(let o of i){let s=e+o;if(await wn(t,s))return s}}}if(await wn(t,e))return e}}var bk=t=>t.includes(`.asar${ke.sep}`);function Js(...t){return ke.posix.isAbsolute(t[0])?ze(ke.posix.join(...t)):ke.win32.isAbsolute(t[0])?ke.win32.join(...t):ke.join(...t)}function _n(...t){return ke.posix.isAbsolute(t[0])?ke.posix.resolve(...t):ke.win32.isAbsolute(t[0])?ke.win32.resolve(...t):ke.resolve(...t)}function sh(t,e){return ke.posix.isAbsolute(t)?ke.posix.relative(t,e):ke.win32.isAbsolute(t)?ke.win32.relative(t,e):ke.relative(t,e)}var Mte=/\/|\\/,oh="file:///",vk=t=>t.startsWith(oh)&&t[oh.length+1]===":",kI=t=>t.split(Mte);function OI(t,e=!1){if(!t)return t;if(vk(t)){let r=oh.length;t=oh+t[r].toLowerCase()+t.substr(r+1)}else gy(t)&&(t=(e?t[0].toUpperCase():t[0].toLowerCase())+t.substr(1));return t}function Lt(t,e=!1){if(!t)return t;if(t=OI(t,e),vk(t)){let r=oh.length;t=t.substr(0,r+1)+t.substr(r+1).replace(/\//g,"\\")}else gy(t)&&(t=t.replace(/\//g,"\\"));return t}function ze(t){return t.replace(/\\\//g,"/").replace(/\\/g,"/")}var hy=(t,e)=>{let r=ke.relative(t,e);return r.length&&!ke.isAbsolute(r)&&!r.startsWith("..")},my=(t,e)=>{let r=ke.relative(t,e);return!ke.isAbsolute(r)&&!r.startsWith("..")},FI=t=>t.startsWith("\\\\"),gy=t=>/^[A-Za-z]:/.test(t)||FI(t);var vl=class{get empty(){return this.patterns.length===0}constructor({rootPath:e,patterns:r}){!e||!r?(this.rootPath="",this.patterns=[]):(this.rootPath=e,this.patterns=r.map(n=>{let i=n.startsWith("!");return{negated:i,pattern:n.slice(i?1:0)}}))}*explode(){for(let e=0;e<this.patterns.length;e++){let{negated:r,pattern:n}=this.patterns[e];if(r)continue;let i=ah.resolve(this.rootPath,n).split(/[\\/]/g),o=i.findIndex(u=>u.includes("*"));if(o===-1){yield{cwd:i.slice(0,-1).join("/"),pattern:i[i.length-1],negations:[]};continue}let s=i.slice(0,o).join("/"),a=[];for(let u=e+1;u<this.patterns.length;u++){let{negated:c,pattern:l}=this.patterns[u];if(c)if(l.startsWith("**"))a.push(ze(l));else{let p=ah.relative(s,ah.resolve(this.rootPath,l));p.startsWith("..")||a.push(ze(p))}}yield{cwd:s,negations:a,pattern:i.slice(o).join("/")}}}};vl=T([(0,xu.injectable)()],vl);var co=class extends vl{constructor({rootPath:e,outFiles:r}){super({rootPath:e,patterns:r})}};co=T([(0,xu.injectable)(),v(0,(0,xu.inject)(Me))],co);var ts=class extends vl{constructor(e){super({rootPath:e.rootPath,patterns:"vueComponentPaths"in e?e.vueComponentPaths:[]})}};ts=T([(0,xu.injectable)(),v(0,(0,xu.inject)(Me))],ts);var _k=require("crypto"),Ak=require("os"),Ik=A(require("path"));var uh=require("fs"),wk=require("path"),yy=require("zlib"),Ote=(t,e)=>e instanceof Error?{message:e.message,stack:e.stack}:typeof e=="bigint"?e.toString():e,Hy=class{constructor(e,r){this.file=e;this.dap=r;try{(0,uh.mkdirSync)((0,wk.dirname)(e),{recursive:!0})}catch{}e.endsWith(".gz")?(this.stream=(0,yy.createGzip)(),this.stream.pipe((0,uh.createWriteStream)(e))):this.stream=(0,uh.createWriteStream)(e)}async setup(){this.dap?.output({category:"console",output:`Verbose logs are written to:
${this.file}
`})}dispose(){this.stream&&(this.stream.end(),this.stream=void 0)}write(e){this.stream&&(this.stream.write(JSON.stringify(e,Ote)+`
`),this.stream.flush?.(yy.constants.Z_SYNC_FLUSH))}};var Fte={["runtime"]:null,["runtime.sourcecreate"]:null,["runtime.assertion"]:null,["runtime.launch"]:null,["runtime.target"]:null,["runtime.welcome"]:null,["runtime.exception"]:null,["runtime.sourcemap"]:null,["runtime.breakpoints"]:null,["sourcemap.parsing"]:null,["perf.function"]:null,["cdp.send"]:null,["cdp.receive"]:null,["dap.send"]:null,["dap.receive"]:null,["internal"]:null,["proxyActivity"]:null},fAe=Object.keys(Fte),ce=Symbol("ILogger");function BI(t,e=(0,Ak.tmpdir)()){if(t===!1)return{stdio:!1,logFile:null};let r={stdio:!0,logFile:Ik.join(e,`vscode-debugadapter-${(0,_k.randomBytes)(4).toString("hex")}.json.gz`)};return t===!0?r:{...r,...t}}function Sk(t,e){let r=BI(e),n={sinks:[]};return r.logFile&&n.sinks.push(new Hy(r.logFile,t)),n}var go=A(J()),V1=A(Iy());var Sy=class extends Error{constructor(r,n,i){super(`Unexpected ${r} response from ${n}: ${i??"<empty body>"}`);this.statusCode=r;this.url=n;this.body=i}},Tu=Symbol("IResourceProvider");var Te=t=>isFinite(t)?new Promise(e=>setTimeout(e,t)):new Promise(()=>{}),Xk=(t,e)=>{let r=setTimeout(t,e);return{dispose:()=>clearTimeout(r)}};function po(t){return new Promise((e,r)=>{let n=t.length;for(let i of t)i.then(o=>{o?(e(o),n=-1):--n===0&&e(void 0)}).catch(r)})}function Ue(){let t=null,e=null,r=!1,n,i=new Promise((o,s)=>{t=a=>{r=!0,n=a,o(a)},e=a=>{r=!0,s(a)}});return{resolve:t,reject:e,promise:i,get settledValue(){return n},hasSettled:()=>r}}var st=A(_e());var ee=class extends Error{constructor(r){super("__errorMarker"in r?r.error.format:r.format);this._cause="__errorMarker"in r?r.error:r}get cause(){return this._cause}};function Jk(t,e){t.output({category:"console",output:e+`
`})}function Xe(t,e=9222){return{__errorMarker:!0,error:{id:e,format:t,showUser:!1}}}function Ye(t,e=9223){return{__errorMarker:!0,error:{id:e,format:t,showUser:!0}}}var eS=()=>Ye(st.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvs', 'nvm' or 'fnm' to be installed."),9224),Yk=()=>Ye(st.t("Attribute 'runtimeVersion' with a flavor/architecture requires 'nvs' to be installed."),9225),Qk=()=>Ye(st.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvm-windows' or 'nvs'."),9226),tS=(t,e)=>Ye(st.t("Node.js version '{0}' not installed using version manager {1}.",t,e),9226),Zk=t=>Ye(st.t("Cannot launch debug target in terminal ({0}).",t),9227),e1=t=>Ye(st.t("Can't load environment variables from file ({0}).",t),9228),t1=t=>Ye(st.t("The configured `cwd` {0} does not exist.",t),9245),rS=(t,e)=>Ye(st.t(`Can't find Node.js binary "{0}": {1}. Make sure Node.js is installed and in your PATH, or set the "runtimeExecutable" in your launch.json`,t,e),9229),r1=(t,e)=>Ye(st.t('The Node version in "{0}" is outdated (version {1}), we require at least Node 8.x.',e,t),9230),nS=t=>Ye(st.t('Invalid hit condition "{0}". Expected an expression like "> 42" or "== 2".',t),9231),Sl=()=>Ye(st.t("An error occurred taking a profile from the target."),9235),n1=()=>Ye(st.t("Please stop the running profile before starting a new one."),9236),i1=t=>Xe(t,9238),Ey=(t,e,r)=>Ye(e==="*"&&!r.length?st.t('Unable to find an installation of the browser on your system. Try installing it, or providing an absolute path to the browser in the "runtimeExecutable" in your launch.json.'):st.t('Unable to find {0} version {1}. Available auto-discovered versions are: {2}. You can set the "runtimeExecutable" in your launch.json to one of these, or provide an absolute path to the browser executable.',t,e,JSON.stringify([...new Set(r)])),9233),o1=t=>Ye(st.t('Unable to launch browser: "{0}"',t.message),9240),mh=t=>Ye(t??st.t("Unable to attach to browser"),9242),Dy=()=>Ye(st.t('Target page not found. You may need to update your "urlFilter" to match the page you want to debug.'),9241);var s1=()=>Xe(st.t("Variables not available in async stacks"),9234),ea=(t,e)=>Ye(st.t("Syntax error setting breakpoint with condition {0} on line {1}: {2}",JSON.stringify(t.condition),t.line,e),9237),iS=()=>Xe(st.t("Thread not found"),9244),Cy=(t,e)=>Ye(st.t("Could not read source map for {0}: {1}",t,e)),a1=()=>Ye(st.t("UWP webview debugging is not available on your platform.")),u1=()=>Ye(st.t("Could not connect to any UWP Webview pipe. Make sure your webview is hosted in debug mode, and that the `pipeName` in your `launch.json` is correct.")),c1=t=>typeof t=="object"&&!!t&&"__errorMarker"in t,l1=(t,e)=>t instanceof ee&&t.cause.id===e,p1=t=>Ye(st.t("The browser process exited with code {0} before connecting to the debug server. Make sure the `runtimeExecutable` is configured correctly and that it can run without errors.",t));var f1=new WeakSet;var mre="Request",gre=t=>t.endsWith("Request"),on=Symbol("IDapApi"),Dl=Symbol("IRootDapApi"),El=class{constructor(e,r){this.transport=e;this.logger=r;this._pendingRequests=new Map;this._requestHandlers=new Map;this._eventListeners=new Map;this.disposables=[];this._initialized=Ue();this.closed=!1;this._sequence=1,this.disposables.push(this.transport.messageReceived(n=>this._onMessage(n.message,n.receivedTime))),this._dap=this._createApi()}get initializedBlocker(){return this._initialized.promise}attachTelemetry(e){this.telemetryReporter=e,e.attachDap(this._dap)}dap(){return this._dap}_createApi(){return new Proxy({},{get:(e,r)=>{if(r!=="then")return r==="on"?(n,i)=>(this._requestHandlers.set(n,i),()=>this._requestHandlers.delete(n)):r==="off"?n=>this._requestHandlers.delete(n):n=>{if(gre(r))return this.enqueueRequest(r.slice(0,-mre.length),n);this._send({seq:0,type:"event",event:r,body:n})}}})}createTestApi(){let e=(i,o)=>{let s=this._eventListeners.get(i);s||(s=new Set,this._eventListeners.set(i,s)),s.add(o)},r=(i,o)=>{let s=this._eventListeners.get(i);s&&s.delete(o)},n=(i,o)=>new Promise(s=>{let a=u=>{o&&!o(u)||(r(i,a),s(u))};e(i,a)});return new Proxy({},{get:(i,o)=>o==="on"?e:o==="off"?r:o==="once"?n:s=>this.enqueueRequest(o,s)})}enqueueRequest(e,r){return new Promise(n=>{let i={seq:0,type:"request",command:e,arguments:r||{}};this._send(i),this._pendingRequests.set(i.seq,n)})}stop(){this.closed=!0,this.transport.close()}_send(e,r){if(this.closed)this.logger.warn("dap.send","Not sending message because the connection has ended",e),r?.();else{e.seq=this._sequence++;let n=e.type!=="event"||!f1.has(e.body);this.transport.send(e,n,r)}}async _onMessage(e,r){if(e.type==="request"){let n={seq:0,type:"response",request_seq:e.seq,command:e.command,success:!0};try{let i=this._requestHandlers.get(e.command);if(!i)console.error(`Unknown request: ${e.command}`);else{let o=await i(e.arguments);if(c1(o))this._send({...n,success:!1,message:o.error.format,body:{error:o.error}});else{let s={...n,body:o};n.command==="initialize"?(this._send(s),this._initialized.resolve(this)):n.command==="disconnect"?this._send({...n,body:o},()=>{this.stop()}):this._send(s)}}this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms)}catch(i){i instanceof ee?this._send({...n,success:!1,body:{error:i.cause}}):(console.error(i),this._send({...n,success:!1,body:{error:{id:9221,format:`Error processing ${e.command}: ${i.stack||i.message}`,showUser:!1,sendTelemetry:!1}}})),this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms,i)}}if(e.type==="event"){let n=this._eventListeners.get(e.event)||new Set;for(let i of n)i(e.body)}if(e.type==="response"){let n=this._pendingRequests.get(e.request_seq);if(!this.logger.assert(n,`Expected callback for request sequence ID ${e.request_seq}`))return;if(this._pendingRequests.delete(e.request_seq),e.success)n(e.body);else{let i=e.body?.error?.format;n(i||e.message||"Unknown error")}}}};var xy=class{constructor(e,r){this.key=e;this.value=r}toString(){return`${this.key}: ${this.value}`}},fo=class{constructor(e,r){this.projection=e;this.initialContents=r;let n=Array.from(r||[]).map(i=>[this.projection(i[0]),new xy(i[0],i[1])]);this.projectionToKeyAndValue=new Map(n)}clear(){this.projectionToKeyAndValue.clear()}delete(e){let r=this.projection(e);return this.projectionToKeyAndValue.delete(r)}forEach(e,r){this.projectionToKeyAndValue.forEach(n=>{e.call(r,n.value,n.key,this)},r)}get(e){let r=this.projection(e),n=this.projectionToKeyAndValue.get(r);return n?n.value:void 0}has(e){return this.projectionToKeyAndValue.has(this.projection(e))}set(e,r){return this.projectionToKeyAndValue.set(this.projection(e),new xy(e,r)),this}get size(){return this.projectionToKeyAndValue.size}*entries(){for(let e of this.projectionToKeyAndValue.values())yield[e.key,e.value]}*keys(){for(let e of this.projectionToKeyAndValue.values())yield e.key}*values(){for(let e of this.projectionToKeyAndValue.values())yield e.value}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return JSON.stringify(Array.from(this.entries()))}toString(){return`MapUsingProjection<${JSON.stringify([...this.entries()])}>`}};var Ze=Symbol("ISourcePathResolver");var N1=require("dns"),An=A(require("path")),ns=require("url");var R1=require("url");var L1=require("./vendor/acorn.js"),T1=require("crypto");var ky=require("./vendor/acorn.js");var{stringify:Hre}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var Ly={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},_i=17,yre={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:_i,ClassExpression:_i,FunctionExpression:_i,ObjectExpression:_i,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function Cl(t,e){let{generator:r}=t;if(t.write("("),e!=null&&e.length>0){r[e[0].type](e[0],t);let{length:n}=e;for(let i=1;i<n;i++){let o=e[i];t.write(", "),r[o.type](o,t)}}t.write(")")}function b1(t,e,r,n){let i=t.expressionsPrecedence[e.type];if(i===_i)return!0;let o=t.expressionsPrecedence[r.type];return i!==o?!n&&i===15&&o===14&&r.operator==="**"||i<o:i!==13&&i!==14?!1:e.operator==="**"&&r.operator==="**"?!n:n?Ly[e.operator]<=Ly[r.operator]:Ly[e.operator]<Ly[r.operator]}function Ty(t,e,r,n){let{generator:i}=t;b1(t,e,r,n)?(t.write("("),i[e.type](e,t),t.write(")")):i[e.type](e,t)}function bre(t,e,r,n){let i=e.split(`
`),o=i.length-1;if(t.write(i[0].trim()),o>0){t.write(n);for(let s=1;s<o;s++)t.write(r+i[s].trim()+n);t.write(r+i[o].trim())}}function Vr(t,e,r,n){let{length:i}=e;for(let o=0;o<i;o++){let s=e[o];t.write(r),s.type[0]==="L"?t.write("// "+s.value.trim()+`
`,s):(t.write("/*"),bre(t,s.value,r,n),t.write("*/"+n))}}function vre(t){let e=t;for(;e!=null;){let{type:r}=e;if(r[0]==="C"&&r[1]==="a")return!0;if(r[0]==="M"&&r[1]==="e"&&r[2]==="m")e=e.object;else return!1}}function oS(t,e){let{generator:r}=t,{declarations:n}=e;t.write(e.kind+" ");let{length:i}=n;if(i>0){r.VariableDeclarator(n[0],t);for(let o=1;o<i;o++)t.write(", "),r.VariableDeclarator(n[o],t)}}var d1,h1,m1,g1,H1,y1,wre={Program(t,e){let r=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:i}=e;i&&t.comments!=null&&Vr(e,t.comments,r,n);let o=t.body,{length:s}=o;for(let a=0;a<s;a++){let u=o[a];i&&u.comments!=null&&Vr(e,u.comments,r,n),e.write(r),this[u.type](u,e),e.write(n)}i&&t.trailingComments!=null&&Vr(e,t.trailingComments,r,n)},BlockStatement:y1=function(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;e.write("{");let s=t.body;if(s!=null&&s.length>0){e.write(n),i&&t.comments!=null&&Vr(e,t.comments,o,n);let{length:a}=s;for(let u=0;u<a;u++){let c=s[u];i&&c.comments!=null&&Vr(e,c.comments,o,n),e.write(o),this[c.type](c,e),e.write(n)}e.write(r)}else i&&t.comments!=null&&(e.write(n),Vr(e,t.comments,o,n),e.write(r));i&&t.trailingComments!=null&&Vr(e,t.trailingComments,o,n),e.write("}"),e.indentLevel--},ClassBody:y1,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){let r=e.expressionsPrecedence[t.expression.type];r===_i||r===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e;e.indentLevel++;let o=r+e.indent,s=o+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+n);let{cases:a}=t,{length:u}=a;for(let c=0;c<u;c++){let l=a[c];i&&l.comments!=null&&Vr(e,l.comments,o,n),l.test?(e.write(o+"case "),this[l.test.type](l.test,e),e.write(":"+n)):e.write(o+"default:"+n);let{consequent:p}=l,{length:f}=p;for(let m=0;m<f;m++){let h=p[m];i&&h.comments!=null&&Vr(e,h.comments,s,n),e.write(s),this[h.type](h,e),e.write(n)}}e.indentLevel-=2,e.write(r+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){let{handler:r}=t;r.param==null?e.write(" catch "):(e.write(" catch ("),this[r.param.type](r.param,e),e.write(") ")),this[r.body.type](r.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){let{init:r}=t;r.type[0]==="V"?oS(e,r):this[r.type](r,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:d1=function(t,e){e.write(`for ${t.await?"await ":""}(`);let{left:r}=t;r.type[0]==="V"?oS(e,r):this[r.type](r,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:d1,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:h1=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),Cl(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:h1,VariableDeclaration(t,e){oS(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");let{superClass:r}=t,{type:n}=r,i=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(i===_i||i<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");let{specifiers:r}=t,{length:n}=r,i=0;if(n>0){for(;i<n;){i>0&&e.write(", ");let o=r[i],s=o.type[6];if(s==="D")e.write(o.local.name,o),i++;else if(s==="N")e.write("* as "+o.local.name,o),i++;else break}if(i<n){for(e.write("{");;){let o=r[i],{name:s}=o.imported;if(e.write(s,o),s!==o.local.name&&e.write(" as "+o.local.name),++i<n)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(t.source,e),e.write(";")},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");let{specifiers:r}=t,{length:n}=r;if(n>0)for(let i=0;;){let o=r[i],{name:s}=o.local;if(e.write(s,o),s!==o.exported.name&&e.write(" as "+o.exported.name),++i<n)e.write(", ");else break}e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),e.write(";")}},ExportAllDeclaration(t,e){t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");let r=t.kind[0];(r==="g"||r==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),Cl(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);let{params:r}=t;r!=null&&(r.length===1&&r[0].type[0]==="I"?e.write(r[0].name,r[0]):Cl(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:m1=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:m1,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),Ty(e,t.argument,t)},TemplateLiteral(t,e){let{quasis:r,expressions:n}=t;e.write("`");let{length:i}=n;for(let s=0;s<i;s++){let a=n[s],u=r[s];e.write(u.value.raw,u),e.write("${"),this[a.type](a,e),e.write("}")}let o=r[r.length-1];e.write(o.value.raw,o),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){Ty(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:H1=function(t,e){if(e.write("["),t.elements.length>0){let{elements:r}=t,{length:n}=r;for(let i=0;;){let o=r[i];if(o!=null&&this[o.type](o,e),++i<n)e.write(", ");else{o==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:H1,ObjectExpression(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;if(e.write("{"),t.properties.length>0){e.write(n),i&&t.comments!=null&&Vr(e,t.comments,o,n);let s=","+n,{properties:a}=t,{length:u}=a;for(let c=0;;){let l=a[c];if(i&&l.comments!=null&&Vr(e,l.comments,o,n),e.write(o),this[l.type](l,e),++c<u)e.write(s);else break}e.write(n),i&&t.trailingComments!=null&&Vr(e,t.trailingComments,o,n),e.write(r+"}")}else i?t.comments!=null?(e.write(n),Vr(e,t.comments,o,n),t.trailingComments!=null&&Vr(e,t.trailingComments,o,n),e.write(r+"}")):t.trailingComments!=null?(e.write(n),Vr(e,t.trailingComments,o,n),e.write(r+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){t.static&&e.write("static "),this[t.key.type](t.key,e),e.write(" = "),this[t.value.type](t.value,e)},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){let{properties:r}=t,{length:n}=r;for(let i=0;this[r[i].type](r[i],e),++i<n;)e.write(", ")}e.write("}")},SequenceExpression(t,e){Cl(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){let{operator:r,argument:n,argument:{type:i}}=t;e.write(r);let o=b1(e,n,t);!o&&(r.length>1||i[0]==="U"&&(i[1]==="n"||i[1]==="p")&&n.prefix&&n.operator[0]===r&&(r==="+"||r==="-"))&&e.write(" "),o?(e.write(r.length>1?" (":"("),this[i](n,e),e.write(")")):this[i](n,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:g1=function(t,e){let r=t.operator==="in";r&&e.write("("),Ty(e,t.left,t,!1),e.write(" "+t.operator+" "),Ty(e,t.right,t,!0),r&&e.write(")")},LogicalExpression:g1,ConditionalExpression(t,e){let{test:r}=t,n=e.expressionsPrecedence[r.type];n===_i||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[r.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");let r=e.expressionsPrecedence[t.callee.type];r===_i||r<e.expressionsPrecedence.CallExpression||vre(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),Cl(e,t.arguments)},CallExpression(t,e){let r=e.expressionsPrecedence[t.callee.type];r===_i||r<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),Cl(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){let r=e.expressionsPrecedence[t.object.type];r===_i||r<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write(Hre(t.value),t)},RegExpLiteral(t,e){let{regex:r}=t;e.write(`/${r.pattern}/${r.flags}`,t)}},_re={};var sS=class{constructor(e){let r=e??_re;this.output="",r.output!=null?(this.output=r.output,this.write=this.writeToStream):this.output="",this.generator=r.generator!=null?r.generator:wre,this.expressionsPrecedence=r.expressionsPrecedence!=null?r.expressionsPrecedence:yre,this.indent=r.indent!=null?r.indent:"  ",this.lineEnd=r.lineEnd!=null?r.lineEnd:`
`,this.indentLevel=r.startingIndentLevel!=null?r.startingIndentLevel:0,this.writeComments=r.comments?r.comments:!1,r.sourceMap!=null&&(this.write=r.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=r.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:r.sourceMap.file||r.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,r){this.output+=e,this.map(e,r)}writeToStreamAndMap(e,r){this.output.write(e),this.map(e,r)}map(e,r){if(r!=null){let{type:o}=r;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(r.loc!=null){let{mapping:s}=this;s.original=r.loc.start,s.name=r.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof r.value=="string"){let{length:s}=e,{column:a,line:u}=this;for(let c=0;c<s;c++)e[c]===`
`?(a=0,u++):a++;this.column=a,this.line=u;return}}let{length:n}=e,{lineEnd:i}=this;n>0&&(this.lineEndSize>0&&(i.length===1?e[n-1]===i:e.endsWith(i))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}};function rs(t,e){let r=new sS(e);return r.generator[t.type](t,r),r.output}var Pl=A(gh()),Hh=A(Iy());var w1=require("./vendor/acorn.js"),$y=require("./vendor/acorn-loose.js"),aS={ecmaVersion:"latest",locations:!0,allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReserved:!0,allowReturnOutsideFunction:!0},ta=t=>t.start,uS=t=>t.end,_1=(t,e)=>t.slice(ta(e),uS(e)),ho=(t,e=!1)=>(e?w1.parse:$y.parse)(t,aS),Ry=t=>{let e=ho(t);for(let r of e.body)r.type==="FunctionDeclaration"&&r.id&&(0,$y.isDummy)(r.id)&&(r.id=null);return e.body};function A1(t,e,r){return e.length>1||e[0].type!=="FunctionDeclaration"?E1(t,e,!0,r):I1(t,[{type:"ReturnStatement",argument:{type:"CallExpression",optional:!1,arguments:[{type:"ThisExpression"},...t.map(n=>({type:"Identifier",name:n}))],callee:{type:"MemberExpression",property:{type:"Identifier",name:"call"},computed:!1,optional:!1,object:{type:"FunctionExpression",params:e[0].params,body:e[0].body}}}}],!0,r)}var I1=(t,e,r,n)=>{let i={type:"Identifier",name:"e"},s=n?[{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:i,body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"stack"},computed:!1,optional:!1},operator:"||",right:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"message"},computed:!1,optional:!1}},operator:"||",right:{type:"CallExpression",callee:{type:"Identifier",name:"String"},arguments:[i],optional:!1}}}]}}}]:e;return r?{type:"FunctionExpression",id:{type:"Identifier",name:"_generatedCode"},params:t.map(a=>({type:"Identifier",name:a})),body:{type:"BlockStatement",body:s}}:{type:"ArrowFunctionExpression",params:t.map(a=>({type:"Identifier",name:a})),expression:!1,body:{type:"BlockStatement",body:s}}},Are=(t,e)=>({type:"CallExpression",arguments:t.map(r=>({type:"Identifier",name:r})),callee:e,optional:!1}),S1=(t,e,r)=>Are(t,E1(t,e,r,!0));function E1(t,e,r,n){let i=e[e.length-1];if(i.type!=="ReturnStatement"){let o=Ire(i);o&&(e=[...e.slice(0,-1),{type:"ReturnStatement",argument:o}])}return I1(t,e,r,n)}function Ire(t){switch(t.type){case"ExpressionStatement":return t.expression;case"BlockStatement":return{type:"CallExpression",arguments:[],callee:{type:"ArrowFunctionExpression",params:[],expression:!1,body:t},optional:!1};case"ReturnStatement":return t.argument||void 0;default:return}}var Ai={StaticBlock:["body"]};var cS=class{constructor(e,r,n,i,o){this.original=e;this.metadata=r;this.actualRoot=n;this.actualSources=i;this.hasNames=o;this.sourceActualToOriginal=new Map;this.sourceOriginalToActual=new Map;this.id=cS.idCounter++;if(i.length!==e.sources.length)throw new Error("Expected actualSources.length === original.source.length");for(let s=0;s<i.length;s++)this.sourceActualToOriginal.set(i[s],e.sources[s]),this.sourceOriginalToActual.set(e.sources[s],i[s])}get sources(){return this.actualSources.slice()}get sourceRoot(){return this.actualRoot}computedSourceUrl(e){return Lt(My(gr(this.metadata.sourceMapUrl)?this.metadata.compiledPath:this.metadata.sourceMapUrl,this.sourceRoot+e))}computeColumnSpans(){this.original.computeColumnSpans()}originalPositionFor(e){let r=this.original.originalPositionFor(e);return r.source&&(r.source=this.sourceOriginalToActual.get(r.source)??r.source),r}generatedPositionFor(e){return this.original.generatedPositionFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}allGeneratedPositionsFor(e){return this.original.allGeneratedPositionsFor({...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}hasContentsOfAllSources(){return this.original.hasContentsOfAllSources()}sourceContentFor(e,r){return this.original.sourceContentFor(this.sourceActualToOriginal.get(e)??e,r)}eachMapping(e,r,n){return this.original.eachMapping(e,r,n)}destroy(){this.original.destroy()}},$u=cS;$u.idCounter=0;async function C1(t,e,r,n){let i=ky.Parser.parse(e,{locations:!0,ecmaVersion:"latest"}),o=new Hh.SourceMapGenerator({file:t}),s=rs(i,{sourceMap:{setSourceContent:(a,u)=>o.setSourceContent(a,u),applySourceMap:(a,u,c)=>o.applySourceMap(a,u,c),toJSON:()=>o.toJSON(),toString:()=>o.toString(),addMapping:a=>o.addMapping({generated:a.original,original:{column:a.generated.column,line:a.generated.line},source:t,name:a.name})}});return o.setSourceContent(t,s),new $u(await Hh.SourceMapConsumer.fromSourceMap(o),{sourceMapUrl:n,compiledPath:r},"",[t],!1)}function P1(t){let e;try{e=ho(t)}catch{return}let r=(u,c)=>({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:u,right:c}}),n=!1,i=!1,o=(0,Pl.replace)(e,{keys:Ai,enter(u,c){switch(u.type){case"ClassDeclaration":return r(u.id||{type:"Identifier",name:"_default"},{...u,type:"ClassExpression"});case"FunctionDeclaration":return this.skip(),r(u.id||{type:"Identifier",name:"_default"},{...u,type:"FunctionExpression"});case"FunctionExpression":case"ArrowFunctionExpression":case"MethodDefinition":return Pl.VisitorOption.Skip;case"AwaitExpression":n=!0;return;case"ForOfStatement":u.await&&(n=!0);return;case"ReturnStatement":i=!0;return;case"VariableDeclaration":if(!c||!("body"in c)||!(c.body instanceof Array))return;let l=c.body,p=u.declarations.map(f=>({type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"void",prefix:!0,argument:{type:"AssignmentExpression",operator:"=",left:f.id,right:f.init||{type:"Identifier",name:"undefined"}}}}));l.splice(l.indexOf(u),1,...p)}}});if(!n||i)return;let s=o.body[o.body.length-1];s.type==="ExpressionStatement"&&(o.body[o.body.length-1]={type:"ReturnStatement",argument:s.expression});let a={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",params:[],generator:!1,expression:!1,async:!0,body:{type:"BlockStatement",body:o.body}},arguments:[],optional:!1}};return rs(a)}function yh(t){try{let e=(0,ky.parseExpressionAt)(t,0,aS);return e.end<t.length||e.type!=="ObjectExpression"?t:`(${t})`}catch{return t}}function xl(t){if(!t)return;let e="sourceMappingURL",r=t.length,n=e.length,i=r,o=0;for(;;){if(i=t.lastIndexOf(e,i),i===-1||i<4)return;if(i-=4,t[i]==="/"&&t[i+1]==="/"&&!(t[i+2]!=="#"&&t[i+2]!=="@")&&!(t[i+3]!==" "&&t[i+3]!=="	")&&(o=i+4+n,!(o<r&&t[o]!=="=")))break}let s=t.substring(o+1),a=s.indexOf(`
`);return a!==-1&&(s=s.substring(0,a)),s.trim()}function Oy(t,e,r){let n=r.generatedPositionFor({source:t,line:e.lineNumber,column:e.columnNumber-1,bias:Hh.SourceMapConsumer.GREATEST_LOWER_BOUND}),i=a=>{if(a.line===null||a.column===null)return 1e11;let u=r.originalPositionFor(a);return u.line!==null?Math.abs(e.lineNumber-u.line):1e11},o=i(n),s=r.allGeneratedPositionsFor({source:t,line:e.lineNumber,column:e.columnNumber-1}).filter(a=>a.line!==null&&a.column!==null).sort((a,u)=>a.line!==u.line?a.line-u.line:a.column-u.column).map(a=>[a,i(a)]);return s.push([n,o]),s.sort(([a,u],[c,l])=>u-l||a.line-c.line||a.column-c.column),s[0][0]}var lS=(t,e)=>!!e&&((e.type==="FunctionExpression"||e.type==="FunctionDeclaration"||e.type==="ArrowFunctionExpression")&&e.params.includes(t)||(e.type==="ForInStatement"||e.type==="ForOfStatement")&&e.left===t||e.type==="VariableDeclarator"&&e.id===t||e.type==="AssignmentPattern"&&e.left===t||e.type==="CatchClause"&&e.param===t||"kind"in e&&e.kind==="init"&&e.value===t||e.type==="RestElement"&&e.argument===t||e.type==="AssignmentPattern"&&e.left===t);function ra(t){try{new Function(t)}catch(e){return e}}function Sre(t,e){let r=ho(t),n,i;return(0,Pl.traverse)(r,{keys:Ai,enter:o=>{let s=o;e>=s.start&&e<s.end&&(o.type==="CallExpression"||o.type==="NewExpression"?i=o:n=o)}}),i||n}var D1=/^[^()]+/g;function x1(t,e){try{let n=Sre(t,e);if(n&&"callee"in n){let i=n.callee;return{text:`${t.slice(i.start,i.end)}(...)`,start:i.start,end:i.end}}else{let i=n;return{text:t.slice(i.start,i.end),start:i.start,end:i.end}}}catch{}D1.lastIndex=e-1;let r=D1.exec(t);if(r)return{text:r[0],start:e,end:e+r[0].length}}var ht=()=>`
//# sourceURL=eval-${(0,T1.randomBytes)(4).toString("hex")}${".cdp"}
`;function Mu(t){return Ere(""+t)}function Ere(t){let e=(0,L1.parseExpressionAt)(t,0,{ecmaVersion:"latest",locations:!0});if(e.type!=="FunctionExpression")throw new Error(`Could not find function declaration for:

${t}`);let r=e.params.map(s=>{if(s.type!=="Identifier")throw new Error("Parameter must be identifier");return s.name}),{start:n,end:i}=e.body,o=s=>`
    ${s.map((a,u)=>`let ${r[u]} = ${a}`).join("; ")};
    ${t.slice(n+1,i-1)}
  `;return{expr:(...s)=>`(()=>{${o(s)}})();
${ht()}`,decl:(...s)=>`function(...runtimeArgs){${o(s)};
${ht()}}`}}var Ru=class extends Error{constructor(r){super(r.text);this.details=r}},bh=class{constructor(e){this.objectId=e}};function nr(t){let e=(""+t).replace("}",ht()+"}"),r=async({cdp:n,args:i,...o})=>{let s=await n.Runtime.callFunctionOn({functionDeclaration:e,arguments:i.map(a=>a instanceof bh?{objectId:a.objectId}:{value:a}),...o});if(!s)throw new Ru({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});if(s.exceptionDetails)throw new Ru(s.exceptionDetails);return s.result};return r.source=e,r}var $1=()=>"globalThis.__jsDebugIsReady = true; "+ht();var vh=new Set(["page","iframe","worker","service_worker"]),dS=new Set(["page","iframe"]),fS=new Set(["page","iframe"]),Dre=fS,Ll=class{constructor(e,r,n,i,o,s,a,u,c){this._manager=e;this._targetInfo=r;this.launchConfig=s;this.sessionId=a;this.logger=u;this._attached=!1;this._onNameChangedEmitter=new z;this.onNameChanged=this._onNameChangedEmitter.event;this.entryBreakpoint=void 0;this._children=new Map;this.sourcePathResolver=this._manager._sourcePathResolver;this._cdp=n,n.pause(),this.parentTarget=i,this._waitingForDebugger=o,this._updateFromInfo(r),this._ondispose=c}get targetInfo(){return this._targetInfo}get targetId(){return this._targetInfo.targetId}get independentLifeycle(){return fS.has(this.type())}get supplementalConfig(){let e=this.type();return{__browserTargetType:e,__usePerformanceFromParent:e!=="page"}}targetOrigin(){return this._manager._targetOrigin}id(){return this.sessionId}cdp(){return this._cdp}name(){return this._computeName()}fileName(){return this._targetInfo.url}type(){return this._targetInfo.type}afterBind(){return this._cdp.resume(),Promise.resolve()}initialize(){return Promise.resolve()}async runIfWaitingForDebugger(){await Promise.all([this._cdp.Runtime.runIfWaitingForDebugger({}),this._cdp.Runtime.evaluate({expression:$1()})])}parent(){return this.parentTarget&&!vh.has(this.parentTarget.type())?this.parentTarget.parentTarget:this.parentTarget}children(){let e=[];for(let r of this._children.values())vh.has(r.type())?e.push(r):e.push(...r.children());return e}canStop(){return Dre.has(this.type())}stop(){if(this._manager.targetList().includes(this))if(this.type()==="service_worker"){if(this._manager.serviceWorkerModel.stopWorker(this.id()),!this.parentTarget)return;this._manager.serviceWorkerModel.stopWorker(this.parentTarget.id())}else this._cdp.Target.closeTarget({targetId:this._targetInfo.targetId})}canRestart(){return fS.has(this.type())}restart(){this._cdp.Page.reload({})}waitingForDebugger(){return this._waitingForDebugger}canAttach(){return!this._attached}async attach(){return this._waitingForDebugger=!1,this._attached=!0,Promise.resolve(this._cdp)}canDetach(){return this._attached}async detach(){this._attached=!1,this._manager._detachedFromTarget(this.sessionId)}executionContextName(e){let r=e.auxData,n=e.name;if(!r)return n;let i=r.frameId,o=i?this._manager.frameModel.frameForId(i):void 0;return o&&r.isDefault&&!o.parentFrame()?"top":o&&r.isDefault?o.displayName():o?`${n}`:n}supportsCustomBreakpoints(){return dS.has(this.type())}scriptUrlToUrl(e){return na(this._targetInfo.url,e)||e}_updateFromInfo(e){this._targetInfo={...e,type:this._targetInfo.type},this._onNameChangedEmitter.fire()}setComputeNameFn(e){this._customNameComputeFn=e,this._onNameChangedEmitter.fire()}_computeName(){let e=this._customNameComputeFn?.(this);if(e)return e;if(this.type()==="service_worker"){let i=this._manager.serviceWorkerModel.version(this.id());if(i)return i.label()+" [Service Worker]"}let r=this._targetInfo.title;if(!(r&&this._manager.targetList().some(i=>i instanceof Ll&&i!==this&&i._targetInfo.title===this._targetInfo.title)))return r;try{let i=new R1.URL(this._targetInfo.url);i.protocol==="data:"?r=" <data>":i?r+=` (${this._targetInfo.url.replace(/^[a-z]+:\/\/|\/$/gi,"")})`:r+=` (${this._targetInfo.url})`}catch{r+=` (${this._targetInfo.url})`}return r}async _detached(){await this._manager.serviceWorkerModel.detached(this._cdp),this._ondispose(this)}};function wh(t){return t instanceof Array?t:[t]}function M1(t,e,r){let n=0,i=t.length-1;for(;n<=i;){let o=(n+i)/2|0,s=r(t[o],e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o}return n}function k1(t,e){let r=new Map;for(let n of t){let i=e(n),o=r.get(i);o?o.push(n):r.set(i,[n])}return r}function ia(t){return t.next().value}function mo(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function Tl(t,e){if(t.length<=e)return t;let r=e>>1,n=e-r-1,i=t.codePointAt(t.length-n-1);i&&i>=65536&&(--n,++r);let o=t.codePointAt(r-1);return r>0&&o&&o>=65536&&--r,t.substr(0,r)+"\u2026"+t.substr(t.length-n,n)}var O1="/\\.?*()^${}|[]+",F1=t=>O1.includes(t);function Gr(t,e){let r=O1.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}var oa=class{constructor(e){this.source=e;this.lines=[];this.lines.push(0);for(let r=e.indexOf(`
`);r!==-1;r=e.indexOf(`
`,r+1))this.lines.push(r+1)}getLineOffset(e){return e>=this.lines.length?this.source.length:this.lines[e]}convert(e){let r=e.base0;if(r.lineNumber>this.lines.length)return this.source.length;let n=this.lines[r.lineNumber],i=this.lines[r.lineNumber+1]??this.source.length+1;return n+Math.min(i-n-1,r.columnNumber)}};var Ny=process.platform!=="win32";function gS(){return Ny}function Uy(t){return Ny?t:t.toLowerCase()}function jy(t,e){return Ny?t===e:t.toLowerCase()===e.toLowerCase()}function ku(){return gS()?new Map:new fo(Uy)}var B1=process.platform==="win32"?process.env.PATHEXT?.toLowerCase().split(";"):void 0,qy=t=>{let e=Uy(An.basename(t));if(B1){for(let r of B1)if(e.endsWith(r))return e.slice(0,-r.length)}return e},HS=async(t,e)=>{for(;;){if(await e(t))return t;let r=An.dirname(t);if(r===t)return;t=r}},$l=(t,e,r)=>HS(e,n=>t.exists(An.join(n,r))),Pre=new Set(["localhost","127.0.0.1","::1"]),xre=new Set(["0.0.0.0","::","0000:0000:0000:0000:0000:0000:0000:0000"]),By=t=>Pre.has(t.toLowerCase()),U1=t=>{try{return new ns.URL(t).hostname.replace(/^\[|\]$/g,"")}catch{return t}},j1=t=>xre.has(U1(t)),Rl=Jo(async t=>{let e=U1(t);if(By(e))return!0;try{let r=await N1.promises.lookup(e);return By(r.address)}catch{return!1}});function na(t,e){try{return new ns.URL(e,t).href}catch{}}function My(t,e){try{return new ns.URL(e),e}catch{}let r;try{r=new ns.URL(t||"")}catch{return e}let n=r.protocol+"//";return r.username&&(n+=r.username+":"+r.password+"@"),n+=r.host,n+=An.dirname(r.pathname),n[n.length-1]!=="/"&&(n+="/"),n+=e,n}function Wy(t){try{return new ns.URL(t),!0}catch{return!1}}function q1(t){return t.replace(/\/$/,"").replace(/\\$/,"")}var Lre=/^https:\/\/([a-z0-9\-]+)\+\.vscode-resource\.vscode-(?:webview|cdn)\.net\/(.+)/i;function bt(t){let e=Lre.exec(t);if(e)t=`${e[1]}:///${e[2]}`;else if(t.startsWith("vscode-webview-resource://"))t=new ns.URL(t).pathname.replace(/%2F/gi,"/").replace(/^\/([a-z0-9\-]+)(\/{1,2})/i,(n,i,o)=>o.length===1?`${i}:///`:`${i}://`);else if(!an(t))return;return t=t.replace("file:///",""),t=decodeURIComponent(t),t.startsWith("/")&&process.platform==="win32"&&t[1]!=="/"&&(t="/"+t),t[0]!=="/"&&!t.match(/^[A-Za-z]:/)&&(t="/"+t),Lt(t)}function W1(t){return an(t)&&(t=t.replace("file:///","\\\\"),t=t.replace(/\//g,"\\"),t=decodeURIComponent(t)),t}function Oe(t){return yS==="win32"?"file:///"+sa(t):"file://"+sa(t)}function Ml(t){return t.startsWith("/")?"file://"+sa(t):"file:///"+sa(t)}function kr(t){return An.posix.isAbsolute(t)||An.win32.isAbsolute(t)}function gr(t){return!!t&&t.startsWith("data:")}var hS=(t,e,r)=>{if(!r||t===":"){e.add(t);return}if(t==="/"){e.add(`\\${t}`);return}F1(t)?e.add(`\\${t}`):e.add(t);let n=encodeURIComponent(t);t!=="\\"&&n!==t&&e.add(n)},Tre=t=>{switch(t.size){case 0:return"";case 1:return ia(t.values());default:let e=[...t];return e.some(r=>r.length>1)?`(?:${e.join("|")})`:`[${e.join("")}]`}},_h=new Set,mS=(t,e,r,n)=>{let i="";for(let o of t.slice(e,r))Ny?hS(o,_h,n):(hS(o.toLowerCase(),_h,n),hS(o.toUpperCase(),_h,n)),i+=Tre(_h),_h.clear();return i};function Gn(t,[e,r]=[0,t.length]){if(r<=e)return t;let n=[],i=mS(t,0,e,!1),o=mS(t,r,t.length,!1),s=t.slice(e,r);for(let a of[decodeURIComponent(s),bt(s)]){if(!a)continue;let u=mS(a,0,a.length,!0);n.push($re(`${i}${u}${o}`).concat("($|\\?)"))}return n.join("|")}var $re=t=>t.replace(/^(file:\\\/\\\/\\\/)?([a-z]):/i,(e,r="",n)=>`${r}[${n.toUpperCase()}${n.toLowerCase()}]:`);function an(t){return t.startsWith("file:///")}var yS=process.platform;function sa(t){return t=Ii(t),yS==="win32"?(FI(t)&&(t=t.slice(1)),t.split(/[\\//]/g).map((e,r)=>r>0?encodeURIComponent(e):e).join("/")):t.split("/").map(encodeURIComponent).join("/")}function Ii(t){return t&&yS==="win32"&&t[1]===":"?t[0].toUpperCase()+t.substring(1):t}var aa=(t,e=[])=>{let r=t.urlFilter||"file"in t&&t.file||t.url,n=r?Mre(r,...e):void 0;return i=>!i.url.startsWith("devtools://")&&n?.(i.url)!==!1},kl=t=>e=>e.type==="page"&&t(e);function Rre(t){return!!t&&!An.isAbsolute(t)&&!!(0,ns.parse)(t).protocol}var Mre=(...t)=>{let e=i=>{i=i.toLowerCase();let o=bt(i);o?i=o:Rre(i)&&i.includes("://")&&(i=i.substr(i.indexOf("://")+3)),i.endsWith("/")&&(i=i.substr(0,i.length-1));let s=i.indexOf("#");return s!==-1&&(i=i.slice(0,i[s-1]==="/"?s-1:s)),i},r=t.map(i=>Gr(e(i),"/*").replace(/(\/\*$)|\*/g,".*")),n=new RegExp("^("+r.join("|")+")$","g");return i=>(n.lastIndex=0,n.test(e(i)))};var Ho=Symbol("ISourceMapFactory"),bS=Symbol("IRootSourceMapFactory"),Ou=class{constructor(e,r){this.root=e;this.resourceProvider=r}load(e){return this.root.load(this.resourceProvider,e)}guardSourceMapFn(e,r,n){return this.root.guardSourceMapFn(e,r,n)}};Ou=T([(0,go.injectable)(),v(0,(0,go.inject)(bS)),v(1,(0,go.inject)(Tu))],Ou);var Ih=class{constructor(e,r,n){this.pathResolve=e;this.dap=r;this.logger=n;this.hasWarnedAboutMaps=new WeakSet}async load(e,r){let n=await this.parseSourceMap(e,r.sourceMapUrl),i=n.sourceRoot;n.sourceRoot=void 0;let o=!1,s=[];if("sections"in n){s=[];let a=0;for(let u of n.sections)s.push(...u.map.sources),u.map.sources=u.map.sources.map(()=>`source${a++}.js`),o||=!!u.map.names?.length}else"sources"in n&&Array.isArray(n.sources)&&(s=n.sources,n.sources=n.sources.map((a,u)=>`source${u}.js`),o=!!n.names?.length);return new $u(await new V1.SourceMapConsumer(n),r,i??"",s,o)}async parseSourceMap(e,r){let n;try{n=await this.parseSourceMapDirect(e,r)}catch(i){if(n=await this.parsePathMappedSourceMap(e,r),!n)throw i}if("sections"in n){let i=await Promise.all(n.sections.map((o,s)=>"url"in o?this.parseSourceMap(e,o.url).then(a=>({offset:o.offset,map:a})).catch(a=>{this.logger.warn("sourcemap.parsing",`Error parsing nested map ${s}: ${a}`)}):o));n.sections=i.filter(Ct)}return n}async parsePathMappedSourceMap(e,r){if(gr(r))return;let n=await this.pathResolve.urlToAbsolutePath({url:r});if(n)try{return this.parseSourceMapDirect(e,n)}catch(i){this.logger.info("sourcemap.parsing","Parsing path mapped source map failed.",i)}}guardSourceMapFn(e,r,n){try{return r()}catch(i){if(!/error parsing/i.test(String(i.message)))throw i;if(!this.hasWarnedAboutMaps.has(e)){let o=Cy(e.metadata.compiledPath,i.message).error;this.dap.output({output:o.format+`
`,category:"stderr"}),this.hasWarnedAboutMaps.add(e)}return n()}}dispose(){}async parseSourceMapDirect(e,r){let n=bt(r);n&&(n=this.pathResolve.rebaseRemoteToLocal(n));let i=await e.fetch(n||r);if(!i.ok)throw i.error;let o=i.body;return o.slice(0,3)===")]}"&&(o=o.substring(o.indexOf(`
`))),JSON.parse(o)}};Ih=T([(0,go.injectable)(),v(0,(0,go.inject)(Ze)),v(1,(0,go.inject)(Dl)),v(2,(0,go.inject)(ce))],Ih);var ua=class extends Ih{constructor(){super(...arguments);this.knownMaps=new fo(r=>r.toLowerCase());this.overwrittenSourceMaps=[]}load(r,n){let i=this.knownMaps.get(n.sourceMapUrl);if(!i)return this.loadNewSourceMap(r,n);let o=n.cacheKey,s=i.metadata.cacheKey;return i.reloadIfNoMtime?o&&s&&o===s?(i.reloadIfNoMtime=!1,i.prom):(this.overwrittenSourceMaps.push(i.prom),this.loadNewSourceMap(r,n)):s&&o&&o!==s?(this.overwrittenSourceMaps.push(i.prom),this.loadNewSourceMap(r,n)):i.prom}loadNewSourceMap(r,n){let i=super.load(r,n);return this.knownMaps.set(n.sourceMapUrl,{metadata:n,reloadIfNoMtime:!1,prom:i}),i}dispose(){for(let r of this.knownMaps.values())r.prom.then(n=>n.destroy(),()=>{});for(let r of this.overwrittenSourceMaps)r.then(n=>n.destroy(),()=>{});this.knownMaps.clear()}invalidateCache(){for(let r of this.knownMaps.values())r.reloadIfNoMtime=!0}};ua=T([(0,go.injectable)()],ua);var G1=require("path");var Ol=Symbol("ISearchStrategy"),OIe=Symbol("ISearchStrategyFallback"),K1=async(t,e,r)=>{let n,o=`${(0,G1.basename)(t)}.map`;if(e.siblings.includes(o)&&(n=o),n||(typeof r>"u"&&(r=await py(t)),n=xl(r)),!(!n||(gr(n)||(n=na(Oe(t),n)),!n))&&!(!n.startsWith("data:")&&!n.startsWith("file://")))return{compiledPath:t,sourceMapUrl:n,cacheKey:e.mtime}};var Vy=async(t,e,r,n={})=>{let i=Date.now();try{return await r()}finally{t.verbose("perf.function","",{method:e,duration:Date.now()-i,...n})}};var vS=Symbol("InlineSourceMapUrl"),z1=10*1e3,Fu=class{constructor(e){e.__workspaceCachePath&&(this.path=Gy.join(e.__workspaceCachePath,"bp-predict.json"))}async load(){if(this.value||!this.path)return this.value;try{this.value=JSON.parse(await Sh.promises.readFile(this.path,"utf-8"))}catch{}return this.value}async store(e){this.value=e,this.path&&(await Sh.promises.mkdir(Gy.dirname(this.path),{recursive:!0}),await Sh.promises.writeFile(this.path,JSON.stringify(e)))}};Fu=T([(0,ir.injectable)(),v(0,(0,ir.inject)(Me))],Fu);var yo=class{constructor(e,r,n,i,o,s){this.outFiles=e;this.repo=r;this.logger=n;this.sourceMapFactory=i;this.sourcePathResolver=o;this.state=s}async createMapping(e){if(this.outFiles.empty)return new Map;let r=ku(),n=await this.state.load();try{let{state:i}=await this.repo.streamChildrenWithSourcemaps({files:this.outFiles,processMap:async o=>{let s=[],a=await this.sourceMapFactory.load(o);for(let u of a.sources){let c=this.sourcePathResolver?await this.sourcePathResolver.urlToAbsolutePath({url:u,map:a}):bt(u);c&&s.push({...o,sourceMapUrl:gr(o.sourceMapUrl)?{[vS]:o.sourceMapUrl}:o.sourceMapUrl,resolvedPath:c,sourceUrl:u})}return{discovered:s,compiledPath:Lt(o.compiledPath)}},onProcessedMap:({discovered:o})=>{for(let s of o){let a=r.get(s.resolvedPath);a||(a=new Set,r.set(s.resolvedPath,a)),a.add(s)}},lastState:n,...e});i&&this.state.store(i).catch(o=>this.logger.warn("runtime.exception","Error saving sourcemap cache",{error:o}))}catch(i){this.logger.warn("runtime.exception","Error reading sourcemaps from disk",{error:i})}return r}};yo=T([(0,ir.injectable)(),v(0,(0,ir.inject)(co)),v(1,(0,ir.inject)(Ol)),v(2,(0,ir.inject)(ce)),v(3,(0,ir.inject)(Ho)),v(4,(0,ir.inject)(Ze)),v(5,(0,ir.inject)(Fu))],yo);var Fl=class extends yo{async getMetadataForPaths(r){this.sourcePathToCompiled||(this.sourcePathToCompiled=this.createInitialMapping());let n=await this.sourcePathToCompiled;return r.map(i=>n.get(i))}async createInitialMapping(){return Vy(this.logger,"BreakpointsPredictor.createInitialMapping",()=>this.createMapping())}};Fl=T([(0,ir.injectable)()],Fl);var Bl=class extends yo{constructor(){super(...arguments);this.sourcePathToCompiled=new Map}async getMetadataForPaths(r){let n=r.map(s=>this.sourcePathToCompiled.get(s)),i=r.map((s,a)=>a).filter(s=>!n[s]);if(i.length){let s=new Set(i.map(u=>Lt(r[u]))),a=this.createMapping({filter:(u,c)=>!c||c.discovered.some(l=>s.has(l.resolvedPath))});for(let u of i)this.sourcePathToCompiled.set(r[u],a),n[u]=a}return await Promise.all(n.map(async(s,a)=>(await s).get(r[a])))}};Bl=T([(0,ir.injectable)()],Bl);var Nu=Symbol("IBreakpointsPredictor"),Bu=class{constructor(e,r,n,i){this.bpSearch=e;this.outFiles=r;this.logger=n;this.sourceMapFactory=i;this.predictedLocations=new Map;this.longParseEmitter=new z;this.targetedMode=!1;this.onLongParse=this.longParseEmitter.event}async predictBreakpoints(e){if(!e.source.path||!e.breakpoints?.length)return;let r=await this.getMetadataForPaths([e.source.path]).then(i=>i[0]);if(!r)return;let n=async(i,o,s)=>{let a=typeof s.sourceMapUrl=="string"?s.sourceMapUrl:s.sourceMapUrl.hasOwnProperty(vS)?s.sourceMapUrl[vS]:await Sh.promises.readFile(s.compiledPath,"utf8").then(xl);if(!a)return[];let u=await this.sourceMapFactory.load({...s,sourceMapUrl:a}),c=this.sourceMapFactory.guardSourceMapFn(u,()=>Oy(s.sourceUrl,{lineNumber:i,columnNumber:o||1},u),()=>null);if(!c||c.line===null)return[];let l=await this.getMetadataForPaths([s.compiledPath]).then(p=>p[0]);return l?(await Promise.all([...l].map(f=>n(c.line,c.column,f)))).flat():[{absolutePath:s.compiledPath,lineNumber:c.line||1,columnNumber:c.column?c.column+1:1}]};for(let i of e.breakpoints??[]){let o=`${e.source.path}:${i.line}:${i.column||1}`;if(this.predictedLocations.has(o))return;let s=[];this.predictedLocations.set(o,s);for(let a of r)s.push(...await n(i.line,i.column||0,a))}}async getPredictionForSource(e){return this.getMetadataForPaths([e]).then(r=>r[0])}async getMetadataForPaths(e){let r=setTimeout(()=>{this.longParseEmitter.fire(),this.logger.warn("runtime.sourcemap","Long breakpoint predictor runtime",{longPredictionWarning:z1,patterns:[...this.outFiles.explode()].join(", ")})},z1),n=await this.bpSearch.getMetadataForPaths(e);return clearTimeout(r),n}predictedResolvedLocations(e){let r=`${e.absolutePath}:${e.lineNumber}:${e.columnNumber||1}`;return this.predictedLocations.get(r)??[]}};Bu=T([(0,ir.injectable)(),v(0,(0,ir.inject)(yo)),v(1,(0,ir.inject)(co)),v(2,(0,ir.inject)(ce)),v(3,(0,ir.inject)(Ho))],Bu);var Ao=A(J());var Ky=class{constructor(e=!1,r=!1){this.verified=e;this.hit=r}},zy=class{constructor(){this._statisticsById=new Map}registerBreakpoints(e){e.forEach(r=>{r.id!==void 0&&!this._statisticsById.has(r.id)&&this._statisticsById.set(r.id,new Ky(r.verified,!1))})}registerResolvedBreakpoint(e){this.getStatistics(e).verified=!0}registerBreakpointHit(e){this.getStatistics(e).hit=!0}getStatistics(e){let r=this._statisticsById.get(e);if(r!==void 0)return r;{let n=new Ky;return this._statisticsById.set(e,n),n}}statistics(){let e=0,r=0,n=0;for(let i of this._statisticsById.values())e++,i.hit&&n++,i.verified&&r++;return{set:e,verified:r,hit:n}}};var Kl=A(J());var AO=require("crypto"),IO=A(gh()),Ph=A(J());var kre=0,mt=Symbol("ICdpApi"),Uu=class extends Error{constructor(r){super("<<message>>");this.method=r}setCause(r,n){return this.cause={code:r,message:n},this.message=`CDP error ${r} calling method ${this.method}: ${n}`,this.stack=this.stack?.replace("<<message>>",this.message),this}},Nt=class{constructor(e,r,n){this.logger=r;this.telemetryReporter=n;this._connectionId=kre++;this._lastId=1e3;this._disposedSessions=new Map;this._onDisconnectedEmitter=new z;this.waitWrapper=Fre();this.onDisconnected=this._onDisconnectedEmitter.event;this._transport=e,this._transport.onMessage(([i,o])=>this._onMessage(i,o)),this._transport.onEnd(()=>this._onTransportClose()),this._sessions=new Map,this._closed=!1,this._rootSession=new Xy(this,"",this.logger),this._sessions.set("",this._rootSession)}rootSession(){return this._rootSession.cdp()}_send(e,r={},n){let i=++this._lastId,o={id:i,method:e,params:r};n&&(o.sessionId=n);let s=JSON.stringify(o);return this.logger.verbose("cdp.send",void 0,{connectionId:this._connectionId,message:o}),this._transport.send(s),i}_onMessage(e,r){let n=JSON.parse(e),i=n;n.result&&n.result.scriptSource?i={...n,result:{...n.result,scriptSource:"<script source>"}}:n.method==="Debugger.scriptParsed"&&n.params&&gr(n.params.sourceMapURL)&&(i={...n,params:{...n.params,sourceMapURL:"<data source map url>"}}),this.logger.verbose("cdp.receive",void 0,{connectionId:this._connectionId,message:i});let o=this._sessions.get(n.sessionId||"");if(!o){let u=this._disposedSessions.get(n.sessionId);if(u){let c=(Date.now()-u.getTime())/1e3;this.logger.warn("internal",`Got message for a session disposed ${c} seconds ago`,{sessionId:n.sessionId,disposeOn:u});return}else throw new Error(`Unknown session id: ${n.sessionId} while processing: ${n.method}`)}let s=n.method,a;try{o._onMessage(n)}catch(u){a=u}s&&this.telemetryReporter.reportOperation("cdpOperation",s,r.elapsed().ms,a)}_onTransportClose(){if(!this._closed){this._closed=!0,this._transport.dispose(),this.logger.info("cdp.receive","Connection closed",{connectionId:this._connectionId});for(let e of this._sessions.values())e._onClose();this._sessions.clear(),this._onDisconnectedEmitter.fire()}}close(){this._onTransportClose()}isClosed(){return this._closed}createSession(e){let r=new Xy(this,e,this.logger);return this._sessions.set(e,r),r.cdp()}disposeSession(e){let r=this._sessions.get(e);r&&(r._onClose(),this._disposedSessions.set(r.sessionId(),new Date),this._sessions.delete(r.sessionId()))}},Ore=+process.version.substring(1).split(".")[0]<11,Xy=class{constructor(e,r,n){this.logger=n;this._queue=[];this._prefixListeners=new ih;this._directListeners=new ih;this.paused=!1;this._callbacks=new Map,this._connection=e,this._sessionId=r,this._cdp=this._createApi()}pause(){this.paused=!0}resume(){if(!this.paused)return;this.paused=!1;let e=this._queue;this._queue=[],this.logger.verbose("cdp.receive","Dequeue messages",{message:e});for(let r of e)this._processResponse(r)}cdp(){return this._cdp}sessionId(){return this._sessionId}_createApi(){return new Proxy({},{get:(e,r)=>r==="pause"?()=>this.pause():r==="resume"?()=>this.resume():r==="session"?this:new Proxy({},{get:(n,i)=>{if(i!=="then")return i==="on"?(o,s)=>this.on(`${r}.${o}`,s):o=>this.send(`${r}.${i}`,o)}})})}on(e,r){return this._directListeners.listen(e,r)}onPrefix(e,r){return this._prefixListeners.listen(e,r)}send(e,r={}){return this.sendOrDie(e,r).catch(()=>{})}sendOrDie(e,r={}){if(!this._connection)return Promise.reject(new Uu(e).setCause(0,"Connection is closed"));let n=this._connection._send(e,r,this._sessionId);return new Promise((i,o)=>{this._callbacks.set(n,{resolve:i,reject:o,from:new Uu(e),method:e})})}_onMessage(e){if(this.paused&&e.id){this._processResponse(e);return}if(this._queue.length>0){this._queue.push(e);return}if(!Ore&&!this.paused){this._processResponse(e);return}this._queue.push(e),this.paused||this._processQueue()}_processQueue(){this._connection?.waitWrapper(()=>{if(this.paused)return;let e=this._queue.shift();e&&(this._processResponse(e),this._queue.length&&this._processQueue())})}_processResponse(e){if(e.id===void 0){let n=e;this._directListeners.emit(n.method,n.params);for(let[i,o]of this._prefixListeners.listeners)n.method.startsWith(i)&&o.fire(n);return}let r=this._callbacks.get(e.id);r&&(this._callbacks.delete(e.id),"error"in e?r.reject(r.from.setCause(e.error.code,e.error.message)):"result"in e&&r.resolve(e.result))}async detach(){if(!this._connection)throw new Error("Session already detached. Most likely the target has been closed.");this._connection._send("Target.detachFromTarget",{},this._sessionId)}isClosed(){return!this._connection}_onClose(){for(let e of this._callbacks.values())e.reject(e.from.setCause(0,"Connection is closed"));this._callbacks.clear(),this._connection=void 0}};function Fre(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let t=!1,e=[],r=()=>{let n=e.shift();if(!n){t=!1;return}setImmediate(r),n()};return n=>{e.push(n),t||(t=!0,setImmediate(r))}}var ql=A(J());var fO=A(_e()),dO=require("path"),hO=require("url");var aO=require("path"),uO=require("worker_threads");var ju=A(iO()),AS=require("fs"),IS=require("worker_threads");var Yre=Buffer.from("(function (exports, require, module, __filename, __dirname) { "),Qre=Buffer.from(`
});`),Zre=Buffer.from("(function (exports, require, module, __filename, __dirname, process, global, Buffer) { return function (exports, require, module, __filename, __dirname) { "),ene=Buffer.from(`
}.call(this, exports, require, module, __filename, __dirname); });`),tne=Buffer.from("#!"),rne=Buffer.from("\r")[0],nne=Buffer.from(`
`)[0],ine=(t,e)=>t.slice(0,e.length).equals(e),oO=(t,e,r)=>{let n=e.length===64?ju.shaHash:ju.hash;if(n(t)===e)return!0;if(r){if(ine(t,tne)){let i=t.indexOf(nne);return t[i-1]===rne&&i--,n(t.slice(i))===e}if(n(Buffer.concat([Yre,t,Qre]))===e)return!0}return n(Buffer.concat([Zre,t,ene]))===e},sO=t=>t instanceof Buffer?t:Buffer.from(t,"utf-8");async function one(t){switch(t.type){case 0:try{let e=await AS.promises.readFile(t.file);return{id:t.id,hash:t.mode===0?(0,ju.hash)(e):(0,ju.shaHash)(e)}}catch{return{id:t.id}}case 1:try{return{id:t.id,hash:(0,ju.hash)(sO(t.data))}}catch{return{id:t.id}}case 2:try{let e=await AS.promises.readFile(t.file);return{id:t.id,matches:oO(e,t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}case 3:try{return{id:t.id,matches:oO(sO(t.data),t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}}}function sne(t){t.on("message",e=>{one(e).then(r=>t.postMessage(r))})}IS.parentPort&&sne(IS.parentPort);var rb=class{constructor(e=3,r=(0,aO.join)(__dirname,"hash.js")){this.maxFailures=e;this.hasherScriptPath=r;this.idCounter=0;this.failureCount=0;this.deferredMap=new Map;this.deferCleanup=WT(3e4,()=>this.cleanup())}async hashBytes(e,r){return(await this.send({type:1,data:r,mode:e,id:this.idCounter++})).hash}async hashFile(e,r){return(await this.send({type:0,file:r,mode:e,id:this.idCounter++})).hash}async verifyBytes(e,r,n){return(await this.send({type:3,data:e,id:this.idCounter++,expected:r,checkNode:n})).matches}async verifyFile(e,r,n){return(await this.send({type:2,file:e,id:this.idCounter++,expected:r,checkNode:n})).matches}dispose(){this.cleanup(),this.deferCleanup.clear()}send(e){let r=this.getProcess();if(!r)throw new Error("hash.js process unexpectedly exited");this.deferCleanup();let n=Ue();return this.deferredMap.set(e.id,{deferred:n,request:e}),r.postMessage(e),n.promise}cleanup(){this.instance&&(this.instance.removeAllListeners("exit"),this.instance.terminate(),this.instance=void 0,this.failureCount=0)}getProcess(){if(this.instance)return this.instance;if(this.failureCount>this.maxFailures)return;let e=this.instance=new uO.Worker(this.hasherScriptPath);return e.setMaxListeners(1/0),e.on("message",r=>{let n=r,i=this.deferredMap.get(n.id);i&&(i.deferred.resolve(n),this.deferredMap.delete(n.id))}),e.on("exit",()=>{this.instance=void 0,this.failureCount++;let r=this.getProcess();if(r){this.deferCleanup();for(let{request:n}of this.deferredMap.values())r.postMessage(n)}else{for(let{deferred:n}of this.deferredMap.values())n.reject(new Error("hash.js process unexpectedly exited"));this.deferredMap.clear(),this.deferCleanup.clear()}}),e}};var lO=require("fs"),cO=new rb;async function pO(t,e,r){return!t||bk(t)?void 0:e?(typeof r=="string"?await cO.verifyBytes(r,e,!0):await cO.verifyFile(t,e,!0))?t:void 0:await new vn(lO.promises).exists(t)?t:void 0}var qu=class{constructor(e,r,n,i,o,s,a,u){this.url=r;this.inlineScriptOffset=s;this.runtimeScriptOffset=a;this.contentHash=u;this._scripts=[];this.sourceReference=e.getSourceReference(r),this._contentGetter=Ae(i),this._container=e,this.absolutePath=n||"",this._fqname=this._fullyQualifiedName(),this._name=this._humanName(),this.setSourceMapUrl(o),this._existingAbsolutePath=this.checkContentHash(u)}checkContentHash(e){return pO(this.absolutePath,this.inlineScriptOffset||this.runtimeScriptOffset?void 0:e,this._container._fileContentOverridesForTest.get(this.absolutePath))}offsetScriptToSource(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber-this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber-this.runtimeScriptOffset.columnOffset}:e}offsetSourceToScript(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber+this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber+this.runtimeScriptOffset.columnOffset}:e}setSourceMapUrl(e){if(!e){this.sourceMap=void 0;return}this.sourceMap={type:0,sourceByUrl:new Map,value:Ue(),metadata:e}}addScript(e){this._scripts.push(e)}filterScripts(e){this._scripts=this._scripts.filter(e)}get scripts(){return this._scripts}get getSuggestedMimeType(){if(this.url.endsWith(".wat"))return"text/wat";if(!/\.[^/]+$/.test(this.url)||this.url.includes("?"))return"text/javascript"}async content(){let e=await this._contentGetter();return this.inlineScriptOffset?.lineOffset&&(e=`
`.repeat(this.inlineScriptOffset.lineOffset)+e),e}async prettyPrint(){if(!this._container)return;if(ca(this)&&this.sourceMap.metadata.sourceMapUrl.endsWith("-pretty.map")){let u=this.sourceMap.value.settledValue;return u&&{map:u,source:[...this.sourceMap.sourceByUrl.values()][0]}}let e=await this.content();if(!e)return;let r=this.url||`eval://${this.sourceReference}.js`,n=r+"-pretty.map",o=r.split(/[\/\\]/).pop()+"-pretty.js",s=await C1(o,e,r,n);if(!s)return;this.setSourceMapUrl({compiledPath:this.absolutePath,sourceMapUrl:""}),this.sourceMap.value.resolve(s);let a=this;return await this._container._addSourceMapSources(a,s),{map:s,source:[...a.sourceMap.sourceByUrl.values()][0]}}async toDap(){return this.toDapShallow()}async toDapShallow(){let e=await this._existingAbsolutePath,r={name:this._name,path:this._fqname,sourceReference:this.sourceReference,presentationHint:this.blackboxed()?"deemphasize":void 0,origin:this.blackboxed()?fO.t("Skipped by skipFiles"):void 0};return e&&(r.sourceReference=0,r.path=e),r}existingAbsolutePath(){return this._existingAbsolutePath}async prettyName(){let e=await this._existingAbsolutePath;return e||this._fqname}_humanName(){if(kr(this._fqname)){for(let e of this._container.rootPaths)if(hy(e,this._fqname))return ze((0,dO.relative)(e,this._fqname))}return this._fqname}_fullyQualifiedName(){if(!this.url)return"<eval>/VM"+this.sourceReference;if(this.url.endsWith(".repl"))return"repl";if(this.absolutePath.startsWith("<node_internals>"))return this.absolutePath;if(kr(this.url))return this.url;let e=bt(this.url);if(e)return e;let r=this.url;try{let n=[],i=new hO.URL(this.url);if(i.protocol==="data:")return"<eval>/VM"+this.sourceReference;i.hostname&&n.push(i.hostname),i.port&&n.push("\uA789"+i.port),i.pathname&&n.push(/^\/[a-z]:/.test(i.pathname)?i.pathname.slice(1):i.pathname);let o=i.searchParams?.toString();o&&n.push("?"+o),r=n.join("")}catch{}return r.endsWith("/")&&(r+="(index)"),this.inlineScriptOffset&&(r+=`\uA789${this.inlineScriptOffset.lineOffset+1}:${this.inlineScriptOffset.columnOffset+1}`),r}blackboxed(){return this._container.isSourceSkipped(this.url)}};var Dh;(n=>{async function t(i){return i.value.promise}n.waitForValue=t;function e(i,o){return i.type===0&&i.value.settledValue?Promise.resolve(i.value.settledValue):Promise.race([t(i),Te(o)])}n.waitForValueWithTimeout=e;async function r(i){return await t(i),i.sourceByUrl}n.waitForSources=r})(Dh||={});var $t=class extends qu{constructor(){super(...arguments);this.compiledToSourceUrl=new Map}},nb=class extends qu{constructor(r,n,i){super(r,n.url,i,()=>Promise.resolve("Binary content not shown, see the decompiled WAT file"),void 0,void 0,void 0,void 0);this.event=n;this.sourceMap={type:1,value:Ue(),sourceByUrl:new Map}}checkContentHash(){return Promise.resolve(void 0)}offsetScriptToSource(r){return r}offsetSourceToScript(r){return r}},Kr=t=>!!t&&t instanceof qu&&!!t.sourceMap,ca=t=>Kr(t)&&t.sourceMap.type===0,Wu=t=>Kr(t)&&t.sourceMap.type===1,SS=t=>!!t&&typeof t.getDisassembly=="function";function mO(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r+=e.lineOffset,r<=1&&(n+=e.columnOffset)),{...t,lineNumber:r,columnNumber:n}}function gO(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r=Math.max(1,r-e.lineOffset),r<=1&&(n=Math.max(1,n-e.columnOffset))),{...t,lineNumber:r,columnNumber:n}}var HO=t=>({lineNumber:t.lineNumber+1,columnNumber:t.columnNumber+1}),is=t=>({lineNumber:t.lineNumber-1,columnNumber:t.columnNumber-1});var vt=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return this}get base1(){return new Ut(this.lineNumber+1,this.columnNumber+1)}get base01(){return new Ei(this.lineNumber,this.columnNumber+1)}compare(e){let r=e.base0;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},Ut=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new vt(this.lineNumber-1,this.columnNumber-1)}get base1(){return this}get base01(){return new Ei(this.lineNumber-1,this.columnNumber)}compare(e){let r=e.base1;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber||0}},Ei=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new vt(this.lineNumber-1,this.columnNumber)}get base1(){return new Ut(this.lineNumber,this.columnNumber+1)}get base01(){return this}compare(e){let r=e.base01;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},Ch=class{constructor(e,r){this.begin=e;this.end=r}static simplify(e){if(e.length===0)return[];let r=e.slice().sort((o,s)=>o.begin.compare(s.begin)),n=[],i=r[0];for(let o=1;o<r.length;o++){let s=r[o];i.end.compare(s.begin)>=0?i=new Ch(i.begin,s.end):(n.push(i),i=s)}return n.push(i),n}contains(e){return e.compare(this.begin)>=0&&e.compare(this.end)<=0}toString(){let e=this.begin.base0,r=this.end.base0;return`Range[${e.lineNumber}:${e.columnNumber} -> ${r.lineNumber}:${r.columnNumber}]`}},In=Ch;In.ZERO=new Ch(new vt(0,0),new vt(0,0)),In.INFINITE=new Ch(new vt(0,0),new vt(1/0,1/0));var bO=require("worker_threads");var yO=A(gh()),Ul=require("worker_threads");function ES(t,e){let r=ho(t),n=(a,{loc:u}=a,{loc:c}=a)=>{if(!u||!c)throw new Error("should include locations");let l=e(u,c);if(o.length>0){let p=o[o.length-1];p.scopeNode.children??=[],p.scopeNode.children.push(l)}o.push({node:a,scopeNode:l})},i=new Set,o=[],s;return(0,yO.traverse)(r,{keys:Ai,enter:a=>{switch(a.type){case"FunctionDeclaration":case"ArrowFunctionExpression":n(a,a.params[0]||a.body,a.body),i.add(a.body);break;case"Program":n(a),s=o[0].scopeNode;break;case"ForStatement":case"ForOfStatement":case"ForInStatement":n(a),i.add(a.body);break;case"BlockStatement":i.has(a)||n(a);break}},leave:a=>{a===o[o.length-1].node&&o.pop()}}),s}Ul.isMainThread||Ul.parentPort?.postMessage(ES(Ul.workerData,(t,e)=>({start:t.start,end:e.end})));var os=class{constructor(e){this.range=e}static hydrate(e){let r=new os(new In(new vt(e.start.line,e.start.column),new vt(e.end.line,e.end.column)));return r.children=e.children?.map(os.hydrate),r}search(e){if(this.range.contains(e)){if(!this.children)return this;for(let r of this.children){let n=r.search(e);if(n)return n}return this}}findDeepest(e,r){if(this.range.contains(e)){if(this.children)for(let n of this.children){let i=n.findDeepest(e,r);if(i!==void 0)return i}return r(this)}}filterHoist(e){if(this.children)for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n.filterHoist(e),!e(n)){let i=n.children||[];this.children.splice(r,1,...i),r--}}}forEach(e){e(this),this.children?.forEach(r=>r.forEach(e))}toJSON(){return{range:this.range,children:this.children}}},ane=1024*512;function vO(t){return t.length<ane?une(t):new Promise((e,r)=>{let n=new bO.Worker(`${__dirname}/renameWorker.js`,{workerData:t});n.on("message",i=>e(os.hydrate(i))),n.on("error",r),n.on("exit",()=>r("rename worker exited"))})}function une(t){return ES(t,(e,r)=>new os(new In(new Ei(e.start.line,e.start.column).base0,new Ei(r.end.line,r.end.column).base0)))}var wO=/[$a-z_][$0-9A-Z_$]*/iy,la=Symbol("IRenameProvider"),jl=class{constructor(e,r,n){this.logger=e;this.sourceMapFactory=r;this.launchConfig=n;this.renames=new Map}provideOnStackframe(e){if(!this.launchConfig.sourceMapRenames)return Sn.None;let r=e.uiLocation();return r===void 0?Sn.None:"then"in r?r.then(n=>this.provideForSource(n?.source)):this.provideForSource(r?.source)}provideForSource(e){if(!this.launchConfig.sourceMapRenames||!(e instanceof $t))return Sn.None;let r=ia(e.compiledToSourceUrl.keys());if(!r)throw new Error("unreachable");if(!ca(r))return Sn.None;let n=this.renames.get(r.url);if(n)return n;let i=this.sourceMapFactory.load(r.sourceMap.metadata).then(async o=>{if(!o?.hasNames)return Sn.None;let s=await r.content();return s?await this.createFromSourceMap(o,s):Sn.None}).catch(()=>Sn.None);return this.renames.set(r.url,i),i}async createFromSourceMap(e,r){let n=Date.now(),i;try{i=await vO(r)}catch(a){return this.logger.info("runtime",`Error parsing content for source tree: ${a}}`,{url:e.metadata.compiledPath}),Sn.None}let o=new oa(r);e.eachMapping(a=>{if(!a.name)return;let u=new Ei(a.generatedLine,a.generatedColumn).base0,c=o.convert(u);wO.lastIndex=c;let l=wO.exec(r);if(!l)return;let p=l[0];if(p===a.name)return;let f=i.search(u)||i;f.data??=[],f.data.some(m=>m.compiled==p)||f.data.push({compiled:p,original:a.name})}),i.filterHoist(a=>!!a.data);let s=Date.now();return this.logger.info("runtime",`renames calculated in ${s-n}ms`,{url:e.metadata.compiledPath}),new Sn(i)}};jl=T([(0,ql.injectable)(),v(0,(0,ql.inject)(ce)),v(1,(0,ql.inject)(Ho)),v(2,(0,ql.inject)(Me))],jl);var DS=class{constructor(e){this.renames=e}getOriginalName(e,r){return this.getClosestRename(r,n=>n.compiled===e)?.original}getCompiledName(e,r){return this.getClosestRename(r,n=>n.original===e)?.compiled}getClosestRename(e,r){return this.renames.findDeepest(e,n=>n.data?.find(r))}},Sn=DS;Sn.None=new DS(new os(In.ZERO));var ss="$returnValue",cne="__js_debug_hoisted_",_O=()=>cne+(0,AO.randomBytes)(8).toString("hex"),Kn=Symbol("IEvaluator"),Wl=class{constructor(e,r){this.cdp=e;this.renameProvider=r}get hasReturnValue(){return!!this.returnValue}setReturnedValue(e){this.returnValue=e}prepare(e,{isInternalScript:r,hoist:n,renames:i}={}){r!==!1&&(e+=ht());let o=new Map;o.set(ss,_O());for(let u of n??[])o.set(u,_O());let{transformed:s,hoisted:a}=this.replaceVariableInExpression(e,o,i);return a.size?{canEvaluateDirectly:!1,invoke:(u,c={})=>Promise.all([...o].map(([l,p])=>this.hoistValue(l===ss?this.returnValue:c[l],p))).then(()=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s}))}:{canEvaluateDirectly:!0,invoke:u=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s})}}async evaluate(e,r){if(!("callFrameId"in e))return this.cdp.Runtime.evaluate(e);let n=r;if(r?.stackFrame){let i=await this.renameProvider.provideOnStackframe(r.stackFrame);n={...n,renames:{mapping:i,position:r.stackFrame.rawPosition}}}return this.prepare(e.expression,n).invoke(e)}async hoistValue(e,r){let n=e?.objectId,i=`setTimeout(() => { delete globalThis.${r} }, 0)`;n?await this.cdp.Runtime.callFunctionOn({objectId:n,functionDeclaration:`function() { globalThis.${r} = this; ${i}; ${ht()} }`}):await this.cdp.Runtime.evaluate({expression:`globalThis.${r} = ${JSON.stringify(e?.value)};${i};`+ht()})}replaceVariableInExpression(e,r,n){let i=new Set,o=!1,s=(p,f)=>({type:"ConditionalExpression",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:p}},operator:"!==",right:{type:"Literal",value:"undefined"}},consequent:{type:"Identifier",name:p},alternate:f}),a=[],u=ho(e),c=(0,IO.replace)(u,{keys:Ai,enter(p,f){let m=p;if(p.type!=="Identifier"||e[m.start-1]===".")return;let h=r.get(p.name);if(h)return i.add(p.name),o=!0,this.skip(),lS(p,f)?{type:"Identifier",name:h}:s(h,lne);let H=n?.mapping.getCompiledName(p.name,n.position);if(H)return o=!0,this.skip(),lS(p,f)?{type:"Identifier",name:H}:s(H,p)},leave:()=>{a.pop()}});if(!o)return{hoisted:i,transformed:e};let l=u.body[u.body.length-1].end;return{hoisted:i,transformed:rs(c)+e.slice(l)}}};Wl=T([(0,Ph.injectable)(),v(0,(0,Ph.inject)(mt)),v(1,(0,Ph.inject)(la))],Wl);var lne={type:"Identifier",name:"undefined"};var Vl=class{static parse(e,r,n,i){n&&(r=CS(r));let o=r&&ra(r);if(o)throw new ee(ea(e,o.message));let{canEvaluateDirectly:s,invoke:a}=i.prepare(r);return new Vl(s?r:a)}constructor(e){typeof e=="function"?this.invoke=e:this.breakCondition=e}async shouldStayPaused(e){return this.invoke?(await this.invoke({callFrameId:e.callFrames[0].callFrameId,returnByValue:!0}))?.result.value===!0:Promise.resolve(!0)}},CS=t=>`(()=>{try{return ${t};}catch(e){console.error(e);return true}})()`;var pne=/^(>|>=|={1,3}|<|<=|%)?\s*([0-9]+)$/,pa=class{constructor(e){this.predicate=e;this.hits=0;this.breakCondition=void 0}shouldStayPaused(){return Promise.resolve(this.predicate(++this.hits))}static parse(e){let r=pne.exec(e);if(!r)throw new ee(nS(e));let[,n="=",i]=r;return new pa(fne(e,n,Number(i)))}},fne=(t,e,r)=>{switch(e){case"=":case"==":case"===":return n=>n===r;case">":return n=>n>r;case">=":return n=>n>=r;case"<":return n=>n<r;case"<=":return n=>n<=r;case"%":return n=>n%r===0;default:throw new ee(nS(t))}};var SO=require("crypto"),ob=A(J());var ib=class{constructor(e){this.invoke=e;this.breakCondition=void 0}async shouldStayPaused(e){return await this.invoke({callFrameId:e.callFrames[0].callFrameId}),!1}};var Vu=class{constructor(e,r){this.breakCondition=r;let n=r&&ra(r);if(n)throw new ee(ea(e,n.message))}shouldStayPaused(){return Promise.resolve(!0)}};var fa=class{constructor(e){this.evaluator=e}compile(e,r){let n=this.logMessageToExpression(r),i=ra(n);if(i)throw new ee(ea(e,i.message));let{canEvaluateDirectly:o,invoke:s}=this.evaluator.prepare(n);return o?new Vu(e,this.logMessageToExpression(r)):new ib(s)}serializeLogStatements(e){return S1([],e,!1)}logMessageToExpression(e){let r=c=>c.replace(/%/g,"%%"),n=[],i=[],o=0;for(;;){let c=e.indexOf("{",o);if(c===-1){n.push(r(e.slice(o)));break}n.push(r(e.slice(o,c)));let[l]=Ry(e.slice(c));if(o=c+l.end,o-1===c+1||e[o-1]!=="}"){n.push(r(e.slice(c,o)));continue}if(l.type!=="BlockStatement")break;i.push(rs(this.serializeLogStatements(l.body))),n.push("%O")}let a=`console.log(${[JSON.stringify(n.join("")),...i].join(", ")}), false`,u=(0,SO.createHash)("sha1").update(a).digest("hex").slice(0,7);return a+`
//# sourceURL=logpoint-${u}.cdp`}};fa=T([(0,ob.injectable)(),v(0,(0,ob.inject)(Kn))],fa);var dne=new Vu({line:0},void 0),$Ee=new Vu({line:0},"false"),sb=Symbol("IBreakpointConditionFactory"),Gl=class{constructor(e,r,n){this.logPointCompiler=e;this.evaluator=r;this.breakOnError=n.__breakOnConditionalError}getConditionFor(e){return e.condition?Vl.parse(e,e.condition,this.breakOnError,this.evaluator):e.logMessage?this.logPointCompiler.compile(e,e.logMessage):e.hitCondition?pa.parse(e.hitCondition):dne}};Gl=T([(0,Kl.injectable)(),v(0,(0,Kl.inject)(fa)),v(1,(0,Kl.inject)(Kn)),v(2,(0,Kl.inject)(Me))],Gl);var cb=require("path");var ab=(t,e)=>t.lineNumber===e.lineNumber&&t.columnNumber===e.columnNumber;var ub=t=>!("location"in t),EO=t=>"location"in t,hne=(t,e)=>t.url&&e===t.url||t.urlRegex&&new RegExp(t.urlRegex).test(e),zl=class{constructor(e,r,n){this._manager=e;this._source=r;this._originalPosition=n;this.isEnabled=!1;this.setInCdpScriptIds=new Set;this.cdpScriptIds=this.setInCdpScriptIds;this.cdpBreakpoints=[];this._cdpIds=new Set}get enabled(){return this.isEnabled}get cdpIds(){return this._cdpIds}get source(){return this._source}get originalPosition(){return this._originalPosition}async updateSourceLocation(e,r,n){this._source=r,this._originalPosition=n;let i=[];for(let o of this.cdpBreakpoints)o.state===1&&i.push(this.updateUiLocations(e,o.cdpId,o.locations));await Promise.all(i)}async refreshUiLocations(e){await Promise.all(this.cdpBreakpoints.filter(r=>r.state===1).map(r=>this.updateUiLocations(e,r.cdpId,r.locations)))}async enable(e){if(this.isEnabled)return;this.isEnabled=!0;let r=[this._setPredicted(e)],n=this._manager._sourceContainer.source(this.source);if((!n||!(n instanceof $t))&&r.push(this._setByPath(e,n?.offsetSourceToScript(this.originalPosition)||this.originalPosition)),await Promise.all(r),n&&this.isEnabled){let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n});await Promise.all(i.map(o=>this._setByUiLocation(e,n.offsetSourceToScript(o))))}}async updateUiLocations(e,r,n){this.updateExistingCdpRef(r,a=>({...a,locations:n}));let i=(await Promise.all(n.map(a=>e.rawLocationToUiLocation(e.rawLocation(a))))).find(a=>!!a);if(!i)return;let o=this._manager._sourceContainer.source(this.source);if(!o)return;let s=await this._manager._sourceContainer.currentSiblingUiLocations(i);this.updateExistingCdpRef(r,a=>{let u=s.filter(c=>c.source===o);return{...a,locations:n,uiLocations:u.length?u:s}})}compare(e){let r=this.originalPosition,n=e.originalPosition;return r.lineNumber!==n.lineNumber?r.lineNumber-n.lineNumber:r.columnNumber-n.columnNumber}async disable(){if(!this.isEnabled)return;this.isEnabled=!1;let e=this.cdpBreakpoints.map(r=>this.removeCdpBreakpoint(r));await Promise.all(e)}async updateForNewLocations(e,r){let n=this._manager._sourceContainer.source(this.source);if(!n)return[];let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n},await r.source);if(!i.length)return[];let o=[];for(let s of i)o.push(this._setForSpecific(e,r,n.offsetSourceToScript(s)));for(let s of this.cdpBreakpoints){if(!ub(s.args)||!hne(s.args,r.url))continue;let a=s.args;i.some(u=>u.columnNumber-1===a.columnNumber&&u.lineNumber-1===a.lineNumber)||(this._manager.logger.verbose("runtime.sourcemap","Adjusted breakpoint due to overlaid sourcemap",{url:n.url}),o.push(this.removeCdpBreakpoint(s)))}return await Promise.all(o),i}executionContextWasCleared(){this.updateCdpRefs(e=>e.filter(r=>ub(r.args)))}hasResolvedAt(e,r){let{lineNumber:n,columnNumber:i}=r.base0;return this.cdpBreakpoints.some(o=>o.state===1&&o.locations.some(s=>s.scriptId===e&&s.lineNumber===n&&(s.columnNumber===void 0||s.columnNumber===i)))}getBreakCondition(){}updateExistingCdpRef(e,r){this.updateCdpRefs(n=>n.map(i=>i.state!==1||i.cdpId!==e?i:r(i)))}updateCdpRefs(e){let r=this;r.cdpBreakpoints=e(this.cdpBreakpoints);let n=new Set;this.setInCdpScriptIds.clear();for(let i of this.cdpBreakpoints)if(i.state===1){n.add(i.cdpId);for(let o of i.locations)this.setInCdpScriptIds.add(o.scriptId)}this._cdpIds=n}async _setPredicted(e){if(!this.source.path||!this._manager._breakpointsPredictor)return;let r=this._manager._breakpointsPredictor.predictedResolvedLocations({absolutePath:this.source.path,lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber}),n=[];for(let i of r){let o=this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(i.absolutePath);o!==void 0&&(typeof o=="string"?n.push(this._setByUrlRegexp(e,o,i)):n.push(o.then(s=>s?this._setByUrlRegexp(e,s,i):void 0)))}await Promise.all(n)}async _setByUiLocation(e,r){await Promise.all(r.source.scripts.map(n=>this._setForSpecific(e,n,r)))}async _setByPath(e,r){let n=this._manager._sourceContainer.source({path:this.source.path});if(!(n instanceof $t&&[...n.compiledToSourceUrl.keys()].some(o=>o.absolutePath===this.source.path)))if(this.source.path){let i=await this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(this.source.path);if(!i)return;await this._setByUrlRegexp(e,i,r)}else{let o=this._manager._sourceContainer.source(this.source)?.url;if(!o)return;await this._setByUrl(e,o,r),this.source.path!==o&&this.source.path!==void 0&&await this._setByUrl(e,Oe(this.source.path),r)}}hasSetOnLocation(e,r){return this.cdpBreakpoints.find(n=>e.scriptId&&EO(n.args)&&n.args.location.scriptId===e.scriptId&&ab(n.args.location,r)||e.url&&!e.hasSourceURL&&ub(n.args)&&(n.args.urlRegex?new RegExp(n.args.urlRegex).test(e.url):e.url===n.args.url)&&ab(n.args,r))}hasSetOnLocationByUrl(e,r,n){return this.cdpBreakpoints.find(i=>{if(ub(i.args))return ab(i.args,n)?e==="url"?i.args.urlRegex?new RegExp(i.args.urlRegex).test(r):i.args.url===r:e==="re"&&i.args.urlRegex===r:!1;let o=this._manager._sourceContainer.getScriptById(i.args.location.scriptId);if(o)return ab(i.args.location,n)&&e==="re"?new RegExp(r).test(o.url):o.url===r})}async _setForSpecific(e,r,n){return r.url&&!r.hasSourceURL&&(!r.embedderName||r.embedderName===r.url)?this._setByUrl(e,r.url,n):this._setByScriptId(e,r,n)}async _setByUrl(e,r,n){n=is(n);let i=this.hasSetOnLocationByUrl("url",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{url:r,condition:this.getBreakCondition(),...n})}async _setByUrlRegexp(e,r,n){n=is(n);let i=this.hasSetOnLocationByUrl("re",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{urlRegex:r,condition:this.getBreakCondition(),...n})}async _setByScriptId(e,r,n){n=is(n);let i=this.hasSetOnLocation(r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{condition:this.getBreakCondition(),location:{scriptId:r.scriptId,...n}})}async _setAny(e,r){if(!this.isEnabled)return;let n={state:0,args:r,deadletter:!1};n.done=(async()=>{let i=EO(r)?await e.cdp().Debugger.setBreakpoint(r):await e.cdp().Debugger.setBreakpointByUrl(r);if(!i)return;if(n.deadletter){await e.cdp().Debugger.removeBreakpoint({breakpointId:i.breakpointId});return}let o="actualLocation"in i?[i.actualLocation]:i.locations;this._manager._resolvedBreakpoints.set(i.breakpointId,this);let s={state:1,cdpId:i.breakpointId,args:r,locations:o,uiLocations:[]};return this.updateCdpRefs(a=>a.map(u=>u===n?s:u)),await this.updateUiLocations(e,i.breakpointId,o),s})(),this.updateCdpRefs(i=>[...i,n]),await n.done}async removeCdpBreakpoint(e){this.updateCdpRefs(r=>r.filter(n=>n!==e)),e.state===0?(e.deadletter=!0,await e.done):(await this._manager._thread?.cdp().Debugger.removeBreakpoint({breakpointId:e.cdpId}),this._manager._resolvedBreakpoints.delete(e.cdpId))}};var zn=class extends zl{constructor(r,n,i){super(r,n,{lineNumber:1,columnNumber:1});this.mode=i}static getModeKeyForSource(r,n){return r===1?(0,cb.basename)(n,(0,cb.extname)(n)||void 0):n}_setPredicted(){return Promise.resolve()}_setByPath(r,n){if(!this.source.path)return Promise.resolve();let i=zn.getModeKeyForSource(this.mode,this.source.path);return this.mode===1?super._setByUrlRegexp(r,Gr(i),n):super._setByPath(r,n)}};var CO=A(_e());var Xn=class extends zl{constructor(r,n,i,o,s){super(r,i,{lineNumber:o.line,columnNumber:o.column||1});this.dapId=n;this.dapParams=o;this.condition=s;this.completedSet=Ue()}equivalentTo(r){return r.dapParams.column===this.dapParams.column&&r.dapParams.line===this.dapParams.line&&r.dapParams.hitCondition===this.dapParams.hitCondition&&r.dapParams.condition===this.dapParams.condition&&r.dapParams.logMessage===this.dapParams.logMessage}untilSetCompleted(){return this.completedSet.promise}markSetCompleted(){this.completedSet.resolve()}testHitCondition(r){return this.condition.shouldStayPaused(r)}async toDap(){let r=this.enabled&&this.getResolvedUiLocation();return r?{id:this.dapId,verified:!0,source:await r.source.toDap(),line:r.lineNumber,column:r.columnNumber}:{id:this.dapId,verified:!1,message:CO.t("Unbound breakpoint")}}diagnosticDump(){return{source:this.source,params:this.dapParams,cdp:this.cdpBreakpoints}}getBreakCondition(){return this.condition.breakCondition}updateCdpRefs(r){let n=this.getResolvedUiLocation();super.updateCdpRefs(r),this.getResolvedUiLocation()!==n&&this.notifyResolved()}getResolvedUiLocation(){for(let r of this.cdpBreakpoints)if(r.state===1&&r.uiLocations.length)return r.uiLocations[0]}async notifyResolved(){await this._manager.notifyBreakpointChange(this,this.completedSet.hasSettled())}};var lb=class extends Xn{constructor(e,r,n,i){super(e,r,n,i,new pa(()=>!1))}getResolvedUiLocation(){}};var kF=A(Rh());var Mh=class extends zn{constructor(r,n){super(r,{path:n},1);this.pattern=n}async enable(r){if(this.isEnabled)return;this.isEnabled=!0;let n=(0,kF.makeRe)(ze(this.pattern),{contains:!0,lookbehinds:!1});await this._setAny(r,{urlRegex:n.source.replace(/([a-z]):/i,(i,o)=>`[${o.toLowerCase()}${o.toUpperCase()}]:`),lineNumber:0,columnNumber:0})}};var Zl=A(J());var Yl={dispose:()=>{}},Se=class{constructor(e){this.disposed=!1;this.items=[];e&&(this.items=e.slice())}get isDisposed(){return this.disposed}callback(...e){for(let r of e)this.push({dispose:r})}push(...e){return this.disposed?(e.forEach(r=>r.dispose()),e[0]):(this.items.push(...e),e[0])}disposeObject(e){this.items=this.items.filter(r=>r!==e),e.dispose()}dispose(){let e=Promise.all(this.items.map(r=>r.dispose()));return this.items=[],this.disposed=!0,e}};var Ql=Symbol("IExperimentationService");var zt=Symbol("ITelemetryReporter");var xie=/\/node_modules\/|^node\:/,Lie=2,OF=5e3,Tie=OF/2,Ht=class{constructor(e,r,n){this.telemetry=r;this.experimentation=n;this.disposable=new Se;this.hadBreakpoint=!1;this.didVerifyBreakpoint=!1;this.hadNonModuleSourcemap=!1;this.startedAt=Date.now();this.disposable.push(Ht.didVerifyEmitter.event(()=>{this.didVerifyBreakpoint=!0})),Ht.consecutiveQualifyingSessions>=Lie&&this.disposable.push(Xk(async()=>{this.currentlyQualifying&&await this.experimentation.getTreatment("diagnosticPrompt",!0)&&(r.report("diagnosticPrompt",{event:"suggested"}),Ht.didSuggest=!0,e.suggestDiagnosticTool({}))},OF))}get currentlyQualifying(){return this.hadBreakpoint&&!this.didVerifyBreakpoint&&this.hadNonModuleSourcemap}notifyHadBreakpoint(){this.hadBreakpoint=!0}notifyVerifiedBreakpoint(){this.didVerifyBreakpoint||(Ht.didVerifyEmitter.fire(),Ht.didSuggest&&(Ht.didSuggest=!1,this.telemetry.report("diagnosticPrompt",{event:"resolved"})))}attach(e){if(!this.hadNonModuleSourcemap){let r=this.disposable.push(e.Debugger.on("scriptParsed",n=>{n.sourceMapURL&&!xie.test(n.url)&&(this.hadNonModuleSourcemap=!0,this.disposable.disposeObject(r))}))}}dispose(){this.currentlyQualifying&&Date.now()-Tie>this.startedAt?Ht.consecutiveQualifyingSessions++:Ht.consecutiveQualifyingSessions=0,this.disposable.dispose()}};Ht.consecutiveQualifyingSessions=0,Ht.didVerifyEmitter=new z,Ht.didSuggest=!1,Ht=T([(0,Zl.injectable)(),v(0,(0,Zl.inject)(Dl)),v(1,(0,Zl.inject)(zt)),v(2,(0,Zl.inject)(Ql))],Ht);var Qn=A(J()),ZF=A(qF()),YS=A(Iy());var rp=Symbol("IContainer"),_o=Symbol("StoragePath"),cn=Symbol("IInitializeParams"),Yn=Symbol("VSCodeApi"),np=Symbol("IsVSCode"),it=Symbol("ExtensionContext"),KS=Symbol("ProcessEnv"),kh=Symbol("execa"),we=Symbol("FS"),us="ExtensionLocation",zu=Symbol("IBrowserFinder"),FDe=Symbol("DwarfDebugging"),ip=Symbol("SessionSubStates"),GS=new WeakMap,wt=(t,e)=>{if(!(typeof e=="object"&&e&&"dispose"in e))return e;let r=e,n=GS.get(t.container);return n?n.push(r):GS.set(t.container,[r]),e},bb=t=>{GS.get(t)?.forEach(e=>e.dispose())},ln=Symbol("IExtensionContribution");var wb=A(J());var WF=A(require("fs")),vb=A(require("path")),VF=t=>{let e={};f(e);function r(h,H){return t({category:"telemetry",output:h,data:H})}let n=h=>r("js-debug/dap/operation",{...e,...h}),i=h=>r("js-debug/cdp/operation",{...e,...h}),o=h=>r("js-debug/error",{...e,...h}),s=h=>{e.browser=(h.targetProject||h.targetProject)+"/"+h.targetVersion,r("js-debug/browserVersion",{...e,...h})},a=h=>r("js-debug/breakpointStats",{...e,...h}),u=h=>r("js-debug/statistics",{...e,...h}),c=h=>{e.nodeVersion=h.version,r("js-debug/nodeRuntime",{...e,...h})},l=h=>{r("js-debug/launch",{...e,...h,parameters:JSON.stringify(h.parameters)})},p=h=>{r("js-debug/diagnosticPrompt",{...e,...h})};function f(h){try{let H=vb.resolve(vb.dirname(__filename),"..","..",".gitcommit");h.jsDebugCommitId=WF.readFileSync(H,"utf8")}catch{}}return{breakpointStats:a,statistics:u,browserVersion:s,cdpOperation:i,dapOperation:n,error:o,launch:l,nodeRuntime:c,diagnosticPrompt:p,setGlobalMetric:(h,H)=>{e[h]=H}}};var Oh=class{constructor(e=!0){this.isVSCode=e;this.measurements=Object.create(null)}add(e,r,n){let i=this.measurements[e];i||(i=this.measurements[e]={times:[],errors:[]}),i.times.push(r),n&&i.errors.push(n)}flush(){let e={errors:[]};for(let r in this.measurements){let{times:n,errors:i}=this.measurements[r],o={operation:r,totalTime:0,max:0,avg:0,stddev:0,count:n.length,failed:i.length};for(let s of n)o.totalTime+=s,o.max=Math.max(o.max,s);o.avg=o.totalTime/o.count;for(let s of n)o.stddev+=(s-o.avg)**2;o.stddev=Math.sqrt(o.stddev/(n.length-1)),e[o.operation]=o,e[`!${o.operation}.errors`]=i,this.isVSCode||(e[`${o.operation}.errors`]=i)}return this.measurements=Object.create(null),e}};var pn=class{constructor(e=!0){this.isVsCode=e;this.target=[];this.flushEmitter=new z;this.loggers=VF(e=>this.pushOutput(e));this.batchFlushTimeout={};this.batchers={dapOperation:new Oh(this.isVsCode),cdpOperation:new Oh(this.isVsCode)};this.onFlush=this.flushEmitter.event;this.setGlobalMetric=this.loggers.setGlobalMetric}report(e,...r){let n=this.loggers[e];n(...r)}reportOperation(e,r,n,i){this.batchers[e].add(r,n,i),this.batchFlushTimeout[e]===void 0&&(this.batchFlushTimeout[e]=setTimeout(()=>{this.report(e,this.batchers[e].flush()),this.batchFlushTimeout[e]=void 0},pn.batchFlushInterval))}attachDap(e){this.target instanceof Array&&this.target.forEach(r=>e.output(r)),this.target=e}flush(){this.flushEmitter.fire();let e=Object.entries(this.batchFlushTimeout);for(let[r,n]of e){let i=this.batchers[r].flush();i.length&&this.report(r,i),this.batchFlushTimeout[r]=void 0,clearTimeout(n)}}dispose(){for(let e of Object.values(this.batchFlushTimeout))e&&clearTimeout(e)}pushOutput(e){e.data=zS(e.data),this.target instanceof Array?this.target.push(e):this.target.output(e)}};pn.batchFlushInterval=5e3,pn=T([(0,wb.injectable)(),v(0,(0,wb.inject)(np))],pn);var zS=t=>typeof t=="number"?Number(t.toFixed(1)):typeof t!="object"||!t?t:t instanceof Error?XS(t):t instanceof Array?t.map(zS):Xo(t,zS),GF=/(?:[A-z]:)?(?:[\\/][^:]*)+[\\/]([^:]*:)/g;function XS(t){let e=String(t.message),r=String(t.name);GF.lastIndex=0;let n=typeof t.stack=="string"?t.stack.replace(GF,"$1"):void 0;return{error:{message:e,name:r,stack:n}}}var zF=require("crypto"),Ju=A(J());var Xu=Symbol("IDwarfModuleProvider");var Ab=Symbol("IWasmSymbolProvider"),op=class{constructor(e,r,n,i){this.dwarf=e;this.cdp=r;this.logger=n;this.launchConfig=i;this.doPrompt=Ae(()=>this.dwarf.prompt())}async loadWasmSymbols(e){if(!this.launchConfig.enableDWARF)return this.defaultSymbols(e);let r=await this.getWorker();if(!r){let s=this.defaultSymbols(e);return s.onDidDisassemble=this.doPrompt,s}let n=(0,zF.randomUUID)(),i=e.debugSymbols?.externalURL,o;try{o=await r.sendMessage("addRawModule",n,i,{url:e.url,code:!i&&e.url.startsWith("wasm://")?await this.getBytecode(e.scriptId):void 0})}catch{return this.defaultSymbols(e)}return!(o instanceof Array)||o.length===0?(r.sendMessage("removeRawModule",n),this.defaultSymbols(e)):(this.logger.info("sourcemap.parsing","parsed files from wasm",{files:o}),new JS(e,this.cdp,n,r,o))}dispose(){this.worker?.dispose(),this.worker=void 0}defaultSymbols(e){return new _b(e,this.cdp,[])}async getBytecode(e){let n=(await this.cdp.Debugger.getScriptSource({scriptId:e}))?.bytecode;return n?Buffer.from(n,"base64").buffer:void 0}async getWorker(){if(this.worker!==void 0)return this.worker?.rpc;let e=await this.dwarf.load();if(!e){this.worker=null;return}return this.worker=e.spawn({getWasmGlobal:(r,n)=>this.loadWasmValue(`globals[${r}]`,n),getWasmLocal:(r,n)=>this.loadWasmValue(`locals[${r}]`,n),getWasmOp:(r,n)=>this.loadWasmValue(`stack[${r}]`,n),getWasmLinearMemory:(r,n,i)=>this.loadWasmValue(`[].slice.call(new Uint8Array(memories[0].buffer, ${+r}, ${+n}))`,i).then(o=>new Uint8Array(o).buffer)}),this.worker.rpc.sendMessage("hello",[],!1),this.worker.rpc}async loadWasmValue(e,r){let n=r,i=await this.cdp.Debugger.evaluateOnCallFrame({callFrameId:n,expression:e+ht(),silent:!0,returnByValue:!0,throwOnSideEffect:!0});if(!i||i.exceptionDetails)throw new Error(`evaluate failed: ${i?.exceptionDetails?.text||"unknown"}`);return i.result.value}};op=T([(0,Ju.injectable)(),v(0,(0,Ju.inject)(Xu)),v(1,(0,Ju.inject)(mt)),v(2,(0,Ju.inject)(ce)),v(3,(0,Ju.inject)(Me))],op);var _b=class{constructor(e,r,n){this.event=e;this.cdp=r;this.doDisassemble=Ae(async()=>{let e=[],r;for await(let n of this.getDisassembledStream()){e=e.concat(n.lines);let i;if(r){let o=new Uint32Array(r.length+n.lines.length);i=r.length,o.set(r),r=o}else r=new Uint32Array(n.lines.length),i=0;for(let o=0;o<n.lines.length;o++)r[i+o]=n.bytecodeOffsets[o]}return r??=new Uint32Array(0),{lines:e,byteOffsetsOfLines:r}});n.push(this.decompiledUrl=e.url.replace(".wasm",".wat")),this.files=n}async getDisassembly(){let{lines:e}=await this.doDisassemble();return this.onDidDisassemble?.(),e.join(`
`)}originalPositionFor(e){return this.disassembledPositionFor(e)}async disassembledPositionFor(e){let{byteOffsetsOfLines:r}=await this.doDisassemble(),n=M1(r,e.base0.columnNumber,(i,o)=>i-o);if(n!==r.length)return{url:this.decompiledUrl,position:new vt(n,0)}}async compiledPositionFor(e,r){if(e!==this.decompiledUrl)return[];let{byteOffsetsOfLines:n}=await this.doDisassemble(),{lineNumber:i}=r.base0;if(i>=n.length)return[];let o=n[r.base0.lineNumber];return[new vt(0,o)]}dispose(){}async*getDisassembledStream(){let{scriptId:e}=this.event,r=await this.cdp.Debugger.disassembleWasmModule({scriptId:e});if(r)for(yield r.chunk;r.streamId;){let n=await this.cdp.Debugger.nextWasmDisassemblyChunk({streamId:r.streamId});if(!n)return;yield n.chunk}}},JS=class extends _b{constructor(r,n,i,o,s){super(r,n,s);this.moduleId=i;this.rpc=o;this.mappedLines=new Map}get codeOffset(){return this.event.codeOffset||0}async originalPositionFor(r){let n=await this.rpc.sendMessage("rawLocationToSourceLocation",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return n.length?{position:new vt(n[0].lineNumber,n[0].columnNumber),url:n[0].sourceFileURL}:super.originalPositionFor(r)}async compiledPositionFor(r,n){if(r===this.decompiledUrl)return super.compiledPositionFor(r,n);let{lineNumber:i,columnNumber:o}=n.base0,s=await this.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:i,columnNumber:o===0?-1:o,rawModuleId:this.moduleId,sourceFileURL:r});if(o===0&&s.length===0){let a=await this.getMappedLines(r),u=a.find(c=>c>i);if(!a.includes(i)&&u)return this.compiledPositionFor(r,new vt(u,0))}return s.filter(a=>a.rawModuleId===this.moduleId).map(a=>new vt(0,this.codeOffset+a.startOffset))}dispose(){return this.rpc.sendMessage("removeRawModule",this.moduleId)}async getVariablesInScope(r,n){let i={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId};return(await this.rpc.sendMessage("listVariablesInScope",i)).map(s=>({name:s.name,scope:s.scope,type:s.type,evaluate:async()=>{let a=await this.rpc.sendMessage("evaluate",s.name,i,r);return a?new Fh(a,this.rpc):Fie}}))}async getFunctionStack(r){let n=await this.rpc.sendMessage("getFunctionInfo",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return"frames"in n?n.frames:[]}async getStepSkipList(r,n,i,o){if(i===this.decompiledUrl)return[];let s={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},a=()=>o&&i?this.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:o.base0.lineNumber,columnNumber:-1,rawModuleId:this.moduleId,sourceFileURL:i}):[],u;switch(r){case 2:{u=await this.rpc.sendMessage("getInlinedFunctionRanges",s);break}case 1:{let c=await Promise.all([this.rpc.sendMessage("getInlinedCalleesRanges",s),a()]);u=Yo(c);break}case 0:u=await a();break;default:u=[];break}return u.map(c=>new In(new vt(0,c.startOffset+this.codeOffset),new vt(0,c.endOffset+this.codeOffset)))}async evaluate(r,n,i){try{return await this.rpc.sendMessage("evaluate",i,{codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},r)??void 0}catch(o){throw new ee(Xe(o.message))}}getMappedLines(r){let n=this.mappedLines.get(r);if(n)return n;let i=(async()=>{try{let o=await this.rpc.sendMessage("getMappedLines",this.moduleId,r);return new Uint32Array(o?.sort((s,a)=>s-a)||[])}catch{return new Uint32Array}})();return this.mappedLines.set(r,i),i}},Fie={type:"null",description:"no properties"},Fh=class{constructor(e,r){if(this.type=e.type,this.description=e.description,this.linearMemoryAddress=e.linearMemoryAddress,this.linearMemorySize=e.linearMemoryAddress,e.objectId&&e.hasChildren){let n=e.objectId;this.getChildren=Ae(()=>this._getChildren(r,n))}}async _getChildren(e,r){return(await e.sendMessage("getProperties",r)).map(i=>({name:i.name,value:new Fh(i.value,e)}))}};var ha=Symbol("IScriptSkipper");function XF(t){return typeof t.lineNumber=="number"&&typeof t.columnNumber=="number"&&!!t.source}var JF=()=>({source:null,line:null,column:null,name:null,lastColumn:null,isSourceMapLoadFailure:!0}),Bie=/\?t=[0-9]+$/,Nie=t=>t.endsWith(".hot-update.js")||Bie.test(t),Uie={load:0,resolveLocation:2e3,sourceMapMinPause:1e3,output:1e3,sourceMapCumulativePause:1e4},YF=(t,e)=>e instanceof $t&&e.compiledToSourceUrl.has(t);var QF=2**31-1,or=class{constructor(e,r,n,i,o,s,a,u,c){this.sourceMapFactory=r;this.logger=n;this.launchConfig=i;this.initializeConfig=o;this.sourcePathResolver=s;this.scriptSkipper=a;this.resourceProvider=u;this.wasmSymbols=c;this.rootPaths=[];this.scriptsById=new Map;this.onSourceMappedSteppingChangeEmitter=new z;this.onScriptEmitter=new z;this._sourceByOriginalUrl=new fo(e=>e.toLowerCase());this._sourceByReference=new Map;this._sourceMapSourcesByUrl=new Map;this._sourceByAbsolutePath=ku();this._sourceMapTimeouts=Uie;this._fileContentOverridesForTest=new Map;this._temporarilyDisabledSourceMaps=new Set;this._permanentlyDisabledSourceMaps=new Set;this.onScript=this.onScriptEmitter.event;this._statistics={fallbackSourceMapCount:0};this._doSourceMappedStepping=this.launchConfig.sourceMaps;this.onSourceMappedSteppingChange=this.onSourceMappedSteppingChangeEmitter.event;this._dap=e;let l="webRoot"in i?i.webRoot:i.rootPath;l&&(this.rootPaths=[l,_n(l,"..","ClientApp")]),a.setSourceContainer(this),this.setSourceMapTimeouts({...this.sourceMapTimeouts(),...i.timeouts})}get sources(){return this._sourceByReference.values()}statistics(){return this._statistics}get doSourceMappedStepping(){return this._doSourceMappedStepping}set doSourceMappedStepping(e){e!==this._doSourceMappedStepping&&(this._doSourceMappedStepping=e,this.onSourceMappedSteppingChangeEmitter.fire(e))}setSourceMapTimeouts(e){this._sourceMapTimeouts=e}sourceMapTimeouts(){return this._sourceMapTimeouts}setFileContentOverrideForTest(e,r){r===void 0?this._fileContentOverridesForTest.delete(e):this._fileContentOverridesForTest.set(e,r)}async loadedSources(){let e=[];for(let r of this._sourceByReference.values())e.push(r.toDap());return await Promise.all(e)}source(e){if(e.sourceReference)return this._sourceByReference.get(e.sourceReference);if(e.path)return this._sourceByAbsolutePath.get(e.path)}isSourceSkipped(e){return this.scriptSkipper.isScriptSkipped(e)}addScriptById(e){this.scriptsById.set(e.scriptId,e),this.onScriptEmitter.fire(e)}getScriptById(e){return this.scriptsById.get(e)}getSourceByOriginalUrl(e){return this._sourceByOriginalUrl.get(e)}getSourceReference(e){let r=(0,ZF.xxHash32)(e)&QF;for(let n=0;n<65535;n++){if(!this._sourceByReference.has(r))return r;r===QF&&(r=0),r++}return this.logger.assert(!1,"Max iterations exceeding for source reference assignment"),r}async preferredUiLocation(e){let r=!1,n=4;for(;;){let i=await this._originalPositionFor(e);if(!XF(i)){n=r?void 0:i;break}e=i,r=!0,n=void 0}return{...e,isMapped:r,unmappedReason:n}}async currentSiblingUiLocations(e,r){let n=await this._uiLocations(e);return r?n.filter(i=>i.source===r):n}clear(e){this.scriptsById.clear();for(let r of this._sourceByReference.values())this.removeSource(r,e);this._sourceByReference.clear(),this.sourceMapFactory instanceof ua&&this.sourceMapFactory.invalidateCache()}async _uiLocations(e){let[r,n]=await Promise.all([this.getSourceMapUiLocations(e),this.getCompiledLocations(e)]);return[...r,e,...n]}async getSourceMapUiLocations(e){let r=await this._originalPositionFor(e);if(!XF(r))return[];let n=await this.getSourceMapUiLocations(r);return n.push(r),n}async _originalPositionFor(e){if(!Kr(e.source))return 1;let r=await Dh.waitForValueWithTimeout(e.source.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!r)return 2;if(this._doSourceMappedStepping)return this._originalPositionForMap(e,r);if(SS(r)){let n=await r.disassembledPositionFor(new Ut(e.lineNumber,e.columnNumber)),i=n&&e.source.sourceMap.sourceByUrl.get(n.url);if(i)return i?{columnNumber:n.position.base1.lineNumber,lineNumber:n.position.base1.lineNumber,source:i}:3}return 0}async _originalPositionForMap(e,r){let n=e.source;if(!Kr(n))return 1;if(this._temporarilyDisabledSourceMaps.has(n)||this._permanentlyDisabledSourceMaps.has(n))return 0;let i=await this.getOptiminalOriginalPosition(r,gO(e,n.inlineScriptOffset));if(!i)return 3;let o=n.sourceMap.sourceByUrl.get(i.url);if(!o)return 3;let s=i.position.base1;return{lineNumber:s.lineNumber,columnNumber:s.columnNumber,source:o}}async getCompiledLocations(e){if(!(e.source instanceof $t))return[];let r=[];for(let[n,i]of e.source.compiledToSourceUrl){let o=await Dh.waitForValueWithTimeout(n.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!o)continue;let s;if("decompiledUrl"in o){let a=await o.compiledPositionFor(i,new Ut(e.lineNumber,e.columnNumber));if(!a)continue;s=a.map(u=>({lineNumber:u.base1.lineNumber,columnNumber:u.base1.columnNumber,source:n}))}else{let a=this.sourceMapFactory.guardSourceMapFn(o,()=>Oy(i,e,o),JF);if(!a)continue;let{lineNumber:u,columnNumber:c}=mO({lineNumber:a.line||1,columnNumber:(a.column||0)+1},n.inlineScriptOffset),l={lineNumber:u,columnNumber:c,source:n};s=[l,...await this.getCompiledLocations(l)]}r=r.concat(s)}return r}async getOptiminalOriginalPosition(e,r){if(SS(e))return await e.originalPositionFor(new Ut(r.lineNumber,r.columnNumber));let n=this.sourceMapFactory.guardSourceMapFn(e,()=>{let i=e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:YS.SourceMapConsumer.GREATEST_LOWER_BOUND});return i.line!==null?i:e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:YS.SourceMapConsumer.LEAST_UPPER_BOUND})},JF);if(!(n.column===null||n.line===null||n.source===null))return{position:new Ei(n.line,n.column),url:n.source}}async addSource(e,r,n,i,o,s){let a=await this.sourcePathResolver.urlToAbsolutePath({url:e.url});this.logger.verbose("runtime.sourcecreate","Creating source from url",{inputUrl:e.url,absolutePath:a});let u;return e.scriptLanguage==="WebAssembly"?u=new nb(this,e,a):u=new qu(this,e.url,a,r,n&&this.sourcePathResolver.shouldResolveSourceMap({sourceMapUrl:n,compiledPath:a||e.url})?{sourceMapUrl:n,compiledPath:a||e.url,cacheKey:e.hash}:void 0,i,o,s),this._addSource(u),u}async _addSource(e){let r=e.url&&this._sourceByOriginalUrl.get(e.url);r&&!YF(r,e)&&this.removeSource(r,!0),this._sourceByOriginalUrl.set(e.url,e),this._sourceByReference.set(e.sourceReference,e),e instanceof $t&&this._sourceMapSourcesByUrl.set(e.url,e);let n=this._sourceByAbsolutePath.get(e.absolutePath);(n===void 0||n.url.length>=e.url.length||YF(n,e))&&this._sourceByAbsolutePath.set(e.absolutePath,e),this.scriptSkipper.initializeSkippingValueForSource(e),e.toDap().then(i=>this._dap.loadedSource({reason:"new",source:i})),ca(e)?this._finishAddSourceWithSourceMap(e):Wu(e)&&this._finishAddSourceWithWasm(e)}async _finishAddSourceWithWasm(e){let r=await this.wasmSymbols.loadWasmSymbols(e.event),n=[];for(let i of r.files){let o=await this.sourcePathResolver.urlToAbsolutePath({url:i}),s=o?Oe(o):i;this.logger.verbose("runtime.sourcecreate","Creating wasm source from source map",{inputUrl:i,absolutePath:o,resolvedUrl:s});let a=o&&Oe(o),u=i===r.decompiledUrl?()=>r.getDisassembly():()=>a?this.resourceProvider.fetch(a).then(l=>l.body):Promise.resolve(`Could not read ${i}`),c=new $t(this,s,o,u);c.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,c),n.push(this._addSource(c))}await Promise.all(n),e.sourceMap.value.resolve(r)}async _finishAddSourceWithSourceMap(e){let r=e.sourceMap.value,n;try{n=await this.sourceMapFactory.load(e.sourceMap.metadata)}catch(i){if(this.initializeConfig.clientID==="visualstudio"){let o=e.sourceMap.metadata.sourceMapUrl;try{let s=await this.sourcePathResolver.urlToAbsolutePath({url:o});s&&(e.sourceMap.metadata.sourceMapUrl=Oe(s)),n=await this.sourceMapFactory.load(e.sourceMap.metadata),this._statistics.fallbackSourceMapCount++,this.logger.info("sourcemap.parsing","Failed to process original source-map; falling back to storage source-map",{fallbackSourceMapUrl:e.sourceMap.metadata.sourceMapUrl,originalSourceMapUrl:o,originalSourceMapError:XS(i)})}catch{}}if(n===void 0)return this._dap.output({output:Cy(e.url,i.message).error.format+`
`,category:"stderr"}),r.resolve(void 0)}if(this._sourceByReference.get(e.sourceReference)!==e)return r.resolve(void 0);this.logger.verbose("sourcemap.parsing","Creating sources from source map",{sourceMapId:n.id,metadata:n.metadata});try{await this._addSourceMapSources(e,n)}finally{r.resolve(n)}this.scriptSkipper.initializeSkippingValueForSource(e)}removeSource(e,r=!1){let n=this._sourceByReference.get(e.sourceReference);if(n!==void 0){if(this.logger.assert(e===n,"Expected source to be the same as the existing reference"),this._sourceByReference.delete(e.sourceReference),this._sourceByOriginalUrl.get(e.url)===e&&this._sourceByOriginalUrl.delete(e.url),e instanceof $t){this._sourceMapSourcesByUrl.delete(e.url);for(let[i,o]of e.compiledToSourceUrl)i.sourceMap.sourceByUrl.delete(o)}this._sourceByAbsolutePath.delete(e.absolutePath),Kr(e)&&(this._permanentlyDisabledSourceMaps.delete(e),this._temporarilyDisabledSourceMaps.delete(e)),r||e.toDap().then(i=>this._dap.loadedSource({reason:"removed",source:i})),ca(e)?e.sourceMap.value.settledValue?.destroy():Wu(e)&&e.sourceMap.value.promise.then(i=>i?.dispose()),Kr(e)&&this._removeSourceMapSources(e,r)}}async _addSourceMapSources(e,r){let n=[];for(let i of r.sources){let o=await this.sourcePathResolver.urlToAbsolutePath({url:i,map:r}),s=o?Oe(o):r.computedSourceUrl(i),a=this._sourceMapSourcesByUrl.get(s);if(e===a)continue;if(a)if(Nie(e.url))this.removeSource(a);else{a.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,a);continue}this.logger.verbose("runtime.sourcecreate","Creating source from source map",{inputUrl:i,sourceMapId:r.id,absolutePath:o,resolvedUrl:s});let u=o&&Oe(o),c=this.sourceMapFactory.guardSourceMapFn(r,()=>r.sourceContentFor(i,!0),()=>null),l;if(c){let f=xl(c);if(f&&(!gr(f)&&o?l=na(o?Oe(o):i,f):l=f),o&&l){let m={sourceMapUrl:l,compiledPath:o};this.sourcePathResolver.shouldResolveSourceMap(m)||(l=void 0)}}let p=new $t(this,s,o,c!==null?()=>Promise.resolve(c):u?()=>this.resourceProvider.fetch(u).then(f=>f.body):()=>e.content(),l?{compiledPath:o||s,sourceMapUrl:l,cacheKey:r.metadata.cacheKey}:void 0,void 0,e.runtimeScriptOffset);p.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,p),n.push(this._addSource(p))}await Promise.all(n)}_removeSourceMapSources(e,r){for(let n of e.sourceMap.sourceByUrl.keys()){let i=e.sourceMap.sourceByUrl.get(n);i&&(e.sourceMap.sourceByUrl.delete(n),i.compiledToSourceUrl.delete(e),!i.compiledToSourceUrl.size&&this.removeSource(i,r))}}async waitForSourceMapSources(e){return Kr(e)?[...(await Dh.waitForSources(e.sourceMap)).values()]:[]}async revealUiLocation(e){this._dap.revealLocationRequested({source:await e.source.toDap(),line:e.lineNumber,column:e.columnNumber})}disableSourceMapForSource(e,r=!1){r?this._permanentlyDisabledSourceMaps.add(e):this._temporarilyDisabledSourceMaps.add(e)}clearDisabledSourceMaps(e){e?this._temporarilyDisabledSourceMaps.delete(e):this._temporarilyDisabledSourceMaps.clear()}};or=T([(0,Qn.injectable)(),v(0,(0,Qn.inject)(on)),v(1,(0,Qn.inject)(Ho)),v(2,(0,Qn.inject)(ce)),v(3,(0,Qn.inject)(Me)),v(4,(0,Qn.inject)(cn)),v(5,(0,Qn.inject)(Ze)),v(6,(0,Qn.inject)(ha)),v(7,(0,Qn.inject)(Tu)),v(8,(0,Qn.inject)(Ab))],or);var eB=t=>t.originalPosition.columnNumber===1&&t.originalPosition.lineNumber===1,tB=500,rB=Symbol("DontCompare");var Zn=class{constructor(e,r,n,i,o,s,a){this.logger=n;this.launchConfig=i;this.conditionFactory=o;this.suggester=s;this._breakpointsPredictor=a;this._resolvedBreakpoints=new Map;this._totalBreakpointsCount=0;this._launchBlocker=new Set;this._predictorDisabledForTest=!1;this._breakpointsStatisticsCalculator=new zy;this.entryBreakpointMode=0;this._enabledFilter=()=>!0;this._byDapId=new Map;this._byPath=ku();this._byRef=new Map;this.moduleEntryBreakpoints=ku();this._dap=e,this._sourceContainer=r,a?.onLongParse(()=>e.longPrediction({})),r.onScript(u=>{u.source.then(c=>{let l=this._thread;l&&this._byRef.get(c.sourceReference)?.forEach(p=>p.updateForNewLocations(l,u))})}),r.onSourceMappedSteppingChange(()=>{if(this._thread)for(let u of this._byDapId.values())u.refreshUiLocations(this._thread)}),this._scriptSourceMapHandler=async(u,c)=>{if(!n.assert(this._thread,"Expected thread to be set for the breakpoint source map handler"))return[];let l=[],p=[c];for(let f=0;f<p.length;f++)for(let m of p[f]){let h=m.absolutePath,H=h?this._byPath.get(h):void 0;for(let _ of H||[])l.push(_.updateForNewLocations(this._thread,u));let b=this._byRef.get(m.sourceReference);for(let _ of b||[])l.push(_.updateForNewLocations(this._thread,u));m.sourceMap&&p.push(m.sourceMap.sourceByUrl.values())}return Yo(await Promise.all(l))}}get appliedByPath(){return this._byPath}get appliedByRef(){return this._byRef}hasAtLocation(e){let r=this._byPath.get(e.source.absolutePath)||[],n=this._byRef.get(e.source.sourceReference)||[];return r.concat(n).some(i=>i.originalPosition.columnNumber===e.columnNumber&&i.originalPosition.lineNumber===e.lineNumber)}async moveBreakpoints(e,r,n,i){let o=l=>GT(l,async p=>{let f=await this._sourceContainer.getOptiminalOriginalPosition(n,p.originalPosition);if(!f)return!1;let m=f.position.base1;return p.updateSourceLocation(e,{path:i.absolutePath,sourceReference:i.sourceReference},{lineNumber:m.lineNumber,columnNumber:m.columnNumber,source:i}),!1}),s=r.absolutePath,a=i.absolutePath,u=s?this._byPath.get(s):void 0;if(u&&a){let[l,p]=await o(u);this._byPath.set(s,l),this._byPath.set(a,p)}let c=this._byRef.get(r.sourceReference);if(c){let[l,p]=await o(c);this._byRef.set(r.sourceReference,l),this._byRef.set(i.sourceReference,p)}}async updateEntryBreakpointMode(e,r){if(r===this.entryBreakpointMode)return;let n=[...this.moduleEntryBreakpoints.values()];this.moduleEntryBreakpoints.clear(),this.entryBreakpointMode=r,await Promise.all(n.map(i=>this.ensureModuleEntryBreakpoint(e,i.source)))}async applyEnabledFilter(e,r=rB){if(r!==rB&&this._enabledFilter!==r)return;this._enabledFilter=e||(()=>!0);let n=this._thread;n&&await Promise.all([...this._byDapId.values()].map(i=>this._enabledFilter(i)?i.enable(n):i.disable()))}async getBreakpointLocations(e,r,n,i){let o=n.base1,s=i.base1,[a,u]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:o.lineNumber,columnNumber:o.columnNumber}),this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:s.lineNumber,columnNumber:s.columnNumber})]);if(a.length!==u.length)return this.logger.warn("internal","Expected to have the same number of start and end locations"),[];let c=[],l=[];for(let p=0;p<a.length;p++){let f=a[p],m=u[p];if(f.source!==m.source){this.logger.warn("internal","Expected to have the same number of start and end scripts");continue}let h=f.source;if(!h.scripts.length)continue;let{scriptId:H}=h.scripts[h.scripts.length-1];c.push(e.cdp().Debugger.getPossibleBreakpoints({restrictToFunction:!1,start:{scriptId:H,...h.offsetSourceToScript(is(f))},end:{scriptId:H,...h.offsetSourceToScript(is(m))}}).then(b=>{if(b?.locations)return Promise.all(b.locations.map(async _=>{let{lineNumber:$,columnNumber:U=0}=_,D=await this._sourceContainer.currentSiblingUiLocations({source:h,...h.offsetScriptToSource(HO({lineNumber:$,columnNumber:U}))});l.push({breakLocation:_,uiLocations:D})}))}))}return await Promise.all(c),l}setThread(e){this._thread=e,this._thread.cdp().Debugger.on("breakpointResolved",r=>{let n=this._resolvedBreakpoints.get(r.breakpointId);n&&n.updateUiLocations(e,r.breakpointId,[r.location])}),this._thread.setSourceMapDisabler(r=>{let n=[];for(let i of r){let o=this._resolvedBreakpoints.get(i);if(o){let s=this._sourceContainer.source(o.source);Kr(s)&&n.push(s)}}return n});for(let r of this._byPath.values())r.forEach(n=>this._setBreakpoint(n,e)),this.ensureModuleEntryBreakpoint(e,r[0]?.source);for(let r of this._byRef.values())r.forEach(n=>this._setBreakpoint(n,e));"runtimeSourcemapPausePatterns"in this.launchConfig&&this.launchConfig.runtimeSourcemapPausePatterns.length&&this.setRuntimeSourcemapPausePatterns(e,this.launchConfig.runtimeSourcemapPausePatterns),this._byDapId.size>0&&this._installSourceMapHandler(this._thread)}async launchBlocker(){Vy(this.logger,"BreakpointManager.launchBlocker",async()=>{this._predictorDisabledForTest||await Promise.all([...this._launchBlocker])})}setRuntimeSourcemapPausePatterns(e,r){return Promise.all(r.map(n=>this._setBreakpoint(new Mh(this,n),e)))}addLaunchBlocker(...e){for(let r of e)this._launchBlocker.add(r),r.finally(()=>this._launchBlocker.delete(r))}setPredictorDisabledForTest(e){this._predictorDisabledForTest=e}_installSourceMapHandler(e){let r=this.launchConfig.perScriptSourcemaps==="yes",n;r?n=Promise.all([this.updateEntryBreakpointMode(e,1),e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler)]).then(()=>!0):this._breakpointsPredictor&&!this.launchConfig.pauseForSourceMap?n=e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler):n=e.setScriptSourceMapHandler(!0,this._scriptSourceMapHandler),this._sourceMapHandlerInstalled={entryBpSet:n}}async _uninstallSourceMapHandler(e){e.setScriptSourceMapHandler(!1),this._sourceMapHandlerInstalled=void 0}_setBreakpoint(e,r){this._enabledFilter(e)&&this.addLaunchBlocker(Promise.race([Te(tB),e.enable(r)]))}async setBreakpoints(e,r){!this._sourceMapHandlerInstalled&&this._thread&&e.breakpoints?.length&&this._installSourceMapHandler(this._thread);let n=await this._sourceMapHandlerInstalled?.entryBpSet;e.source.path=Ii(e.source.path);let i=this._sourceContainer.source(e.source);if(!n&&this._breakpointsPredictor&&!i){let l=this._breakpointsPredictor.predictBreakpoints(e);this.addLaunchBlocker(l),await l}let o=this._thread;if(o?.debuggerReady.hasSettled()===!1){let l=o.debuggerReady.promise;this.addLaunchBlocker(l),await l}let s=l=>{let p={unbound:l.slice(),new:[],list:[]};if(!e.breakpoints)return p;for(let f=0;f<e.breakpoints.length;f++){let m=e.breakpoints[f],h;try{h=new Xn(this,r[f],e.source,m,this.conditionFactory.getConditionFor(m))}catch(_){if(!(_ instanceof ee))throw _;this._dap.output({category:"stderr",output:_.message}),h=new lb(this,r[f],e.source,m)}let H=p.unbound.findIndex(_=>_.equivalentTo(h)),b=p.unbound[H];b?.equivalentTo?.(h)?(p.list.push(b),p.unbound.splice(H,1)):(p.new.push(h),p.list.push(h),this._byDapId.set(h.dapId,h))}return p},a=()=>e.source.sourceReference?this._byRef.get(e.source.sourceReference):e.source.path?this._byPath.get(e.source.path):void 0,u=s(a()??[]);if(e.source.sourceReference)this._byRef.set(e.source.sourceReference,u.list);else if(e.source.path)this._byPath.set(e.source.path,u.list);else return{breakpoints:[]};if(u.unbound.length===0&&u.new.length===0)return{breakpoints:[]};if(this._totalBreakpointsCount-=u.unbound.length,await Promise.all(u.unbound.map(l=>(this._byDapId.delete(l.dapId),l.disable()))),this._totalBreakpointsCount+=u.new.length,this._thread&&(this._totalBreakpointsCount===0&&this._sourceMapHandlerInstalled?this._uninstallSourceMapHandler(this._thread):this._totalBreakpointsCount>0&&!this._sourceMapHandlerInstalled&&this._installSourceMapHandler(this._thread)),o&&u.new.length){this.ensureModuleEntryBreakpoint(o,e.source);let l=a(),p=Promise.all(u.new.filter(this._enabledFilter).filter(f=>l?.includes(f)).map(f=>f.enable(o)));this.addLaunchBlocker(Promise.race([Te(tB),p])),await p}let c=await Promise.all(u.list.map(l=>l.toDap()));return this._breakpointsStatisticsCalculator.registerBreakpoints(c),Te(0).then(()=>u.new.forEach(l=>l.markSetCompleted())),{breakpoints:c}}async notifyBreakpointChange(e,r){if(!this._byDapId.has(e.dapId))return;let n=await e.toDap();n.verified&&(this._breakpointsStatisticsCalculator.registerResolvedBreakpoint(e.dapId),this.suggester.notifyVerifiedBreakpoint()),r&&this._dap.breakpoint({reason:"changed",breakpoint:n})}isEntrypointBreak(e,r){return[...this.moduleEntryBreakpoints.values()].some(i=>i.enabled&&i.cdpScriptIds.has(r))?!0:e.some(i=>{let o=this._resolvedBreakpoints.get(i);return o&&(o instanceof zn||eB(o))})}isEntrypointCdpBreak(e){return this._resolvedBreakpoints.get(e)instanceof zn}async shouldPauseAt(e,r,n,i=!1){if(!r.length)return e.reason!=="instrumentation";let o=0,s=i?1:0;return await Promise.all(r.map(async a=>{if(n?.cdpId===a){o++;return}let u=this._resolvedBreakpoints.get(a);if(u instanceof zn){this.entryBreakpointMode===0&&!(u instanceof Mh)&&u.disable(),s++;return}u instanceof Xn&&(await u.testHitCondition(e)?o++:s++)})),o>0||s===0}registerBreakpointsHit(e){for(let r of e){let n=this._resolvedBreakpoints.get(r);n instanceof Xn&&this._breakpointsStatisticsCalculator.registerBreakpointHit(n.dapId)}}statisticsForTelemetry(){return this._breakpointsStatisticsCalculator.statistics()}ensureModuleEntryBreakpoint(e,r){if(!r.path||(this._byPath.get(r.path)??[]).some(eB))return;let i=zn.getModeKeyForSource(this.entryBreakpointMode,r.path);if(!r.path||this.moduleEntryBreakpoints.has(i))return;let o=new zn(this,r,this.entryBreakpointMode);this.moduleEntryBreakpoints.set(r.path,o),this._setBreakpoint(o,e)}executionContextWasCleared(){for(let e of this._byDapId.values())e.executionContextWasCleared()}async reapply(){let e=[...this._byDapId.values()];if(await Promise.all(e.map(r=>r.disable())),this._thread){let r=this._thread;await Promise.all(e.map(n=>n.enable(r)))}}};Zn=T([(0,Ao.injectable)(),v(0,(0,Ao.inject)(on)),v(1,(0,Ao.inject)(or)),v(2,(0,Ao.inject)(ce)),v(3,(0,Ao.inject)(Me)),v(4,(0,Ao.inject)(sb)),v(5,(0,Ao.inject)(Ht)),v(6,(0,Ao.inject)(Nu))],Zn);var yN=require("crypto"),dp=A(J());var Bh=class{constructor(e){this.element=e,this.next=Bh.Undefined,this.prev=Bh.Undefined}},et=Bh;et.Undefined=new Bh(void 0);var Nh=class{constructor(){this._first=et.Undefined;this._last=et.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===et.Undefined}clear(){let e=this._first;for(;e!==et.Undefined;){let r=e.next;e.prev=et.Undefined,e.next=et.Undefined,e=r}this._first=et.Undefined,this._last=et.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new et(e);if(this._first===et.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==et.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==et.Undefined){let e=this._last.element;return this._remove(this._last),e}}applyFilter(e){let r=this._first;for(;r!==et.Undefined;){let n=r.next;e(r.element)||this._remove(r),r=n}}_remove(e){if(e.prev!==et.Undefined&&e.next!==et.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===et.Undefined&&e.next===et.Undefined?(this._first=et.Undefined,this._last=et.Undefined):e.next===et.Undefined?(this._last=this._last.prev,this._last.next=et.Undefined):e.prev===et.Undefined&&(this._first=this._first.next,this._first.prev=et.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==et.Undefined;)yield e.element,e=e.next}};var kb=A(J()),hN=A(require("net"));var Io=class extends ee{constructor(e){super({id:9243,format:e,showUser:!0}),this._cause={id:9243,format:e,showUser:!0}}};function So(t,e,r){if(e.isCancellationRequested)return Promise.reject(new Io(r||"Task cancelled"));let n=Ue(),i=e.onCancellationRequested(n.resolve);return Promise.race([n.promise.then(()=>{throw new Io(r||"Task cancelled")}),t.then(o=>(i.dispose(),o)).catch(o=>{throw i.dispose(),o})])}function nB(t,e){let r=new sr(e),n=t.map(async i=>{try{return await i(r.token)}finally{r.cancel()}});return Promise.race(n)}var iB=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),ar=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>({dispose:()=>{}})}),jie=Object.freeze({isCancellationRequested:!0,onCancellationRequested:iB}),sr=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static withTimeout(e,r){let n=new sr(r),i=n._token=new sp,o=setTimeout(()=>i.cancel(),e);return i.onCancellationRequested(()=>clearTimeout(o)),n}get token(){return this._token||(this._token=new sp),this._token}cancel(){this._token?this._token instanceof sp&&this._token.cancel():this._token=jie}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof sp&&this._token.dispose():this._token=ar}},sp=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?iB:(this._emitter||(this._emitter=new z),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};var vE=A(require("net"));var nse=A(uB(),1),ise=A(cE(),1),ose=A(lE(),1),aN=A(HE(),1),bE=A(sN(),1);var uN=aN.default;var cN=(t,e)=>t+Math.floor(Math.random()*(e-t));async function ya({min:t=53e3,max:e=54e3,attempts:r=1e3,tester:n=pN}={},i=ar){let o=cN(t,e);for(let s=Math.min(r,e-t);;s--)try{return await n(o,i)}catch(a){if(s===0||a instanceof Io)throw a;o=o===e-1?t:o+1}}async function lN(t,e){try{return await pN(t,e),!0}catch{return!1}}function pN(t,e=ar){let r;return new Promise((n,i)=>{let o=vE.createServer();o.listen(t,"127.0.0.1",()=>{let s=o.address();o.close(()=>n(s.port))}),o.on("error",i),r=e.onCancellationRequested(()=>{o.close(),i(new Io("Port open lookup cancelled"))})}).finally(()=>r?.dispose())}var fN=(t,e)=>(r,n)=>{let i=vE.createServer(t);return i.listen(r,e),Mb(i,n)},dN=t=>(e,r)=>Mb(new bE.default({host:"127.0.0.1",...t,port:e}),r),Mb=(t,e)=>{let r;return new Promise((n,i)=>{t.on("error",i),t.on("listening",()=>n(t)),r=e.onCancellationRequested(()=>{t.close(),i(new Io("Port open lookup cancelled"))})}).finally(()=>r?.dispose())};var mN=async(t,e,r,n,i=ar)=>{let o=r?await Mb(hN.createServer(e).listen(r,n),i):await ya({tester:fN(e,n)},i),s=t.register(o.address().port);return o.on("close",()=>s.dispose()),o.on("error",()=>s.dispose()),o},Ob=async(t,e,r)=>{let n=await ya({tester:dN(e)},r),i=t.register(n.address().port);return n.on("close",()=>i.dispose()),n.on("error",()=>i.dispose()),n},at=Symbol("IPortLeaseTracker"),pp=class{constructor(e){this.usedPorts=new Set;this.onRegistered=new z;this.isMandated=e==="remote"}register(e){return this.usedPorts.add(e),this.onRegistered.fire(e),{dispose:()=>this.usedPorts.delete(e)}}isRegistered(e,r=2e3){return this.usedPorts.has(e)?Promise.resolve(!0):e<53e3||e>=54e3?Promise.resolve(!1):nB([()=>Te(r).then(()=>!1),n=>new Promise(i=>{let o=this.onRegistered.event(s=>{s===e&&i(!0)});n.onCancellationRequested(()=>o.dispose())})])}};pp=T([(0,kb.injectable)(),v(0,(0,kb.inject)(us))],pp);var gN="JsDebug",HN="*";var wE=class{constructor(){this.replays=new Map}addReplay(e,r,n){let i=this.replays.get(e);return i||(i=new Nh,this.replays.set(e,i)),i.push({event:`${e}.${r}`,params:n})}capture(e,r,n,i){let o=e[r];if(i===0)o.on(n,s=>this.addReplay(r,n,s));else if(i===2){let s;o.on(n,a=>{s?.(),s=this.addReplay(r,n,a)})}else{let s=new Nh;o.on(n,a=>{s.size===i.cap&&s.shift()?.(),s.push(this.addReplay(r,n,a))})}}filter(e,r){let n=this.replays.get(e);n&&n.applyFilter(r)}clearEvent(e,r){let n=`${e}.${r}`;this.filter(e,i=>i.event!==n)}clearDomain(e){this.replays.delete(e)}read(e){return this.replays.get(e)??[]}},Fb=Symbol("ICdpProxyProvider"),fp=class{constructor(e,r,n){this.cdp=e;this.portTracker=r;this.logger=n;this.disposables=new Se;this.replay=new wE;this.jsDebugApi={subscribe:(e,{events:r})=>{for(let n of r)n.endsWith(HN)?e.pushDisposable(this.cdp.session.onPrefix(n.slice(0,-HN.length),i=>e.send({method:i.method,params:i.params}))):e.pushDisposable(this.cdp.session.on(n,i=>e.send({method:n,params:i})));return{}}};this.replay.capture(e,"CSS","styleSheetAdded",0),this.replay.capture(e,"Debugger","paused",2),this.replay.capture(e,"Runtime","executionContextCreated",{cap:50,type:1}),this.replay.capture(e,"Runtime","consoleAPICalled",{cap:50,type:1}),e.Debugger.on("resumed",()=>{this.replay.clearEvent("Debugger","paused")}),e.CSS.on("fontsUpdated",i=>{i.font&&this.replay.addReplay("CSS","fontsUpdated",i)}),e.CSS.on("styleSheetRemoved",i=>this.replay.filter("CSS",o=>o.params.styleSheetId!==i.styleSheetId))}async proxy(){this.server||(this.server=this.createServer());let{server:e,path:r}=await this.server,n=e.address();return{host:n.address,port:n.port,path:r}}async createServer(){let e=`/${(0,yN.randomBytes)(20).toString("hex")}`,r=await Ob(this.portTracker,{perMessageDeflate:!0,path:e});return this.logger.info("proxyActivity","activated cdp proxy"),r.on("connection",n=>{let i=new _E(n,this.logger);this.logger.info("proxyActivity","accepted proxy connection",{id:i.id}),n.on("close",()=>{this.logger.verbose("proxyActivity","closed proxy connection",{id:i.id}),this.disposables.disposeObject(i)}),n.on("message",async o=>{let s;try{s=JSON.parse(o.toString())}catch(f){return i.send({id:0,error:{code:-32700,message:f.message}})}this.logger.verbose("proxyActivity","received proxy message",s);let{method:a,params:u,id:c=0}=s,[l,p]=a.split(".");try{let f=l===gN?await this.invokeJsDebugDomainMethod(i,p,u):await this.invokeCdpMethod(i,l,p,u);i.send({id:c,result:f})}catch(f){let m=f instanceof Uu&&f.cause?f.cause:{code:0,message:f.message};i.send({id:c,error:m})}})}),{server:r,path:e}}dispose(){this.disposables.dispose(),this.server?.then(e=>e.server.close()),this.server=void 0}invokeCdpMethod(e,r,n,i){let o=this.cdp.session.sendOrDie(`${r}.${n}`,i);switch(n){case"enable":for(let s of this.replay.read(r))e.send({method:s.event,params:s.params});break;case"disable":this.replay.clearDomain(r);break;default:}return o}invokeJsDebugDomainMethod(e,r,n){if(!this.jsDebugApi.hasOwnProperty(r))throw new Uu(r).setCause(-32601,`${gN}.${r} not found`);return this.jsDebugApi[r](e,n)}};fp=T([(0,dp.injectable)(),v(0,(0,dp.inject)(mt)),v(1,(0,dp.inject)(at)),v(2,(0,dp.inject)(ce))],fp);var use=0,_E=class{constructor(e,r){this.webSocket=e;this.logger=r;this.disposables=new Se;this.id=use++}pushDisposable(e){this.disposables.push(e)}dispose(){this.disposables.dispose(),this.webSocket.close()}send(e){this.logger.verbose("proxyActivity","send proxy message",e),this.webSocket.send(JSON.stringify(e))}};var vN=require("./vendor/acorn-loose.js"),mp=A(gh()),Yh=A(J());var AE=nr(function(t,e,r){let n=r?"variable":"property",i=(l,p,f)=>{if(p!=="function")return n;if(l==="constructor")return"class";let m=String(f);return m.startsWith("class ")||m.includes("[native code]")&&/^[A-Z]/.test(l)?"class":r?"function":"method"},o=l=>{switch(typeof l){case"number":case"boolean":return`${l}`;case"object":return l===null?"null":l.constructor.name||"object";case"function":return`fn(${new Array(l.length).fill("?").join(", ")})`;default:return typeof l}},s=[],a=new Set,u="~",c=t===void 0?this:t;for(;c!=null;c=c.__proto__){u+="~";let l=Object.getOwnPropertyNames(c).filter(p=>p.startsWith(e)&&!p.match(/^\d+$/));for(let p of l){if(a.has(p))continue;a.add(p);let f=Object.getOwnPropertyDescriptor(c,p),m=n,h;try{let H=c[p];m=i(p,typeof f?.value,H),h=o(H)}catch{}s.push({label:p,sortText:u+p.replace(/^_+/,H=>"{".repeat(H.length)),type:m,detail:h})}r=!1}return{result:s,isArray:this instanceof Array}}),bN=Mu(AE.source);var cse=t=>{switch(t.type){case"ClassDeclaration":case"ClassExpression":return{type:"class",id:t.id};case"MethodDefinition":return{type:t.key?.type==="Identifier"&&t.key.name==="constructor"?"constructor":"method",id:t.key};case"VariableDeclarator":return{type:t.init?.type==="FunctionExpression"||t.init?.type==="ArrowFunctionExpression"?"function":"variable",id:t.id}}};function lse(t){let e=!1;return(0,mp.traverse)(t,{keys:Ai,enter(r){if(r.type==="CallExpression"||r.type==="NewExpression"||r.type==="UnaryExpression"&&r.operator==="delete"||r.type==="ClassBody")return e=!0,mp.VisitorOption.Break}}),e}var Bb=Symbol("ICompletions"),hp=class{constructor(e,r){this.evaluator=e;this.cdp=r}async completions(e){let r=ho(e.expression),n=new oa(e.expression).convert(e.position),i=()=>Promise.resolve([]);return(0,mp.traverse)(r,{keys:Ai,enter:(o,s)=>{let a=o;if(a.start<n&&n<=a.end){if(o.type==="MemberExpression"||o.type==="Identifier"&&s?.type==="MemberExpression"&&!s.computed&&s.object!==o){let u=o.type==="MemberExpression"?o:s;i=u.computed?()=>this.elementAccessCompleter(e,u,n):()=>this.propertyAccessCompleter(e,u,n)}else o.type==="Identifier"&&(i=()=>this.identifierCompleter(e,r,o,n));s=o}}}),i().then(o=>o.sort((s,a)=>s.sortText>a.sortText?1:-1))}async elementAccessCompleter(e,r,n){if(r.property.type!=="Literal"||typeof r.property.value!="string")return[];let i=e.expression.slice(ta(r.property)+1,n);return(await this.defaultCompletions(e,i)).filter(s=>s.sortText!=="~~[").map(s=>({...s,text:JSON.stringify(s.text??s.label)+"]",start:ta(r.property),length:uS(r.property)-ta(r.property)}))}async identifierCompleter(e,r,n,i){let o=[];(0,mp.traverse)(r,{keys:Ai,enter(u){let c=cse(u);c?.id?.type==="Identifier"&&o.push({label:c.id.name,type:c.type,sortText:c.id.name})}});let s=e.expression.slice(ta(n),i),a=[...o,...await this.defaultCompletions(e,s)];return this.evaluator.hasReturnValue&&e.executionContextId!==void 0&&ss.startsWith(s)&&a.push({sortText:`~${ss}`,label:ss,type:"variable"}),a}async propertyAccessCompleter(e,r,n){let{result:i,isArray:o}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:_1(e.expression,r.object),prefix:(0,vN.isDummy)(r.property)?"":e.expression.slice(ta(r.property),n),throwOnSideEffect:lse(r)}),s=ta(r.property)-1,a=/^[$a-z_][0-9a-z_$]*$/i;for(let u of i)a.test(u.label)||(u.text=`[${JSON.stringify(u.label)}]`,u.start=s,u.length=1);if(o){let u="index";i.unshift({label:`[${u}]`,text:`[${u}]`,type:"property",sortText:"~~[",start:s,selectionStart:1,selectionLength:u.length,length:1})}return i}async completePropertyAccess({executionContextId:e,stackFrame:r,expression:n,prefix:i,isInGlobalScope:o=!1,throwOnSideEffect:s=!1}){let a={expression:`(${n})`,objectGroup:"console",silent:!0,throwOnSideEffect:s},u=r&&r.callFrameId(),c=await this.evaluator.evaluate(u?{...a,callFrameId:u}:{...a,contextId:e},{stackFrame:r});if(!c||c.exceptionDetails)return{result:[],isArray:!1};if(!c.result.objectId){let l={...a,returnByValue:!0,throwOnSideEffect:!1,expression:bN.expr(`(${n})`,JSON.stringify(i),JSON.stringify(o))},p=await this.evaluator.evaluate(u?{...l,callFrameId:u}:{...l,contextId:e});return!p||p.exceptionDetails?{result:[],isArray:!1}:p.result.value}try{return(await AE({cdp:this.cdp,args:[void 0,i,o],objectId:c.result.objectId,returnByValue:!0})).value}catch{return{result:[],isArray:!1}}finally{this.cdp.Runtime.releaseObject({objectId:c.result.objectId})}}async defaultCompletions(e,r=""){for(let n of["self","global","this"]){let{result:i}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:n,prefix:r,isInGlobalScope:!0});if(e.stackFrame){let o=r.toLowerCase(),s=new Set(i.map(a=>a.label));for(let a of await e.stackFrame.completions())s.has(a.label)||!a.label.toLowerCase().includes(o)||(s.add(a.label),i.push(a))}return i.push(...this.syntheticCompletions(e,r)),i}return this.syntheticCompletions(e,r)}syntheticCompletions(e,r){return this.evaluator.hasReturnValue&&ss.startsWith(r)?[{sortText:`~${ss}`,label:ss,type:"variable"}]:[]}};hp=T([(0,Yh.injectable)(),v(0,(0,Yh.inject)(Kn)),v(1,(0,Yh.inject)(mt))],hp);var Kb=A(_e());var Co=class{constructor(e,r){this._tokens=[];this._separator=r||"",this._budget=e-1-this._separator.length}append(e){if(e.length>this.budget()){this.appendEllipsis();return}this._append(e)}_append(e){this._tokens.length&&(this._budget-=this._separator.length),this._tokens.push(e),this._budget-=e.length}appendEllipsis(){this._tokens[this._tokens.length-1]!=="\u2026"&&this._append("\u2026")}checkBudget(){return this._budget<=0&&this.appendEllipsis(),this._budget>0}budget(){return this._budget-(this._tokens.length?this._separator.length:0)}build(){return this._tokens.join(this._separator)}isEmpty(){return!this._tokens.length}};var WN=A(jN());var Ese=1e4;function Dse(t,e){if(!t.includes("%"))return[{type:"string",value:t}];let r=[];function n(u){if(!u)return;let c=r[r.length-1];c?.type==="string"?c.value+=u:r.push({type:"string",value:u})}function i(u,c,l){r.push({type:"specifier",specifier:u,precision:c,substitutionIndex:l})}let o=0,s=0,a=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${e.join("")}])`,"g");for(let u=a.exec(t);u;u=a.exec(t)){let c=u.index;if(c>o&&n(t.substring(o,c)),u[0]==="%%")n("%");else{let[,l,p,f]=u;l&&Number(l)>0&&(s=Number(l)-1);let m=p?Number(p):void 0;i(f,m,s),++s}o=c+u[0].length}return n(t.substring(o)),r}function PE(t,e,r){let n=Dse(t,Array.from(r.keys())),i=new Set,o=r.get("");if(!o)throw new Error("Expected to hav a default formatter");let s=new Co(Ese),a=!1;for(let u=0;s.checkBudget()&&u<n.length;++u){let c=n[u];if(c.type==="string"){s.append(c.value);continue}let l=c.substitutionIndex;if(l>=e.length){s.append("%"+(c.precision||"")+c.specifier);continue}i.add(l),c.specifier==="c"&&(a=!0);let p=r.get(c.specifier)||o;s.append(p(e[l],{budget:s.budget(),quoted:!1}))}a&&s.append("\x1B[0m");for(let u=0;s.checkBudget()&&u<e.length;++u)i.has(u)||(i.add(u),(t||u)&&s.append(" "),s.append(o(e[u],{budget:s.budget(),quoted:!1})));return{result:s.build(),usedAllSubs:i.size===e.length}}function qN(t){try{return new WN.default(t).ansi256().object().ansi256}catch{}}function VN(t){let e=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g,r="\x1B[0m",n=e.exec(t);for(;n!==null;){if(n.length===3)switch(n[1]){case"color":let i=qN(n[2]);i&&(r+=`\x1B[38;5;${i}m`);break;case"background":case"background-color":let o=qN(n[2]);o&&(r+=`\x1B[48;5;${o}m`);break;case"font-weight":n[2]==="bold"&&(r+="\x1B[1m");break;case"font-style":n[2]==="italic"&&(r+="\x1B[3m");break;case"text-decoration":n[2]==="underline"&&(r+="\x1B[4m");break;default:}n=e.exec(t)}return r}var KN=t=>t.replace(/\\/gm,"\\\\").replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\t/gm,"\\t"),Pse={budget:1e5,quoted:!0},GN={budget:1e3,quoted:!0,postProcess:KN},xse={budget:1/0,quoted:!1},Lse={budget:1e3,quoted:!0,postProcess:KN},Tse={budget:1e5,quoted:!0},Wb=t=>{switch(t){case"repl":return Pse;case"hover":return GN;case"propertyValue":return GN;case"watch":return Lse;case"copy":case"clipboard":return xse;default:return Tse}};var $se=30,Rse=100,xE=20,Mse=1e4,kse=3,zN=120,LE=new Set(["null","regexp","date"]);function ec(t){return t.type==="function"||t.type==="object"&&!LE.has(t.subtype)}function TE(t){return t.subtype==="array"||t.subtype==="typedarray"}function tc(t,e,r){let n=Wb(e),i=Vb(t,n,r);return t.preview?.subtype==="regexp"?i:n.postProcess?.(i)??i}function Vb(t,e,r){return t.type==="function"?t.description?QN(t.description,e.budget):"<function>":t.type==="object"&&t.subtype==="node"?t.description:"preview"in t&&t.preview?Gb(t.preview,e.budget,r):YN(t,e.budget,e.quoted,r)}function Gb(t,e,r){return TE(t)?Ose(t,e):t.subtype==="internal#entry"?mo(t.description||"",e):t.type==="function"?QN(t.description,e):ec(t)?Fse(t,e,r):Nse(t,e,r)}function Ose(t,e){let r=new Co(e),n=t.description,i=n.match(/[^(]*\(([\d]+)\)/);if(!i)return n;let o=parseInt(i[1],10);n.startsWith("Array(")&&(n=n.substring(5)),r.append(mo(n,r.budget())),r.append(" ");let s=new Co(r.budget()-2,", "),a=-1;for(let u of t.properties){if(!s.checkBudget())break;if(isNaN(u.name))continue;let c=parseInt(u.name,10);c>a+1&&s.appendEllipsis(),a=c,s.append(tm(u,s.budget()))}o>a+1&&s.appendEllipsis();for(let u of t.properties){if(!s.checkBudget())break;isNaN(u.name)&&s.append(tm(u,s.budget(),u.name))}return t.overflow&&s.appendEllipsis(),r.append("["+s.build()+"]"),r.build()}function Fse(t,e,r){let n=new Co(e," ");t.description!=="Object"&&n.append(mo(t.description,n.budget()));let i=new Map,o=t.properties||[];for(let f of o)i.set(f.name,f);let s=i.get("[[PrimitiveValue]]");if(s)return n.append(`(${tm(s,n.budget()-2)})`),n.build();let a=i.get("[[PromiseStatus]]"),u=i.get("[[PromiseValue]]");if(a&&u)return a.value==="pending"?n.append(`{<${a.value}>}`):n.append(`{${tm(u,n.budget()-2,`<${a.value}>`)}}`),n.build();let c=i.get("[[GeneratorStatus]]");if(c)return n.append(`{<${c.value}>}`),n.build();let l=new Co(n.budget()-2,", ");for(let f of o){if(!l.checkBudget())break;l.append(tm(f,l.budget(),f.name))}for(let f of t.entries||[]){if(!l.checkBudget())break;if(f.key){let m=Gb(f.key,Math.min(xE,l.budget()),r),h=Gb(f.value,Math.min(xE,l.budget()-m.length-4),r);l.append(yp(m," => ",h,l.budget()))}else l.append(Gb(f.value,Math.min(xE,l.budget()),r))}t.overflow&&l.appendEllipsis();let p=l.build();return p?n.append("{"+p+"}"):n.isEmpty()&&n.append("{}"),n.build()}function XN(t,e){return t.length<=e?t:"\u2026"}function Bse(t,e){return t.length>=e?t.slice(0,e-1)+"\u2026":t}function Nse(t,e,r){if(t.type==="object"&&t.subtype==="null")return XN("null",e);if(t.type==="undefined")return XN("undefined",e);if(t.type==="string"){let n=t.description??t.value;return r?.hex&&(n=Buffer.from(n,"utf8").toString("hex")),Tl(n,e)}return t.type==="number"||t.type==="bigint"?rm(t,!1,e,r):Bse(t.description||"",e)}function yp(t,e,r,n){return t===void 0?Tl(r,n):t.length+e.length>n?mo(t,n):`${t}${e}${Tl(r,n-t.length-e.length)}`}function tm(t,e,r){return e=Math.min(e,Rse),t.type==="function"?yp(r,": ","\u0192",e):t.type==="object"&&t.value==="Object"?yp(r,": ","{\u2026}",e):typeof t.value>"u"?yp(r,": ",`<${t.type}>`,e):t.type==="string"?yp(r,": ",`'${t.value}'`,e):yp(r,": ",t.value??"unknown",e)}function YN(t,e,r,n){if(t.type==="string"){let i=t.value||(t.description?t.description:"");n?.hex&&(i=Buffer.from(i,"utf8").toString("hex"),r=!1);let o=Tl(i,r?e-2:e);return r?`'${o}'`:o}return t.type==="undefined"?"undefined":t.subtype==="null"?"null":t.type==="bigint"||t.type==="number"?rm(t,!1,e,n):t.description?mo(t.description,Math.max(e,1e5)):mo(String("value"in t?t.value:t.description),e)}function QN(t,e){let r=new Co(e),n=t.replace(/^function [gs]et /,"function ").replace(/^function [gs]et\(/,"function(").replace(/^[gs]et /,""),i=n.match(/^(async\s+function)/),o=n.startsWith("function*"),s=n.startsWith("*"),a=!o&&n.startsWith("function"),u=n.startsWith("class ")||n.startsWith("class{"),c=n.indexOf("=>"),l=!i&&!o&&!a&&!u&&c>0,p;if(u){p=n.substring(5);let h=/^[^{\s]+/.exec(p.trim()),H="";h&&(H=h[0].trim()||""),m("class",p,H)}else if(i)p=n.substring(i[1].length),m("async \u0192",p,f(p));else if(o)p=n.substring(9),m("\u0192*",p,f(p));else if(s)p=n.substring(1),m("\u0192*",p,f(p));else if(a)p=n.substring(8),m("\u0192",p,f(p));else if(l){let h=n;n.length>$se&&(h=n.substring(0,c+2)+" {\u2026}"),m("",n,h)}else m("\u0192",n,f(n));return r.build();function f(h){let H=h.indexOf("("),b=h.match(/\)\s*{/),_=b&&b.index||0;if(H!==-1&&b&&_>H){let $=h.substring(0,H).trim()||"",U=h.substring(H,_+1);return $+U}return"()"}function m(h,H,b){r.checkBudget()&&(h.length&&r.append(h+" "),H=H.trim(),H.endsWith(" { [native code] }")&&(H=H.substring(0,H.length-18)),r.budget()>=H.length?r.append(H):r.append(b.replace(/\n/g," ")))}}function rc(t){let e=t;if(e.type!=="object"||e.subtype==="null")return{title:YN(e,Mse,!1,void 0)};let r=e.description??e.className??"Error",n=/^\s+at\s/m.exec(r);if(!n){let i=r.lastIndexOf(`
`);return i===-1?{title:r}:{title:r.substring(0,i)}}return{title:r.substring(0,n.index-1),stackTrace:r.substring(n.index+2)}}function rm(t,e,r,n){if(t.type==="number"){if("unserializableValue"in t)return t.unserializableValue;let s=t.value||+t.description;return n?.hex?s.toString(16):String(s)}if(t.type==="bigint"){let s=t.unserializableValue||t.description;return n?.hex?BigInt(s.slice(0,-1)).toString(16):s}let i=t,o=typeof i.value=="number"?i.value:+String(i.description);return mo(String(e?Math.floor(o):o),r)}function Use(t,e){return Tl(String(typeof t.value<"u"?t.value:t.description),e)}function ZN(t){let e=[],r=new Set([void 0]),n=new Map;for(let l of t.properties.filter(p=>p.valuePreview)){let p=new Map;p.set(void 0,l.name),n.set(void 0,Math.max(n.get(void 0)||0,l.name.length)),e.push(p),l.valuePreview?.properties.map(f=>{f.value&&(r.add(f.name),p.set(f.name,f.value),n.set(f.name,Math.max(n.get(f.name)||0,f.value.length)))})}for(let l of r.values())l&&n.set(l,Math.max(n.get(l)||0,l.length));let i=Array.from(n.values()).reduce((l,p)=>l+p,0),o=zN-4-(r.size-1)*3;if(i>o){let l=o/i;for(let p of n.keys()){let f=Math.max(kse,n.get(p)*l|0);n.set(p,f)}}let s=[];for(let l of r.values())s.push("-".repeat(n.get(l)));let a="[-"+s.join("-|-")+"-]",u=[];u.push(a.replace("[","\u256D").replace(/\|/g,"\u252C").replace("]","\u256E").replace(/-/g,"\u2504"));let c=[];for(let l of r.values())c.push(JN(l||"",n.get(l)));u.push("\u250A "+c.join(" \u250A ")+" \u250A"),u.push(a.replace("[","\u251C").replace(/\|/g,"\u253C").replace("]","\u2524").replace(/-/g,"\u2504"));for(let l of e){let p=[];for(let f of r.values())p.push(JN(l.get(f)||"",n.get(f)));u.push("\u250A "+p.join(" \u250A ")+" \u250A")}return u.push(a.replace("[","\u2570").replace(/\|/g,"\u2534").replace("]","\u256F").replace(/-/g,"\u2504")),u.map(l=>mo(l,zN)).join(`
`)}var $E=new Map([["",(t,e)=>Vb(t,e)],["s",(t,e)=>Use(t,e.budget)],["i",(t,e)=>rm(t,!0,e.budget,void 0)],["d",(t,e)=>rm(t,!0,e.budget,void 0)],["f",(t,e)=>rm(t,!1,e.budget,void 0)],["c",t=>VN(t.value)],["o",(t,e)=>Vb(t,e)],["O",(t,e)=>Vb(t,e)]]);function JN(t,e){return t.length===e?t:t.length<e?t+" ".repeat(e-t.length):mo(t,e)}var tU=nr(function(){return this});var zb=class{constructor(e,r){this.protoObj=e;this.cdp=r}async toDap(e){if(!this.protoObj.objectId)return{category:"stderr",output:Kb.t("Only objects can be queried")};let r=await this.cdp.Runtime.queryObjects({prototypeObjectId:this.protoObj.objectId,objectGroup:"console"});if(await this.cdp.Runtime.releaseObject({objectId:this.protoObj.objectId}),!r)return{category:"stderr",output:Kb.t("Could not query the provided object")};let n;try{n=await tU({cdp:this.cdp,args:[],objectId:r.objects.objectId,objectGroup:"console",generatePreview:!0})}catch(s){return{category:"stderr",output:Kb.t(s.message)}}let i="\x1B[32mobjects: "+tc(n,"repl")+"\x1B[0m";return{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput(i,[n]).id}}};var rU=/^(\W*at .*\()(.*):(\d+):(\d+)(\))$/,nU=/^(\W*at )(.*):(\d+):(\d+)$/,va=class{constructor(e){this.stack=e}static isStackLike(e){return rU.test(e)||nU.test(e)}*[Symbol.iterator](){for(let e of this.stack.split(`
`)){let r=rU.exec(e)||nU.exec(e);if(!r){yield e+`
`;continue}let[,n,i,o,s,a]=r;n&&(yield n),yield new RE(i,new Ut(Number(o),Number(s))),a&&(yield a),yield`
`}}},RE=class{constructor(e,r){this.path=e;this.position=r}toString(){return`${this.path}:${this.position.lineNumber}:${this.position.columnNumber}`}};var fn=A(_e());var nm=A(J());async function ME(t){let e=await t.uiLocation();return e?e.source.blackboxed()?2:Kr(e.source)&&!e.isMapped&&e.unmappedReason===3?1:0:0}var jse=new Set(["breakpoint","exception","entry"]),qse=256,wa=class{constructor(e,r){this.launchConfig=e;this.logger=r;this._smartStepCount=0}resetSmartStepCount(){this._smartStepCount>0&&(this.logger.verbose("internal",`smartStep: skipped ${this._smartStepCount} steps`),this._smartStepCount=0)}async getSmartStepDirection(e,r){if(!this.launchConfig.smartStep||jse.has(e.reason))return;let n=(await e.stackTrace.loadFrames(1)).find(Au(jt));if((n&&await ME(n))===0){this.resetSmartStepCount();return}return this._smartStepCount++>qse?2:r?.reason==="step"?r.direction:0}};wa=T([(0,nm.injectable)(),v(0,(0,nm.inject)(Me)),v(1,(0,nm.inject)(ce))],wa);var iU=nr(function(){return[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")]}),oU=Mu(function(t,e){let r={},n="<<default preview>>";if(typeof this!="object"||!this)return r;for(let[i,o]of Object.entries(this)){if(e)try{let s=e.call(o,n);if(s!==n){r[i]=String(s);continue}}catch(s){r[i]=`<<indescribable>>${JSON.stringify([String(s),i])}`;continue}if(typeof o=="object"&&o){let s;for(let a of runtimeArgs[0])try{s=o[a]();break}catch{}!s&&!String(o.toString).includes("[native code]")&&(s=String(o)),s&&!s.startsWith("[object ")&&(r[i]=s.length>=t?s.slice(0,t)+"\u2026":s)}}return r}),Xb=Mu(function(t,e){if(e)try{let r="<<default preview>>",n=e.call(this,r);if(n!==r)return String(n)}catch(r){return`<<indescribable>>${JSON.stringify([String(r),"object"])}`}if(typeof this=="object"&&this){let r;for(let n of[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")])try{r=this[n]();break}catch{}if(!r&&!String(this.toString).includes("[native code]")&&(r=String(this)),r&&!r.startsWith("[object "))return r.length>=t?r.slice(0,t)+"\u2026":r}});var Fe=A(_e()),bU=require("crypto");var zr=class{constructor(e=process.hrtime()){this.value=e}get ms(){return this.s*1e3}get s(){return this.value[0]+this.value[1]/1e9}elapsed(){return new zr().subtract(this)}subtract(e){let r=this.value[1]-e.value[1],n=this.value[0]-e.value[0];return r<0&&(r+=1e9,n--),new zr([n,r])}};var bp=class{constructor(e,r,n,i,o,s){this.launchConfig=e;this.targetInfo=r;this.parentTarget=n;this.targetOriginValue=i;this.cdp=o;this.logger=s;this.onNameChanged=new z().event;this.attached=!1;this.isWaitingForDebugger=!0;o.pause()}id(){return this.targetInfo.targetId}name(){return this.targetInfo.title}fileName(){return this.targetInfo.url}type(){return"node"}parent(){return this.parentTarget}children(){return[]}canStop(){return!1}stop(){}canRestart(){return!1}restart(){}canAttach(){return!this.attached}async attach(){return await this.cdp.Runtime.enable({}),await this.cdp.Debugger.enable({}),this.attached=!0,this.cdp}canDetach(){return this.attached}async detach(){await this.cdp.Debugger.resume({}),await this.cdp.NodeWorker.detach({sessionId:this.targetInfo.targetId}),this.attached=!1}targetOrigin(){return this.targetOriginValue}afterBind(){return this.cdp.resume(),Promise.resolve()}async runIfWaitingForDebugger(){this.isWaitingForDebugger=!1,await this.cdp.Runtime.runIfWaitingForDebugger({})}initialize(){return Promise.resolve()}waitingForDebugger(){return this.isWaitingForDebugger}supportsCustomBreakpoints(){return!1}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?Oe(e):e}executionContextName(){return this.targetInfo.title}};var ut=A(_e()),Jb=new Map;function im(){if(Jb.size)return Jb;function t(o,s){for(let a of s)a.group=o,Jb.set(a.id,a)}function e(o,s){let a=s||o;return{id:"instrumentation:"+o,title:a,group:"",details:u=>{if(o==="webglErrorFired"){let c=u.webglErrorName;return c=c.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),{short:c,long:ut.t('Paused on WebGL Error instrumentation breakpoint, error "{0}"',c)}}return o==="scriptBlockedByCSP"&&u.directiveText?{short:ut.t('CSP violation "{0}"',u.directiveText),long:ut.t('Paused on Content Security Policy violation instrumentation breakpoint, directive "{0}"',u.directiveText)}:{short:a,long:ut.t('Paused on instrumentation breakpoint "{0}"',a)}},apply:async(u,c)=>c?!!await u.DOMDebugger.setInstrumentationBreakpoint({eventName:o}):!!await u.DOMDebugger.removeInstrumentationBreakpoint({eventName:o})}}function r(o,s,a){let u=s===void 0?"*":typeof s=="string"?[s]:s;return{id:"listener:"+o,title:a||o,group:"",details:c=>{let l=(c.targetName||"*").toLowerCase();return{short:l+"."+o,long:ut.t('Paused on event listener breakpoint "{0}", triggered on "{1}"',o,l)}},apply:async(c,l)=>{let p=!0;for(let f of u)l?p=p&&!!await c.DOMDebugger.setEventListenerBreakpoint({eventName:o,targetName:f}):p=p&&!!await c.DOMDebugger.removeEventListenerBreakpoint({eventName:o,targetName:f});return p}}}t("Ad Auction Worklet",[e("beforeBidderWorkletBiddingStart",ut.t("Bidder Bidding Phase Start")),e("beforeBidderWorkletReportingStart",ut.t("Bidder Reporting Phase Start")),e("beforeSellerWorkletScoringStart",ut.t("Seller Scoring Phase Start")),e("beforeSellerWorkletReportingStart",ut.t("Seller Reporting Phase Start"))]),t("Animation",[e("requestAnimationFrame",ut.t("Request Animation Frame")),e("cancelAnimationFrame",ut.t("Cancel Animation Frame")),e("requestAnimationFrame.callback",ut.t("Animation Frame Fired"))]),t("Canvas",[e("canvasContextCreated",ut.t("Create canvas context")),e("webglErrorFired",ut.t("WebGL Error Fired")),e("webglWarningFired",ut.t("WebGL Warning Fired"))]),t("Clipboard",[r("copy"),r("cut"),r("paste"),r("beforecopy"),r("beforecut"),r("beforepaste")]),t("Control",[r("resize"),r("scroll"),r("scrollend"),r("zoom"),r("focus"),r("blur"),r("select"),r("change"),r("submit"),r("reset")]),t("Device",[r("deviceorientation"),r("devicemotion")]),t("DOM Mutation",[r("DOMActivate"),r("DOMFocusIn"),r("DOMFocusOut"),r("DOMAttrModified"),r("DOMCharacterDataModified"),r("DOMNodeInserted"),r("DOMNodeInsertedIntoDocument"),r("DOMNodeRemoved"),r("DOMNodeRemovedFromDocument"),r("DOMSubtreeModified"),r("DOMContentLoaded")]),t("Drag / Drop",[r("drag"),r("dragstart"),r("dragend"),r("dragenter"),r("dragover"),r("dragleave"),r("drop")]),t("Geolocation",[e("Geolocation.getCurrentPosition","getCurrentPosition"),e("Geolocation.watchPosition","watchPosition")]),t("Keyboard",[r("keydown"),r("keyup"),r("keypress"),r("input")]),t("Load",[r("load"),r("beforeunload"),r("unload"),r("abort"),r("error"),r("hashchange"),r("popstate"),r("navigate"),r("navigatesuccess"),r("navigateerror"),r("currentchange"),r("nagivateto"),r("navigatefrom"),r("finish"),r("dispose")]);let n=["audio","video"];t("Media",[r("play",n),r("pause",n),r("playing",n),r("canplay",n),r("canplaythrough",n),r("seeking",n),r("seeked",n),r("timeupdate",n),r("ended",n),r("ratechange",n),r("durationchange",n),r("volumechange",n),r("loadstart",n),r("progress",n),r("suspend",n),r("abort",n),r("error",n),r("emptied",n),r("stalled",n),r("loadedmetadata",n),r("loadeddata",n),r("waiting",n)]),t("Mouse",[r("auxclick"),r("click"),r("dblclick"),r("mousedown"),r("mouseup"),r("mouseover"),r("mousemove"),r("mouseout"),r("mouseenter"),r("mouseleave"),r("mousewheel"),r("wheel"),r("contextmenu")]),t("Notification",[e("Notification.requestPermission","requestPermission")]),t("Parse",[e("Element.setInnerHTML",ut.t("Set innerHTML")),e("Document.write","document.write")]),t("Picture-in-Picture",[r("enterpictureinpicture","video"),r("leavepictureinpicture","video"),r("resize","PictureInPictureWindow"),r("enter","documentPictureInPicture")]),t("Pointer",[r("pointerover"),r("pointerout"),r("pointerenter"),r("pointerleave"),r("pointerdown"),r("pointerup"),r("pointermove"),r("pointercancel"),r("gotpointercapture"),r("lostpointercapture"),r("pointerrawupdate")]),t("Script",[e("scriptFirstStatement",ut.t("Script First Statement")),e("scriptBlockedByCSP",ut.t("Script Blocked by Content Security Policy"))]),t("Timer",[e("setTimeout"),e("clearTimeout"),e("setInterval"),e("clearInterval"),e("setTimeout.callback",ut.t("setTimeout fired")),e("setInterval.callback",ut.t("setInterval fired"))]),t("Touch",[r("touchstart"),r("touchmove"),r("touchend"),r("touchcancel")]),t("WebAudio",[e("audioContextCreated",ut.t("Create AudioContext")),e("audioContextClosed",ut.t("Close AudioContext")),e("audioContextResumed",ut.t("Resume AudioContext")),e("audioContextSuspended",ut.t("Suspend AudioContext"))]),t("Window",[e("DOMWindow.close","window.close")]),t("Worker",[r("message"),r("messageerror")]);let i=["xmlhttprequest","xmlhttprequestupload"];return t("XHR",[r("readystatechange",i),r("load",i),r("loadstart",i),r("loadend",i),r("abort",i),r("error",i),r("progress",i),r("timeout",i)]),Jb}var kE=Mu(function(t,e){let r=" ".repeat(e),n=`
`;function i(s){if(s instanceof Uint8Array)return Uint8Array;if(s instanceof Uint8ClampedArray)return Uint8ClampedArray;if(s instanceof Uint16Array)return Uint16Array;if(s instanceof Uint32Array)return Uint32Array;if(s instanceof BigUint64Array)return BigUint64Array;if(s instanceof Int8Array)return Int8Array;if(s instanceof Int32Array)return Int32Array;if(s instanceof BigInt64Array)return BigInt64Array;if(s instanceof Float32Array)return Float32Array;if(s instanceof Float64Array)return Float64Array}function o(s,a=0,u=[]){switch(typeof s){case"bigint":return`${s}n`;case"boolean":return s.toString();case"function":{let p=s.toString().replace(/^[^\s]+\(/,"function(").split(/\r?\n/g),f=/^$/;for(let m of p){let h=/^[ \t]+/.exec(m);if(h){f=new RegExp(`^[ \\t]{0,${h[0].length}}`);break}}return p.map((m,h)=>h===0?m:(m=m.replace(f,""),h===p.length-1?r.repeat(a)+m:r.repeat(a+1)+m)).join(n)}case"number":return`${s}`;case"object":if(s===null)return"null";if(u.includes(s))return"[Circular]";if(s instanceof Date)return`"${s.toISOString()}"`;if(typeof Node<"u"&&t instanceof Node)return t.outerHTML;let c=i(s);if(c)return`new ${c.name}([${s.join(", ")}])`;if(s instanceof ArrayBuffer)return`new Uint8Array([${new Uint8Array(s).join(", ")}]).buffer`;if(s instanceof Array)return["[",...s.map(p=>r.repeat(a+1)+o(p,a+1,[...u,s])+","),r.repeat(a)+"]"].join(n);let l=s;return["{",...Object.keys(l).map(p=>r.repeat(a+1)+(/^[$a-z_][0-9a-z_$]*$/i.test(p)?p:JSON.stringify(p))+": "+o(l[p],a+1,[...u,s])+","),r.repeat(a)+"}"].join(n);case"string":return JSON.stringify(s);case"symbol":return s.toString();case"undefined":return"undefined";default:return String(s)}}try{return o(t)}catch{return""+t}}),sU=nr(`
  function(spaces2) {
    const result = ${kE.expr("this","spaces2")};
    return result;
  }
`);var Ci=A(_e());var nc=A(J());var aU=nr(function(){let t={__proto__:this.__proto__},e=Object.getOwnPropertyNames(this);for(let r=0;r<e.length;++r){let n=e[r],i=n>>>0;if(String(i>>>0)===n&&i>>>0!==4294967295)continue;let o=Object.getOwnPropertyDescriptor(this,n);o&&Object.defineProperty(t,n,o)}return t});var uU=nr(function(t,e){let r={},n=t===-1?0:t,i=e===-1?this.length:t+e;for(let o=n;o<i&&o<this.length;++o){let s=Object.getOwnPropertyDescriptor(this,o);s&&Object.defineProperty(r,o,s)}return r});var cU=nr(function(t){return t.call(this)});var OE=nr(function(t,e){let{buffer:r,byteLength:n,byteOffset:i}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,o=i+Math.min(t,n),s=Math.max(0,Math.min(e,n-t));return a(new Uint8Array(r,o,s));function a(u){let c="0123456789abcdef",l="";for(let p=0;p<u.length;p++){let f=u[p];l+=c[f>>>4]+c[f&15]}return l}});var FE=nr(function(t,e){let r=u(e),{buffer:n,byteLength:i,byteOffset:o}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,s=o+Math.min(t,i),a=Math.max(0,Math.min(r.length,i-t));return new Uint8Array(n,s,a).set(r.subarray(0,a)),a;function u(c){let l=new Uint8Array(c.length>>>1);for(let p=0;p<c.length;p+=2)l[p>>>1]=parseInt(c.slice(p,p+2),16);return l}});var um=(()=>{let t=0,e=2147483647-1;return()=>t++%e+1})(),JE=t=>{if(typeof t=="string")return{value:t};let e=t;return e.objectId?{objectId:e.objectId}:e.unserializableValue?{unserializableValue:e.unserializableValue}:{value:e.value}},Vse=new Set(["typedarray","dataview","arraybuffer","webassemblymemory"]);var mU=1024,Gse=/^[$a-z_][0-9a-z_$]*$/i,Kse=/^#[0-9a-z_$]+$/i,zse=t=>t.hasOwnProperty("configurable"),lU=(t,e,r)=>{let n=A1(t,Ry(e),r);return rs(n)},pU="<<indescribable>>",gU=t=>{if(!t.startsWith(pU))return t;let e,r;try{[e,r]=JSON.parse(t.slice(pU.length))}catch{return t}return Ci.t("{0} (couldn't describe: {1})",e,r)},BE=t=>!!t&&typeof t=="object"&&"readMemory"in t&&"writeMemory"in t,fU={["PARAMETER"]:{name:Ci.t("Parameters"),sortOrder:-10},["LOCAL"]:{name:Ci.t("Locals"),sortOrder:-9},["GLOBAL"]:{name:Ci.t("Globals"),sortOrder:-8}},ic=class{constructor(e,r,n,i,o,s,a){this.cdp=e;this.parent=r;this.vars=i;this.locationProvider=o;this.currentRef=s;this.settings=a;this.name=n.name,this.presentationHint=n.presentationHint,this.sortOrder=n.sortOrder||0}get customDescriptionGenerator(){return this.settings.customDescriptionGenerator}createVariable(e,r,...n){let i=new e(new ic(this.cdp,this.currentRef?.(),r,this.vars,this.locationProvider,()=>i,this.settings),...n);return i.id>0&&this.vars.add(i),i}createVariableByType(e,r,n){if(TE(r))return this.createVariable(Zb,e,r);if(r.objectId){if(r.subtype==="map"||r.subtype==="set")return this.createVariable(WE,e,r,n);if(!LE.has(r.subtype))return this.createVariable(sm,e,r,n)}return this.createVariable(Xr,e,r)}async getDescriptionSymbols(e){return this.settings.descriptionSymbols??=iU({cdp:this.cdp,args:[],objectId:e}).then(r=>({objectId:r.objectId}),()=>({value:[]})),await this.settings.descriptionSymbols}async createObjectPropertyVars(e,r){let n=[];if(this.settings.customPropertiesGenerator){let{result:c,errorDescription:l}=await this.evaluateCodeForObject(e,this.settings.customPropertiesGenerator,[]);c&&c.type!=="undefined"?e=c:n.push([this.createVariable(qE,{name:"",sortOrder:-1},c,c?.description||l||Ci.t("Unknown error"))])}if(!e.objectId)return[];r&&this.cdp.DotnetDebugger.setEvaluationOptions({options:r,type:"variable"});let[i,o,s]=await Promise.all([this.cdp.Runtime.getProperties({objectId:e.objectId,accessorPropertiesOnly:!0,ownProperties:!1,generatePreview:!0}),this.cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0,generatePreview:!0}),this.cdp.Runtime.callFunctionOn({functionDeclaration:oU.decl(`${mU}`,this.settings.customDescriptionGenerator||"null"),arguments:[await this.getDescriptionSymbols(e.objectId)],objectId:e.objectId,throwOnSideEffect:!0,returnByValue:!0}).then(c=>c?.result.value||{}).catch(()=>({}))]);if(!i||!o)return[];let a=new Map,u=[];for(let c of i.result){if(c.symbol){u.push(c);continue}c.name==="__proto__"&&o.internalProperties?.some(l=>l.name==="[[Prototype]]")||a.set(c.name,c)}for(let c of o.result)c.get||c.set||(c.symbol?u.push(c):a.set(c.name,c));for(let c of[a.values(),u.values()])for(let l of c)n.push(this.createPropertyVar(l,e,s?.hasOwnProperty(l.name)?gU(s[l.name]):void 0));for(let c of o.privateProperties??[])n.push(this.createPropertyVar(c,e,void 0,{presentationHint:{visibility:"private"},sortOrder:1}));for(let c of o.internalProperties||[]){if(c.name==="[[StableObjectId]]")continue;let l;c.name==="[[FunctionLocation]]"&&c.value&&c.value.subtype==="internal#location"?l=this.createVariable(jE,{name:c.name,presentationHint:{visibility:"internal",attributes:["readOnly"]},sortOrder:2},c.value):c.value!==void 0&&(l=this.createVariableByType({name:c.name,presentationHint:{visibility:"internal"},sortOrder:2},c.value)),l&&n.push([l])}return Yo(await Promise.all(n))}async createPropertyVar(e,r,n,i){let o=[],s=e.get&&e.get.type!=="undefined",a=e.set&&e.set.type!=="undefined",u={name:e.name,presentationHint:{},sortOrder:0,...i};return i||(zse(e)?(e.enumerable===!1&&!s&&(u.presentationHint.visibility="internal",u.sortOrder=1),(e.writable===!1||s&&!a)&&(u.presentationHint.attributes=["readOnly"])):(u.presentationHint.visibility="private",u.sortOrder=1)),"value"in e&&e.value&&o.push(this.createVariableByType(u,e.value,n)),s?o.push(this.createVariable(KE,u,e.get,r)):a&&o.push(this.createVariable(GE,u,e.set)),o}async evaluateCodeForObject(e,r,n){try{let i=await this.cdp.Runtime.callFunctionOn({objectId:e.objectId,functionDeclaration:r,arguments:n.map(JE)});if(i){if(i.exceptionDetails===void 0)return{result:i.result};if(i&&i.result.description)return{errorDescription:i.result.description}}return{errorDescription:Ci.t("Unknown error")}}catch(i){return{errorDescription:i.stack||i.message||String(i)}}}},Xse=t=>typeof t=="number"||/^[0-9]+$/.test(t),Xr=class{constructor(e,r){this.context=e;this.remoteObject=r;this.id=um()}get name(){return this.context.name}get sortOrder(){return this.context.sortOrder}get accessor(){let{parent:e,name:r}=this.context;if(e instanceof am)return e.accessor;if(!(e instanceof Xr))return this.context.name;let n=e.context.parent;if(n instanceof Xr){if(this.remoteObject.subtype==="internal#entry")return`[...${n.accessor}.entries()][${+r}]`;if(e.remoteObject.subtype==="internal#entry")return`${e.accessor}[${this.name==="key"?0:1}]`}return Xse(r)?`${e.accessor}[${r}]`:Gse.test(r)?`${e.accessor}.${r}`:e.accessor==="this"&&Kse.test(r)?`${e.accessor}.${r}`:`${e.accessor}[${JSON.stringify(r)}]`}async toDap(e,r){let n=this.context.name;return this.context.parent instanceof vp&&(n=await this.context.parent.getRename(n)),Promise.resolve({name:n,value:tc(this.remoteObject,e,r),evaluateName:this.accessor,type:this.remoteObject.type,variablesReference:0,presentationHint:this.context.presentationHint})}async setProperty(e,r){let n=await this.context.cdp.Runtime.callFunctionOn({objectId:this.remoteObject.objectId,functionDeclaration:`function(a) { return this[a] = ${r}; ${ht()} }`,arguments:[JE(e)],silent:!0});if(!n)throw new ee(Xe(Ci.t("Unable to set variable value")));if(n.exceptionDetails)throw new ee(HU(n.exceptionDetails));return this.context.createVariableByType({name:e},n.result)}async getChildren(e){return Promise.resolve([])}},Yb=class{constructor(e){this.child=e;this.id=um()}getChildren(){return Promise.resolve([this.child])}},NE=class extends Xr{constructor(r,n,i,o){super(r,{type:i[0]?.type??"string"});this.value=n;this.args=i;this.stackTrace=o}toDap(){return Promise.resolve({name:this.context.name,value:this.value,variablesReference:this.stackTrace||this.args.some(ec)?this.id:0})}getChildren(r){let n=[],{args:i,stackTrace:o}=this;for(let s=0;s<i.length;++s)ec(i[s])&&n.push(this.context.createVariableByType({name:`arg${s}`,sortOrder:s},i[s]));return o&&n.push(this.context.createVariable(UE,{name:"",sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,o)),Promise.resolve(n)}},UE=class extends Xr{constructor(r,n,i){super(r,n);this.stacktrace=i}async toDap(){return{name:"",value:await this.stacktrace.format(),variablesReference:0}}},jE=class extends Xr{constructor(r,n){super(r,n);this.location=n.value}async toDap(){return{name:this.context.name,value:await this.context.locationProvider.renderDebuggerLocation(this.location),variablesReference:0,presentationHint:{visibility:"internal"}}}},qE=class extends Xr{constructor(r,n,i){super(r,n);this.message=i}get accessor(){if(!(this.context.parent instanceof Xr))throw new Error("ErrorVariable must have a parent Variable");return this.context.parent.accessor}toDap(){return Promise.resolve({name:this.context.name,value:this.message,variablesReference:0})}},Qb=Symbol("NoStringRepr"),sm=class extends Xr{constructor(r,n,i){super(r,n);this.customStringRepr=i}async toDap(r,n){let[i,o]=await Promise.all([await super.toDap(r,n),await this.getValueRepresentation(r)]);return{...i,type:this.remoteObject.className||this.remoteObject.subtype||this.remoteObject.type,variablesReference:this.id,memoryReference:Vse.has(this.remoteObject.subtype)?String(this.id):void 0,value:o}}async getValueRepresentation(r){if(typeof this.customStringRepr=="string")return this.customStringRepr;if(!this.context.parent&&this.remoteObject.objectId&&this.customStringRepr!==Qb)try{let n=await this.context.cdp.Runtime.callFunctionOn({functionDeclaration:Xb.decl(`${mU}`,this.context.customDescriptionGenerator||"null"),objectId:this.remoteObject.objectId,returnByValue:!0});if(n?.result.value)return this.customStringRepr=gU(n.result.value)}catch{this.customStringRepr=Qb}return this.context.name==="__proto__"&&this.remoteObject.description||tc(this.remoteObject,r)}async readMemory(r,n){let i=await OE({cdp:this.context.cdp,args:[r,n],objectId:this.remoteObject.objectId,returnByValue:!0});return Buffer.from(i.value,"hex")}async writeMemory(r,n){return(await FE({cdp:this.context.cdp,args:[r,n.toString("hex")],objectId:this.remoteObject.objectId,returnByValue:!0})).value}getChildren(r){return this.context.createObjectPropertyVars(this.remoteObject,r.evaluationOptions)}},dU="[[Entries]]",WE=class extends sm{constructor(r,n){super(r,n,Qb);this.baseChildren=Ae(()=>super.getChildren({variablesReference:this.id}));this.isMap=n.subtype==="map";let i=n.preview;this.size=Number(i?.properties.find(o=>o.name==="size")?.value)??void 0}async toDap(r){let n=await super.toDap(r);return this.size&&this.size>100&&(n.indexedVariables=this.size),n}async getChildren(r){let n=await this.baseChildren();return[...(await n.find(o=>o.name===dU)?.getChildren(r)||[]).filter(o=>o.sortOrder===0),...n.filter(o=>o.name!==dU)]}},Zb=class extends sm{constructor(r,n){super(r,n,Qb);this.length=0;let i=String(n.description).match(/\(([0-9]+)\)/);this.length=i?+i[1]:0}async toDap(r){return{...await super.toDap(r),indexedVariables:this.length>100?this.length:void 0,namedVariables:this.length>100?1:void 0}}async getChildren(r){switch(r?.filter){case"indexed":return this.getArraySlots(r);case"named":return this.getArrayProperties();default:return Promise.all([this.getArrayProperties(),this.getArraySlots()]).then(Yo)}}async getArrayProperties(){try{let r=await aU({cdp:this.context.cdp,args:[],objectId:this.remoteObject.objectId,generatePreview:!0});return this.context.createObjectPropertyVars(r)}catch{return[]}}async getArraySlots(r){let n=r&&typeof r.start<"u"?r.start:-1,i=r&&typeof r.count<"u"?r.count:-1,o;try{o=await uU({cdp:this.context.cdp,generatePreview:!1,args:[n,i],objectId:this.remoteObject.objectId})}catch{return[]}let s=await this.context.createObjectPropertyVars(o);return o.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:o.objectId}),s}},VE=class extends Zb{async toDap(e){return this.remoteObject.preview?{...await super.toDap(e),name:ZN(this.remoteObject.preview)}:super.toDap(e)}},am=class extends Xr{constructor(e,r){super(e,r)}getChildren(e){return this.context.createObjectPropertyVars(this.remoteObject)}},GE=class extends am{async toDap(e,r){return{...await super.toDap(e,r),value:"write-only",variablesReference:this.id}}},KE=class extends am{constructor(r,n,i){super(r,n);this.parentObject=i}async toDap(r,n){let i=await super.toDap(r,n);return i.variablesReference=this.id,i.presentationHint={...i.presentationHint,lazy:!0},i}async getChildren(r){try{let n=await cU({cdp:this.context.cdp,objectId:this.parentObject.objectId,args:[new bh(this.remoteObject.objectId)]});return[this.context.createVariableByType({name:this.name,presentationHint:this.context.presentationHint},n)]}catch(n){if(!(n instanceof Ru))throw n}return super.getChildren(r)}},ev=class{constructor(e,r,n){this.context=e;this.variable=r;this.scopeRef=n;this.id=um();this.sortOrder=0}toDap(){return Promise.resolve({name:this.context.name,value:this.variable.description||"",variablesReference:this.variable.getChildren?this.id:0,memoryReference:this.variable.linearMemoryAddress?String(this.id):void 0,presentationHint:this.context.presentationHint})}async getChildren(){return(await this.variable.getChildren?.()||[]).map(r=>this.context.createVariable(ev,{name:r.name,presentationHint:ev.presentationHint},r.value,this.scopeRef))}async readMemory(e,r){let n=this.variable.linearMemoryAddress;if(n===void 0)return;let i=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${OE.source}).call(memories[0].buffer, ${+n+e}, ${+r}) ${ht()}`,returnByValue:!0});if(!i)throw new Ru({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});return Buffer.from(i.result.value,"hex")}async writeMemory(e,r){let n=this.variable.linearMemoryAddress;return n===void 0?0:(await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${FE.source}).call(memories[0].buffer, ${+n+e}, ${JSON.stringify(r.toString("hex"))}) ${ht()}`,returnByValue:!0}))?.result.value||0}},om=ev;om.presentationHint={attributes:["readOnly"]};var zE=class{constructor(e,r,n,i){this.context=e;this.kind=r;this.variables=n;this.scopeRef=i;this.id=um();this.sortOrder=fU[this.kind]?.sortOrder||0}toDap(){return Promise.resolve({name:fU[this.kind]?.name||this.kind,value:"",variablesReference:this.id})}getChildren(){return Promise.all(this.variables.map(async e=>{let r=await e.evaluate();return this.context.createVariable(om,{name:e.name,presentationHint:om.presentationHint},r,this.scopeRef)}))}},vp=class{constructor(e,r,n,i,o){this.remoteObject=e;this.context=r;this.ref=n;this.extraProperties=i;this.renameProvider=o;this.id=um()}async getChildren(e){let r=await this.context.createObjectPropertyVars(this.remoteObject),n=new Set(r.map(i=>i.name));for(let i of this.extraProperties)n.has(i.name)||r.push(this.context.createVariableByType({name:i.name},i.value));return r}async getRename(e){return(await this.renameProvider.provideOnStackframe(this.ref.stackFrame)).getOriginalName(e,this.ref.stackFrame.rawPosition)||e}async setProperty(e,r){let n=await this.context.cdp.Debugger.evaluateOnCallFrame({expression:`${r} ${ht()}`,callFrameId:this.ref.callFrameId});if(!n)throw new ee(Ye(Ci.t("Invalid expression")));if(n.exceptionDetails)throw new ee(HU(n.exceptionDetails));return await this.context.cdp.Debugger.setVariableValue({callFrameId:this.ref.callFrameId,scopeNumber:this.ref.scopeNumber,variableName:e,newValue:JE(n.result)}),this.context.createVariableByType({name:e},n.result)}},XE=class{constructor(){this.value=new Map}get(e){return this.value.get(e)}add(e){this.value.set(e.id,e)}clear(){this.value.clear()}},_a=class{constructor(e,r,n,i,o){this.renameProvider=e;this.cdp=r;this.dap=n;this.launchConfig=i;this.locationProvider=o;this.vars=new XE;this.contextSettings={customDescriptionGenerator:i.customDescriptionGenerator&&lU(["defaultValue"],i.customDescriptionGenerator,!1),customPropertiesGenerator:i.customPropertiesGenerator&&lU([],i.customPropertiesGenerator,!1)}}createDetached(){return new _a(this.renameProvider,this.cdp,this.dap,this.launchConfig,this.locationProvider)}clear(){this.vars.clear()}createFloatingVariable(e,r){return this.createFloatingContext().createVariableByType({name:e},r)}createVariableForOutput(e,r,n,i){let o=this.createFloatingContext(),s=r.length===1&&i==="table"?o.createVariable(VE,{name:""},r[0]):r.length===1&&ec(r[0])&&!n?o.createVariableByType({name:""},r[0]):o.createVariable(NE,{name:""},e,r,n),a=new Yb(s);return this.vars.add(a),a}createScope(e,r,n){let i=new vp(e,new ic(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),r,n,this.renameProvider);return this.vars.add(i),i}createWasmScope(e,r,n){let i=new zE(new ic(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),e,r,n);return this.vars.add(i),i}hasVariable(e){return!!this.vars.get(e)}hasMemory(e){return BE(this.vars.get(Number(e)))}async readMemory(e,r,n){let i=this.vars.get(Number(e));return BE(i)?i.readMemory(r,n):void 0}async writeMemory(e,r,n){let i=this.vars.get(Number(e)),o=BE(i)?await i.writeMemory(r,n):0;return o>0&&this.dap.invalidated({areas:["variables"]}),o}async getVariableNames(e){let r=this.vars.get(e.variablesReference);return r?(await r.getChildren(e)).filter(Au(Xr)).map(i=>i.name):[]}async getVariables(e){let r=this.vars.get(e.variablesReference);if(!r)return[];let n=await r.getChildren(e);return(await Promise.all(n.map(o=>o.toDap(r instanceof vp||r instanceof Yb?"repl":"propertyValue",e.format).then(s=>({v:o,dap:s}))))).sort((o,s)=>o.v.sortOrder-s.v.sortOrder||+o.dap.name-+s.dap.name||o.dap.name.localeCompare(s.dap.name)).map(o=>o.dap)}async setVariable(e){let r=this.vars.get(e.variablesReference);if(!e.value)throw new ee(Ye(Ci.t("Cannot set an empty value")));if(r instanceof vp||r instanceof Xr)return await(await r.setProperty(e.name,e.value)).toDap("propertyValue",e.format);throw new ee(Xe(Ci.t("Variable not found")))}createFloatingContext(){return new ic(this.cdp,void 0,{name:"<unnamed>"},this.vars,this.locationProvider,void 0,this.contextSettings)}};_a=T([(0,nc.injectable)(),v(0,(0,nc.inject)(la)),v(1,(0,nc.inject)(mt)),v(2,(0,nc.inject)(on)),v(3,(0,nc.inject)(Me))],_a);function HU(t){let e=t.exception&&rc(t.exception).title||t.text;return Ye(e)}var tv=class{constructor(e){this.description=e;this.sourceMapLoads=new Map;this.scripts=[]}get isDefault(){return this.description.auxData&&this.description.auxData.isDefault}async remove(e){await Promise.all(this.scripts.map(async r=>{let n=await r.source;n.filterScripts(i=>i.executionContextId!==this.description.id),n.scripts.length||e.removeSource(n)}))}},YE=class{constructor(e){this._obj=e;this._dapDeferred=Ue()}resolve(){this._dapDeferred.resolve(this._obj)}with(e){return this._dapDeferred.hasSettled()?e(this._obj):this._dapDeferred.promise.then(r=>e(r))}},Yse=50,yU=(t,e)=>t.sourceReference===e.sourceReference&&jy(t.path||"",e.path||""),Qse=()=>`
//# sourceURL=eval-${(0,bU.randomBytes)(4).toString("hex")}${".repl"}
`,QE=class{enqueue(e,r){if(!this.queue||this.queue.operation!==e){let n=this.queue?.result.then(r,r)??r(),i=this.queue={operation:e,result:n.finally(()=>{this.queue===i&&(this.queue=void 0)})}}return this.queue.result}},Aa=class{constructor(e,r,n,i,o,s,a,u,c,l,p,f,m,h){this.target=i;this.logger=s;this.evaluator=a;this.completer=u;this.launchConfig=c;this._breakpointManager=l;this.console=p;this.exceptionPause=f;this._smartStepper=m;this.shutdown=h;this._executionContexts=new Map;this._excludedCallers=[];this.stateQueue=new QE;this._onPausedEmitter=new z;this.disposed=!1;this.debuggerReady=Ue();this.onPaused=this._onPausedEmitter.event;this._dap=new YE(n),this._sourceContainer=e,this._cdp=r,this.id=Aa._lastThreadId++,this.replVariables=new _a(o,this._cdp,n,c,this),e.onSourceMappedSteppingChange(()=>this.refreshStackTrace()),this._initialize()}setExcludedCallers(e){this._excludedCallers=e}cdp(){return this._cdp}name(){return this.target.name()}pausedDetails(){return this._pausedDetails}pausedVariables(){return this._pausedVariables}defaultExecutionContext(){for(let e of this._executionContexts.values())if(e.isDefault)return e}resume(){return this.stateQueue.enqueue("resume",async()=>(this._sourceContainer.clearDisabledSourceMaps(),!await this._cdp.Debugger.resume({})&&this._pausedDetails!==void 0?Xe(Fe.t("Unable to resume")):{allThreadsContinued:!1}))}pause(){return this.stateQueue.enqueue("pause",async()=>(this._expectedPauseReason={reason:"pause"},await this._cdp.Debugger.pause({})?{}:Xe(Fe.t("Unable to pause"))))}stepOver(){return this.stateQueue.enqueue("stepOver",async()=>{this._expectedPauseReason={reason:"step",direction:1};let e=await this.getCurrentSkipList(1);return await this._cdp.Debugger.stepOver({skipList:e})?{}:Xe(Fe.t("Unable to step next"))})}stepInto(e){return this.stateQueue.enqueue("stepInto",async()=>{this._waitingForStepIn={lastDetails:this._pausedDetails},this._expectedPauseReason={reason:"step",direction:0};let r=this._pausedDetails?.stepInTargets?.[e];if(r){let n=await this._cdp.Debugger.setBreakpoint({location:r.breakLocation});if(this._waitingForStepIn.intoTargetBreakpoint=n?.breakpointId,await this._cdp.Debugger.resume({}))return{}}else{let n=await this.getCurrentSkipList(0);if(await this._cdp.Debugger.stepInto({breakOnAsyncCall:!0,skipList:n}))return{}}return Xe(Fe.t("Unable to step in"))})}stepOut(){return this.stateQueue.enqueue("stepOut",async()=>(this._expectedPauseReason={reason:"step",direction:2},await this._cdp.Debugger.stepOut({})?{}:Xe(Fe.t("Unable to step out"))))}async getCurrentSkipList(e){if(!this._pausedDetails)return;let[r]=await this._pausedDetails.stackTrace.loadFrames(1);if(!r||!vU(r))return;let n=await r.getStepSkipList(e);if(n)return In.simplify(n).map(i=>({start:i.begin.base0,end:i.end.base0,scriptId:r.root.scriptId}))}_stackFrameNotFoundError(){return Xe(Fe.t("Stack frame not found"))}_evaluateOnAsyncFrameError(){return Xe(Fe.t("Unable to evaluate on async stack frame"))}async restartFrame(e){let r=this._pausedDetails?.stackTrace.frame(e.frameId)?.root;if(!r)return this._stackFrameNotFoundError();let n=r.callFrameId();return n?await this._cdp.Debugger.restartFrame({callFrameId:n,mode:"StepInto"})?(this._expectedPauseReason={reason:"frame_entry",description:Fe.t("Paused on frame entry")},r.canExplicitlyBeRestarted||await this._cdp.Debugger.stepInto({}),{}):Ye(Fe.t("Frame could not be restarted")):Ye(Fe.t("Cannot restart asynchronous frame"))}async stackTrace(e){return this._pausedDetails?this._pausedDetails.stackTrace.toDap(e):Xe(Fe.t("Thread is not paused"))}async scopes(e){let r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0;return r?r.scopes():this._stackFrameNotFoundError()}async exceptionInfo(){let e=this._pausedDetails&&this._pausedDetails.exception;if(!e)return Xe(Fe.t("Thread is not paused on exception"));let r=rc(e);return{exceptionId:r.title,breakMode:"all",details:{stackTrace:r.stackTrace,evaluateName:void 0}}}async revealPage(){return this._cdp.Page.bringToFront({}),{}}async completions(e){let r;if(e.frameId!==void 0){if(r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId)?.root:void 0,!r)return this._stackFrameNotFoundError();if(!r.callFrameId())return this._evaluateOnAsyncFrameError()}if(e.line===1&&e.text.startsWith("cd "))return{targets:this.getExecutionContextCompletions(e)};let n=await this.completer.completions({executionContextId:this._selectedContext?this._selectedContext.description.id:void 0,stackFrame:r,expression:e.text,position:new Ut(e.line||1,e.column)});return{targets:[...this.getExecutionContextCompletions(e),...n]}}getExecutionContextCompletions(e){if(e.line&&e.line>1)return[];let r=e.text.slice(0,e.column).trim();return[...this._executionContexts.values()].map(n=>`cd ${this.target.executionContextName(n.description)}`).filter(n=>n.startsWith(r)).map(n=>({label:n,start:0,length:e.text.length}))}async _evaluteWasm(e,r,n){if(!e)return;let i=e.root,o=i.callFrameId(),s=await i.scriptSource?.source;if(!Wu(s)||!o)return;let a=await s.sourceMap.value.promise;if(!a.evaluate)return;let u=new vt(e instanceof lm?e.inlineFrameIndex:0,i.rawPosition.base0.columnNumber),c=await a.evaluate(o,u,r.expression);if(c)return await n.createFloatingVariable(r.expression,c).toDap(r.context,r.format)}async _evaluteJs(e,r,n){let i=e?.root.callFrameId(),o=r.context==="clipboard"?{expression:kE.expr(r.expression,"2"),includeCommandLineAPI:!0,returnByValue:!0,objectGroup:"console"}:{expression:r.expression,includeCommandLineAPI:!0,objectGroup:"console",generatePreview:!0,timeout:r.context==="hover"?this.getHoverEvalTimeout():void 0};if(r.context==="repl"){if(o.expression=yh(o.expression),o.expression.indexOf("await")!==-1){let u=P1(o.expression);u&&(o.expression=u,o.awaitPromise=!0)}o.expression+=Qse()}r.evaluationOptions&&this.cdp().DotnetDebugger.setEvaluationOptions({options:r.evaluationOptions,type:"evaluation"});let s=this.evaluator.evaluate(i?{...o,callFrameId:i}:{...o,contextId:this._selectedContext?this._selectedContext.description.id:void 0},{isInternalScript:!1,stackFrame:e?.root});if(r.context==="repl")return await this._evaluateRepl(r,s,r.format);let a=await s;if(!a)throw new ee(Xe(Fe.t("Unable to evaluate")));if(a.exceptionDetails){let u=a.exceptionDetails.exception?rc(a.exceptionDetails.exception).title:a.exceptionDetails.text;throw u.startsWith("Uncaught")||(u="Uncaught "+u),new ee(Xe(u))}return n.createFloatingVariable(o.expression,a.result).toDap(r.context,r.format)}async evaluate(e){let r,n;if(e.frameId!==void 0){if(n=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0,!n)throw new ee(this._stackFrameNotFoundError());if(r=n.root.callFrameId(),!r)throw new ee(this._evaluateOnAsyncFrameError())}if(e.context==="repl"&&e.expression.startsWith("cd ")){let s=e.expression.substring(3).trim();for(let a of this._executionContexts.values())if(this.target.executionContextName(a.description)===s)return this._selectedContext=a,{result:`[${s}]`,variablesReference:0}}let i=r?this._pausedVariables:this.replVariables;if(!i)throw new ee(Xe(Fe.t("Unable to evaluate")));let o=await this._evaluteWasm(n,e,i)??await this._evaluteJs(n,e,i);return{type:o.type,result:o.value,variablesReference:o.variablesReference,namedVariables:o.namedVariables,indexedVariables:o.indexedVariables,memoryReference:o.memoryReference}}getHoverEvalTimeout(){let e=this.launchConfig.timeouts?.hoverEvaluation;if(e===void 0)return 500;if(!(e<=0))return e}async _evaluateRepl(e,r,n){let i=await r;if(!i)return{name:e.expression,value:"",variablesReference:0};if(i.exceptionDetails){let u=await new cm(i.exceptionDetails).toDap(this);throw new ee(i1(u.output))}let o=this._selectedContext&&this.defaultExecutionContext()!==this._selectedContext?`\x1B[33m[${this.target.executionContextName(this._selectedContext.description)}] `:"",s=await this.replVariables.createFloatingVariable(e.expression,i.result).toDap("repl",n),a=Wb("repl").budget;return s.variablesReference===0&&s.value.length===a&&setImmediate(()=>this.console.enqueue(this,{toDap:()=>({output:Fe.t("Output has been truncated to the first {0} characters. Run `{1}` to copy the full output.",a,`copy(${e.expression.trim()})`),category:"stdout"})})),{...s,value:`${o}${s.value}`}}_initialize(){this._cdp.Runtime.on("executionContextCreated",e=>{this._executionContextCreated(e.context)}),this._cdp.Runtime.on("executionContextDestroyed",e=>{this._executionContextDestroyed(e.executionContextId)}),this._cdp.Runtime.on("executionContextsCleared",()=>{this.launchConfig.noDebug||this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.replVariables.clear(),this._executionContextsCleared()}),this._cdp.Inspector.on("targetReloadedAfterCrash",()=>{this._breakpointManager.reapply()}),this.launchConfig.outputCapture==="console"&&(this._cdp.Runtime.on("consoleAPICalled",e=>{this.console.dispatch(this,e)}),this._cdp.Runtime.on("exceptionThrown",e=>{this.console.enqueue(this,new cm(e.exceptionDetails))})),this._cdp.Runtime.on("inspectRequested",e=>{e.hints.copyToClipboard?this._copyObjectToClipboard(e.object):e.hints.queryObjects?this.console.enqueue(this,new zb(e.object,this.cdp())):this._revealObject(e.object)}),this._cdp.Debugger.on("paused",async e=>this._onPaused(e)),this._cdp.Debugger.on("resumed",()=>this.onResumed()),this._cdp.Debugger.on("scriptParsed",e=>this._onScriptParsed(e)),this._cdp.Debugger.on("scriptFailedToParse",e=>this._onScriptParsed(e)),this._cdp.Runtime.enable({}),this._cdp.Profiler.enable({}),this.launchConfig.noDebug?this.logger.info("runtime.launch","Running with noDebug, so debug domains are disabled"):this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.target.initialize(),this._dap.with(e=>e.thread({reason:"started",threadId:this.id}))}dapInitialized(){this._dap.resolve()}async getStepInTargets(e){let r=this._pausedDetails;if(!r)return[];let n=r.stackTrace.frames.find(l=>l.frameId===e);if(!(n instanceof jt))return[];let i=await n.uiLocation();if(!i)return[];let o=r.event.callFrames[0].location,[s,a]=await Promise.all([this._breakpointManager.getBreakpointLocations(this,i.source,new Ut(i.lineNumber,1),new Ut(i.lineNumber+1,1)).then(l=>l.filter(p=>p.breakLocation.lineNumber!==o.lineNumber||p.breakLocation.columnNumber!==o.columnNumber)),i.source.content()]),u=r.stepInTargets?.length||0;r.stepInTargets=r.stepInTargets?.concat(s)||s;let c=a&&new oa(a);return s.map((l,p)=>{let f=l.uiLocations.find(h=>h.source===i.source);if(!f)return;if(!c)return{id:u+p,label:`Column ${f}`,line:f.lineNumber,column:f.columnNumber};let m=x1(a.slice(c.getLineOffset(f.lineNumber-1),c.getLineOffset(f.lineNumber)),f.columnNumber-1);if(m)return{id:u+p,label:m.text,line:f.lineNumber,column:m.start+1,endLine:f.lineNumber,endColumn:m.end+1}}).filter(Ct)}async refreshStackTrace(){this._pausedDetails&&(this._pausedDetails=await this._createPausedDetails(this._pausedDetails.event),this._onThreadResumed(),await this._onThreadPaused(this._pausedDetails))}_executionContextCreated(e){let r=new tv(e);this._executionContexts.set(e.id,r)}_executionContextDestroyed(e){let r=this._executionContexts.get(e);r&&(this._executionContexts.delete(e),r.remove(this._sourceContainer))}_executionContextsCleared(){this._removeAllScripts(),this._breakpointManager.executionContextWasCleared(),this._pausedDetails&&this.onResumed(),this._executionContexts.clear()}_ensureDebuggerEnabledAndRefreshDebuggerId(){this._cdp.Debugger.enable({}).then(e=>{this.debuggerReady.resolve(),e&&Aa._allThreadsByDebuggerId.set(e.debuggerId,this)}),this.exceptionPause.apply(this._cdp)}async _onPaused(e){let r=e.hitBreakpoints??[],n=e.reason==="Break on start"||e.reason==="debugCommand",i=e.callFrames[0]?.location,o=e.data?.scriptId||i?.scriptId,s=o&&(e.reason==="instrumentation"||this._breakpointManager.isEntrypointBreak(r,o)||r.some(l=>this._pauseOnSourceMapBreakpointIds?.includes(l)));if(this.evaluator.setReturnedValue(e.callFrames[0]?.returnValue),s){this.launchConfig.perScriptSourcemaps==="auto"&&this._shouldEnablePerScriptSms(e)&&await this._enablePerScriptSourcemaps(),e.data&&!n&&(e.data.__rewriteAs="breakpoint");let l=this._expectedPauseReason;if(!(o&&await this._handleSourceMapPause(o,i))){if(!n){if(await this.isCrossThreadStep(e))e.data={...e.data,__rewriteAs:"step"};else if(!await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!0))if(l?.reason==="step"){if(l.direction!==0)return this._cdp.Debugger.stepOut({})}else return this.resume()}}}else if(!(e.reason==="exception"||e.reason==="promiseRejection"?await this.exceptionPause.shouldPauseAt(e):await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!1)))return this.resume();let a=this._waitingForStepIn?.intoTargetBreakpoint;if(a){e.hitBreakpoints?.includes(a)?(this._waitingForStepIn.intoTargetBreakpoint=void 0,await this._cdp.Debugger.removeBreakpoint({breakpointId:a}),await this._cdp.Debugger.stepInto({breakOnAsyncCall:!1})):this.resume();return}if(n&&("continueOnAttach"in this.launchConfig&&this.launchConfig.continueOnAttach||this.launchConfig.type==="pwa-extensionHost"||this.target instanceof bp)){this.resume();return}let u=this._pausedDetails=await this._createPausedDetails(e);if(this._excludedCallers.length&&await this._matchesExcludedCaller(this._pausedDetails.stackTrace)){this.logger.info("runtime","Skipping pause due to excluded caller"),this.resume();return}let c=await this._smartStepper.getSmartStepDirection(u,this._expectedPauseReason);if(this._pausedDetails===u){switch(c){case 0:return this.stepInto();case 2:return this.stepOut();case 1:return this.stepOver();default:}this._waitingForStepIn=void 0,this._pausedVariables=this.replVariables.createDetached(),await this._onThreadPaused(u)}}async _matchesExcludedCaller(e){if(!this._excludedCallers.length)return!1;let r=e.frames[0],n=r instanceof jt&&await r.uiLocation();if(!n)return!1;let i,o,s=[];for(let{caller:a,target:u}of this._excludedCallers)if(!(u.line!==n.lineNumber||u.column!==n.columnNumber)&&(i??=await n.source.toDapShallow(),!!yU(i,u.source))){o||(o=await e.loadFrames(Yse).then(l=>Promise.all(l.slice(1).filter(Au(jt)).map(p=>p.uiLocation()))));for(let c=0;c<o.length;c++){let l=o[c];if(!l||l.lineNumber!==a.line||l.columnNumber!==a.column)continue;let p=s[c]??=await l.source.toDapShallow();if(yU(p,a.source))return!0}}return!1}onResumed(){this._pausedDetails=void 0,this._pausedVariables=void 0,this.evaluator.setReturnedValue(void 0),this._onThreadResumed()}async dispose(){this.disposed=!0,await this.shutdown.shutdown();for(let[e,r]of Aa._allThreadsByDebuggerId)r===this&&Aa._allThreadsByDebuggerId.delete(e);this._removeAllScripts(!0),this._executionContextsCleared(),await this._dap.with(e=>e.thread({reason:"exited",threadId:this.id}))}rawLocation(e){if("location"in e){let r=e;return{lineNumber:Math.max(0,r.location.lineNumber)+1,columnNumber:Math.max(0,r.location.columnNumber||0)+1,scriptId:r.location.scriptId}}return{lineNumber:Math.max(0,e.lineNumber)+1,columnNumber:Math.max(0,e.columnNumber||0)+1,scriptId:e.scriptId}}rawLocationToUiLocation(e){if(!e.scriptId||this.disposed||this.launchConfig.noDebug)return;let r=this._sourceContainer.getScriptById(e.scriptId);return r?r.resolvedSource?this._sourceContainer.preferredUiLocation({...r.resolvedSource.offsetScriptToSource(e),source:r.resolvedSource}):r.source.then(n=>this._sourceContainer.preferredUiLocation({...n.offsetSourceToScript(e),source:n})):this.rawLocationToUiLocationWithWaiting(e)}async rawLocationToUiLocationWithWaiting(e){let r=e.scriptId?await this.getScriptByIdOrWait(e.scriptId):void 0;if(!r)return;let n=await r.source;return this._sourceContainer.preferredUiLocation({...n.offsetScriptToSource(e),source:n})}getScriptById(e){return this._sourceContainer.getScriptById(e)}getScriptByIdOrWait(e,r=500){return this._sourceContainer.getScriptById(e)||this.waitForScriptId(e,r)}waitForScriptId(e,r){return new Promise(n=>{let i=this._sourceContainer.onScript(s=>{s.scriptId===e&&(n(s),i.dispose(),clearTimeout(o))}),o=setTimeout(()=>{n(void 0),i.dispose()},r)})}async renderDebuggerLocation(e){let r=this.rawLocation(e),n=await this.rawLocationToUiLocation(r);return n?`@ ${await n.source.prettyName()}:${n.lineNumber}`:`@ VM${r.scriptId||"XX"}:${r.lineNumber}`}async updateCustomBreakpoint(e,r){if(!this.target.supportsCustomBreakpoints())return;let n=im().get(e);n&&await n.apply(this._cdp,r)}async _createPausedDetails(e){let r=e.reason==="assert"||e.reason==="exception"||e.reason==="promiseRejection"||e.reason==="other"||e.reason==="ambiguous",n=e.hitBreakpoints?.filter(o=>!this._breakpointManager.isEntrypointCdpBreak(o))||[];if((n.length||!r)&&this._sourceContainer.clearDisabledSourceMaps(),e.hitBreakpoints&&this._sourceMapDisabler)for(let o of this._sourceMapDisabler(e.hitBreakpoints))this._sourceContainer.disableSourceMapForSource(o);let i=ei.fromDebugger(this,e.callFrames,e.asyncStackTrace,e.asyncStackTraceId);if(e.data?.__rewriteAs==="breakpoint")return{thread:this,event:e,stackTrace:i,reason:"breakpoint",description:Fe.t("Paused on breakpoint")};if(e.data?.__rewriteAs==="step")return{thread:this,event:e,stackTrace:i,reason:"step",description:Fe.t("Paused")};switch(e.reason){case"assert":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Fe.t("Paused on assert")};case"debugCommand":return{thread:this,event:e,stackTrace:i,reason:"pause",description:Fe.t("Paused on debug() call")};case"DOM":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Fe.t("Paused on DOM breakpoint")};case"EventListener":return this._resolveEventListenerBreakpointDetails(i,e);case"exception":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Fe.t("Paused on exception"),exception:e.data};case"promiseRejection":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Fe.t("Paused on {0}","promise rejection"),exception:e.data};case"instrumentation":return e.data&&e.data.scriptId?{thread:this,event:e,stackTrace:i,reason:"step",description:Fe.t("Paused")}:{thread:this,event:e,stackTrace:i,reason:"function breakpoint",description:Fe.t("Paused on instrumentation breakpoint")};case"XHR":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Fe.t("Paused on XMLHttpRequest or fetch")};case"OOM":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Fe.t("Paused before Out Of Memory exception")};default:if(n.length){let o=!1,s=this.target.entryBreakpoint;if(s&&n.includes(s.cdpId)){o=!0;let a=this._sourceContainer.source({path:bt(s.path)});a!==void 0&&(o=!(await this._sourceContainer.currentSiblingUiLocations({lineNumber:e.callFrames[0].location.lineNumber+1,columnNumber:(e.callFrames[0].location.columnNumber||0)+1,source:a}))?.some(c=>this._breakpointManager.hasAtLocation(c)))}return o||this._breakpointManager.registerBreakpointsHit(n),{thread:this,event:e,stackTrace:i,hitBreakpoints:e.hitBreakpoints,reason:o?"entry":"breakpoint",description:Fe.t("Paused on breakpoint")}}return this._expectedPauseReason?{thread:this,event:e,stackTrace:i,description:Fe.t("Paused"),...this._expectedPauseReason}:{thread:this,event:e,stackTrace:i,reason:"pause",description:Fe.t("Paused on debugger statement")}}}_resolveEventListenerBreakpointDetails(e,r){let n=r.data,i=n&&n.eventName||"",o=im().get(i);if(o){let s=o.details(n);return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:s.short,text:s.long}}return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:Fe.t("Paused on event listener")}}_clearDebuggerConsole(){return{category:"console",output:"\x1B[2J"}}_removeAllScripts(e=!1){this._sourceContainer.clear(e)}_onScriptParsed(e){if(e.url.endsWith(".cdp")||(kr(e.url)&&(e.url=Oe(e.url)),this._sourceContainer.getScriptById(e.scriptId)))return;e.url&&(e.url=this.target.scriptUrlToUrl(e.url));let r=this._executionContexts.get(e.executionContextId);r||(this.logger.info("internal","Creating missing execution context id",e),r=new tv({id:e.executionContextId,name:"<autofilled>",origin:"",uniqueId:String(e.executionContextId)}),this._executionContexts.set(e.executionContextId,r));let n=async()=>{let o=this._sourceContainer.getSourceByOriginalUrl(e.url);if(e.hash&&o?.contentHash===e.hash)return o.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),o;let s=async()=>{let p=await this._cdp.Debugger.getScriptSource({scriptId:e.scriptId});return p?p.scriptSource:void 0},a=e.startLine||e.startColumn?{lineOffset:e.startLine,columnOffset:e.startColumn}:void 0,u=e.url.endsWith("#vscode-extension")?{lineOffset:2,columnOffset:0}:void 0,c;e.sourceMapURL&&(c=gr(e.sourceMapURL)?e.sourceMapURL:e.url&&na(e.url,e.sourceMapURL)||e.url,c||this._dap.with(p=>Jk(p,`Could not load source map from ${e.sourceMapURL}`)));let l=await this._sourceContainer.addSource(e,s,c,a,u,!e.hasSourceURL&&this.launchConfig.enableContentValidation?e.hash:void 0);return l.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),l},i={url:e.url,hasSourceURL:!!e.hasSourceURL,embedderName:e.embedderName,scriptId:e.scriptId,executionContextId:e.executionContextId,source:n()};i.source.then(o=>i.resolvedSource=o),r.scripts.push(i),this._sourceContainer.addScriptById(i),(e.sourceMapURL||e.scriptLanguage==="WebAssembly")&&this._getOrStartLoadingSourceMaps(i)}async _handleSourceMapPause(e,r){this._pausedForSourceMapScriptId=e;let n=this._sourceContainer.sourceMapTimeouts().sourceMapMinPause,i=n+this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause,o=this._sourceContainer.getScriptById(e);if(!o)return this._pausedForSourceMapScriptId=void 0,!1;let s=new zr,a=await Promise.race([this._getOrStartLoadingSourceMaps(o),Te(i)]),u=s.elapsed().ms,c=this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause-Math.max(u-n,0);this._sourceContainer.setSourceMapTimeouts({...this._sourceContainer.sourceMapTimeouts(),sourceMapCumulativePause:c}),this.logger.verbose("internal","Blocked execution waiting for source-map",{timeSpentWallClockInMs:u,sourceMapCumulativePause:c}),a||this._dap.with(f=>f.output({category:"stderr",output:Fe.t("WARNING: Processing source-maps of {0} took longer than {1} ms so we continued execution without waiting for all the breakpoints for the script to be set.",o.url||o.scriptId,i)})),console.assert(this._pausedForSourceMapScriptId===e),this._pausedForSourceMapScriptId=void 0;let l=r?.lineNumber||0,p=r?.columnNumber;return!!a?.map(is).some(f=>f.lineNumber===l&&(p===void 0||p===f.columnNumber))}_getOrStartLoadingSourceMaps(e){let r=this._executionContexts.get(e.executionContextId);if(!r)return Promise.resolve([]);let n=r.sourceMapLoads.get(e.scriptId);if(n)return n;let i=e.source.then(o=>this._sourceContainer.waitForSourceMapSources(o)).then(o=>o.length&&this._scriptWithSourceMapHandler?this._scriptWithSourceMapHandler(e,o):[]);return r.sourceMapLoads.set(e.scriptId,i),i}async _revealObject(e){if(e.type!=="function"||e.objectId===void 0)return;let r=await this._cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0});if(r)for(let n of r.internalProperties||[]){if(n.name!=="[[FunctionLocation]]"||!n.value||n.value.subtype!=="internal#location")continue;let i=await this.rawLocationToUiLocation(this.rawLocation(n.value.value));i&&this._sourceContainer.revealUiLocation(i);break}}async _copyObjectToClipboard(e){if(!e.objectId){this._dap.with(r=>r.copyRequested({text:tc(e,"copy")}));return}try{let r=await sU({cdp:this.cdp(),objectId:e.objectId,args:[2],silent:!0,returnByValue:!0});this._dap.with(n=>n.copyRequested({text:r.value}))}catch{}finally{this.cdp().Runtime.releaseObject({objectId:e.objectId}).catch(()=>{})}}async _onThreadPaused(e){this._expectedPauseReason=void 0,this._onPausedEmitter.fire(e);let r;e.hitBreakpoints&&(r=await Promise.race([Te(1e3).then(()=>{}),Promise.all(e.hitBreakpoints.map(n=>this._breakpointManager._resolvedBreakpoints.get(n)).filter(Au(Xn)).map(n=>n.untilSetCompleted().then(()=>n.dapId)))])),await Te(0),this._dap.with(n=>n.stopped({reason:e.reason,description:e.description,threadId:this.id,text:e.text,hitBreakpointIds:r,allThreadsStopped:!1}))}_onThreadResumed(){this._dap.with(e=>e.continued({threadId:this.id,allThreadsContinued:!1}))}isCrossThreadStep(e){if(!e.asyncStackTraceId||!e.asyncStackTraceId.debuggerId)return!1;let r=Aa.threadForDebuggerId(e.asyncStackTraceId.debuggerId);if(!r||!r._waitingForStepIn?.lastDetails)return!1;let n=r._waitingForStepIn.lastDetails.stackTrace;return r._cdp.Debugger.getStackTrace({stackTraceId:e.asyncStackTraceId}).then(i=>!i||!i.stackTrace.callFrames.length||!jt.fromRuntime(r,i.stackTrace.callFrames[0],!1).equivalentTo(n.frames[0])?!1:(r._waitingForStepIn=void 0,!0))}async setScriptSourceMapHandler(e,r){this._scriptWithSourceMapHandler=r;let n=e&&this._sourceContainer.sourceMapTimeouts().sourceMapMinPause&&r;if(n&&!this._pauseOnSourceMapBreakpointIds?.length){await this.debuggerReady.promise;let i=await Promise.all([this._cdp.Debugger.setInstrumentationBreakpoint({instrumentation:"beforeScriptWithSourceMapExecution"}),this._cdp.Debugger.setBreakpointByUrl({lineNumber:0,columnNumber:0,urlRegex:"\\.[wW][aA][sS][mM]"})]);this._pauseOnSourceMapBreakpointIds=i.map(o=>o?.breakpointId).filter(Ct)}else if(!n&&this._pauseOnSourceMapBreakpointIds?.length){let i=this._pauseOnSourceMapBreakpointIds;this._pauseOnSourceMapBreakpointIds=void 0,await Promise.all(i.map(o=>this._cdp.Debugger.removeBreakpoint({breakpointId:o})))}return!!this._pauseOnSourceMapBreakpointIds?.length}async _enablePerScriptSourcemaps(){await this._breakpointManager.updateEntryBreakpointMode(this,1),await this.setScriptSourceMapHandler(!1,this._scriptWithSourceMapHandler)}_shouldEnablePerScriptSms(e){return e.data?.url.includes("@vite/client")?!0:e.reason!=="instrumentation"||!gr(e.data?.sourceMapURL)?!1:e.data.url?.startsWith("webpack")||e.data.url?.startsWith("ng:")}setSourceMapDisabler(e){this._sourceMapDisabler=e}static threadForDebuggerId(e){return Aa._allThreadsByDebuggerId.get(e)}async replacePathsInStackTrace(e){let r=[];for(let i of new va(e)){if(typeof i=="string"){r.push(i);continue}let o=this._sourceContainer.getSourceByOriginalUrl(Oe(i.path))||this._sourceContainer.getSourceByOriginalUrl(i.path);if(!o){r.push(i.toString());continue}r.push(this._sourceContainer.preferredUiLocation({columnNumber:i.position.base1.columnNumber,lineNumber:i.position.base1.lineNumber,source:o}).then(({source:s,lineNumber:a,columnNumber:u})=>`${s.absolutePath}:${a}:${u}`))}return(await Promise.all(r)).join("")}},Ia=Aa;Ia._lastThreadId=0,Ia._allThreadsByDebuggerId=new Map;var vU=t=>typeof t.uiLocation=="function",ei=class{constructor(e){this.thread=e;this.frames=[];this._frameById=new Map;this._lastInlineWasmExpanded=Promise.resolve(0);this._lastFrameThread=e}static fromRuntime(e,r){let n=new ei(e);for(let i of r.callFrames)i.url.endsWith(".cdp")||n.frames.push(jt.fromRuntime(e,i,!1));return r.parentId?(n._asyncStackTraceId=r.parentId,console.assert(!r.parent)):n._appendStackTrace(e,r.parent),n}static fromDebugger(e,r,n,i){let o=new ei(e);for(let s of r)o._appendFrame(jt.fromDebugger(e,s));return i?(o._asyncStackTraceId=i,console.assert(!n)):o._appendStackTrace(e,n),o}async loadFrames(e,r){return await this.expandAsyncStack(e,r),await this.expandWasmFrames(),this.frames}async expandAsyncStack(e,r){for(;this.frames.length<e&&this._asyncStackTraceId;){if(this._asyncStackTraceId.debuggerId&&(this._lastFrameThread=Ia.threadForDebuggerId(this._asyncStackTraceId.debuggerId)),!this._lastFrameThread){this._asyncStackTraceId=void 0;break}r&&this._lastFrameThread.cdp().DotnetDebugger.setEvaluationOptions({options:{noFuncEval:r},type:"stackFrame"});let n=await this._lastFrameThread.cdp().Debugger.getStackTrace({stackTraceId:this._asyncStackTraceId});this._asyncStackTraceId=void 0,n&&this._appendStackTrace(this._lastFrameThread,n.stackTrace)}}expandWasmFrames(){return this._lastInlineWasmExpanded=this._lastInlineWasmExpanded.then(async e=>{for(;e<this.frames.length;e++){let r=this.frames[e];if(!(r instanceof jt))continue;let n=r.scriptSource?.resolvedSource;if(!Wu(n))continue;let i=await n.sourceMap.value.promise;if(!i.getFunctionStack)continue;let o=await i.getFunctionStack(r.rawPosition);if(o.length===0)continue;let s=[];for(let a=0;a<o.length;a++){let u=new lm({source:n,thread:this.thread,inlineFrameIndex:a,name:o[a].name,root:r});this._frameById.set(u.frameId,u),s.push(u)}this._spliceFrames(e,1,...s),e+=o.length-1}return e})}frame(e){return this._frameById.get(e)}_appendStackTrace(e,r){for(console.assert(!r||!this._asyncStackTraceId);r;){if(r.description==="async function"&&r.callFrames.length&&r.callFrames.shift(),r.callFrames.length){this._appendFrame(new rv(r.description||"async"));for(let n of r.callFrames)this._appendFrame(jt.fromRuntime(e,n,!0))}r.parentId&&(this._asyncStackTraceId=r.parentId,console.assert(!r.parent)),r=r.parent}}_spliceFrames(e,r,...n){this.frames.splice(e,r,...n);for(let i of n)i instanceof rv||this._frameById.set(i.frameId,i)}_appendFrame(e){this._spliceFrames(this.frames.length,0,e)}async formatAsNative(){return await this.formatWithMapper(e=>e.formatAsNative())}async format(){return await this.formatWithMapper(e=>e.format())}async formatWithMapper(e){let r=await this.loadFrames(50);for(let i=r.length-1;i>=0;i--){let o=r[i];if(o instanceof jt&&o.isReplEval){r=r.slice(0,i+1);break}}let n=r.map(e);return(await Promise.all(n)).join(`
`)+`
`}async toDap(e){let r=e.startFrame||0,n=(e.levels||50)+r,i=await this.loadFrames(n,e.noFuncEval);n=Math.min(i.length,e.levels?n:i.length);let o=[];for(let s=r;s<n;s++)o.push(i[s].toDap(e.format));return{stackFrames:await Promise.all(o),totalFrames:this._asyncStackTraceId?1e6:i.length}}},eD=sH(),rv=class{constructor(e="async"){this.label=e;this.frameId=eD()}async toDap(){return{name:this.label,id:0,line:0,column:0,presentationHint:"label"}}async formatAsNative(){return`    --- ${this.label} ---`}async format(){return`\u25C0 ${this.label} \u25B6`}},wU="<anonymous>",Zse=/^class\s+(.+) {($|\n)/;async function eae(t,e,r){if(!e.functionName)return wU;if(e.functionName.includes("."))return e.functionName;let n;if(e.this.objectId&&r&&(n=(await t.cdp().Runtime.callFunctionOn({functionDeclaration:Xb.decl("64","null"),objectId:e.this.objectId,returnByValue:!0}))?.result.value),!n&&e.this.description){n=e.this.description;let s=Zse.exec(n);s&&(n=s[1])}if(!n)return e.functionName;let i=n.indexOf(`
`);i!==-1&&(n=n.slice(0,i).trim());let o=e.functionName;return n===o?`${n}.constructor`:n?`${n}.${o}`:o}function tae(t){return t.functionName||wU}var jt=class{constructor(e,r,n,i=!1){this.callFrame=r;this.isAsync=i;this.frameId=eD();this.root=this;this.getLocationInfo=Ae(async()=>{let e=this.uiLocation(),r=await ME(this),n=this.overrideName||("this"in this.callFrame?await eae(this._thread,this.callFrame,r===0):tae(this.callFrame));return{isSmartStepped:r,name:n,uiLocation:await e}});this.completions=Ae(async()=>{if(!this._scope)return[];let e=this._thread.pausedVariables();if(!e)return[];let r=[];for(let i=0;i<this._scope.chain.length;i++){let o=this._scopeVariable(i,this._scope);o&&r.push(e.getVariableNames({variablesReference:o.id}).then(s=>s.map(a=>({label:a,type:"property"}))))}let n=await Promise.all(r);return[].concat(...n)});this._rawLocation=n,this.uiLocation=Ae(()=>e.rawLocationToUiLocation(n)),this._thread=e;let o=n.scriptId?e.getScriptById(n.scriptId):void 0;this.isReplEval=o?o.url.endsWith(".repl"):!1}get rawPosition(){return new Ut(this._rawLocation.lineNumber,this._rawLocation.columnNumber)}static fromRuntime(e,r,n){return new jt(e,r,e.rawLocation(r),n)}static fromDebugger(e,r){let n=new jt(e,r,e.rawLocation(r));return n._scope={chain:r.scopeChain,thisObject:r.this,returnValue:r.returnValue,variables:new Array(r.scopeChain.length).fill(void 0),callFrameId:r.callFrameId},n}get scriptId(){return"scriptId"in this.callFrame?this.callFrame.scriptId:this.callFrame.location.scriptId}get scriptSource(){return this._thread._sourceContainer.getScriptById(this.scriptId)}get canExplicitlyBeRestarted(){return!!this.callFrame.canBeRestarted}equivalentTo(e){return e instanceof jt&&e._rawLocation.columnNumber===this._rawLocation.columnNumber&&e._rawLocation.lineNumber===this._rawLocation.lineNumber&&e._rawLocation.scriptId===this._rawLocation.scriptId}callFrameId(){return this._scope?this._scope.callFrameId:void 0}async scopes(){let e=this._scope;if(!e)throw new ee(s1());return{scopes:(await Promise.all(e.chain.map(async(n,i)=>{let o="",s;switch(n.type){case"global":o=fn.t("Global");break;case"local":o=fn.t("Local"),s="locals";break;case"with":o=fn.t("With Block"),s="locals";break;case"closure":o=fn.t("Closure"),s="arguments";break;case"catch":o=fn.t("Catch Block"),s="locals";break;case"block":o=fn.t("Block"),s="locals";break;case"script":o=fn.t("Script");break;case"eval":o=fn.t("Eval");break;case"module":o=fn.t("Module");break;default:o=n.type.substr(0,1).toUpperCase()+n.type.substr(1);break}n.name&&n.type==="closure"?o=fn.t("Closure ({0})",n.name):n.name&&(o=`${o}: ${n.name}`);let a=this._scopeVariable(i,e);if(!a)return;let u={name:o,presentationHint:s,expensive:n.type==="global",variablesReference:a.id};if(n.startLocation){let c=this._thread.rawLocation(n.startLocation),l=await this._thread.rawLocationToUiLocation(c);if(u.line=(l||c).lineNumber,u.column=(l||c).columnNumber,l&&(u.source=await l.source.toDap()),n.endLocation){let p=this._thread.rawLocation(n.endLocation),f=await this._thread.rawLocationToUiLocation(p);u.endLine=(f||p).lineNumber,u.endColumn=(f||p).columnNumber}}return u}))).filter(Ct)}}getStepSkipList(e){return Promise.resolve(void 0)}async toDap(e){let{isSmartStepped:r,name:n,uiLocation:i}=await this.getLocationInfo(),o=i?await i.source.toDap():void 0,s=r?"deemphasize":"normal";r&&o&&(o.origin=r===1?fn.t("Skipped by smartStep"):fn.t("Skipped by skipFiles"));let a=(i||this._rawLocation).lineNumber,u=(i||this._rawLocation).columnNumber,c=n;return o&&e&&(e.module&&(c+=` [${o.name}]`),e.line&&(c+=` Line ${a}`)),{id:this.frameId,name:c,line:a,column:u,source:o,presentationHint:s,canRestart:this.callFrame.canBeRestarted??!this.isAsync}}async formatAsNative(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.existingAbsolutePath()||await r?.source.prettyName()||this.callFrame.url,{lineNumber:i,columnNumber:o}=r||this._rawLocation;return`    at ${e} (${n}:${i}:${o})`}async format(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.prettyName()||"<unknown>",i=r||this._rawLocation,o=`${e} @ ${n}:${i.lineNumber}`;return i.columnNumber>1&&(o+=`:${i.columnNumber}`),o}_scopeVariable(e,r){let n=r.variables[e];if(n)return n;let i={stackFrame:this,callFrameId:r.callFrameId,scopeNumber:e},o=[];e===0&&(r.thisObject&&o.push({name:"this",value:r.thisObject}),r.returnValue&&o.push({name:fn.t("Return value"),value:r.returnValue}));let s=this._thread.pausedVariables();if(!s)return;let a=s.createScope(r.chain[e].object,i,o);return r.variables[e]=a}},ZE={scopes:[]},lm=class{constructor(e){this.frameId=eD();this.name=e.name,this.root=e.root,this.thread=e.thread,this.source=e.source,this.inlineFrameIndex=e.inlineFrameIndex,this.wasmPosition=new vt(this.inlineFrameIndex,this.root.rawPosition.base0.columnNumber),this.uiLocation=Ae(()=>e.thread._sourceContainer.preferredUiLocation({columnNumber:e.root.rawPosition.base1.columnNumber,lineNumber:e.inlineFrameIndex+1,source:e.source}))}async formatAsNative(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return`    at ${this.name} (${n.url}:${r}:${e})`}async format(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation(),i=await n.prettyName()||"<unknown>";return`${this.name} @ ${i}:${r}:${e}`}async toDap(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return Promise.resolve({id:this.frameId,name:this.name,column:e,line:r,source:await n.toDapShallow()})}async getStepSkipList(e){let r=this.source.sourceMap.value.settledValue;if(!r?.getStepSkipList)return;let n=await this.uiLocation();return n?r.getStepSkipList(e,this.wasmPosition,n.source.compiledToSourceUrl.get(this.source),new Ut(n.lineNumber,n.columnNumber)):r.getStepSkipList(e,this.root.rawPosition)}async scopes(){let e=this.source.sourceMap.value.settledValue,r=this.root.callFrameId();if(!e||!r)return ZE;let n=await e.getVariablesInScope?.(r,this.wasmPosition);if(!n)return ZE;let i=this.thread.pausedVariables();if(!i)return ZE;let o={stackFrame:this.root,callFrameId:r,scopeNumber:0};return{scopes:await Promise.all([...k1(n,s=>s.scope)].map(([s,a])=>i.createWasmScope(s,a,o).toDap("propertyValue").then(u=>({name:u.name,variablesReference:u.variablesReference,expensive:s!=="LOCAL"}))))}}};var _U=A(_e());var oc=class{constructor(e){this.event=e;this.stackTrace=Ae(e=>this.event.stackTrace?ei.fromRuntime(e,this.event.stackTrace):void 0);this.getUiLocation=Ae(async e=>{let r=this.stackTrace(e);if(!r)return;let n;for(let i of r.frames){if(!(i instanceof jt))continue;let o=await i.uiLocation();if(o&&(n||(n=o),!o.source.blackboxed()))return{source:await o.source.toDap(),line:o.lineNumber,column:o.columnNumber}}if(n)return{source:await n.source.toDap(),line:n.lineNumber,column:n.columnNumber}})}formatDefaultString(e,r,n=!1){let o=r.length>1&&r[0].type==="string"?PE(r[0].value,r.slice(1),$E):PE("",r,$E),s=o.result+`
`;return o.usedAllSubs&&!r.some(ec)?{output:s}:this.formatComplexStringOutput(e,s,r,n)}async formatComplexStringOutput(e,r,n,i){(n.some(s=>s.subtype==="error")||va.isStackLike(r))&&(await this.getUiLocation(e),r=await e.replacePathsInStackTrace(r),i=!0);let o=e.replVariables.createVariableForOutput(r,n,i?this.stackTrace(e):void 0);return{output:r,variablesReference:o.id}}},nv=class extends oc{async toDap(e){return this.event.args[0]?.value==="console.assert"&&(this.event.args[0].value=_U.t("Assertion failed")),{category:"stderr",...await this.formatDefaultString(e,this.event.args,!0),...await this.getUiLocation(e)}}},sc=class extends oc{constructor(r,n,i){super(r);this.includeStack=n;this.category=i}async toDap(r){return{category:this.category,...await this.formatDefaultString(r,this.event.args,this.includeStack),...await this.getUiLocation(r)}}},Sa=class extends sc{constructor(e){super(e,!1,"stdout")}},iv=class extends sc{constructor(e){super(e,!0,"stdout")}},ov=class extends sc{constructor(e){super(e,!0,"stderr")}},sv=class extends sc{constructor(e){super(e,!0,"stderr")}},av=class extends oc{async toDap(e){return{category:"stdout",group:this.event.type==="startGroupCollapsed"?"startCollapsed":"start",...await this.formatDefaultString(e,this.event.args),...await this.getUiLocation(e)}}},uv=class extends sc{constructor(e){super(e,!1,"stdout")}async toDap(e){return this.event.args[0]?.preview?{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput("",this.event.args,void 0,this.event.type).id,...await this.getUiLocation(e)}:super.toDap(e)}};var cm=class extends oc{constructor(){super(...arguments);this.stackTrace=Ae(r=>{if(this.event.stackTrace)return ei.fromRuntime(r,this.event.stackTrace);if(this.event.scriptId)return ei.fromRuntime(r,{callFrames:[{functionName:"(program)",lineNumber:this.event.lineNumber,columnNumber:this.event.columnNumber,scriptId:this.event.scriptId,url:this.event.url||""}]})})}async toDap(r){let n=this.event.exception?rc(this.event.exception):{title:""},i=n.title;i.startsWith("Uncaught")||(i=`Uncaught ${this.event.exception?.className??"Error"} `+i);let o=this.stackTrace(r),s=this.event.exception&&!n.stackTrace?[this.event.exception]:[];return va.isStackLike(i)?i=await r.replacePathsInStackTrace(i):o&&(i+=`
`+await o.formatAsNative()),{category:"stderr",output:i,variablesReference:o||s.length?r.replVariables.createVariableForOutput(i,s,o).id:void 0,...await this.getUiLocation(r)}}};var cv=Symbol("IConsole");var fm=A(J());var AU=A(J());var Ea=Symbol("IShutdownParticipants"),wp=class{constructor(){this.participants=[]}register(e,r){if(this.shutdownStage!==void 0&&this.shutdownStage>=e)return r(),Yl;for(;this.participants.length<=e;)this.participants.push(new Set);return this.participants[e].add(r),{dispose:()=>this.participants[e].delete(r)}}async shutdown(){for(this.shutdownStage=0;this.shutdownStage<this.participants.length;this.shutdownStage++)await Promise.all([...this.participants[this.shutdownStage]].map(e=>e()))}};wp=T([(0,AU.injectable)()],wp);var pm=class{toDap(){return{category:"console",output:"\x1B[2J"}}},lv=class{toDap(){return{category:"stdout",output:"",group:"end"}}};var pv=class{constructor(e){this.sink=e;this.q=[];this.disposed=!1;this.onDrainedEmitter=new z;this.onDrained=this.onDrainedEmitter.event}get length(){return this.q.length}enqueue(e){this.disposed||(this.q.push(new tD(e)),this.q.length===1&&this.process())}dispose(){this.disposed=!0,this.q=[]}async process(){let e=this.q.findIndex(r=>r.value===SU);e===0?await this.q[0].wait:e===-1?(this.sink(IU(this.q)),this.q=[]):(this.sink(IU(this.q.slice(0,e))),this.q=this.q.slice(e)),this.q.length?this.process():this.onDrainedEmitter.fire()}},IU=t=>t.map(e=>e.value).filter(e=>e!==EU),SU=Symbol("unsettled"),EU=Symbol("unsettled"),tD=class{constructor(e){this.value=SU;e instanceof Promise?this.wait=e.then(r=>{this.value=r},()=>{this.value=EU}):(this.value=e,this.wait=Promise.resolve())}};var nae=new Set(["group","assert","count"]),_p=class{constructor(e,r){this.dap=e;this.isDirty=!1;this.queue=new pv(e=>{for(let r of e)this.dap.output(r)});this.onDrained=this.queue.onDrained;r.register(0,async()=>{this.length&&await new Promise(n=>this.onDrained(n)),this.dispose()})}get length(){return this.queue.length}dispose(){this.queue.dispose()}dispatch(e,r){let n=this.parse(r);n&&this.enqueue(e,n)}enqueue(e,r){if(!(r instanceof pm))this.isDirty=!0;else if(this.isDirty)this.isDirty=!1;else return;this.queue.enqueue(r.toDap(e))}parse(e){if(e.type==="log"){let r=e.stackTrace?.callFrames[0];if(r&&r.url==="internal/console/constructor.js"&&nae.has(r.functionName))return}switch(e.type){case"clear":return new pm;case"endGroup":return new lv;case"assert":return new nv(e);case"table":return new uv(e);case"startGroup":case"startGroupCollapsed":return new av(e);case"debug":case"log":case"info":return new Sa(e);case"trace":return new iv(e);case"error":return new sv(e);case"warning":return new ov(e);case"dir":case"dirxml":return new Sa(e);case"count":return new Sa(e);case"profile":case"profileEnd":return new Sa(e);case"timeEnd":return new Sa(e);default:try{iH(e.type,"unknown console message type")}catch{}}}};_p=T([(0,fm.injectable)(),v(0,(0,fm.inject)(on)),v(1,(0,fm.inject)(Ea))],_p);var ac=A(J()),PU=require("os"),xU=require("path");var rD=require("path"),DU=(0,rD.join)(__dirname,"diagnosticTool.js"),CU=(0,rD.join)(__dirname,"diagnosticTool.css");var Po=Symbol("ITarget"),Hr=Symbol("ILauncher");var Da=class{constructor(e,r,n,i){this.fs=e;this.sources=r;this.breakpoints=n;this.target=i}async generateObject(){let[e]=await Promise.all([this.dumpSources()]);return{breakpoints:this.dumpBreakpoints(),sources:e,config:this.target.launchConfig}}async generateHtml(e=(0,xU.join)((0,PU.tmpdir)(),"js-debug-diagnostics.html")){return await this.fs.writeFile(e,`<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>${await this.fs.readFile(CU,"utf-8")}<</style>
      </head>
      <body>
        <script>window.DUMP=${JSON.stringify(await this.generateObject())}</script>
        <script>${await this.fs.readFile(DU,"utf-8")}</script>
      </body>
      </html>`),e}dumpBreakpoints(){let e=[];for(let r of[this.breakpoints.appliedByPath,this.breakpoints.appliedByRef])for(let n of r.values())for(let i of n){let o=i.diagnosticDump();e.push({source:o.source,params:o.params,cdp:o.cdp.map(s=>s.state===1?{...s,uiLocations:s.uiLocations.map(a=>this.dumpUiLocation(a))}:{...s,done:void 0})})}return e}dumpSources(){let e=[],r=0;for(let n of this.sources.sources)e.push((async()=>({uniqueId:r++,url:n.url,sourceReference:n.sourceReference,absolutePath:n.absolutePath,actualAbsolutePath:await n.existingAbsolutePath(),scriptIds:n.scripts.map(i=>i.scriptId),prettyName:await n.prettyName(),compiledSourceRefToUrl:n instanceof $t?[...n.compiledToSourceUrl.entries()].map(([i,o])=>[i.sourceReference,o]):void 0,sourceMap:ca(n)?{url:n.sourceMap.metadata.sourceMapUrl,metadata:n.sourceMap.metadata,sources:Xo(Object.fromEntries(n.sourceMap.sourceByUrl),i=>i.sourceReference)}:void 0}))());return Promise.all(e)}dumpUiLocation(e){return{lineNumber:e.lineNumber,columnNumber:e.columnNumber,sourceReference:e.source.sourceReference}}};Da=T([(0,ac.injectable)(),v(0,(0,ac.inject)(we)),v(1,(0,ac.inject)(or)),v(2,(0,ac.inject)(Zn)),v(3,(0,ac.inject)(Po))],Da);var Ca=A(J());var Ip=Symbol("IExceptionPauseService");var Ap=class{constructor(e,r,n,i,o){this.evaluator=e;this.scriptSkipper=r;this.dap=n;this.sourceContainer=o;this.state={cdp:"none"};this.blocker=Ue();this.noDebug=!!i.noDebug,this.breakOnError=i.__breakOnConditionalError,this.blocker.resolve()}get launchBlocker(){return this.blocker.promise}async setBreakpoints(e){if(!this.noDebug){try{this.state=this.parseBreakpointRequest(e)}catch(r){if(!(r instanceof ee))throw r;this.dap.output({category:"stderr",output:r.message});return}this.cdp?await this.sendToCdp(this.cdp):this.state.cdp!=="none"&&this.blocker.hasSettled()&&(this.blocker=Ue())}}async shouldPauseAt(e){if(e.reason!=="exception"&&e.reason!=="promiseRejection"||this.state.cdp==="none"||this.shouldScriptSkip(e))return!1;let r=this.state.condition;if(e.data?.uncaught){if(r.uncaught&&!await this.evalCondition(e,r.uncaught))return!1}else if(r.caught&&!await this.evalCondition(e,r.caught))return!1;return!0}async apply(e){this.cdp=e,this.state.cdp!=="none"&&await this.sendToCdp(e)}async sendToCdp(e){await e.Debugger.setPauseOnExceptions({state:this.state.cdp}),this.blocker.resolve()}async evalCondition(e,r){return!!(await r({callFrameId:e.callFrames[0].callFrameId},{error:e.data}))?.result.value}shouldScriptSkip(e){if(e.data?.uncaught||!e.callFrames.length)return!1;let r=this.sourceContainer.getScriptById(e.callFrames[0].location.scriptId);return!!r&&this.scriptSkipper.isScriptSkipped(r.url)}parseBreakpointRequest(e){let r=(e.filterOptions??[]).concat(e.filters.map(a=>({filterId:a}))),n="none",i=[],o=[];for(let{filterId:a,condition:u}of r)a==="all"?(n="all",u&&i.push(a)):a==="uncaught"&&(n==="none"&&(n="uncaught"),u&&o.push(a));let s=a=>{if(a.length===0)return;let u="!!("+r.map(p=>p.condition).filter(Ct).join(") || !!(")+")",c=ra(u);if(c)throw new ee(ea({line:0,condition:u},c.message));let l=this.breakOnError?CS(u):u;return this.evaluator.prepare(l,{hoist:["error"]}).invoke};return n==="none"?{cdp:n}:{cdp:n,condition:{caught:s(i),uncaught:s(o)}}}};Ap=T([(0,Ca.injectable)(),v(0,(0,Ca.inject)(Kn)),v(1,(0,Ca.inject)(ha)),v(2,(0,Ca.inject)(on)),v(3,(0,Ca.inject)(Me)),v(4,(0,Ca.inject)(or))],Ap);var hv=A(J());var fv=class{constructor(){this.didEnable=new WeakSet}async retrieve(e){this.didEnable.has(e)||(this.didEnable.add(e),await e.Performance.enable({}));let r=await e.Performance.getMetrics({});if(!r)return{error:"Error in CDP"};let n={};for(let i of r.metrics)n[i.name]=i.value;return{metrics:n}}};var dv=class{async retrieve(e){let r=await e.Runtime.evaluate({expression:`({
        memory: process.memoryUsage(),
        cpu: process.cpuUsage(),
        timestamp: Date.now(),
        resourceUsage: process.resourceUsage && process.resourceUsage(),
      })${ht()}`,returnByValue:!0});return r?r.exceptionDetails?{error:r.exceptionDetails.text}:{metrics:r.result.value}:{error:"No response from CDP"}}};var mv=Symbol("IPerformanceProvider"),uc=class{constructor(e){this.target=e}create(){return this.target.type()==="node"?new dv:new fv}};uc=T([(0,hv.injectable)(),v(0,(0,hv.inject)(Po))],uc);var uD=A(_e()),$U=require("crypto"),Pa=A(J()),RU=require("os"),MU=require("path");var yv=A(J());var nD=A(_e()),cc=A(J()),gv=require("path");var Sp=class{constructor(e){this.sources=e;this.locationIdCounter=0;this.locationsByRef=new Map}getLocationIdFor(e){let r=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),n=this.locationsByRef.get(r);if(n)return n.id;let i=this.locationIdCounter++;return this.locationsByRef.set(r,{id:i,callFrame:e,locations:(async()=>{let o=await this.sources.getScriptById(e.scriptId)?.source;if(!o)return[];let s=await this.sources.currentSiblingUiLocations({lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:o});return Promise.all(s.map(async a=>({...a,source:await a.source.toDapShallow()})))})()}),i}getLocations(){return Promise.all([...this.locationsByRef.values()].sort((e,r)=>e.id-r.id).map(async e=>({callFrame:e.callFrame,locations:await e.locations})))}};var lr=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(!await this.cdp.Profiler.start({}))throw new ee(Sl());return new iD(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}async save(e,r){let n=await LU(e,this.sources,this.launchConfig.__workspaceFolder);(0,gv.isAbsolute)(r)||(r=(0,gv.join)(this.launchConfig.__workspaceFolder,r)),await this.fs.writeFile(r,JSON.stringify(n))}};lr.type="cpu",lr.extension=".cpuprofile",lr.label=nD.t("CPU Profile"),lr.description=nD.t("Generates a .cpuprofile file you can open in the Chrome devtools"),lr.editable=!0,lr=T([(0,cc.injectable)(),v(0,(0,cc.inject)(mt)),v(1,(0,cc.inject)(we)),v(2,(0,cc.inject)(or)),v(3,(0,cc.inject)(Me))],lr);var iD=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new z;this.disposed=!1;this.onUpdate=new z().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,this.stopEmitter.fire())}async stop(){let e=await this.cdp.Profiler.stop({});if(!e)throw new ee(Sl());await this.dispose();let r=await LU(e.profile,this.sources,this.workspaceFolder);await this.fs.writeFile(this.file,JSON.stringify(r))}};async function LU(t,e,r){let n=new Sp(e),i=t.nodes.map(o=>({...o,locationId:n.getLocationIdFor(o.callFrame),positionTicks:o.positionTicks?.map(s=>({...s,startLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line-1,columnNumber:0}),endLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line,columnNumber:0})}))}));return{...t,nodes:i,$vscode:{rootPath:r,locations:await n.getLocations()}}}var oD=A(_e()),lc=A(J());var Ln=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(await this.cdp.HeapProfiler.enable({}),!await this.cdp.HeapProfiler.startSampling({}))throw new ee(Sl());return new sD(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}};Ln.type="heap",Ln.extension=".heapprofile",Ln.label=oD.t("Heap Profile"),Ln.description=oD.t("Generates a .heapprofile file you can open in the Chrome devtools"),Ln.editable=!0,Ln=T([(0,lc.injectable)(),v(0,(0,lc.inject)(mt)),v(1,(0,lc.inject)(we)),v(2,(0,lc.inject)(or)),v(3,(0,lc.inject)(Me))],Ln);var sD=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new z;this.disposed=!1;this.onUpdate=new z().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,await this.cdp.HeapProfiler.disable({}),this.stopEmitter.fire())}async stop(){let e=await this.cdp.HeapProfiler.stopSampling({});if(!e)throw new ee(Sl());await this.dispose();let r=await this.annotateSources(e.profile);await this.fs.writeFile(this.file,JSON.stringify(r))}async annotateSources(e){let r=new Sp(this.sources),n=(o,s)=>{s.locationId=r.getLocationIdFor(o.callFrame);for(let a of o.children){let u={...a,children:[]};s.children.push(u),n(a,u)}},i={...e.head,children:[]};return n(e.head,i),{...e,head:i,$vscode:{rootPath:this.workspaceFolder,locations:await r.getLocations()}}}};var aD=A(_e()),TU=require("fs"),Hv=A(J());var Tn=class{constructor(e){this.cdp=e;this.cdp.HeapProfiler.on("addHeapSnapshotChunk",({chunk:r})=>this.currentWriter?.stream.write(r))}static canApplyTo(){return!0}async start(e,r){return{onStop:new z().event,onUpdate:new z().event,dispose:()=>{},stop:async()=>{await this.cdp.HeapProfiler.enable({}),await this.dumpToFile(r),await this.cdp.HeapProfiler.disable({})}}}async dumpToFile(e){let{stream:r,promise:n}=this.currentWriter={stream:(0,TU.createWriteStream)(e),promise:this.cdp.HeapProfiler.takeHeapSnapshot({})};await n,r.end(),this.currentWriter=void 0}};Tn.type="memory",Tn.extension=".heapsnapshot",Tn.label=aD.t("Heap Snapshot"),Tn.description=aD.t("Generates a .heapsnapshot file you can open in the Chrome devtools"),Tn.instant=!0,Tn=T([(0,Hv.injectable)(),v(0,(0,Hv.inject)(mt))],Tn);var bv=Symbol("IProfilerFactory"),vv=()=>{let t=new Date;return["vscode-profile",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].map(e=>String(e).padStart(2,"0")).join("-")},dn=class{constructor(e){this.container=e}get(e){let r=dn.ctors.find(n=>n.type===e);if(!r)throw new Error(`Invalid profilter type ${e}`);return this.container.get(r)}};dn.ctors=[lr,Ln,Tn],dn=T([(0,yv.injectable)(),v(0,(0,yv.inject)(rp))],dn);var wv=Symbol("IProfileController"),Ep=class{constructor(e,r,n,i,o){this.cdp=e;this.factory=r;this.basicCpuProfiler=n;this.breakpoints=i;this.shutdown=o;this.seenConsoleProfileNames=Object.create(null)}connect(e,r){e.on("startProfile",async n=>(await this.start(e,r,n),{})),e.on("stopProfile",()=>this.stopProfiling(e)),this.cdp.Profiler.on("consoleProfileStarted",()=>{e.output({output:uD.t("Console profile started")+`
`,category:"console"})}),this.cdp.Profiler.on("consoleProfileFinished",async n=>{let i=this.saveConsoleProfile(e,n),o=this.shutdown.register(0,()=>i);await i,o.dispose()}),r.onPaused(()=>this.stopProfiling(e))}async start(e,r,n){if(this.profile)throw new ee(n1());this.profile=this.startProfileInner(e,r,n).catch(i=>{throw this.profile=void 0,i}),await this.profile}async saveConsoleProfile(e,r){let n;if(r.title){n=r.title?.replace(/[\/\\]/g,"-");let i=this.seenConsoleProfileNames[r.title]||0;this.seenConsoleProfileNames[r.title]=i+1,i>0&&(n+=`-${i}`)}else n=vv();n+=lr.extension,await this.basicCpuProfiler.save(r.profile,n),e.output({output:uD.t('CPU profile saved as "{0}" in your workspace folder',n)+`
`,category:"console"})}async startProfileInner(e,r,n){let i=!1,o;if(n.stopAtBreakpoint?.length){let l=new Set(n.stopAtBreakpoint);i=!0,o=p=>!(p instanceof Xn)||l.has(p.dapId)}else o=()=>!1;await this.breakpoints.applyEnabledFilter(o);let s=(0,MU.join)((0,RU.tmpdir)(),`vscode-js-profile-${(0,$U.randomBytes)(4).toString("hex")}`),a=await this.factory.get(n.type).start(n,s),u={file:s,profile:a,enableFilter:o,keptDebuggerOn:i};a.onUpdate(l=>e.profilerStateUpdate({label:l,running:!0})),a.onStop(()=>this.disposeProfile(u));let c=!!r.pausedDetails();return i?await r.resume():c&&(await this.cdp.Debugger.disable({}),c&&r.onResumed()),e.profileStarted({file:u.file,type:n.type}),u}async stopProfiling(e){let r=await this.profile?.catch(()=>{});return!r||!this.profile?{}:(this.profile=void 0,await r?.profile.stop(),e.profilerStateUpdate({label:"",running:!1}),{})}async disposeProfile({profile:e,enableFilter:r,keptDebuggerOn:n}){n||await this.cdp.Debugger.enable({}),await this.breakpoints.applyEnabledFilter(void 0,r),e.dispose()}};Ep=T([(0,Pa.injectable)(),v(0,(0,Pa.inject)(mt)),v(1,(0,Pa.inject)(bv)),v(2,(0,Pa.inject)(lr)),v(3,(0,Pa.inject)(Zn)),v(4,(0,Pa.inject)(Ea))],Ep);var ii=A(J());var sj=A(OU()),aj=require("dns"),Jv=A(oj()),dc=A(J());var Bp=Symbol("IRequestOptionsProvider");var Ra=class{constructor(e,r){this.fs=e;this.options=r;this.autoLocalhostPortFallbacks={}}async fetch(e,r=ar,n){try{let o=(0,sj.default)(e);return{ok:!0,url:e,body:o.toString("utf-8"),statusCode:200}}catch{}let i=kr(e)?e:bt(e);if(i)try{return{ok:!0,url:e,body:await this.fs.readFile(i,"utf-8"),statusCode:200}}catch(o){return{ok:!1,url:e,error:o,statusCode:200}}return this.fetchHttp(e,r,n)}async fetchJson(e,r,n){let i=await this.fetch(e,r,{Accept:"application/json",...n});if(!i.ok)return i;try{return{...i,body:JSON.parse(i.body)}}catch(o){return{...i,ok:!1,url:e,error:o}}}async fetchHttp(e,r,n){let i=new URL(e),o=i.protocol!=="http:",s=Number(i.port)??(o?443:80),a={headers:n,followRedirect:!0};o&&await Rl(e)&&(a.rejectUnauthorized=!1),this.options?.provideOptions(a,e);let u=i.hostname==="localhost";if(u&&this.autoLocalhostPortFallbacks[s]){let p=await this.requestHttp(i.toString(),a,r);return p.statusCode!==503?p:(delete this.autoLocalhostPortFallbacks[s],this.requestHttp(e,a,r))}let l=await this.requestHttp(e,a,r);if(l.statusCode===503&&u){let p;try{p=await aj.promises.lookup(i.hostname)}catch{return l}i.hostname=p.family===6?"127.0.0.1":"[::1]",l=await this.requestHttp(i.toString(),a,r),l.statusCode!==503&&(this.autoLocalhostPortFallbacks[s]=i.hostname)}return l}async requestHttp(e,r,n){this.options?.provideOptions(r,e);let i=new Se;try{let o=(0,Jv.default)(e,r);i.push(n.onCancellationRequested(()=>o.cancel()));let s=await o;return{ok:!0,url:e,body:s.body,statusCode:s.statusCode}}catch(o){if(!(o instanceof Jv.RequestError))throw o;let s=o.response?String(o.response?.body):o.message,a=o.response?.statusCode??503;return{ok:!1,body:s,statusCode:a,url:e,error:new Sy(a,e,s)}}finally{i.dispose()}}};Ra=T([(0,dc.injectable)(),v(0,(0,dc.inject)(we)),v(1,(0,dc.optional)()),v(1,(0,dc.inject)(Bp))],Ra);var hc=class extends Ra{constructor(r,n,i,o,s){super(r,s);this.logger=n;this.target=i;this.cdp=o;this.disposables=new Se}dispose(){this.disposables.dispose()}async fetchHttp(r,n,i={}){let o=await super.fetchHttp(r,n,i);return o.ok?o:(this.logger.info("runtime","Network load failed, falling back to CDP",{url:r,res:o}),this.fetchOverBrowserNetwork(r,o))}async fetchOverBrowserNetwork(r,n){if(!this.cdp)return n;let i=await this.cdp.Network.loadNetworkResource({frameId:this.target?.targetInfo.targetId,url:r,options:{includeCredentials:!0,disableCache:!0}});if(!i||!i.resource.success||!i.resource.httpStatusCode||i.resource.httpStatusCode>=400||!i.resource.stream)return n;let o=Number(i.resource.headers?.["Content-Length"]);isNaN(o)&&(o=1/0);let s=[],a=0;for(;;){let u=await this.cdp.IO.read({handle:i.resource.stream,offset:a});if(!u)return this.logger.info("runtime","Stream error encountered in middle, falling back",{url:r}),n;let c=u.base64Encoded?Buffer.from(u.data,"base64").toString():u.data;if(a+=Buffer.byteLength(c,"utf-8"),s.push(c),a>=o){this.cdp.IO.close({handle:i.resource.stream});break}if(u.eof)break}return{ok:!0,body:s.join(""),statusCode:i.resource.httpStatusCode,url:r}}};hc=T([(0,ii.injectable)(),v(0,(0,ii.inject)(we)),v(1,(0,ii.inject)(ce)),v(2,(0,ii.optional)()),v(2,(0,ii.inject)(Po)),v(3,(0,ii.optional)()),v(3,(0,ii.inject)(mt)),v(4,(0,ii.optional)()),v(4,(0,ii.inject)(Bp))],hc);var ka=A(J()),lj=A(Rh());var Ma="node:";function cj(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];if(n.startsWith("!")){let i=uj(n.slice(1));for(let o=0;o<e.length;o++)e[o]=`^(?!${i.slice(1)})${e[o].slice(1)}`}else e.push(uj(n))}return e.map(r=>new RegExp(r,"i"))}function uj(t){let e=t.split("/"),r=[];for(let n=0;n<e.length;n++){let i=e[n];if(i==="**")n===0?r.push("(.+/)?"):n===e.length-1||r.push(".*/");else{if(i.includes("*")){let o=i.split("*");r.push(o.map(s=>Gr(s)).join("[^\\/]*"))}else r.push(Gr(i));r.push(n<e.length-1?"\\/":"$")}}return`^${r.join("")}`}function ale(t){let e=/^<node_internals>[\/\\](.*)$/,r=t.map(n=>{n=n.trim();let i=e.exec(n);return i?i[1]:null}).filter(Ct);return r.length>0?r:void 0}function ule(t,e){return e.filter(n=>!n.includes("<node_internals>")).map(n=>kr(n)?Ml(t.rebaseLocalToRemote(n)):ze(n)).map(Uy)}var Lo=class{constructor({skipFiles:e},r,n,i,o){this.logger=n;this.cdp=i;this._regexForAuthored=qT(cj);this._scriptsWithSkipping=new Set;this._targetId=o.id(),this._rootTargetId=pj(o).id(),this._isUrlFromSourceMapSkipped=new fo(s=>this._normalizeUrl(s)),this._authoredGlobs=ule(r,e),this._nodeInternalsGlobs=ale(e),this._initNodeInternals(o),this._updateSkippedDebounce=VT(500,()=>this._updateGeneratedSkippedSources()),e.length&&this._updateGeneratedSkippedSources(),Lo.sharedSkipsEmitter.event(s=>{s.rootTargetId===this._rootTargetId&&s.targetId!==this._targetId&&this._toggleSkippingFile(s.params)})}setSourceContainer(e){this._sourceContainer=e}_testSkipNodeInternal(e){return this._nodeInternalsGlobs?(e.startsWith(Ma)&&(e=e.slice(Ma.length)),(0,lj.default)([e],this._nodeInternalsGlobs).length>0):!1}_testSkipAuthored(e){return this._regexForAuthored(this._authoredGlobs).some(r=>r.test(e))}_isNodeInternal(e,r){return e.startsWith(Ma)?!0:r?.has(e)||/^internal\/.+\.js$/.test(e)}async _updateGeneratedSkippedSources(){let e=this._regexForAuthored(this._authoredGlobs).map(n=>n.source),r=this._allNodeInternals?.settledValue;if(r){e.push(`^(${Ma})?internal\\/`);for(let n of r)this._testSkipNodeInternal(n)&&e.push(`^(${Ma})?${Gr(n)}$`)}await this.cdp.Debugger.setBlackboxPatterns({patterns:e})}_normalizeUrl(e){return ze(e.toLowerCase())}isScriptSkipped(e){return this._isNodeInternal(e,this._allNodeInternals?.settledValue)?this._testSkipNodeInternal(e):(e=this._normalizeUrl(e),this._isUrlFromSourceMapSkipped.get(e)===!0?!0:this._testSkipAuthored(e))}async _updateSourceWithSkippedSourceMappedSources(e,r){let n=this.isScriptSkipped(e.url),i=[],o=n;for(let a of e.sourceMap.sourceByUrl.values()){let u=this.isScriptSkipped(a.url);if(typeof u>"u"&&(u=n),u!==o){let c=await this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1,columnNumber:1},e);c[0]?(i.push({lineNumber:c[0].lineNumber-1,columnNumber:c[0].columnNumber-1}),o=!o):this.logger.error("internal","Could not map script beginning for "+a.sourceReference)}}let s=r;i.length||(s=s.filter(a=>this._scriptsWithSkipping.has(a.scriptId)),s.forEach(a=>this._scriptsWithSkipping.delete(a.scriptId))),await Promise.all(s.map(({scriptId:a})=>this.cdp.Debugger.setBlackboxedRanges({scriptId:a,positions:i})))}initializeSkippingValueForSource(e){this._initializeSkippingValueForSource(e)}_initializeSkippingValueForSource(e,r=e.scripts){let n=e.url,i=this.isScriptSkipped(n);if(!i&&e.absolutePath&&this._testSkipAuthored(Oe(e.absolutePath))&&(this.setIsUrlBlackboxSkipped(n,!0),i=!0,this._updateSkippedDebounce()),Kr(e)){if(i)for(let o of e.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(o.url,!0);for(let o of e.sourceMap.sourceByUrl.values())this._initializeSkippingValueForSource(o,r);this._updateSourceWithSkippedSourceMappedSources(e,r)}}async _initNodeInternals(e){if(e.type()!=="node"||!this._nodeInternalsGlobs||this._allNodeInternals)return;let r=this._allNodeInternals=Ue(),n=await this.cdp.Runtime.evaluate({expression:"require('module').builtinModules"+ht(),returnByValue:!0,includeCommandLineAPI:!0});n&&!n.exceptionDetails?r.resolve(new Set(n.result.value.map(i=>i+".js"))):r.resolve(new Set),await this._updateGeneratedSkippedSources()}async _toggleSkippingFile(e){let r;e.resource&&kr(e.resource)&&(r=e.resource);let n={path:r,sourceReference:e.sourceReference},i=this._sourceContainer.source(n);if(!i)return{};let o=!this.isScriptSkipped(i.url);if(i instanceof $t){this._isUrlFromSourceMapSkipped.set(i.url,o);let s=Array.from(i.compiledToSourceUrl.keys());await Promise.all(s.map(a=>this._updateSourceWithSkippedSourceMappedSources(a,a.scripts)))}else{if(Kr(i))for(let s of i.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(s.url,o);this.setIsUrlBlackboxSkipped(i.url,o),await this._updateGeneratedSkippedSources()}return{}}setIsUrlBlackboxSkipped(e,r){let n=e,i=`!${n}`,o=this._authoredGlobs.filter(s=>s!==n&&s!==i);this._regexForAuthored(o).some(s=>s.test(e))!==r&&(o.push(r?n:i),this._regexForAuthored.clear()),this._authoredGlobs=o}async toggleSkippingFile(e){let r=await this._toggleSkippingFile(e);return Lo.sharedSkipsEmitter.fire({params:e,rootTargetId:this._rootTargetId,targetId:this._targetId}),r}};Lo.sharedSkipsEmitter=new z,Lo=T([(0,ka.injectable)(),v(0,(0,ka.inject)(Me)),v(1,(0,ka.inject)(Ze)),v(2,(0,ka.inject)(ce)),v(3,(0,ka.inject)(mt)),v(4,(0,ka.inject)(Po))],Lo);function pj(t){let e=t.parent();return e?pj(e):t}var Am=A(J());var dj=require("path");var fj=/^webpack:\/{3}([^/]+?\.vue)(\?[0-9a-z]*)?$/i,cle=/^webpack:\/{3}\.\/.+\.vue\?[0-9a-z]+$/i,Up=Symbol("IVueFileMapper");var Np=class{constructor(e,r){this.files=e;this.search=r;this.getMapping=Ae(async()=>{let e=new Map;return await this.search.streamAllChildren(this.files,r=>e.set((0,dj.basename)(r),r)),e})}async lookup(e){let r=fj.exec(e);return r?(await this.getMapping()).get(r[1]):void 0}getVueHandling(e){return this.files.empty?0:fj.test(e)?1:cle.test(e)?2:0}};Np=T([(0,Am.injectable)(),v(0,(0,Am.inject)(ts)),v(1,(0,Am.inject)(Ol))],Np);var To=class{constructor(){this.changeEmitter=new z;this.addEmitter=new z;this.removeEmitter=new z;this.targetMap=new Map;this.onChanged=this.changeEmitter.event;this.onAdd=this.addEmitter.event;this.onRemove=this.removeEmitter.event}get size(){return this.targetMap.size}add(e,r){this.targetMap.set(e,r),this.addEmitter.fire([e,r]),this.changeEmitter.fire()}get(e){return this.targetMap.get(e)}remove(e){let r=this.targetMap.get(e);return r===void 0?!1:(this.targetMap.delete(e),this.removeEmitter.fire([e,r]),this.changeEmitter.fire(),!0)}value(){return this.targetMap.values()}};var Bq=A(kq()),iw=A(J());var Oq=require("child_process"),Hs=class extends Error{constructor(r,n,i,o,s){super(`${r} exited with code ${o||-1}: ${n}`);this.command=r;this.stderr=n;this.stdout=i;this.code=o;this.innerError=s}static fromExeca(r){return new Hs(r.command,r.stderr.toString(),r.stdout.toString(),r.exitCode)}};function nw(t,e,r){return new Promise((n,i)=>{let o=(0,Oq.spawn)(t,e,{...r,stdio:"pipe"}),s=[],a=[];o.stderr.on("data",c=>s.push(c)),o.stdout.on("data",c=>a.push(c));let u=(c,l)=>i(new Hs(t,Buffer.concat(s).toString(),Buffer.concat(a).toString(),c,l));o.on("error",c=>u(void 0,c)),o.on("close",c=>c?u(c):n({stdout:Buffer.concat(a).toString(),stderr:Buffer.concat(s).toString()}))})}var dpe=new Map([["chrome",0],["safari",1],["firefox",2],["msedge",3],["microsoft edge",3],["appxq0fevzme2pys62n3e0fbqa7peapykr8v",4],["ie.http",5]]),Fq=t=>{t=t.toLowerCase();for(let[e,r]of dpe.entries())if(t.includes(e))return r},Vp=Symbol("IDefaultBrowserProvider"),Wp=class{constructor(e,r=process.platform){this.execa=e;this.platform=r;this.lookup=Ae(()=>this.platform==="win32"?this.lookupWindows():this.lookupUnix())}async lookupUnix(){let{name:e}=await(0,Bq.default)();return Fq(e)}async lookupWindows(){let e=await this.execa("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]);if(e.failed)throw Hs.fromExeca(e);let r=/ProgId\s*REG_SZ\s*(\S+)/.exec(e.stdout);if(r)return Fq(r[1])}};Wp=T([(0,iw.injectable)(),v(0,(0,iw.inject)(kh))],Wp);var Uq=A(J()),sw=A(require("os"));var ow=class{async setup(){}dispose(){}write(e){if(e.level>2)throw new Error(e.message);console.log(JSON.stringify(e))}};var TC=class{constructor(e=512){this.size=e;this.items=[];this.i=0}write(e){this.items[this.i]=e,this.i=(this.i+1)%this.size}read(){return this.items.slice(this.i).concat(this.items.slice(0,this.i))}},oi=class{constructor(){this.logTarget={queue:[]};this.logBuffer=new TC}static async test(){let e=new oi;return e.setup({sinks:[new ow],showWelcome:!1}),e}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}log(e){if(this.logBuffer.write(e),"queue"in this.logTarget){this.logTarget.queue.push(e);return}for(let r of this.logTarget.sinks)r.write(e)}getRecentLogs(){return this.logBuffer.read()}dispose(){if("sinks"in this.logTarget){for(let e of this.logTarget.sinks)e.dispose();this.logTarget={queue:[]}}}forTarget(){return this}async setup(e){if(await Promise.all(e.sinks.map(n=>n.setup())),e.showWelcome!==!1){let n=hpe();for(let i of e.sinks)i.write(n)}let r=this.logTarget;this.logTarget={sinks:e.sinks.slice()},"sinks"in r?r.sinks.forEach(n=>n.dispose()):r.queue.forEach(n=>this.log(n))}};oi.null=(()=>{let e=new oi;return e.setup({sinks:[]}),e})(),oi=T([(0,Uq.injectable)()],oi);var hpe=()=>({timestamp:Date.now(),tag:"runtime.welcome",level:1,message:`${fH} v${Iu} started`,metadata:{os:`${sw.platform()} ${sw.arch()}`,nodeVersion:process.version,adapterVersion:Iu}});var Rm=Symbol("MutableLaunchConfig"),jq=t=>{let e=new z;return new Proxy({},{ownKeys(){return Object.keys(t)},get(r,n){switch(n){case"update":return i=>{t=i,e.fire()};case"onChange":return e.event;default:return t[n]}}})};var m5=A(d5()),Qw=A(J());var Pc=Symbol("touched"),Xa;(u=>{function t(){return{children:{},[Pc]:1}}u.root=t;function e(c,l){return c[Pc]=1,a(c,s(l),0)}u.getPath=e;function r(c){c[Pc]=1}u.touch=r;function n(c){c[Pc]=2}u.touchAll=n;function i(c,l){let p=c.children[l]??={children:{}};return p[Pc]=1,p}u.getOrMakeChild=i;function o(c){if(c[Pc]){for(let[l,p]of Object.entries(c.children))switch(p[Pc]){case 1:o(p);break;case 2:break;default:delete c.children[l]}return c}}u.prune=o;function s(c){let l=c.split(/\/|\\/);return l[0]===""&&l.unshift(),l}function a(c,l,p){let f=i(c,l[p]);return p===l.length-1?f:a(f,l,p+1)}})(Xa||={});var Px=require("fs"),xx=A(Rh()),xc=require("path"),h5=A(Dx());var nye=/\//g,Yw=class{constructor(e){this.stat=Jo(e=>Px.promises.lstat(e));this.readdir=Jo(e=>Px.promises.readdir(e,{withFileTypes:!0}));this.alreadyProcessedFiles=new Set;this.fileEmitter=new z;this.onFile=this.fileEmitter.event;this.errorEmitter=new z;this.onError=this.errorEmitter.event;this.processor=e.fileProcessor,this.filter=e.filter,this.ignore=e.ignore.map(i=>xx.default.matcher((0,h5.default)(ze(i),{cwd:e.cwd})));let r=(0,xc.isAbsolute)(e.pattern)?(0,xc.relative)(e.cwd,e.pattern):e.pattern,n=xx.default.parse(ze(r),{ignore:e.ignore,cwd:e.cwd,expand:!0});this.done=Promise.all(n.map(i=>{let o=[];for(let c=1;c<i.tokens.length;){let l=c+1;for(;l<i.tokens.length&&i.tokens[l].type!=="slash";)l++;let p=i.tokens[c];p.type==="globstar"?o.push("**"):l===c+1&&p.type==="text"?o.push(p.value):o.push(new RegExp("^"+i.tokens.slice(c,l).map(f=>f.output||f.value).join("")+"$")),c=l+1}let s=o[0]==="**"?[0,1]:[0],a=Xa.getPath(e.cache,e.cwd),u={elements:o,seen:new Set};return Promise.all(s.map(c=>this.readSomething(u,c,e.cwd,[],a)))})).then(()=>{})}async readSomething(e,r,n,i,o){if(this.alreadyProcessedFiles.has(o))return;let s=`${r}:${n}`;if(e.seen.has(s))return;e.seen.add(s);let a;try{a=await this.stat(n)}catch(c){this.errorEmitter.fire({path:n,error:c});return}if(this.alreadyProcessedFiles.has(o))return;let u=o.data;if(u&&a.mtimeMs===u.mtime){if(u.type===0){let c=[],p=Object.entries(o.children).filter(([,f])=>f.data?.type!==0).map(([f])=>f);for(let[f,m]of Object.entries(o.children))c.push(m.data!==void 0?this.handleDirectoryEntry(e,r,n,{name:f,type:m.data.type},p,o):this.stat(n).then(h=>this.handleDirectoryEntry(e,r,n,{name:f,type:h.isFile()?1:0},p,o),()=>{}));await Promise.all(c)}else u.type===1&&(this.alreadyProcessedFiles.add(o),this.fileEmitter.fire(u.extracted));return}a.isDirectory()?await this.handleDir(e,r,a.mtimeMs,n,o):(this.alreadyProcessedFiles.add(o),await this.handleFile(a.mtimeMs,n,i,o))}applyFilterToFile(e,r,n){let i=n.children[e];if(this.alreadyProcessedFiles.has(i))return!1;if(!this.filter)return!0;let o=i.data?.type===1?i.data.extracted:void 0;return Xa.touch(i),this.filter(r,o)}handleDirectoryEntry(e,r,n,i,o,s){let a=n+"/"+i.name,u=this.getDirectoryReadDescends(e,r,n,i);if(u===void 0)return;let c=Xa.getOrMakeChild(s,i.name);if(!(i.type===1&&!this.applyFilterToFile(i.name,a,s)))return typeof u=="number"?this.readSomething(e,r+u,a,o,c):Promise.all(u.map(l=>this.readSomething(e,r+l,a,o,c)))}getDirectoryReadDescends(e,r,n,i){let o=n+"/"+i.name;if(this.ignore.some(u=>u(o)))return;let s=r===e.elements.length-1,a=e.elements[r];if(a==="**")return i.type===1?s?0:this.getDirectoryReadDescends(e,r+1,n,i):s?0:[0,1];if((a instanceof RegExp&&a.test(i.name)||a===i.name)&&(i.type===0?!s:s))return 1}async handleFile(e,r,n,i){let o=xc.sep==="/"?r:r.replace(nye,xc.sep),s;try{s=await this.processor(o,{siblings:n,mtime:e})}catch(a){this.errorEmitter.fire({path:o,error:a});return}i.data={type:1,mtime:e,extracted:s},this.fileEmitter.fire(s)}async handleDir(e,r,n,i,o){let s;try{s=await this.readdir(i)}catch(c){this.errorEmitter.fire({path:i,error:c});return}let a=[],u=s.filter(c=>c.isFile()).map(c=>c.name);for(let c of s){if(c.name.startsWith("."))continue;let l;if(c.isDirectory())l=0;else if(c.isFile())l=1;else continue;a.push(this.handleDirectoryEntry(e,r,i,{name:c.name,type:l},u,o))}await Promise.all(a),o.data={type:0,mtime:n}}};var cf=class{constructor(e){this.logger=e}async streamAllChildren(e,r){let n=[];return await this.globForFiles(e,o=>n.push(r(Lt(o.path)))),(await Promise.all(n)).filter(o=>o!==void 0)}async streamChildrenWithSourcemaps(e){let r=[],n=e.lastState||{},i={};return await Promise.all([...e.files.explode()].map(async s=>{let a=JSON.stringify(s),u=n[a]||Xa.root();await this._streamChildrenWithSourcemaps(u,e,r,s);let c=Xa.prune(u);c&&(i[a]=c)})),this.logger.info("sourcemap.parsing",`turboGlobStream search found ${r.length} files`),{values:(await Promise.all(r)).filter(Ct),state:i}}async _streamChildrenWithSourcemaps(e,r,n,i){let o=new Yw({pattern:i.pattern,ignore:i.negations,cwd:i.cwd,cache:e,filter:r.filter,fileProcessor:(s,a)=>K1(s,a).then(u=>u&&r.processMap(u))});o.onError(({path:s,error:a})=>{this.logger.warn("sourcemap.parsing","Error parsing source map",{error:a,path:s})}),o.onFile(s=>s&&n.push(r.onProcessedMap(s))),await o.done}async globForFiles(e,r){await Promise.all([...e.explode()].map(n=>new Promise((i,o)=>(0,m5.default)([n.pattern,"!**/*.asar/**"],{ignore:n.negations,matchBase:!0,cwd:n.cwd}).on("data",r).on("finish",i).on("error",o))))}};cf=T([(0,Qw.injectable)(),v(0,(0,Qw.inject)(ce))],cf);var c_=A(_e()),Za=A(J());var g5=require("url"),H5=A(require("path"));var Zw=class{constructor(){this._onFrameAddedEmitter=new z;this._onFrameRemovedEmitter=new z;this._onFrameNavigatedEmitter=new z;this.onFrameAdded=this._onFrameAddedEmitter.event;this.onFrameRemoved=this._onFrameRemovedEmitter.event;this.onFrameNavigated=this._onFrameNavigatedEmitter.event;this._frames=new Map}attached(e,r){e.Page.enable({}),e.Page.getResourceTree({}).then(n=>{this._processCachedResources(e,n?n.frameTree:void 0,r)})}mainFrame(){return this._mainFrame}_processCachedResources(e,r,n){r&&this._addFramesRecursively(e,r,r.frame.parentId,n),e.Page.on("frameAttached",i=>{this._frameAttached(e,n,i.frameId,i.parentFrameId)}),e.Page.on("frameNavigated",i=>{this._frameNavigated(e,n,i.frame)}),e.Page.on("frameDetached",i=>{this._frameDetached(e,n,i.frameId)})}_addFrame(e,r,n){let i=new Tx(this,e,r,n);return this._frames.set(i.id,i),i.isMainFrame()&&(this._mainFrame=i),this._onFrameAddedEmitter.fire(i),i}_frameAttached(e,r,n,i){let o=this._frames.get(n);return o||(o=this._addFrame(e,n,i)),o._ref(r),o}_frameNavigated(e,r,n){let i=this._frames.get(n.id);i||(i=this._frameAttached(e,r,n.id,n.parentId)),i._navigate(n,r),this._onFrameNavigatedEmitter.fire(i)}_frameDetached(e,r,n){let i=this._frames.get(n);i&&i._unref(r)}frameForId(e){return this._frames.get(e)}frames(){return Array.from(this._frames.values())}_addFramesRecursively(e,r,n,i){let o=r.frame,s=this._frames.get(o.id);s?(s._navigate(o,i),this._onFrameNavigatedEmitter.fire(s)):(s=this._addFrame(e,o.id,n),s._navigate(o,i));for(let a=0;r.childFrames&&a<r.childFrames.length;++a)this._addFramesRecursively(e,r.childFrames[a],s.id,i)}},Tx=class{constructor(e,r,n,i){this._targets=new Set;this.cdp=r,this.model=e,this._parentFrameId=i,this.id=n,this._url=""}_ref(e){this._targets.add(e)}_navigate(e,r){this._name=e.name,this._url=e.url,this._securityOrigin=e.securityOrigin,this._unreachableUrl=e.unreachableUrl||"",this._ref(r),this._unrefChildFrames(r)}name(){return this._name||""}url(){return this._url}securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}isMainFrame(){return!this._parentFrameId}parentFrame(){return this._parentFrameId?this.model.frameForId(this._parentFrameId):void 0}childFrames(){return this.model.frames().filter(e=>e._parentFrameId===this.id)}_unrefChildFrames(e){for(let r of this.childFrames())r._unref(e)}_unref(e){this._targets.delete(e),!this._targets.size&&(this._unrefChildFrames(e),this.model._frames.delete(this.id),this.model._onFrameRemovedEmitter.fire(this))}displayName(){return this._name?this._name:iye(this._url)||`<iframe ${this.id}>`}};function Lx(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function iye(t){let e;try{e=new g5.URL(t)}catch{return Lx(t,20)}if(e.protocol==="data")return Lx(t,20);if(e.protocol==="blob"||t==="about:blank")return t;let r=H5.basename(e.pathname);return r||(r=(e.host||"")+"/"),r==="/"&&(r=Lx(t,20)),r}var y5=require("url"),$x=class{constructor(e){this.versions=new Map;this.id=e.registrationId,this.scopeURL=e.scopeURL}},Rx=class{constructor(e,r){this.revisions=[];this.registration=e,this.id=r.versionId,this.scriptURL=r.scriptURL,this._targetId=r.targetId,this._status=r.status,this._runningStatus=r.runningStatus}addRevision(e){this._targetId&&e.targetId&&this._targetId!==e.targetId&&console.error(`${this._targetId} !== ${e.targetId}`),e.targetId&&(this._targetId=e.targetId),this._status=e.status,this._runningStatus=e.runningStatus,this.revisions.unshift(e)}status(){return this._status}runningStatus(){return this._runningStatus}targetId(){return this._targetId}label(){let e=new y5.URL(this.registration.scopeURL),r=e.pathname.substr(1);r.endsWith("/")&&(r=r.substring(0,r.length-1));let n=r||`${e.host}`,i=this._status==="activated"?"":` ${this._status}`,o=this._runningStatus==="running"?"":` ${this._runningStatus}`;return`${n} #${this.id}${i}${o}`}},Ja=class{constructor(e){this._registrations=new Map;this._versions=new Map;this._onDidChangeUpdater=new z;this.onDidChange=this._onDidChangeUpdater.event;this._targets=new Set;this._frameModel=e,Ja._instances.add(this)}dispose(){Ja._instances.delete(this)}attached(e){this._targets.add(e),!this._cdp&&(this._cdp=e,e.ServiceWorker.enable({}),e.ServiceWorker.on("workerRegistrationUpdated",r=>this._workerRegistrationsUpdated(r.registrations)),e.ServiceWorker.on("workerVersionUpdated",r=>this._workerVersionsUpdated(r.versions)),Ja._mode!=="normal"&&this.setMode(Ja._mode))}async detached(e){this._targets.delete(e)}version(e){return this._versions.get(e)}registrations(){let e=[],r=this._frameModel.frames().map(n=>n.url());for(let n of this._registrations.values())for(let i of r)if(i.startsWith(n.scopeURL)){e.push(n);break}return e}registration(e){return this._registrations.get(e)}_workerVersionsUpdated(e){for(let r of e){let n=this._registrations.get(r.registrationId);if(!n)continue;let i=n.versions.get(r.versionId);i||(i=new Rx(n,r),n.versions.set(r.versionId,i)),r.targetId&&this._versions.set(r.targetId,i),i.addRevision(r),i.status()==="redundant"&&i.runningStatus()==="stopped"&&(r.targetId&&this._versions.delete(r.targetId),n.versions.delete(i.id))}this._onDidChangeUpdater.fire()}_workerRegistrationsUpdated(e){for(let r of e)if(r.isDeleted){if(!this._registrations.has(r.registrationId))debugger;this._registrations.delete(r.registrationId)}else{if(this._registrations.has(r.registrationId))return;this._registrations.set(r.registrationId,new $x(r))}this._onDidChangeUpdater.fire()}static setModeForAll(e){Ja._mode=e;for(let r of Ja._instances)r.setMode(e)}setMode(e){if(this._cdp){this._cdp.ServiceWorker.setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e==="force"});for(let r of this._targets.values())e==="bypass"?(r.Network.enable({}),r.Network.setBypassServiceWorker({bypass:!0})):r.Network.disable({})}}async stopWorker(e){if(!this._cdp)return;let r=this.version(e);r&&await this._cdp.ServiceWorker.stopWorker({versionId:r.id})}},dg=Ja;dg._instances=new Set;var Ya=class{constructor(e,r,n,i,o,s,a,u){this.process=r;this.logger=o;this.telemetry=s;this.launchParams=a;this._targets=new Map;this._detachedTargets=new Set;this.frameModel=new Zw;this.serviceWorkerModel=new dg(this.frameModel);this._lifecycleQueue=Promise.resolve();this._onTargetAddedEmitter=new z;this._onTargetRemovedEmitter=new z;this.onTargetAdded=this._onTargetAddedEmitter.event;this.onTargetRemoved=this._onTargetRemovedEmitter.event;this._connection=e,this._sourcePathResolver=i,this._browser=n,this._targetOrigin=u,this.serviceWorkerModel.onDidChange(()=>{for(let c of this._targets.values())c.type()==="service_worker"&&c._onNameChangedEmitter.fire()})}static async connect(e,r,n,i,o,s,a){let c=await e.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=e.createSession(c.sessionId);return new this(e,r,l,n,o,s,i,a)}dispose(){this.serviceWorkerModel.dispose()}targetList(){return Array.from(this._targets.values()).filter(e=>vh.has(e.type()))}async getCandiateInfo(e){let r=await this._browser.Target.getTargets({});return r?e?r.targetInfos.filter(e):r.targetInfos:[]}async closeBrowser(){if(this.launchParams.request==="launch"){if(this.launchParams.cleanUp==="wholeBrowser")await this._browser.Browser.close({}),this.process?.kill();else for(let e of this._targets.values())await this._browser.Target.closeTarget({targetId:e.targetId}),this._connection.close();this.process=void 0}}waitForMainTarget(e){let r,n=new Promise(o=>r=o),i=async o=>{if([...this._targets.values()].some(u=>u.targetId===o.targetId)||this._detachedTargets.has(o.targetId)||e&&!e(o))return;let s=this._browser.Target.on("targetInfoChanged",u=>{u.targetInfo.targetId===o.targetId&&(o=u.targetInfo)}),a;try{a=await this._browser.Target.attachToTarget({targetId:o.targetId,flatten:!0})}finally{s.dispose()}if(!a){r(void 0);return}r(this.attachedToTarget(o,a.sessionId,!0))};return this._browser.Target.setDiscoverTargets({discover:!0}),this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(o=>i(o.targetInfo))),this._browser.Target.on("targetInfoChanged",o=>this._targetInfoChanged(o.targetInfo,this.enqueueLifecycleFn(i))),this._browser.Target.on("detachedFromTarget",this.enqueueLifecycleFn(async o=>{o.targetId&&await this._detachedFromTarget(o.sessionId,!1)})),n}enqueueLifecycleFn(e){return r=>this._lifecycleQueue=this._lifecycleQueue.then(()=>e(r))}attachedToTarget(e,r,n,i,o=!0){let s=this._targets.get(r);if(s)return s;let a=this._connection.createSession(r),u=new Ll(this,e,a,i,n,this.launchParams,r,this.logger,()=>{this._connection.disposeSession(r),this._detachedFromTarget(r)});this._targets.set(r,u),i&&i._children.set(e.targetId,u),a.Target.on("attachedToTarget",async l=>{this.attachedToTarget(l.targetInfo,l.sessionId,l.waitingForDebugger,u)}),a.Target.on("detachedFromTarget",async l=>{l.targetId&&this._detachedFromTarget(l.sessionId,!1)}),a.Target.setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:o,flatten:!0}),a.Network.setCacheDisabled({cacheDisabled:this.launchParams.disableNetworkCache}).catch(l=>this.logger.info("runtime.target","Error setting network cache state",l)),i||this.retrieveBrowserTelemetry(a);let c=e.type;return dS.has(c)&&this.frameModel.attached(a,e.targetId),this.serviceWorkerModel.attached(a),this._onTargetAddedEmitter.fire(u),!vh.has(c)||c==="service_worker"?u.runIfWaitingForDebugger():c==="page"&&o&&a.Page.waitForDebugger({}),u}async retrieveBrowserTelemetry(e){try{let r=await e.Browser.getVersion({});if(!r)throw new Error("Undefined return from getVersion()");let n={targetCRDPVersion:r.protocolVersion,targetRevision:r.revision,targetUserAgent:r.userAgent,targetV8:r.jsVersion,targetVersion:"",targetProject:"",targetProduct:""};this.logger.verbose("runtime.target","Retrieved browser information",r);let i=(r.product||"").split("/");i.length===2?(n.targetProject=i[0],n.targetVersion=i[1]):n.targetProduct=r.product,this.telemetry.report("browserVersion",n)}catch(r){this.logger.warn("runtime.target","Error getting browser telemetry",r)}}async _detachedFromTarget(e,r=!0){let n=this._targets.get(e);if(n){this._targets.delete(e),n.parentTarget?._children.delete(e);try{await n._detached()}catch{}if(this._onTargetRemovedEmitter.fire(n),r&&(this._detachedTargets.add(n.targetId),await this._browser.Target.detachFromTarget({sessionId:e})),!this._targets.size&&this.launchParams.request==="launch")try{this.launchParams.cleanUp==="wholeBrowser"?await this._browser.Browser.close({}):(await this._browser.Target.closeTarget({targetId:n.id()}),this._connection.close())}catch{}}}async _targetInfoChanged(e,r){let n=[...this._targets.values()].filter(i=>i.targetId===e.targetId);if(!e.attached||!n.length)return n.length&&await Promise.all(n.map(i=>this._detachedFromTarget(i.sessionId,!1))),r(e);for(let i of n)i._updateFromInfo(e);for(let i of this._targets.values())i.targetId!==e.targetId&&i._onNameChangedEmitter.fire()}};var R5=A(require("child_process")),M5=require("fs");var oye=50,Yr=class{constructor(e){this.messageEmitter=new z;this.endEmitter=new z;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this._ws=e,this._ws.addEventListener("message",r=>{this.messageEmitter.fire([r.data.toString("utf-8"),new zr])}),this._ws.addEventListener("close",()=>{this.endEmitter.fire(),this._ws=void 0}),this._ws.addEventListener("error",()=>{})}static async create(e,r,n){let i=!e.startsWith("ws://"),o=await Rl(e);for(;;){let s=Date.now()+oye;try{let a={headers:{host:n??"localhost"},perMessageDeflate:!1,maxPayload:268435456,rejectUnauthorized:!(i&&o),followRedirects:!0},u=new uN(e,[],a);return await So(new Promise((c,l)=>{u.addEventListener("open",()=>c(new Yr(u))),u.addEventListener("error",p=>{let f=e===u.url?e:u.url.replace(/^http(s?):/,"ws$1:");if(f===e){l(p.error);return}this.create(f,r,n).then(c,l)})}),sr.withTimeout(2e3,r).token,`Could not open ${e}`).catch(c=>{throw u.close(),c})}catch(a){if(r.isCancellationRequested)throw a;let u=s-Date.now();u>0&&await Te(u)}}}send(e){this._ws?.send(e)}dispose(){return new Promise(e=>{if(!this._ws)return e();this._ws.addEventListener("close",()=>e()),this._ws.close()})}};var e_=A(require("path"));function sye(t){let e=[/^APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL$/i,/^ELECTRON_.+$/i,/^GOOGLE_API_KEY$/i,/^VSCODE_.+$/i,/^SNAP(|_.*)$/i,/^GDK_PIXBUF_.+$/i];return new _t(t).map((r,n)=>e.some(i=>i.test(r))?void 0:n)}var ui=class{constructor(e){this.defined=Ae(()=>ol(this.value));this.value=e?BT(e):{}}lookup(e){return ui.platform==="win32"?jT(this.value,e):this.value[e]}addToPath(e,r="append",n=!1){let i=ui.platform==="win32"?"Path":"PATH",o=ui.platform==="win32"?e_.win32.delimiter:e_.posix.delimiter,s=this.lookup(i);return n&&!s&&(s=`\${env:${i}}`),s?r==="append"?s=s+o+e:s=e+o+s:s=e,this.update(i,s)}addNodeOption(e){let r=this.lookup("NODE_OPTIONS");return this.update("NODE_OPTIONS",r?`${r} ${e}`:e)}update(e,r){return ui.merge(this,{[e]:r})}merge(...e){return ui.merge(this,...e)}map(e){return new ui(Xo(this.value,(r,n)=>e(n,r)))}static merge(...e){let r=e.map(i=>i instanceof ui?i.value:i),n=ui.platform==="win32"?UT(...r):Object.assign({},...r);return new ui(n)}},_t=ui;_t.platform=process.platform,_t.empty=new ui({}),_t.processEnv=Ae(()=>sye(process.env));var b5="--remote-debugging-port",v5="--remote-debugging-pipe",w5=t=>{let e={};for(let r of t){let n=r.indexOf("=");n===-1?e[r]=null:e[r.slice(0,n)]=r.slice(n+1)}return e},t_=t=>{let e=[];for(let r of Object.keys(t)){let n=t[r];n!==void 0&&e.push(n===null?r:`${r}=${n}`)}return e},Ds=class{constructor(e=[]){this.args=e;this.argMap=Ae(()=>w5(this.args))}add(e,r=null){return new Ds(t_({...this.argMap(),[e]:r}))}remove(e){return new Ds(t_({...this.argMap(),[e]:void 0}))}merge(e){return new Ds(t_({...this.argMap(),...e instanceof Ds?e.argMap():w5(e)}))}setConnection(e){return new Ds(t_({...this.argMap(),[v5]:e==="pipe"?null:void 0,[b5]:e!=="pipe"?String(e):void 0}))}getSuggestedConnection(){let e=this.argMap();if(e.hasOwnProperty(v5))return"pipe";let r=e[b5];if(r!==void 0)return r&&Number(r)||0}filter(e){let r=this.argMap(),n=[];for(let i of Object.keys(r)){let o=r[i];e(i,o)&&n.push(o===null?i:`${i}=${o}`)}return new Ds(n)}toArray(){return this.args.slice()}},Cs=Ds;Cs.default=new Ds(["--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-default-apps","--disable-dev-shm-usage","--disable-renderer-backgrounding","--disable-sync","--metrics-recording-only","--no-first-run","--no-default-browser-check"]);var Mx=require("url");function r_(t,e,r){let n=Jo(s=>{if(s)return new Mx.URL(s);throw new Error(`A valid url wasn't supplied: <${s}>`)}),i={"url.hostname":()=>n(e).hostname,"url.port":()=>n(e).port,browserInspectUri:()=>encodeURIComponent(r),browserInspectUriPath:()=>new Mx.URL(r).pathname,wsProtocol:()=>n(e).protocol==="https:"?"wss":"ws"};return t.replace(/{([^\}]+)}/g,(s,a)=>i.hasOwnProperty(a)?i[a]():s)}var x5=A(require("readline"));var S5=A(i_());var ci=class{constructor(e,r,n){this.logger=e;this.pipeWrite=r;this.pipeRead=n;this.messageEmitter=new z;this.endEmitter=new z;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this.onceEnded=Ae(()=>{this.streams&&(this.beforeClose(),this.streams.read.removeAllListeners(),this.pipeRead?.destroy(),this.streams.write.removeListener("end",this.onceEnded),this.streams.write.removeListener("error",this.onWriteError),this.streams.write.on("error",()=>{}),this.streams.write.end(),this.streams=void 0,this.endEmitter.fire())});this.onWriteError=e=>{this.logger.error("internal","pipeWrite error",{error:e})};let i=n||r;this.streams={read:i.on("error",o=>this.logger.error("internal","pipeRead error",{error:o})).pipe((0,S5.default)("\0")).on("data",o=>this.messageEmitter.fire([o,new zr])).on("end",this.onceEnded),write:r.on("end",this.onceEnded).on("error",this.onWriteError)}}send(e){this.streams?.write.write(e+"\0")}dispose(){this.onceEnded()}beforeClose(){}};var o_=require("child_process"),kx=require("path");function Ri(t,e,r="forceful"){if(r==="none")return!0;if(process.platform==="win32"){let n=process.env.WINDIR||"C:\\Windows",i=(0,kx.join)(n,"System32","taskkill.exe");try{return(0,o_.execSync)(`${i} ${r==="forceful"?"/F":""} /T /PID ${t}`,{stdio:"pipe"}),!0}catch(o){return e.error("runtime.exception","Error running taskkill.exe",o),!1}}else try{let n=(0,kx.join)(__dirname,"./targets/node/terminateProcess.sh"),i=(0,o_.spawnSync)("sh",[n,t.toString(),r==="forceful"?"9":"15"]);return i.stderr&&i.status?(e.error("runtime.exception","Error running terminateProcess",i),!1):!0}catch(n){return e.error("runtime.exception","Error running terminateProcess",n),!1}}var C5=require("fs");async function Ox(t,e,r,n){let i=new Ra(C5.promises),[o,s]=await Promise.all([E5(i,new URL("/json/version",t),e),n?E5(i,new URL("/json/list",t),e):Promise.resolve(void 0)]);if(!o.ok)r.verbose("runtime.launch","Error looking up /json/version",o);else if(o.body.webSocketDebuggerUrl){let a=D5(o.url,o.body.webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/version",{url:o.body.webSocketDebuggerUrl,fixed:a}),a}if(s)if(!s.ok)r.verbose("runtime.launch","Error looking up /json/list",s);else{let a=D5(s.url,s.body[0].webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/list",{url:s.body[0].webSocketDebuggerUrl,fixed:a}),a}throw new Error("Could not find any debuggable target")}async function E5(t,e,r){if(e.hostname!=="localhost")return t.fetchJson(e.toString(),r,{host:"localhost"});let n=e.toString();e.hostname="127.0.0.1";let i=e.toString(),o=new sr(r);try{let s;return await po([n,i].map(async u=>(s=await t.fetchJson(u,o.token),s.ok&&s)))||s}finally{o.cancel()}}var P5=t=>async(e,r,n)=>{for(;;)try{return await Ox(e,r,n,t)}catch(i){if(r.isCancellationRequested)throw new Error(`Could not connect to debug target at ${e}: ${i.message}`);await Te(200)}},lf=P5(!0),s_=P5(!1);function D5(t,e){let r=new URL(t),n=new URL(e);return n.host=r.host,n.toString()}var L5=async(t,e,r,n)=>{let i=r.connection===0?await dye(e,n):await s_(`http://localhost:${r.connection}`,n,t),o=r.inspectUri?r_(r.inspectUri,r.url,i):i;for(;;)try{return await Yr.create(o,n)}catch(s){if(n.isCancellationRequested)throw s;await Te(200)}},a_=class{constructor(e){this.logger=e;this.pid=void 0;this.onExit=new z().event;this.onError=new z().event}async transport(e,r){return L5(this.logger,this,e,r)}kill(){}},u_=class{constructor(e,r){this.cp=e;this.logger=r;this.pid=void 0;this.exitEmitter=new z;this.onExit=this.exitEmitter.event;this.errorEmitter=new z;this.onError=this.errorEmitter.event;e.on("exit",n=>this.exitEmitter.fire(n||0)),e.on("error",n=>this.errorEmitter.fire(n))}get stderr(){return this.cp.stderr}get stdio(){return this.cp.stdio}async transport(e,r){return e.connection==="pipe"?new ci(this.logger,this.cp.stdio[3],this.cp.stdio[4]):L5(this.logger,this,e,r)}kill(){Ri(this.cp.pid,this.logger)}};function dye(t,e){if(!t.stderr)throw new Error("Cannot wait for a websocket for a target that lacks stderr");return new Promise((r,n)=>{let i=x5.createInterface({input:t.stderr}),o="",s=()=>c();i.on("line",l),i.on("close",s);let a=new Se([t.onExit(()=>c()),t.onError(c)]),u=e.onCancellationRequested(()=>{p(),n(new Io(`Timed out after ${u} ms while trying to connect to the browser!`))});function c(f){p(),n(new Error(["Failed to launch browser!"+(f?" "+f.message:""),o,"","TROUBLESHOOTING: https://github.com/GoogleChrome/puppeteer/blob/master/docs/troubleshooting.md",""].join(`
`)))}function l(f){o+=f+`
`;let m=f.match(/^DevTools listening on (ws:\/\/.*)$/);m&&(p(),r(m[1]))}function p(){u.dispose(),i.removeListener("line",l),i.removeListener("close",s),a.dispose()}})}async function T5(t,e,r,n){let i=t.launchUnelevatedRequest({process:e,args:r});await So(i,n,"Could not launch browser unelevated")}var $5=()=>{};async function k5(t,e,r,n,i,o,s={}){let{onStderr:a=$5,onStdout:u=$5,args:c=[],dumpio:l=!1,cwd:p=process.cwd(),env:f=_t.empty,connection:m="pipe",cleanUp:h="wholeBrowser",url:H,inspectUri:b}=s,_=new Cs(c),$=_.getSuggestedConnection();s.includeLaunchArgs!==!1?(_=Fx(_,s),$===void 0&&(_=_.setConnection(m),$=m)):$===void 0&&($="pipe");let U=["pipe","pipe","pipe"];$==="pipe"&&(l?U=["ignore","pipe","pipe","pipe","pipe"]:U=["ignore","ignore","ignore","pipe","pipe"]);let D;if(!!(i.supportsLaunchUnelevatedProcessRequest&&s.launchUnelevated)&&typeof $=="number"&&$!==0)await T5(t,e,_.toArray(),o),D=new a_(r);else{r.info("runtime.launch",`Launching Chrome from ${e}`);let N=R5.spawn(e,_.toArray(),{detached:!0,env:f.defined(),cwd:await Pu(M5.promises,p)?p:process.cwd(),stdio:U});if(N.pid===void 0)throw await Promise.race([Te(1e3).then(()=>new Error("Unable to launch the executable (undefined pid)")),new Promise(M=>N.once("error",M))]);D=new u_(N,r)}l?(D.stderr?.on("data",N=>a(N.toString())),D.stdout?.on("data",N=>u(N.toString()))):(D.stderr?.resume(),D.stdout?.resume());let j=()=>{h==="wholeBrowser"&&D.kill()};process.on("exit",j),D.onExit(()=>process.removeListener("exit",j));try{if(s.promisedPort){let L;$=await Promise.race([s.promisedPort,new Promise((F,S)=>{L=D.onExit(k=>{S(new ee(p1(k)))})})]).finally(()=>L.dispose())}let N=await D.transport({connection:$,inspectUri:b||void 0,url:H||void 0},o),M=new Nt(N,r,n);return j=async()=>{h==="wholeBrowser"?(await M.rootSession().Browser.close({}),D.kill()):M.close()},{cdp:M,process:D}}catch(N){throw j(),N}}function Fx(t,e={}){let{userDataDir:r=null,ignoreDefaultArgs:n=!1}=e,i=n===!0?new Cs:Cs.default;return n instanceof Array&&(i=i.filter(o=>!n.includes(o))),r&&(i=i.add("--user-data-dir",r)),i=i.merge(t),t.toArray().every(o=>o.startsWith("-"))&&e.hasUserNavigation&&(i=i.add("about:blank")),i}async function O5(t,e,r,n){let{browserWSEndpoint:i,browserURL:o}=t;if(i){let s=await Yr.create(i,e);return new Nt(s,r,n)}else if(o){let s=await s_(o,e,r),a=t.inspectUri?r_(t.inspectUri,t.pageURL,s):s,u=await Yr.create(a,e);return new Nt(u,r,n)}throw new Error("Either browserURL or browserWSEndpoint needs to be specified")}var li=class{constructor(e,r,n){this.logger=e;this.pathResolver=r;this.vscode=n;this._disposables=[];this._onTerminatedEmitter=new z;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new z;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[],this._attemptTimer&&clearTimeout(this._attemptTimer),this._targetManager&&this._targetManager.dispose()}resolveParams(e){return e.request==="attach"&&(e.type==="pwa-chrome"||e.type==="pwa-msedge"&&typeof e.useWebView!="object")&&e.browserAttachLocation==="workspace"}async launch(e,r){return this.resolveParams(e)?(this._lastLaunchParams={...e,timeout:1/0},await this.attemptToAttach(this._lastLaunchParams,r),{blockSessionTermination:!0}):{blockSessionTermination:!1}}_scheduleAttach(e,r){this._attemptTimer=setTimeout(()=>{this._attemptTimer=void 0,this.attemptToAttach(e,{...r,cancellationToken:ar})},1e3)}createTargetManager(e,r,n){return Ya.connect(e,void 0,this.pathResolver,r,this.logger,n.telemetryReporter,n.targetOrigin)}async attemptToAttach(e,r){let n=await this.acquireConnectionForBrowser(r,e);this._connection=n,n.onDisconnected(()=>{this._connection=void 0,this._targetManager&&(this._targetManager.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire()),this._lastLaunchParams===e&&e.restart?this._scheduleAttach(e,r):this._onTerminatedEmitter.fire({killed:!0,code:0})},void 0,this._disposables);let i=this._targetManager=await this.createTargetManager(n,e,r);if(!i)return;i.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),i.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),i.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),i.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire(),i.targetList().length||this._onTerminatedEmitter.fire({killed:!0,code:0})});let o=await Promise.race([i.waitForMainTarget(await this.getTargetFilter(i,e)),Te(e.timeout).then(()=>{throw new ee(Dy())})]);return typeof o=="string"?o:void 0}async getTargetFilter(e,r){let n=aa(r),i=kl(n);if(r.targetSelection!=="pick")return i;let o=await e.getCandiateInfo(i);if(o.length===0)return i;if(o.length===1||!this.vscode)return u=>u.targetId===o[0].targetId;let s=c_.t("Select a tab"),a=await this.vscode.window.showQuickPick(o.map(u=>({label:u.title,detail:u.url,targetId:u.targetId})),{matchOnDescription:!0,matchOnDetail:!0,placeHolder:s});return a?u=>u.targetId===a.targetId:i}async acquireConnectionForBrowser({telemetryReporter:e,cancellationToken:r},n){for(;this._lastLaunchParams===n;)try{return await this.acquireConnectionInner(e,n,r)}catch(i){if(r.isCancellationRequested)throw new ee(mh(c_.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,i.message)));await Te(1e3)}throw new ee(mh(c_.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,"Cancelled")))}async acquireConnectionInner(e,r,n){let i=`http://${r.address}:${r.port}`;return await O5({browserURL:i,inspectUri:r.inspectUri,pageURL:r.url},n,this.logger,e)}async terminate(){this._lastLaunchParams=void 0,this._connection?.close()}async restart(){if(this._targetManager)for(let e of this._targetManager.targetList())e.type()==="page"&&!e.name().startsWith("devtools://")&&e.restart()}targetList(){let e=this._targetManager;return e?e.targetList():[]}};li=T([(0,Za.injectable)(),v(0,(0,Za.inject)(ce)),v(1,(0,Za.inject)(Ze)),v(2,(0,Za.optional)()),v(2,(0,Za.inject)(Yn))],li);var Mi=A(J());var B5=A(RA()),hg=A(require("fs")),eu=A(J()),pf=A(require("path"));var Fo=class{constructor(e,r,n,i,o){this.storagePath=e;this.logger=r;this.pathResolver=n;this.initializeParams=i;this.fs=o;this._disposables=new Se;this._terminated=!1;this._onTerminatedEmitter=new z;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new z;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){this._disposables.dispose()}async launchBrowser({runtimeExecutable:e,trace:r,includeDefaultArgs:n,includeLaunchArgs:i,runtimeArgs:o,userDataDir:s,env:a,cwd:u,port:c,url:l,file:p,inspectUri:f,webRoot:m,cleanUp:h,launchUnelevated:H},b,_,$,U){let D=await this.findBrowserPath(e||"stable"),P;return typeof s=="string"?P=pf.resolve(s):s&&(P=pf.resolve(pf.join(this.storagePath,o?.includes("--headless")?".headless-profile":".profile"))),hg.mkdirSync(this.storagePath,{recursive:!0}),P&&(hg.mkdirSync(P,{recursive:!0}),P=hg.realpathSync(P)),await k5(b,D,this.logger,$,this.initializeParams,_,{onStdout:j=>b.output({category:"stdout",output:j}),onStderr:j=>b.output({category:"stderr",output:j}),dumpio:typeof r=="boolean"?r:r.stdio,cleanUp:h,hasUserNavigation:!!(l||p),cwd:u||m||void 0,env:_t.merge(_t.processEnv(),a),args:o||[],userDataDir:P,connection:c||(f?0:"pipe"),launchUnelevated:H,ignoreDefaultArgs:!n,includeLaunchArgs:i,url:l,inspectUri:f,promisedPort:U})}getFilterForTarget(e){return kl(aa(e,["about:blank"]))}async prepareLaunch(e,{dap:r,targetOrigin:n,cancellationToken:i,telemetryReporter:o}){let s;try{s=await this.launchBrowser(e,r,i,o)}catch(c){throw new ee(o1(c))}if(this._disposables.push(s.cdp.onDisconnected(()=>this.fireTerminatedEvent())),this._connectionForTest=s.cdp,this._launchParams=e,this._targetManager=await Ya.connect(s.cdp,s.process,this.pathResolver,this._launchParams,this.logger,o,n),!this._targetManager)throw s.process.kill(),new ee(mh());this._targetManager.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),this._targetManager.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),this._disposables.push(this._targetManager),this._targetManager.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),this._targetManager.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire()});let a=this.getFilterForTarget(e),u=await So(this._targetManager.waitForMainTarget(a),i,"Could not attach to main target");if(!u)throw s.process.kill(),new ee(Dy());return u}async finishLaunch(e,r){if("skipNavigateForTest"in r)return;let n;if(r.file){let i=pf.resolve(r.webRoot||r.rootPath||"",r.file),o=Math.min(i.includes("#")?i.indexOf("#"):1/0,i.includes("?")?i.indexOf("?"):1/0);isFinite(o)&&!await wn(this.fs,i)?n=Oe(i.slice(0,o))+i.slice(o):n=Oe(i)}else n=r.url;n&&await e.cdp().Page.navigate({url:n})}async launch(e,r){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};let i=await this.prepareLaunch(n,r);return await this.finishLaunch(i,n),{blockSessionTermination:!0}}async terminate(){await this._targetManager?.closeBrowser()}async restart(){for(let e of this.targetList())e.type()==="page"&&e.restart()}async findBrowserByExe(e,r){return r==="*"?(await e.findWhere(i=>i.quality==="stable")||(await e.findAll())[0])?.path:(0,B5.isQuality)(r)?(await e.findWhere(n=>n.quality===r))?.path:r}targetList(){let e=this._targetManager;return e?e.targetList():[]}connectionForTest(){return this._connectionForTest}fireTerminatedEvent(){this._terminated||(this._terminated=!0,this._onTerminatedEmitter.fire({code:0,killed:!0}))}};Fo=T([(0,eu.injectable)(),v(0,(0,eu.inject)(_o)),v(1,(0,eu.inject)(ce)),v(2,(0,eu.inject)(Ze)),v(3,(0,eu.inject)(cn)),v(4,(0,eu.inject)(we))],Fo);var Lc=class extends Fo{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-chrome"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await Pu(this.fs,n))throw new ee(Ey("Chrome",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};Lc=T([(0,Mi.injectable)(),v(0,(0,Mi.inject)(_o)),v(1,(0,Mi.inject)(ce)),v(2,(0,Mi.inject)(zu)),v(2,(0,Mi.tagged)("browser","chrome")),v(3,(0,Mi.inject)(we)),v(4,(0,Mi.inject)(Ze)),v(5,(0,Mi.inject)(cn))],Lc);var N5=require("crypto"),ki=A(J()),U5=require("net"),j5=require("os"),q5=require("path");var hye=["--do-not-de-elevate"],ff=class extends Fo{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-msedge"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}launchBrowser(r,n,i,o){return super.launchBrowser({...r,runtimeArgs:r.runtimeArgs??hye},n,i,o,r.useWebView?this.getWebviewPort(r,o):void 0)}getFilterForTarget(r){return r.useWebView&&r.urlFilter?kl(aa(r)):super.getFilterForTarget(r)}async getWebviewPort(r,n){let i=Ue();if(!r.runtimeExecutable)return i.resolve(r.port),i.promise;let o=r.runtimeExecutable.split(/\\|\//).pop(),s=`VSCode_${(0,N5.randomBytes)(12).toString("base64")}`,a=`\\\\.\\pipe\\WebView2\\Debugger\\${o}\\${s}`,u=(0,U5.createServer)(c=>{c.on("data",async l=>{let p=JSON.parse(l.toString()),f=p.devtoolsActivePort||"",m=parseInt(f.split(`
`).shift()||""),h=r.port||m;i.resolve(h);let H=`ws://${r.address}:${h}/devtools/${p.type}/${p.id}`,b=await Yr.create(H,ar),_=new Nt(b,this.logger,n);await _.rootSession().Runtime.runIfWaitingForDebugger({}),_.close()})});return u.on("error",i.reject),u.on("close",()=>i.resolve(r.port)),u.listen(a),r.userDataDir=r.userDataDir||(0,q5.join)((0,j5.tmpdir)(),`vscode-js-debug-userdatadir_${r.port}`),r.env=r.env||{},r.env.WEBVIEW2_USER_DATA_FOLDER=r.userDataDir.toString(),r.env.WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS=`--remote-debugging-port=${r.port}`,r.env.WEBVIEW2_WAIT_FOR_SCRIPT_DEBUGGER="true",r.env.WEBVIEW2_PIPE_FOR_SCRIPT_DEBUGGER=s,i.promise}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await Pu(this.fs,n))throw new ee(Ey("Edge",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};ff=T([(0,ki.injectable)(),v(0,(0,ki.inject)(_o)),v(1,(0,ki.inject)(ce)),v(2,(0,ki.inject)(zu)),v(2,(0,ki.tagged)("browser","edge")),v(3,(0,ki.inject)(we)),v(4,(0,ki.inject)(Ze)),v(5,(0,ki.inject)(cn))],ff);var Ps=A(J());var W5=require("crypto"),l_=A(J());var mye=0,Bo=class{constructor(e){this.portLeaseTracker=e;this.teardown=new WeakMap}async launch(e,r,n){this.server&&this.server.close();let i=`/${(0,W5.randomBytes)(20).toString("hex")}`,o=this.server=await Ob(this.portLeaseTracker,{perMessageDeflate:!0,host:"127.0.0.1",path:i}),s=++mye;e.launchBrowserInCompanion({...n,serverPort:o.address().port,path:i,launchId:s});let a=await So(new Promise((c,l)=>{o.once("connection",c),o.once("error",l)}),r,"Timed out waiting for browser connection"),u=new Yr(a);return this.teardown.set(u,()=>e.killCompanionBrowser({launchId:s})),u}close(e){this.teardown.get(e)?.()}dispose(){this.server?.close(),this.server=void 0}};Bo=T([(0,l_.injectable)(),v(0,(0,l_.inject)(at))],Bo);var df=class extends li{constructor(r,n,i,o){super(n,i,o);this.helper=r}resolveParams(r){return r.request==="attach"&&(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.browserAttachLocation==="ui"}async acquireConnectionForBrowser(r,n){let i=await this.helper.launch(r.dap,r.cancellationToken,{type:n.type==="pwa-chrome"?"chrome":"edge",params:n,attach:{host:n.address,port:n.port}});return new Nt(i,this.logger,r.telemetryReporter)}};df=T([(0,Ps.injectable)(),v(0,(0,Ps.inject)(Bo)),v(1,(0,Ps.inject)(ce)),v(2,(0,Ps.inject)(Ze)),v(3,(0,Ps.optional)()),v(3,(0,Ps.inject)(Yn))],df);var xs=A(J());var hf=class extends Fo{constructor(r,n,i,o,s,a){super(r,n,i,o,s);this.helper=a}resolveParams(r){return(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.request==="launch"&&r.browserLaunchLocation==="ui"?r:void 0}async launchBrowser(r,n,i,o){let s=await this.helper.launch(n,i,{type:r.type==="pwa-chrome"?"chrome":"edge",browserArgs:Fx(new Cs(r.runtimeArgs||[]),{hasUserNavigation:!!r.url,ignoreDefaultArgs:!r.includeDefaultArgs}).setConnection(r.port||"pipe").toArray(),params:r});return{cdp:new Nt(s,this.logger,o),process:{onExit:new z().event,onError:new z().event,transport:()=>Promise.resolve(s),kill:()=>this.helper.close(s)}}}async findBrowserPath(){throw new Error("not implemented")}};hf=T([(0,xs.injectable)(),v(0,(0,xs.inject)(_o)),v(1,(0,xs.inject)(ce)),v(2,(0,xs.inject)(Ze)),v(3,(0,xs.inject)(cn)),v(4,(0,xs.inject)(we)),v(5,(0,xs.inject)(Bo))],hf);var tu=A(J()),Y5=require("net");var mf=class extends li{constructor(e,r,n){super(e,r,n)}resolveParams(e){return e.request==="attach"&&e.type==="pwa-msedge"&&typeof e.useWebView=="object"}async acquireConnectionForBrowser(e,r){let{getAppContainerProcessTokens:n}=await Promise.resolve().then(()=>A(J5())),i=n(r.useWebView.pipeName);if(!i)throw new ee(a1());let o=i.map(u=>(0,Y5.connect)(u)),s;try{s=await So(po(o.map(u=>new Promise(c=>u.on("error",()=>c(void 0)).on("connect",()=>c(u))))),e.cancellationToken)}finally{for(let u of o)u!==s&&u.destroy()}if(!s)throw new ee(u1());let a=new ci(this.logger,s);return new Nt(a,this.logger,e.telemetryReporter)}};mf=T([(0,tu.injectable)(),v(0,(0,tu.inject)(ce)),v(1,(0,tu.inject)(Ze)),v(2,(0,tu.optional)()),v(2,(0,tu.inject)(Yn))],mf);var bf=A(J()),lG=require("net");var kn=A(J());var mg=Symbol("ILinkedBreakpointLocation");var iG=A(require("path"));var Hg=A(J()),nu=A(require("path")),nG=require("url");var Q5=require("fs"),Ls=A(require("path")),Bx=require("url");function f_(t,e){return t?(t.endsWith("/")||(t+="/"),t+e):e}async function d_(t,e,r,n,i){e=bt(e)||e;let o;if(t){if(an(t))o=bt(t);else if(kr(t))o=await n(t,r,i)||t;else if(Ls.isAbsolute(e))o=_ye(e,t);else{let s=new Bx.URL(e).pathname,a=await n(s,r,i),u=Ls.dirname(a);o=Js(u,t)}i.verbose("sourcemap.parsing","resolved sourceRoot",{sourceRoot:t,absSourceRoot:o})}else if(Ls.isAbsolute(e))o=Ls.dirname(e),i.verbose("sourcemap.parsing","no sourceRoot specified, using script dirname",{absSourceRoot:o});else{let s=new Bx.URL(e).pathname||"/placeholder.js",a=await n(s,r,i);o=a?Ls.dirname(a):"",i.verbose("sourcemap.parsing","no sourceRoot specified, using webRoot + script path dirname",{absSourceRoot:o})}return o=q1(o),o=Lt(o),o}var gg=async(t,e,r)=>{if(!t||!t.startsWith("/"))return"";let n=Object.keys(e).sort((i,o)=>o.length-i.length);for(let i of n){if(!i)continue;let o=e[i];if(i[0]!=="/"&&(r.verbose("sourcemap.parsing",`Keys should be absolute: ${i}`),i="/"+i),vye(i,t))return wye(i,o,t)}return""},Z5=(t,e)=>async(r,n,i)=>{if(process.platform==="win32"&&/^[a-z]:/i.test(r))return r;let o=await $l(t,Ls.dirname(e),"package.json");if(!o)return gg(r,n,i);let s=await gg(r,NT(n,a=>a.length>=o.length),i);return process.platform!=="win32"&&r!=="/"&&!s&&(await Q5.promises.stat(r).catch(()=>{}))?.isDirectory()?r:s||o};function vye(t,e){return t===e?!0:(t.endsWith("/")||(t+="/"),e.startsWith(t))}function wye(t,e,r){let n=decodeURIComponent(r.substring(t.length));return n?Js(e,n):e}function _ye(t,e){return _n(Ls.dirname(t),e)}var rG=A(Rh()),Hf=A(require("path"));var g_="*",eG=new RegExp(Gr(g_),"g"),h_="?:"+g_,Aye=new RegExp(Gr(h_),"g"),Nx=(t,e)=>{let r=e.match(t);return t.lastIndex=0,r?r.length:0},tG=new RegExp(`${Gr(h_)}|${Gr(g_)}`,"g"),m_=class{constructor(e,r){this.logger=r;this.replacers=[];let n=Object.keys(e).sort((i,o)=>o.replace(h_,"*").length-i.replace(h_,"*").length);for(let i of n){let o=e[i];if(!o.includes("*")&&/\$[0-9'`&]/.test(o)){this.replacers.push([new RegExp(`^${i}$`,"i"),o]);continue}let s=ze(i),a=`"${s}": "${o}"`,u=Nx(eG,s)-Nx(Aye,s);if(u>1){r.warn("runtime.sourcemap",`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${a}`);continue}if(Nx(eG,o)>u){r.warn("runtime.sourcemap",`The right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${a}}`);continue}let c="^",l=0;for(tG.lastIndex=0;;){let p=tG.exec(s);if(c+=Gr(s.slice(l,p?.index),"/"),!p)break;p[0]===g_?c+="(.*?)":c+=".*?",l=p.index+p[0].length}u===0&&(c+="([\\/\\\\].*)?",o+="*"),this.replacers.push([new RegExp(c+"$","i"),o.replace(/\$/g,"$$$$").replace(/\*/,"$1")])}}apply(e){let r=ze(e);for(let[n,i]of this.replacers){let o=r.replace(n,i);if(o!==r)return this.logger.verbose("runtime.sourcemap",`SourceMap: mapping ${e} => ${o}, via sourceMapPathOverrides entry - ${n.toString()}`),Js(o)}return e}};var Iye=/\x00/,gf=class{constructor(e,r){this.options=e;this.logger=r;this.sourceMapOverrides=new m_(this.options.sourceMapOverrides,this.logger);this.resolvePatterns=this.options.resolveSourceMapLocations?.map(e=>{let r=e.startsWith("!")?"!":"",n=e.slice(r.length).replace(/\.[a-z0-9]+$/,".*");if(!kr(n))return ze(e);n=ze(_n(n));let i=kI(this.options.workspaceFolder),o=kI(n),s=0;for(let a=0;a<i.length&&a<o.length&&o[a].toLowerCase()===i[a].toLowerCase();a++)s+=i[a].length+1;return n=n.slice(0,s).replace(/[\[\]\(\)\{\}\!\*]/g,"\\$&")+n.slice(s),r+n})}shouldResolveSourceMap({sourceMapUrl:e,compiledPath:r}){if(r.startsWith(Ma)||r==="")return!1;if(!this.resolvePatterns||this.resolvePatterns.length===0)return!0;let n=bt(e)||gr(e)&&r||e;if(n.startsWith("webpack-internal:///"))return!0;let i=gy(e)?!1:gS(),o=this.rebaseRemoteToLocal(n);return(0,rG.default)((o!==n?[n,o]:[n]).map(ze),this.resolvePatterns,{dot:!0,nocase:!i}).length>0}rebaseRemoteToLocal(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return Hf.resolve(e);let r=sh(this.options.remoteRoot,e);if(r.startsWith(".."))return"";let n=Js(this.options.localRoot,r);return n=OI(n),this.logger.verbose("runtime.sourcemap",`Mapped remoteToLocal: ${e} -> ${n}`),_n(n)}rebaseLocalToRemote(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return e;let r=sh(this.options.localRoot,e),n=Js(this.options.remoteRoot,r);return n=Lt(n,!0),this.logger.verbose("runtime.sourcemap",`Mapped localToRemote: ${e} -> ${n}`),n}normalizeSourceMapUrl(e){e=e.replace(Iye,"");let r=e.lastIndexOf("?");return r!==-1&&e.slice(r-4,r)!==".vue"&&(e=e.slice(0,r)),e}canMapPath(e){return Hf.posix.isAbsolute(e)||Hf.win32.isAbsolute(e)||an(e)}};var Ux="https?:\\/\\/[^\\/]+\\/",ru=class extends gf{constructor(r,n,i,o){super(i,o);this.vueMapper=r;this.fsUtils=n}absolutePathToUrlPath(r){r=nu.normalize(r);let{baseUrl:n,pathMapping:i}=this.options,o=["/",i["/"]],s=Object.entries(i).sort(([c,l],[p,f])=>f.length-l.length||p.length-c.length).find(([,c])=>my(c,r))||o;if(!s)return{url:Oe(r),needsWildcard:!1};if(n&&an(n))return{url:Ml(r),needsWildcard:!1};let a=sa(nu.relative(s[1],r)),u=s[0].replace(/\/$|^\//g,"");return u&&(a=u+"/"+a),!n&&!Wy(a)?{url:a,needsWildcard:!0}:{url:My(n,a),needsWildcard:!1}}async urlToAbsolutePath({url:r,map:n}){let i=r.indexOf("?");return i!==-1&&r.slice(i-4,i)!==".vue"&&(r=r.slice(0,i)),n?this.sourceMapSourceToAbsolute(r,n):this.simpleUrlToAbsolute(r)}async simpleUrlToAbsolute(r){if(!r)return;if(an(r)){let s=bt(r);if(await this.fsUtils.exists(s))return s;let a=W1(r);if(await this.fsUtils.exists(a))return a}let n;try{let s=new nG.URL(r);if(!s.pathname||s.pathname==="/"?n="index.html":n=s.pathname,s.protocol==="webpack-internal:")return}catch{n=r}let i=nu.extname(n),o=n.replace(/^\//,"").split(/[\/\\]/);for(;o.length>0;){let s="/"+o.join("/"),a=await gg(s,this.options.pathMapping,this.logger);if(a){if(!i&&await this.fsUtils.exists(a+".html"))return a+".html";if(await this.fsUtils.exists(a))return a}o.shift()}}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;switch(this.vueMapper.getVueHandling(r)){case 2:return;case 1:let a=await this.vueMapper.lookup(r);if(a)return Lt(a);break;default:}r=this.normalizeSourceMapUrl(r);let{pathMapping:i}=this.options,o=f_(n.sourceRoot,r),s=this.sourceMapOverrides.apply(o);if(s!==o){s=Lt(s);let a=_n(i["/"],"..","ClientApp",sh(i["/"],s));return this.options.clientID==="visualstudio"&&o.startsWith("webpack:///")&&!await this.fsUtils.exists(s)&&await this.fsUtils.exists(a)?a:s}return an(r)?bt(r):nu.isAbsolute(r)?Lt(r):_n(await d_(n.sourceRoot,n.metadata.compiledPath,i,gg,this.logger),r)}absolutePathToUrlRegexp(r){let n=this.absolutePathToUrlPath(r),i=n.url,o=i.length;i.endsWith("index.html")?(o=i.length-10-1,i=i.slice(0,o)+"\\/?($|index(\\.html)?)"):i.endsWith(".html")&&(o=i.length-5,i=i.slice(0,o)+"(\\.html)?");let s=0;n.needsWildcard&&(i=Ux+i,s=Ux.length,o+=Ux.length);let a=Gn(i,[s,o]);return n.needsWildcard?`${Gn(Oe(r))}|${a}`:a}};ru=T([(0,Hg.injectable)(),v(0,(0,Hg.inject)(Up)),v(1,(0,Hg.inject)(Mr))],ru);var H_=class extends ru{constructor(r,n,i,o){super(r,n,i,o);this.blazorInCodespacesRegexpSubstitution="$1:\\$2";if(this.options.remoteFilePrefix){let s=`\\${iG.default.sep}`,a=this.options.remoteFilePrefix.replace(new RegExp(s,"g"),s);this.blazorInCodespacesRegexp=new RegExp(`^${a}${s}([A-z])\\$${s}(.*)$`)}else this.blazorInCodespacesRegexp=new RegExp("")}absolutePathToUrlRegexp(r){if(this.options.remoteFilePrefix){let n=r.replace(this.blazorInCodespacesRegexp,this.blazorInCodespacesRegexpSubstitution),o=sa(n).replace(/^(\w):(.*)$/,"$1$2"),s=Gn(o);if(s){let a=`dotnet://.*\\.dll/${s}`;return this.logger.verbose("runtime.breakpoints","absolutePathToUrlRegexp.blazor.remoteFs",{absolutePath:r,dotnetUrlRegexp:a}),a}}else{let n=Oe(r),i=Gn(n),o=super.absolutePathToUrlRegexp(r);return i.includes(o)?i:`${i}|${o}`}return super.absolutePathToUrlRegexp(r)}};var oG=require("url");function sG(t){if("file"in t&&t.file)return Ml(t.file);if(t.url)try{let e=new oG.URL(t.url);return e.pathname="/",e.search="",e.hash="",e.protocol==="data:"?void 0:e.href}catch{}}var Tc=A(require("path")),uG=require("url");var aG="node:",Oi=class extends gf{constructor(r,n,i,o){super(i,o);this.fsUtils=r;this.linkedBp=n;this.options=i;this.logger=o}static shouldWarnAboutSymlinks(r){return"runtimeArgs"in r&&!r.runtimeArgs?.includes("--preserve-symlinks")}static getOptions(r){return{workspaceFolder:r.__workspaceFolder,resolveSourceMapLocations:r.resolveSourceMapLocations,basePath:r.cwd,sourceMapOverrides:r.sourceMapPathOverrides,remoteRoot:r.remoteRoot,localRoot:r.localRoot}}derive(r){return new Oi(this.fsUtils,this.linkedBp,{...this.options,...r},this.logger)}get resolutionOptions(){return this.options}async urlToAbsolutePath({url:r,map:n}){if(r=this.normalizeSourceMapUrl(r),r.startsWith(aG)&&this.options.basePath)return r=Tc.join(this.options.basePath,"lib",r.slice(aG.length)),r.endsWith(".js")||(r+=".js"),r;if(n)return this.sourceMapSourceToAbsolute(r,n);let i=bt(r);if(i)return this.rebaseRemoteToLocal(i);if(Wy(r)){let s=this.sourceMapOverrides.apply(r);r=s===r?new uG.URL(r).pathname.slice(1):s}else if(Tc.isAbsolute(r))r=this.sourceMapOverrides.apply(r);else return`<node_internals>/${r}`;let o=_n(this.options.basePath??"",r);return this.rebaseRemoteToLocal(o)}absolutePathToUrl(r){return Oe(this.rebaseLocalToRemote(Tc.normalize(r)))}async absolutePathToUrlRegexp(r){let n=r;try{n=await this.fsUtils.realPath(r)}catch{}return jy(n,r)?Gn(this.absolutePathToUrl(r)):(this.linkedBp?.warn(),Gn(this.absolutePathToUrl(r))+"|"+Gn(this.absolutePathToUrl(n)))}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;let i=f_(n.sourceRoot,r),o=this.sourceMapOverrides.apply(i);return o!==i?Lt(o):an(r)?bt(r):!Tc.isAbsolute(r)&&this.options.basePath?_n(await d_(this.options.remoteRoot&&kr(n.sourceRoot)&&this.rebaseRemoteToLocal(n.sourceRoot)||n.sourceRoot,n.metadata.compiledPath,{"/":this.options.basePath},Z5(this.fsUtils,n.metadata.compiledPath),this.logger),r):this.rebaseRemoteToLocal(r)||r}};var Qr=Symbol("ISourcePathResolverFactory"),Fi=class{constructor(e,r){this.fsUtils=e;this.linkedBp=r}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new Oi(this.fsUtils,Oi.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,Oi.getOptions(e),r);throw new Error(`Not usable for type ${e.type}`)}};Fi=T([(0,kn.injectable)(),v(0,(0,kn.inject)(Mr)),v(1,(0,kn.optional)()),v(1,(0,kn.inject)(mg))],Fi);var yf=class{constructor(e,r,n,i){this.initializeParams=e;this.vueMapper=r;this.fsUtils=n;this.linkedBp=i}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new Oi(this.fsUtils,Oi.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,Oi.getOptions(e),r);{let n=!!e.inspectUri;return new(n?H_:ru)(this.vueMapper,this.fsUtils,{workspaceFolder:e.__workspaceFolder,resolveSourceMapLocations:e.resolveSourceMapLocations,baseUrl:sG(e),localRoot:null,remoteRoot:null,pathMapping:{"/":e.webRoot,...e.pathMapping},sourceMapOverrides:e.sourceMapPathOverrides,clientID:this.initializeParams.clientID,remoteFilePrefix:e.__remoteFilePrefix},r)}}};yf=T([(0,kn.injectable)(),v(0,(0,kn.inject)(cn)),v(1,(0,kn.inject)(Up)),v(2,(0,kn.inject)(Mr)),v(3,(0,kn.optional)()),v(3,(0,kn.inject)(mg))],yf);var cG=require("url");var y_=class extends Ya{constructor(){super(...arguments);this.baseFilter=aa(this.launchParams);this.filter=r=>{let{debugWebWorkerExtHost:n,debugWebviews:i}=this.launchParams;return!!(n&&(r.type==="worker"&&r.title==="DebugWorkerExtensionHost"||r.type==="page"&&r.title.includes("[Extension Development Host]"))||i&&r.type==="iframe"&&this.baseFilter(r))}}static async connectRenderer(r,n,i,o,s,a){let c=await r.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=r.createSession(c.sessionId);return new this(r,void 0,l,n,o,s,i,a)}waitForMainTarget(r){let n=this.launchParams;return n.debugWebWorkerExtHost&&this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(async({targetInfo:i})=>{if(!i.url.includes(n.__sessionId))return;let o=await this._browser.Target.attachToTarget({targetId:i.targetId,flatten:!0});o&&this.attachedToTarget(i,o.sessionId,!1)})),super.waitForMainTarget(r)}attachedToTarget(r,n,i,o){let s=super.attachedToTarget(r,n,i||this.filter(r),o,!1);return r.type==="iframe"&&s.setComputeNameFn(Sye),s}},Sye=t=>{let e;try{e=new cG.URL(t.targetInfo.url)}catch{return}switch(e.searchParams.get("purpose")){case"customEditor":return`${e.searchParams.get("extensionId")} editor: ${e.host}`;case"notebookRenderer":return`Notebook Renderer: ${e.host}`;default:let r=e.searchParams.get("extensionId");return`Webview: ${r?r+" ":""} ${e.host}`}};var Bi=class extends li{constructor(r,n,i){super(r,n);this.pathResolverFactory=i}async launch(r,n){if(r.type!=="pwa-extensionHost"||r.request!=="attach")return{blockSessionTermination:!1};let i=Bi.debugIdToRendererDebugPort.get(r.__sessionId);if(!i)return{blockSessionTermination:!1};let o=Ks({name:"Webview",type:"pwa-chrome",request:"attach",port:i,__workspaceFolder:r.__workspaceFolder,urlFilter:"",...r.rendererDebugOptions});return o.__sessionId=r.__sessionId,o.debugWebWorkerExtHost=r.debugWebWorkerHost,o.debugWebviews=r.debugWebviews,super.launch(o,n).catch(s=>this.logger.error("runtime.exception","Error in webview attach",{err:s})),{blockSessionTermination:!1}}async acquireConnectionInner(r,n,i){let o=new Se,s=await new Promise((a,u)=>{let c=(0,lG.createConnection)({port:n.port},()=>a(c));c.on("error",u),o.push(i.onCancellationRequested(()=>{c.destroy(),u(new Error("connection timed out"))}))}).finally(()=>o.dispose());return new Nt(new ci(this.logger,s),this.logger,r)}async getTargetFilter(r){return r.filter}async createTargetManager(r,n,i){return new y_(r,void 0,r.rootSession(),this.pathResolverFactory.create(n,this.logger),this.logger,i.telemetryReporter,n,i.targetOrigin)}};Bi.debugIdToRendererDebugPort=new Map,Bi=T([(0,bf.injectable)(),v(0,(0,bf.inject)(ce)),v(1,(0,bf.inject)(Ze)),v(2,(0,bf.inject)(Qr))],Bi);var No=class{constructor(){this.target={queue:[]}}connectTo(e){this.target={logger:e}}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}log(e){this.target&&("queue"in this.target?this.target.queue.push(e):this.target.logger.log(e))}getRecentLogs(){return this.target?"queue"in this.target?this.target.queue:this.target.logger.getRecentLogs():[]}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}setup(){throw new Error("A ProxyLogger cannot be setup()")}dispose(){this.target=void 0}forTarget(){return new No}};var pG=Symbol("ITargetOrigin"),b_=class{constructor(e){this.id=e}},vf=class{constructor(e){this.id=e}};var v_=class{constructor(e,r){this.parentList=e;this.logger=r;this.targets=new To;this.onTerminatedEmitter=new z;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;e.onAdd(([,n])=>{n.parent&&this.targets.get(n.parent.id)&&this.targets.add(n.id,n.target)}),e.onRemove(([n])=>{this.targets.remove(n)&&!this.targets.size&&this.onTerminatedEmitter.fire({killed:!0,code:0})})}async launch(e,r){if(e.type!=="node-terminal"||e.request!=="attach")return{blockSessionTermination:!1};let n=this.parentList.get(e.delegateId);if(n===void 0)return setTimeout(()=>this.onTerminatedEmitter.fire({killed:!0,code:0}),1),{blockSessionTermination:!0};let i=n.target.targetOrigin();if(!(i instanceof vf))throw new Error("Expected delegate session to have a mutable target origin");let o=n.target.logger;if(!(o instanceof No))throw new Error("Expected delegate session to have a proxy logger");return i.id=r.targetOrigin.id,o.connectTo(this.logger),setTimeout(()=>{this.targets.add(e.delegateId,n.target),n.dap.connect(r.dap)},0),{blockSessionTermination:!0}}terminate(){for(let e of this.targets.value())e.stop();return Promise.resolve()}restart(){for(let e of this.targets.value())e.restart();return Promise.resolve()}targetList(){return[...this.targets.value()]}dispose(){this.terminate()}};var fG=A(J());var Eye=0,Uo=class{constructor(){this.delegateSessions=new To;this.refsByTarget=new WeakMap}createLauncher(e){return new v_(this.delegateSessions,e)}addDelegate(e,r,n){let i={id:Eye++,target:e,dap:r,parent:n&&this.refsByTarget.get(n)};return this.refsByTarget.set(e,i),this.delegateSessions.add(i.id,i),i.id}removeDelegate(e){let r=this.refsByTarget.get(e);r&&this.delegateSessions.remove(r.id)}};Uo=T([(0,fG.injectable)()],Uo);var EG=A(J());var Ge=class{constructor(e,r,n){this.major=e;this.minor=r;this.patch=n}static parse(e){let r=e.split(".").map(Number);if(r.length!==3||r.some(isNaN))throw new SyntaxError(`Input string '${e}' is not a semver`);return new Ge(r[0],r[1],r[2])}static min(e,r){return e.lt(r)?e:r}compare(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}gt(e){return this.compare(e)>0}gte(e){return this.compare(e)>=0}lt(e){return this.compare(e)<0}lte(e){return this.compare(e)<=0}toString(){return`${this.major}.${this.minor}.${this.patch}`}};var _G=A(J());var vG=A(hG()),qo=A(require("fs")),Rc=A(J()),wG=A(require("net")),Gx=A(require("os")),Kx=A(require("path"));var A_=class{constructor(e,r){this.sessionId=e;this.sink=r;this.onMessageEmitter=new z;this.onEndEmitter=new z;this.disposables=new Se;this.onMessage=this.onMessageEmitter.event;this.onEnd=this.onEndEmitter.event;this.disposables.push(r.NodeWorker.on("detachedFromWorker",n=>{n.sessionId===e&&(this.onEndEmitter.fire(),this.dispose())}),r.NodeWorker.on("receivedMessageFromWorker",n=>{n.sessionId===e&&this.onMessageEmitter.fire([n.message,new zr])}))}send(e){this.sink.NodeWorker.sendMessageToWorker({message:e,sessionId:this.sessionId})}dispose(){this.disposables.isDisposed||(this.disposables.dispose(),this.onEndEmitter.fire())}};var qx=":::",I_=class{constructor(e){this.processEnv=e}get nodeOptions(){return this.processEnv.NODE_OPTIONS}set nodeOptions(e){e===void 0?delete this.processEnv.NODE_OPTIONS:this.processEnv.NODE_OPTIONS=e}get inspectorOptions(){let e=this.processEnv.VSCODE_INSPECTOR_OPTIONS;if(!e)return;let r=e.split(qx).find(n=>!!n);if(r)try{return JSON.parse(r)}catch{return}}set inspectorOptions(e){e===void 0?delete this.processEnv.VSCODE_INSPECTOR_OPTIONS:this.processEnv.VSCODE_INSPECTOR_OPTIONS=JSON.stringify(e)}unsetForTree(){delete this.processEnv.VSCODE_INSPECTOR_OPTIONS}updateInspectorOption(e,r){let n=this.inspectorOptions;n&&(this.inspectorOptions={...n,[e]:r})}};var Wx=require("path"),mG=(0,Wx.join)(__dirname,"watchdog.js"),S_=(0,Wx.join)(__dirname,"bootloader.js");var vg=A(_e()),pi=A(J()),jo=require("path");var yg=A(J()),gG=require("path");var $c=Symbol("IPackageJsonProvider"),E_={getPath:()=>Promise.resolve(void 0),getContents:()=>Promise.resolve(void 0)},wf=class{constructor(e,r){this.fs=e;this.config=r;this.getPath=Ae(async()=>{if(this.config.type!=="pwa-node"||this.config.request!=="launch")return;let e=await $l(this.fs,this.config.cwd,"package.json");return e?(0,gG.join)(e,"package.json"):void 0});this.getContents=Ae(async()=>{let e=await this.getPath();if(e)try{let r=await this.fs.readFile(e);return JSON.parse(r.toString())}catch{return}})}};wf=T([(0,yg.injectable)(),v(0,(0,yg.inject)(Mr)),v(1,(0,yg.inject)(Me))],wf);var fi=Symbol("INodeBinaryProvider");function D_(t,e){return t.has(1)?e.addNodeOption("--inspect-publish-uid=http"):e}var $ye=new Set(["npm","yarn","pnpm","tnpm","cnpm"]),HG=t=>$ye.has((0,jo.basename)(t,(0,jo.extname)(t))),yG=(t,e)=>{if(!(!t||!HG(t)))return e.find(r=>!r.startsWith("-")&&r!=="run"&&r!=="run-script")},Vx=new Ge(12,0,0),Rye=new Ge(8,0,0),Mye=[{inclusiveMin:new Ge(16,0,0),inclusiveMax:new Ge(16,3,99),message:vg.t("Some breakpoints might not work in your version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes. Details: https://aka.ms/AAcsvqm")},{inclusiveMin:new Ge(7,0,0),inclusiveMax:new Ge(8,99,99),message:vg.t("You're running an outdated version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes.")}],Ar=class{constructor(e,r){this.path=e;this.version=r;this.capabilities=new Set;r===void 0&&(r=Vx),r.gte(new Ge(12,0,0))&&this.capabilities.add(0),r.gte(new Ge(12,6,0))&&this.capabilities.add(1)}get isPreciselyKnown(){return this.version!==void 0}get warning(){if(this.version){for(let e of Mye)if(e.inclusiveMax.gte(this.version)&&e.inclusiveMin.lte(this.version))return e}}has(e,r){return!this.isPreciselyKnown&&r!==void 0?r:this.capabilities.has(e)}},bg=class extends ee{constructor(r,n){super(r1(r.toString(),n));this.version=r;this.location=n}},kye=["node","node64","electron"],Oye=new Map([[11,new Ge(12,0,0)],[10,new Ge(12,0,0)],[9,new Ge(12,0,0)],[8,new Ge(12,0,0)],[7,new Ge(12,0,0)],[6,new Ge(12,0,0)],[5,new Ge(10,0,0)],[4,new Ge(10,0,0)],[3,new Ge(10,0,0)],[2,new Ge(8,0,0)],[1,new Ge(8,0,0)]]),Ts=class{constructor(e,r,n){this.logger=e;this.fs=r;this.packageJson=n;this.knownGoodMappings=new Map}async resolveAndValidate(e,r="node",n,i){try{return await this.resolveAndValidateInner(e,r,n,i)}catch(o){if(!(o instanceof bg))throw o;if(await this.shouldTryDebuggingAnyway(o))return new Ar(o.location,o.version instanceof Ge?o.version:void 0);throw o}}shouldTryDebuggingAnyway(e){return Promise.resolve(!1)}async resolveAndValidateInner(e,r,n,i){let o=await this.resolveBinaryLocation(r,e);if(this.logger.info("runtime.launch","Using binary at",{location:o,executable:r}),!o)throw new ee(rS(r,vg.t("path does not exist")));if(n)return new Ar(o,new Ge(n,0,0));let s=qy(o);if(!kye.includes(s)){if(HG(o)){let H=await this.packageJson.getPath();H&&(e=e.addToPath((0,jo.resolve)((0,jo.dirname)(H),"node_modules/.bin"),"prepend"))}try{let H=await this.resolveAndValidateInner(e,"node",void 0,i);return new Ar(o,H.version)}catch(H){if(l1(H,9230))throw H;return new Ar(o,void 0)}}if(o.startsWith("/snap/"))return new Ar(o,void 0);let a=this.knownGoodMappings.get(o);if(a)return a;let u=await this.getVersionText(o,i);if(!u)return new Ar(o,void 0);this.logger.info("runtime.launch","Discovered version",{version:u});let c=/v([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(u);if(!c)throw new bg(u,o);let[,l,p,f]=c.map(Number),m=new Ge(l,p,f);if(s==="electron"){let H=await this.resolveAndValidate(e);m=Ge.min(Oye.get(m.major)??Vx,H.version??Vx)}if(m.lt(Rye))throw new bg(m,o);let h=new Ar(o,m);return this.knownGoodMappings.set(o,h),h}async resolveBinaryLocation(e,r){return e&&(0,jo.isAbsolute)(e)?await yk(this.fs,e,r):await dy(this.fs,e,r.value)}async getVersionText(e,r){try{let{stdout:n}=await nw(e,["--version"],{env:_t.processEnv().defined(),cwd:r});return n.trim()}catch(n){throw r&&!(await wn(this.fs,r))?.isDirectory()?new ee(t1(r)):new ee(rS(e,n.message))}}};Ts=T([(0,pi.injectable)(),v(0,(0,pi.inject)(ce)),v(1,(0,pi.inject)(we)),v(2,(0,pi.inject)($c))],Ts);var _f=class extends Ts{constructor(r,n,i,o){super(r,n,i);this.vscode=o}async shouldTryDebuggingAnyway({message:r}){if(!this.vscode)return!1;let n=vg.t("Yes");return await this.vscode.window.showErrorMessage(r,n)===n}};_f=T([v(0,(0,pi.inject)(ce)),v(1,(0,pi.inject)(we)),v(2,(0,pi.inject)($c)),v(3,(0,pi.optional)()),v(3,(0,pi.inject)(Yn))],_f);var bG=require("path");var Af=class{constructor(e,r,n,i,o,s,a={},u){this.launchConfig=e;this.targetOriginValue=r;this.connection=n;this.targetInfo=o;this.logger=s;this.lifecycle=a;this._parent=u;this._serialize=Promise.resolve(void 0);this._attached=!1;this._onNameChangedEmitter=new z;this._onDisconnectEmitter=new z;this.entryBreakpoint=void 0;this.onDisconnect=this._onDisconnectEmitter.event;this.onNameChanged=this._onNameChangedEmitter.event;this.connection=n,this._cdp=i,i.pause(),this._waitingForDebugger=o.type==="waitingForDebugger",o.title?this._targetName=`${(0,bG.basename)(o.title)} [${o.processId}]`:this._targetName=`[${o.processId}]`,i.Target.on("targetDestroyed",()=>this.connection.close()),n.onDisconnected(()=>this._disconnected())}id(){return this.targetInfo.targetId}processId(){return this.targetInfo.processId}name(){return this._targetName}fileName(){return this.targetInfo.title}type(){return"node"}targetOrigin(){return this.targetOriginValue}parent(){return this._parent}async initialize(){this.lifecycle.initialized&&(this.entryBreakpoint=await this.lifecycle.initialized(this)||void 0)}waitingForDebugger(){return this._waitingForDebugger}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?Oe(e):e}supportsCustomBreakpoints(){return!1}executionContextName(){return this._targetName}hasParent(){return!!this._parent}async runIfWaitingForDebugger(){await this._cdp.Runtime.runIfWaitingForDebugger({})}async _disconnected(){this._onDisconnectEmitter.fire()}canAttach(){return!this._attached}async attach(){return this._serialize=this._serialize.then(async()=>{if(!this._attached)return this._doAttach()}),this._serialize}async _doAttach(){this._waitingForDebugger=!1,this._attached=!0;let e=await this._cdp.Target.attachToTarget({targetId:this.targetInfo.targetId});if(!e){this.logger.info("runtime.launch","Failed to attach to target",{targetId:this.targetInfo.targetId});return}this._cdp.NodeWorker.enable({waitForDebuggerOnStart:!0}),e&&"__dynamicAttach"in e&&(await this._cdp.Runtime.enable({}),await this._cdp.Debugger.enable({}));let r;return this._cdp.Runtime.on("executionContextCreated",n=>{n.context.auxData&&n.context.auxData.isDefault&&(r=n.context.id)}),this._cdp.Runtime.on("executionContextDestroyed",n=>{n.executionContextId===r&&this.connection.close()}),this._cdp}async afterBind(){this._cdp.resume()}canDetach(){return this._attached}async detach(){this._serialize=this._serialize.then(async()=>{this._waitingForDebugger&&await(await this._doAttach())?.Runtime.runIfWaitingForDebugger({}),this._attached&&this._doDetach()})}async _doDetach(){await Promise.all([this._cdp.Target.detachFromTarget({targetId:this.targetInfo.targetId}),this._cdp.NodeWorker.disable({})]),this.connection.close(),this._attached=!1}canRestart(){return!1}restart(){}canStop(){return!0}stop(){try{this.lifecycle.close&&this.lifecycle.close(this)}finally{this.connection.close()}}};var mn=class{constructor(e,r,n,i){this.pathProvider=e;this.logger=r;this.portLeaseTracker=n;this.pathResolverFactory=i;this.serverConnections=new Set;this.targets=new To;this.onTerminatedEmitter=new z;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;this.bootloaderFile=Ae(this.getBootloaderFile.bind(this))}async launch(e,r){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};this._stopServer();let{server:i,pipe:o}=await this._startServer(r.telemetryReporter),s=this.logger.forTarget(),a=this.run={server:i,serverAddress:o,params:n,context:r,logger:s,pathResolver:this.pathResolverFactory.create(n,this.logger)};return await this.launchProgram(a),{blockSessionTermination:!0}}async terminate(){this.program?await this.program.stop():this.onProgramTerminated({code:0,killed:!0})}async restart(e){if(!this.run)return;let r=this.program;r&&(this.program=void 0,await r.stop(),await Promise.race([Te(2e3).then(()=>!1),Promise.all([...this.serverConnections].map(i=>new Promise(o=>i.onDisconnected(o))))])||(this.logger.warn("runtime.launch","Timeout waiting for server connections to close"),this.closeAllConnections())),await this.launchProgram({...this.run,params:e?this.resolveParams(e)??this.run.params:this.run.params,context:{...this.run.context,cancellationToken:this.run.params.timeout>0?sr.withTimeout(this.run.params.timeout).token:ar}})}targetList(){return[...this.targets.value()]}dispose(){this._stopServer()}onProgramTerminated(e){this.onTerminatedEmitter.fire(e),this._stopServer(),this.program=void 0}resolveNodePath(e,r="node"){return this.pathProvider.resolveAndValidate(_t.merge(_t.processEnv(),this.getConfiguredEnvironment(e)),r,e.nodeVersionHint,e.cwd)}getConfiguredEnvironment(e){let r=_t.empty;if(e.envFile)try{r=r.merge(Nye(e.envFile))}catch(n){throw new ee(e1(n.message))}return r.merge(e.env)}async resolveEnvironment({params:e,serverAddress:r},n,i){let o=this.getConfiguredEnvironment(e),s=await this.bootloaderFile(e.cwd,n),a={inspectorIpc:r,deferredMode:!1,waitForDebugger:"",execPath:await dy(qo.promises,"node",process.env),onlyEntrypoint:!e.autoAttachChildProcesses,verbose:e.trace===!0||typeof e.trace=="object"&&e.trace.stdio?!0:void 0,autoAttachMode:"always",mandatePortTracking:this.portLeaseTracker.isMandated?!0:void 0,...i},u={NODE_OPTIONS:` --require ${s.interpolatedPath} `,VSCODE_INSPECTOR_OPTIONS:qx+JSON.stringify(a),ELECTRON_RUN_AS_NODE:null},c=o.lookup("NODE_OPTIONS");c&&(u.NODE_OPTIONS+=` ${c}`);let l=_t.processEnv().lookup("NODE_OPTIONS");return l&&(u.NODE_OPTIONS+=` ${l}`),o.merge({...u})}createLifecycle(e,r,n){return{}}async _startServer(e){let r=fy(),n=await new Promise((i,o)=>{let s=wG.createServer(a=>this._startSession(a,e)).on("error",o).listen(r,()=>i(s))});return{pipe:r,server:n}}_stopServer(){this.run?.server.close(),this.run=void 0,this.bootloaderFile.value?.then(e=>e.dispose()),this.bootloaderFile.forget(),this.closeAllConnections()}closeAllConnections(){this.serverConnections.forEach(e=>e.close()),this.serverConnections.clear()}async _startSession(e,r){if(!this.run)return;let{connection:n,cdp:i,targetInfo:o}=await this.acquireTarget(e,r,this.run.logger);if(!this.run){e.destroy();return}o.processId===void 0&&(o.processId=Number(o.targetId));let s=new Af(this.run.params,this.run.context.targetOrigin,n,i,o,this.run.logger,this.createLifecycle(i,this.run,o),o.openerId?this.targets.get(o.openerId):void 0);this.listenToWorkerDomain(i,r,s),this.targets.add(o.targetId,s),s.onDisconnect(()=>this.targets.remove(o.targetId))}async listenToWorkerDomain(e,r,n){e.NodeWorker.on("attachedToWorker",i=>{let o=new A_(i.sessionId,e),s=new bp(n.launchConfig,{attached:!0,canAccessOpener:!1,type:"node-worker",targetId:`${n.id()}-${i.sessionId}`,title:i.workerInfo.title,url:i.workerInfo.url,openerId:n.id()},n,n.targetOrigin(),new Nt(o,n.logger,r).rootSession(),n.logger),a=new Se;a.push(o),a.push(n.onDisconnect(()=>a.dispose())),a.push(o.onEnd(()=>a.dispose())),a.callback(()=>this.targets.remove(s.id())),this.targets.add(s.id(),s)})}async acquireTarget(e,r,n){let i=new Nt(new ci(n,e),n,r);this.serverConnections.add(i),i.onDisconnected(()=>this.serverConnections.delete(i));let o=i.rootSession(),{targetInfo:s}=await new Promise(c=>o.Target.on("targetCreated",c)),a=s,u=this.portLeaseTracker.register(a.processInspectorPort);return i.onDisconnected(()=>u.dispose()),{targetInfo:a,cdp:o,connection:i,logger:n}}async getBootloaderFile(e,r){let n=ze(S_);if(!n.includes(" "))return{interpolatedPath:n,dispose:()=>{}};if(r.has(0))return{interpolatedPath:`"${n}"`,dispose:()=>{}};let i=`require(${JSON.stringify(n)})`;if(!Gx.tmpdir().includes(" ")||!e){let a=Kx.join(Gx.tmpdir(),"vscode-js-debug-bootloader.js");return await qo.promises.writeFile(a,i),{interpolatedPath:a,dispose:()=>{}}}let o=".vscode-js-debug-bootloader.js",s=Kx.join(e,o);return await qo.promises.writeFile(s,i),{interpolatedPath:`./${o}`,dispose:()=>qo.unlinkSync(s)}}async gatherTelemetryFromCdp(e,r){for(let n=0;n<8;n++){let i=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:"typeof process === 'undefined' || process.pid === undefined ? 'process not defined' : ({ processId: process.pid, nodeVersion: process.version, architecture: process.arch })"+ht()});if(!this.program)return;if(!i||!i.result.value){this.logger.error("runtime.target","Undefined result getting telemetry");return}if(typeof i.result.value!="object"){this.logger.info("runtime.target","Process not yet defined, will retry"),await Te(50*2**n);continue}let o=i.result.value;return r.context.telemetryReporter.report("nodeRuntime",{version:o.nodeVersion,arch:o.architecture}),this.program.gotTelemetery(o),o}}};mn=T([(0,Rc.injectable)(),v(0,(0,Rc.inject)(fi)),v(1,(0,Rc.inject)(ce)),v(2,(0,Rc.inject)(at)),v(3,(0,Rc.inject)(Qr))],mn);function Nye(t){if(!qo.existsSync(t))return{};let e=Uye(qo.readFileSync(t,"utf8"));return vG.parse(Buffer.from(e))}function Uye(t){return t&&t[0]==="\uFEFF"&&(t=t.substr(1)),t}var jye=["NODE_OPTIONS","VSCODE_INSPECTOR_OPTIONS"],iu=class extends mn{async appendEnvironmentVariables(e,r){let n="typeof process==='undefined'||process.pid===undefined?'process not defined':(()=>{"+Object.entries(r.defined()).map(([i,o])=>{let s=JSON.stringify(i);return jye.includes(i)?`process.env[${s}]=(process.env[${s}]||'')+${JSON.stringify(o)}`:`process.env[${s}]=${JSON.stringify(o)}`}).join(";")+"})()"+ht();for(let i=0;i<5;i++){let o=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:n});if(!o){this.logger.error("runtime.target","Undefined result setting child environment vars");return}if(!o.exceptionDetails&&o.result.value!=="process not defined")return;this.logger.error("runtime.target","Error setting child environment vars",o),await Te(50)}}};iu=T([(0,_G.injectable)()],iu);var C_=class{constructor(e,r){this.a=e;this.b=r;this.stopped=Promise.race([this.a.stopped.then(async e=>await this.b.stop()&&e),this.b.stopped.then(async e=>await this.a.stop()&&e)])}gotTelemetery(e){this.a.gotTelemetery(e),this.b.gotTelemetery(e)}async stop(){return(await Promise.all([this.a.stop(),this.b.stop()]))[0]}},P_=class{constructor(e,r,n){this.child=e;this.logger=r;this.killBehavior=n;this.killed=!1;this.stopped=new Promise((i,o)=>{e.once("exit",s=>i({killed:this.killed,code:s||0})),e.once("error",s=>o({killed:this.killed,code:1,error:s}))})}gotTelemetery(){}stop(){return this.killed=!0,Ri(this.child.pid,this.logger,this.killBehavior),this.stopped}},$s=class{constructor(){this.stopped=new Promise(e=>this.stopDefer=e)}gotTelemetery(e){this.telemetry=e}stop(){return this.stopDefer({code:0,killed:!0}),this.stopped}},su=class extends $s{constructor(r){super();this.wd=r;r.onEnd(n=>{this.stopDefer(n),this.wd.dispose()})}stop(){return this.wd.dispose(),this.stopped}},wg=class{constructor(e,r,n){this.terminalResult=e;this.logger=r;this.killBehavior=n;this.didStop=!1;this.stopped=new Promise(e=>this.onStopped=r=>{this.didStop=!0,e({code:0,killed:r})});e.processId&&this.startPollLoop(e.processId)}gotTelemetery({processId:e}){if(this.didStop){Ri(e,this.logger,this.killBehavior);return}this.loop||this.startPollLoop(e)}stop(){return this.didStop?this.stopped:(this.didStop=!0,this.loop?(Ri(this.loop.processId,this.logger,this.killBehavior),this.startPollLoop(this.loop.processId,wg.killConfirmInterval)):this.terminalResult.shellProcessId?(Ri(this.terminalResult.shellProcessId,this.logger,this.killBehavior),this.startPollLoop(this.terminalResult.shellProcessId,wg.killConfirmInterval)):this.onStopped(!0),this.stopped)}startPollLoop(e,r=wg.terminationPollInterval){this.loop&&clearInterval(this.loop.timer);let n={processId:e,timer:setInterval(()=>{qye(e)||(clearInterval(n.timer),this.onStopped(!0))},r)};this.loop=n}},ou=wg;ou.terminationPollInterval=1e3,ou.killConfirmInterval=200;function qye(t){try{return process.kill(t,0),!0}catch{return!1}}var SG=A(require("net"));var AG=require("crypto"),IG=()=>(0,AG.randomBytes)(12).toString("hex");var gn=class{constructor(e,r){this.info=e;this.server=r;this.onEndEmitter=new z;this.cts=new sr;this.gracefulExit=!1;this.targetAlive=!1;this.targetInfo={targetId:this.info.ownId??IG(),processId:Number(this.info.pid)||0,type:this.info.waitForDebugger?"waitingForDebugger":"",title:this.info.scriptName,url:"file://"+this.info.scriptName,openerId:this.info.openerId,attached:!0,canAccessOpener:!1,processInspectorPort:Number(new URL(this.info.inspectorURL).port)};this.onEnd=this.onEndEmitter.event;this.listenToServer()}get isTargetAlive(){return this.targetAlive}static async attach(e){let r=await new Promise((i,o)=>{let s=SG.createConnection(e.ipcAddress,()=>i(s));s.on("error",o)}),n=new ci(oi.null,r);return new gn(e,n)}listenToServer(){let{server:e,targetInfo:r}=this;e.send(JSON.stringify({method:"Target.targetCreated",params:{targetInfo:r}})),e.onMessage(async([n])=>{if(this.target&&!n.includes("Target.attachToTarget")&&!n.includes("Target.detachFromTarget")){this.target.send(n);return}let i=await this.execute(n);i&&e.send(JSON.stringify(i))}),e.onEnd(()=>{this.disposeTarget(),this.onEndEmitter.fire({killed:this.gracefulExit,code:this.gracefulExit?0:1})})}dispose(){this.gracefulExit=!0,this.cts.dispose(!0),this.disposeTarget(),this.server.dispose()}async execute(e){let r=JSON.parse(e);switch(r.method){case"Target.attachToTarget":return this.target&&this.disposeTarget(),this.target=await this.createTarget(),{id:r.id,result:{sessionId:this.targetInfo.targetId,__dynamicAttach:this.info.dynamicAttach?!0:void 0}};case"Target.detachFromTarget":return this.gracefulExit=!0,this.disposeTarget(),{id:r.id,result:{}};default:this.target?.send(r);return}}async createTarget(){this.gracefulExit=!1;let e=await Yr.create(this.info.inspectorURL,this.cts.token,this.info.remoteHostHeader);return e.onMessage(([r])=>this.server.send(r)),e.onEnd(()=>{e&&this.server.send(JSON.stringify({method:"Target.targetDestroyed",params:{targetId:this.targetInfo.targetId,sessionId:this.targetInfo.targetId}})),this.targetAlive=!1,this.server.dispose()}),e}disposeTarget(){this.target&&(this.target.dispose(),this.target=void 0)}};var zx=class extends su{constructor(r,n){super(r);this.logger=n;this.stopped.then(()=>{this.telemetry&&Ri(this.telemetry.processId,this.logger,"polite")})}},If=class extends iu{constructor(){super(...arguments);this.restarting=!1}async restart(){this.restarting=!0,this.onProgramTerminated({code:0,killed:!0,restart:!0}),this.program?.stop()}resolveParams(r){return r.type==="pwa-extensionHost"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=await lf(`http://localhost:${r.params.port}`,r.context.cancellationToken,this.logger),i=await gn.attach({ipcAddress:r.serverAddress,scriptName:"Extension Host",inspectorURL:n,waitForDebugger:!0,dynamicAttach:!0}),o=this.program=new zx(i,this.logger);this.program.stopped.then(s=>{o===this.program&&this.onProgramTerminated(s)})}createLifecycle(r,n,i){return i.openerId?{}:{initialized:()=>this.onFirstInitialize(r,n,i)}}async onFirstInitialize(r,n,i){this.setEnvironmentVariables(r,n,i.targetId);let o=await this.gatherTelemetryFromCdp(r,n),s=this.program;if(o&&s){let a=new ou({processId:o.processId},this.logger,"forceful");a.stopped.then(()=>s.stop()),s.stopped.then(()=>{this.restarting||a.stop()})}}async setEnvironmentVariables(r,n,i){if(!n.params.autoAttachChildProcesses)return;let o=await this.resolveEnvironment(n,new Ar("node",Ge.parse(process.versions.node)),{openerId:i});return this.appendEnvironmentVariables(r,o.update("ELECTRON_RUN_AS_NODE",null))}};If=T([(0,EG.injectable)()],If);var _g=require("fs"),DG=A(J());var Sf=class extends mn{resolveParams(e){return e.type==="pwa-extensionHost"&&e.request==="launch"?e:void 0}async launchProgram(e){let r=e.params.port||await ya(),n=await e.context.dap.launchVSCodeRequest({args:Wye(e.params,r),env:this.getConfiguredEnvironment(e.params).defined(),debugRenderer:e.params.debugWebviews||e.params.debugWebWorkerHost});n.rendererDebugPort&&Bi.debugIdToRendererDebugPort.set(e.params.__sessionId,n.rendererDebugPort),this.program=new $s,this.program.stop()}};Sf=T([(0,DG.injectable)()],Sf);var Wye=(t,e)=>{let r=t.args.map(n=>{if(n.startsWith("-")){let i=n.split("=",2);return i.length===2&&((0,_g.existsSync)(i[1])||(0,_g.existsSync)(i[1]+".js"))?{prefix:i[0]+"=",path:i[1]}:{prefix:n}}else{try{let i=(0,_g.lstatSync)(n);if(i.isDirectory())return{prefix:"--folder-uri=",path:n};if(i.isFile())return{prefix:"--file-uri=",path:n}}catch{}return{path:n}}});return t.noDebug||r.unshift({prefix:`--inspect-brk-extensions=${e}`}),r.unshift({prefix:`--debugId=${t.__sessionId}`}),r};var BG=A(_e()),kc=A(J());var CG=require("crypto"),Ag=require("fs"),PG=require("os"),xG=A(require("path")),x_=class{constructor(){this.disposed=!1;this.path=xG.join((0,PG.tmpdir)(),`node-debug-callback-${(0,CG.randomBytes)(8).toString("hex")}`);this.file=Ag.promises.open(this.path,"w")}static isValid(e){try{let r=(0,Ag.readFileSync)(e);return r.length?r.readDoubleBE()>Date.now()-x_.recencyDeadline:!1}catch{return!1}}async startTouchLoop(){await this.touch(),this.disposed||(this.updateInterval=setInterval(()=>this.touch(),x_.updateInterval))}async touch(e=()=>Date.now()){let r=await this.file,n=Buffer.alloc(8);n.writeDoubleBE(e()),await r.write(n,0,n.length,0)}async dispose(){if(!this.disposed){this.disposed=!0,this.updateInterval&&clearInterval(this.updateInterval);try{await(await this.file).close(),await Ag.promises.unlink(this.path)}catch{}}}},Ef=x_;Ef.updateInterval=1e3,Ef.recencyDeadline=2e3;var kG=require("fs");var $G=require("path");var LG=require("child_process"),TG=A(i_()),Df=class{constructor(e=LG.spawn){this.spawn=e}lookup(e,r){return new Promise((n,i)=>{let o=this.createProcess(),s=this.createParser();o.on("error",i),o.stderr.on("error",a=>i(`Error finding processes: ${a.toString()}`)),o.stdout.pipe((0,TG.default)(/\r?\n/)).on("data",a=>{let u=s(a);u&&(r=e(u,r))}),o.on("close",(a,u)=>{a===0?n(r):u?i(new Error(`process terminated with signal: ${u}`)):a&&i(new Error(`process terminated with exit code: ${a}`))})})}};var Cf=class extends Df{constructor(r){super();this.fsUtils=r}async getWorkingDirectory(r){try{let{stdout:n}=await nw("lsof",["-a","-dcwd","-Fn",`-p${r}`]),i=n.trim().split(`
`).pop().slice(1);return i&&(0,$G.isAbsolute)(i)&&await this.fsUtils.exists(i)?i:void 0}catch(n){if(n instanceof Hs)return;throw n}}createProcess(){return this.spawn("ps",["-xo",`pid=PID,ppid=PPID,comm=${"a".repeat(256)},command=COMMAND`])}createParser(){let r;return n=>{if(!r){r=n.indexOf("COMMAND");return}let i=/^\W*([0-9]+)\W*([0-9]+)\W*/.exec(n);if(i)return{pid:Number(i[1]),ppid:Number(i[2]),command:n.slice(i[0].length,r).trim(),args:n.slice(r).trim()}}}};var L_=class extends Cf{createProcess(){return this.spawn("ps",["-axo","pid=PID,ppid=PPID,comm:30,command=COMMAND"])}createParser(){let e=super.createParser();return r=>{let n=e(r);if(!n)return;let i=n.args.indexOf(n.command);if(i===-1)return n;for(i=i+n.command.length;i<n.args.length&&n.args[i]!==" ";)i++;return n.command=n.args.substr(0,i),n.args=n.args.substr(i+1),n}}};var RG=require("path");var T_=class extends Df{async getWorkingDirectory(){}createProcess(){let e=(0,RG.join)(process.env.WINDIR||"C:\\Windows","System32","wbem","WMIC.exe");return this.spawn(e,["process","get","CommandLine,CreationDate,ParentProcessId,ProcessId"])}createParser(){let e=/^(.*)\s+([0-9]+)\.[0-9]+[+-][0-9]+\s+([0-9]+)\s+([0-9]+)$/;return r=>{let n=e.exec(r.trim());if(!n||n.length!==5)return;let i=Number(n[4]),o=Number(n[3]),s=Number(n[2]),a=n[1].trim();if(!isNaN(i)&&!isNaN(o)&&a){let u=a;if(a[0]==='"'){let c=a.indexOf('"',1);c>0&&(u=a.substr(1,c-1),a=a.substr(c+2))}else{let c=a.indexOf(" ");c>0?(u=a.substr(0,c),a=a.substr(c+1)):a=""}return{pid:i,ppid:o,command:u,args:a,date:s}}}}};var MG=new vn(kG.promises),Ig=process.platform==="win32"?new T_:process.platform==="darwin"?new Cf(MG):new L_(MG);function $_(t){let e=/--inspect(-brk)?(=((\[[0-9a-fA-F:]*\]|[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+|[a-zA-Z0-9\.]*):)?(\d+))?/,r=/--inspect-port=(\d+)/,n,i,o=e.exec(t);return o&&o.length>=1&&(o.length>=5&&o[4]&&(n=o[4]),o.length>=6&&o[5]&&(i=parseInt(o[5]))),o=r.exec(t),o&&o.length===2&&(i=parseInt(o[1])),{address:n,port:i}}async function OG(t,e,r,n=ar){let i=await Vye(t.pid,r);if(!i)return[];let o=[],s=i.children.slice();for(;s.length;){let a=s.pop();s=s.concat(a.children);let{port:u}=$_(a.args);u&&o.push(Ox(`http://${t.hostname}:${u}`,n,r,!0).then(c=>gn.attach({ipcAddress:t.ipcAddress,scriptName:"Child Process",inspectorURL:c,waitForDebugger:!0,dynamicAttach:!0,pid:String(a.pid),openerId:e})).catch(c=>r.info("internal","Could not spawn WD for child process",{err:c,port:u,child:a})))}return(await Promise.all(o)).filter(a=>!!a)}async function Vye(t,e){let r=new Map;r.set(0,{children:[],pid:0,ppid:0,command:"",args:""});try{await Ig.lookup(({pid:i,ppid:o,command:s,args:a})=>(i!==o&&r.set(i,{pid:i,ppid:o,command:s,args:a,children:[]}),r),null)}catch(i){e.warn("internal","Error getting child process tree",i);return}let n=r.values();for(let i of n){let o=r.get(i.ppid);o&&o!==i&&o.children.push(i)}return!isNaN(t)&&t>0?r.get(t):r.get(0)}var FG=A(J());var Wo=class{create(e){return e===!1?new Xx:e===!0?new Mc({maxAttempts:1/0,delay:1e3}):new Mc({maxAttempts:e.maxAttempts??1/0,delay:e.delay??1e3})}};Wo=T([(0,FG.injectable)()],Wo);var Mc=class{constructor(e,r=0){this.options=e;this.attempt=r}get delay(){return this.options.delay}next(){return this.attempt===this.options.maxAttempts?void 0:new Mc(this.options,this.attempt+1)}reset(){return this.attempt?new Mc(this.options):this}},Xx=class{constructor(){this.delay=-1}next(){}reset(){return this}};var Pf=class extends iu{constructor(r,n,i,o,s=new Wo){super(r,n,o,i);this.restarters=s}resolveParams(r){return r.type==="pwa-node"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=async(o,s)=>{let a=this.program,u;try{r.params.websocketAddress?u=r.params.websocketAddress:u=await lf(`http://${r.params.address}:${r.params.port}`,s&&r.params.timeout>0?sr.withTimeout(r.params.timeout).token:r.context.cancellationToken,this.logger)}catch(p){if(a&&a===s)return i(o,a,{killed:!1,code:1});throw p}let c=await gn.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:u,remoteHostHeader:r.params.remoteHostHeader,waitForDebugger:!0,dynamicAttach:!0}),l=this.program=new su(c);l.stopped.then(p=>i(o.reset(),l,p))},i=async(o,s,a)=>{if(this.program!==s)return;if(a.killed){this.onProgramTerminated(a);return}let u=o.next();if(!u){this.onProgramTerminated(a);return}r.context.dap.output({output:BG.t(`Lost connection to debugee, reconnecting in {0}ms\r
`,u.delay)});let c=new $s;this.program=c;let l=await Promise.race([Te(u.delay),c.stopped]);this.program===c&&(l?this.onProgramTerminated(a):n(u,c))};return n(this.restarters.create(r.params.restart))}async terminate(r){await super.terminate(),r&&this.telemetry&&Ri(this.telemetry.processId,this.logger)}createLifecycle(r,n,i){if(i.openerId)return{};let o;return{initialized:async()=>{o=this.onFirstInitialize(r,n,i),await o},close:()=>{this.targetList().length&&this.program?.stop(),o?.then(s=>s.dispose())}}}async onFirstInitialize(r,n,i){let o=new Ef;await o.startTouchLoop();let s=new Ar("node",void 0);try{s=await this.resolveNodePath(n.params)}catch{}let[a]=await Promise.all([this.gatherTelemetryFromCdp(r,n),this.setEnvironmentVariables(r,n,o.path,i.targetId,s)]);return this.telemetry=a,a&&n.params.attachExistingChildren&&OG({pid:a.processId,nodePath:s.path,hostname:n.params.address,ipcAddress:n.serverAddress},i.targetId,this.logger).catch(u=>this.logger.warn("internal","Error watching child processes",{err:u})),o}async setEnvironmentVariables(r,n,i,o,s){if(!n.params.autoAttachChildProcesses)return;if(!await Rl(n.params.address)){this.logger.warn("runtime.target","Cannot attach to children of remote process");return}let a=await this.resolveEnvironment(n,s,{requireLease:i,openerId:o});return this.appendEnvironmentVariables(r,a)}};Pf=T([(0,kc.injectable)(),v(0,(0,kc.inject)(fi)),v(1,(0,kc.inject)(ce)),v(2,(0,kc.inject)(Qr)),v(3,(0,kc.inject)(at))],Pf);var On=A(J()),Tf=require("path");function R_(t){if(!t.runtimeArgs||t.attachSimplePort)return;let e=[];for(let r of t.runtimeArgs)/^--inspect-brk(=|$)/.test(r)?t.stopOnEntry=t.stopOnEntry||!0:e.push(r);t.runtimeArgs=e}var NG=require("os"),UG=A(require("path")),jG=require("crypto"),xf=require("fs"),Jx=class{constructor(){this.path=UG.join((0,NG.tmpdir)(),`node-debug-callback-${(0,jG.randomBytes)(8).toString("hex")}`);this.disposed=!1}read(e=Jx.pollInterval){return this.readPromise?this.readPromise:(this.readPromise=new Promise((r,n)=>{let i=setInterval(()=>{if(this.disposed){clearInterval(i),r(void 0);return}if((0,xf.existsSync)(this.path)){try{r(JSON.parse((0,xf.readFileSync)(this.path,"utf-8")))}catch(o){n(o)}finally{this.dispose()}clearInterval(i)}},e)}),this.readPromise)}dispose(){if(!this.disposed){this.disposed=!0;try{(0,xf.unlinkSync)(this.path)}catch{}}}},Sg=Jx;Sg.pollInterval=200;var Oc=A(require("path"));var Eg=Symbol("IProgramLauncher"),M_=t=>{let e=t.program;if(e&&Oc.isAbsolute(e)){let r=Oc.relative(t.cwd,e);e=Oc.isAbsolute(r)?r:`.${Oc.sep}${r}`}return e?[...t.runtimeArgs,e,...wh(t.args)]:[...t.runtimeArgs,...wh(t.args)]};var Gye=async(t,e)=>{if(typeof e.stopOnEntry=="string")return(0,Tf.resolve)(e.cwd,e.stopOnEntry);if(e.program)return(0,Tf.resolve)(e.cwd,e.program);for(let r of wh(e.args)){if(r.startsWith("-"))continue;let n=(0,Tf.resolve)(e.cwd,r);if(await t.exists(n))return n}},Lf=class extends mn{constructor(r,n,i,o,s,a,u,c,l){super(r,n,l,c);this.bpPredictor=i;this.launchers=o;this.restarters=s;this.fsUtils=a;this.packageJson=u}resolveParams(r){let n;if(r.type==="pwa-node"&&r.request==="launch"?n={...r}:"server"in r&&r.server&&"program"in r.server&&(n={...r.server}),!!n)return R_(n),n}async launchProgram(r){r.params.program&&(r.params.program=await this.tryGetCompiledFile(r.params.program)),this.attachSimplePort=await this.getSimpleAttachPortIfAny(r.params);let n=async i=>{this.program&&this.program.stop();let o=await this.resolveNodePath(r.params,r.params.runtimeExecutable||void 0),s=o.warning;s&&r.context.dap.output({category:"stderr",output:s.message});let a=new Sg,u=await this.resolveEnvironment(r,o,{fileCallback:a.path});this.attachSimplePort?(r.params.attachSimplePort||r.context.dap.output({category:"stderr",output:"Using legacy attach mode for --inspect-brk in npm scripts. We recommend removing --inspect-brk, and using `stopOnEntry` in your launch.json if you need it."}),u=u.merge({NODE_OPTIONS:null})):u=D_(o,u);let c={...r.params,env:u.value},l=this.launchers.find(f=>f.canLaunch(c));if(!l)throw new Error("Cannot find an appropriate launcher for the given set of options");let p=await l.launchProgram(o.path,c,r.context);if(this.attachSimplePort){let f=await gn.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:await lf(`http://127.0.0.1:${this.attachSimplePort}`,r.context.cancellationToken,this.logger),waitForDebugger:!0,dynamicAttach:!0});p=new C_(p,new su(f))}else a.read().then(f=>{f&&p.gotTelemetery(f)});this.program=p,p.stopped.then(async f=>{if(a.dispose(),this.program!==p)return;if(f.killed||f.code===0){this.onProgramTerminated(f);return}let m=i.next();if(!m){this.onProgramTerminated(f);return}await Te(m.delay),this.program===p&&n(m)})};return n(this.restarters.create(r.params.restart))}async getSimpleAttachPortIfAny(r){if(r.attachSimplePort)return r.attachSimplePort;let n=yG(r.runtimeExecutable,r.runtimeArgs);if(!(!n||!(await this.packageJson.getContents())?.scripts?.[n]?.includes("--inspect-brk")))return r.port??9229}createLifecycle(r,n,{targetId:i}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(r,n),!n.params.stopOnEntry)return;let o=await Gye(this.fsUtils,n.params);if(!o){this.logger.warn("runtime","Could not resolve program entrypointfrom args");return}let s="(?:entryBreakpoint){0}",a=Oe(o),u=Gn(a)+s,c=await r.Debugger.setBreakpointByUrl({urlRegex:u,lineNumber:0,columnNumber:0});return c?.breakpointId?{cdpId:c?.breakpointId,path:a}:void 0},close:()=>{let o=Number(i);if(o>0)try{process.kill(o)}catch{}}}}async tryGetCompiledFile(r){r=Lt(r);let n=(0,Tf.extname)(r);if(!n||n===".js")return r;let i=await this.bpPredictor.getPredictionForSource(r);if(!i||i.size===0)return r;let o=ia(i.values());return o?(this.logger.info("runtime.launch","Updating entrypoint to compiled file",{from:r,to:o.compiledPath,candidates:i.size}),o.compiledPath):r}};Lf=T([(0,On.injectable)(),v(0,(0,On.inject)(fi)),v(1,(0,On.inject)(ce)),v(2,(0,On.inject)(Nu)),v(3,(0,On.multiInject)(Eg)),v(4,(0,On.inject)(Wo)),v(5,(0,On.inject)(Mr)),v(6,(0,On.inject)($c)),v(7,(0,On.inject)(Qr)),v(8,(0,On.inject)(at))],Lf);var Rf=A(require("fs")),qG=require("fs"),k_=A(J()),WG=A(require("os")),Vt=A(require("path"));var O_=Symbol("INvmResolver");var $f=class{constructor(e=new vn(qG.promises),r=process.env,n=process.arch,i=process.platform,o=WG.homedir()){this.fsUtils=e;this.env=r;this.arch=n;this.platform=i;this.homedir=o}async resolveNvmVersionPath(e){let r,n=[],i=this.parseVersionString(e),o=this.env["NVS_HOME"];if(!o){let s=this.platform==="win32"?Vt.join(this.env.LOCALAPPDATA||"","nvs"):Vt.join(this.env.HOME||"",".nvs");Rf.existsSync(s)&&(o=s)}if(i.nvsFormat||o){if(r=await this.resolveNvs(o,i),!r&&i.nvsFormat)throw new ee(tS(e,"nvs"));n.push("nvs")}if(!r)if(this.platform==="win32")this.env["NVM_HOME"]&&(r=await this.resolveWindowsNvm(e),n.push("nvm-windows"));else{let s=this.env["NVM_DIR"]||Vt.join(this.homedir,".nvm");await this.fsUtils.exists(s)&&(r=await this.resolveUnixNvm(e),n.push("nvm"))}if(!r){let s=this.platform==="win32"?this.env["FNM_DIR"]||Vt.join(this.env.APPDATA||"","fnm"):this.env["FNM_DIR"]||Vt.join(this.homedir,".fnm");await this.fsUtils.exists(s)&&(r=await this.resolveFnm(e,s),n.push("fnm"))}if(!n.length)throw new ee(eS());if(!r||!await this.fsUtils.exists(r))throw new ee(tS(e,n.join("/")));return{directory:r,binary:await this.getBinaryInFolder(r)}}async getBinaryInFolder(e){return await po(["node64.exe","node64"].map(r=>this.fsUtils.exists(Vt.join(e,r))))?"node64":"node"}async resolveNvs(e,{remoteName:r,semanticVersion:n,arch:i}){if(!e)throw new ee(Yk());let o=this.findBinFolderForVersion(Vt.join(e,r),n,s=>Rf.existsSync(Vt.join(s,i)));if(o)return this.platform!=="win32"?Vt.join(o,i,"bin"):Vt.join(o,i)}async resolveUnixNvm(e){let r=this.env["NVM_DIR"];if(!r){let i=Vt.join(this.env.HOME||"",".nvm");await this.fsUtils.exists(i)&&(r=i)}if(!r)throw new ee(eS());let n=this.findBinFolderForVersion(Vt.join(r,"versions","node"),`v${e}`);return n?Vt.join(n,"bin"):void 0}async resolveWindowsNvm(e){let r=this.env["NVM_HOME"];if(!r)throw new ee(Qk());return this.findBinFolderForVersion(r,`v${e}`)}async resolveFnm(e,r){let n=this.findBinFolderForVersion(Vt.join(r,"node-versions"),`v${e}`);if(n)return this.platform==="win32"?Vt.join(n,"installation"):Vt.join(n,"installation","bin")}findBinFolderForVersion(e,r,n){if(!Rf.existsSync(e))return;let i=Rf.readdirSync(e);if(i.includes(r))return Vt.join(e,r);let o=i.filter(s=>s.startsWith(`${r}.`)).sort(Kye).filter(s=>n?n(Vt.join(e,s)):!0).pop();return o?Vt.join(e,o):void 0}parseVersionString(e){let n=/^(([\w-]+)\/)?(v?(\d+(\.\d+(\.\d+)?)?))(\/((x86)|(32)|((x)?64)|(arm\w*)|(ppc\w*)))?$/i.exec(e);if(!n)throw new Error("Invalid version string: "+e);let i=!!(n[2]||n[8]),o=n[2]||"node",s=n[4]||"",a=zye(n[8]||this.arch);return{nvsFormat:i,remoteName:o,semanticVersion:s,arch:a}}};$f=T([(0,k_.injectable)(),v(0,(0,k_.inject)(Mr))],$f);var Kye=(t,e)=>{let r=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(t),n=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(e);if(!r||!n)return(n?-1:0)+(r?1:0);let[,i,o,s]=r,[,a,u,c]=n;return Number(i)-Number(a)||Number(o)-Number(u)||Number(s)-Number(c)};function zye(t){switch(t){case"32":case"x86":case"ia32":return"x86";case"64":case"x64":case"amd64":return"x64";case"arm":let e=process.config.variables.arm_version;return e?"armv"+e+"l":"arm";default:return t}}var VG=require("child_process"),F_=A(J()),GG=A(i_());var Mf=class{constructor(e){this.logger=e}canLaunch(e){return e.console==="internalConsole"}async launchProgram(e,r,n){let{executable:i,args:o,shell:s,cwd:a}=Xye(e,M_(r),r.cwd);n.dap.output({category:"console",output:[i,...o].join(" ")+`
`});let u=(0,VG.spawn)(i,o,{shell:s,cwd:a,env:_t.merge(_t.processEnv(),r.env).defined()});return r.outputCapture==="console"?this.discardStdio(n.dap,u):this.captureStdio(n.dap,u),new P_(u,this.logger,r.killBehavior)}captureStdio(e,r){r.stdout.pipe(kf.stream()).on("data",n=>e.output({category:"stdout",output:n})).resume(),r.stderr.pipe(kf.stream()).on("data",n=>e.output({category:"stderr",output:n})).resume()}discardStdio(e,r){let n=[],i=()=>{n&&e.output({category:"stderr",output:Buffer.concat(n).toString()})},o=Buffer.from("Debugger attached."),s=a=>{a.includes(o)?(n=void 0,r.stderr.removeListener("data",s)):n&&n.push(a)};r.stderr.on("data",s),r.on("error",a=>{i(),e.output({category:"stderr",output:a.stack||a.message})}),r.on("exit",a=>{a!==null&&a>0&&(i(),e.output({category:"stderr",output:`Process exited with code ${a}\r
`}))}),r.stdout.resume(),r.stderr.resume()}};Mf=T([(0,F_.injectable)(),v(0,(0,F_.inject)(ce))],Mf);var Xye=(t,e,r)=>{if(process.platform==="win32"&&(t=Ii(t),r=Ii(r),t.endsWith(".ps1")&&(e=["-File",t,...e],t="powershell.exe")),process.platform!=="win32"||!t.includes(" "))return{executable:t,args:e,shell:!1,cwd:r};let n=!1,i=[];for(let o of e)o.includes(" ")?(i.push(`"${o}"`),n=!0):i.push(o);return n?{executable:`"${t}"`,args:i,shell:!0,cwd:r}:{executable:t,args:e,shell:!1,cwd:r}};var kf=class{constructor(){this.etxSpotted=!1}static stream(){return(0,GG.default)(new kf)}[Symbol.split](e){if(this.etxSpotted||=e.includes(""),!this.etxSpotted)return[e,""];let r=e.split("");return r.length>1?r.map((n,i)=>i<r.length-1?`${n}
`:n):r}};var B_=A(J());var Of=class{constructor(e){this.logger=e}canLaunch(e){return e.internalConsoleOptions,e.console!=="internalConsole"}async launchProgram(e,r,n){let i={kind:r.console==="integratedTerminal"?"integrated":"external",title:r.name,cwd:r.cwd,args:[e,...M_(r)],env:ol(r.env),argsCanBeInterpretedByShell:!Array.isArray(r.args)},o;try{o=await this.sendLaunchRequest(i,n)}catch(s){throw new ee(Zk(s.message))}return new ou(o,this.logger,r.killBehavior)}sendLaunchRequest(e,r){return r.dap.runInTerminalRequest(e)}};Of=T([(0,B_.injectable)(),v(0,(0,B_.inject)(ce))],Of);var KG=A(J());var Ff=class{getTreatment(e,r){return Promise.resolve(r)}};Ff=T([(0,KG.injectable)()],Ff);var zG=A(J());var Fc=class{constructor(){this.flushEmitter=new z;this.onFlush=this.flushEmitter.event}report(){}reportOperation(){}attachDap(){}flush(){this.flushEmitter.fire()}dispose(){}};Fc=T([(0,zG.injectable)()],Fc);var XG=require("crypto"),au=A(J()),JG=require("os"),YG=A(require("path")),Dg=A(require("vscode"));var Yx=class{constructor(e){this.terminal=e;this.stopped=new Promise(r=>{let n=Dg.window.onDidCloseTerminal(i=>{i===e&&(r({code:0,killed:!0}),n.dispose())})})}gotTelemetery(){}stop(){return this.terminal.sendText(""),setTimeout(()=>this.terminal.dispose(),1),this.stopped}},Rs=class extends mn{constructor(r,n,i,o,s){super(r,n,s,o);this.fs=i;this.terminalCreatedEmitter=new z;this.callbackFile=YG.join((0,JG.tmpdir)(),`node-debug-callback-${(0,XG.randomBytes)(8).toString("hex")}`);this.onTerminalCreated=this.terminalCreatedEmitter.event}async getProcessTelemetry(){try{return JSON.parse(await this.fs.readFile(this.callbackFile,"utf-8"))}catch{return}}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r;if(r.type==="pwa-chrome"&&r.server&&"command"in r.server)return r.server}async launchProgram(r){let n;try{n=await this.resolveNodePath(r.params)}catch(a){if(a instanceof ee&&a.cause.id===9230)throw a;n=new Ar("node",void 0)}let i=await this.resolveEnvironment(r,n,{fileCallback:this.callbackFile}),o=await this.createTerminal({name:r.params.name,cwd:r.params.cwd,iconPath:new Dg.ThemeIcon("debug"),env:D_(n,i).defined(),isTransient:!0});this.terminalCreatedEmitter.fire(o),o.show();let s=this.program=new Yx(o);r.params.command&&(await Promise.race([o.processId,Te(1e3)]),o.sendText(r.params.command,!0)),s.stopped.then(a=>{s===this.program&&this.onProgramTerminated(a)})}createTerminal(r){return Promise.resolve(Dg.window.createTerminal(r))}dispose(){super.dispose(),this.fs.unlink(this.callbackFile).catch(()=>{})}};Rs=T([(0,au.injectable)(),v(0,(0,au.inject)(fi)),v(1,(0,au.inject)(ce)),v(2,(0,au.inject)(we)),v(3,(0,au.inject)(Qr)),v(4,(0,au.inject)(at))],Rs);var qc=A(J()),Tg=A(G9());var Xf=class{constructor(e,r){r&&e instanceof pn&&(this.service=(0,Tg.getExperimentationService)("ms-vscode.js-debug",Iu,dH?Tg.TargetPopulation.Insiders:Tg.TargetPopulation.Public,{setSharedProperty(n,i){e.setGlobalMetric(n,i)},postEvent(n,i){e.pushOutput({category:"telemetry",output:n,data:i})}},r.globalState))}async getTreatment(e,r){if(!this.service)return r;try{return await this.service.getTreatmentVariableAsync("vscode",e,!0)}catch{return r}}};Xf=T([(0,qc.injectable)(),v(0,(0,qc.inject)(zt)),v(1,(0,qc.optional)()),v(1,(0,qc.inject)(it))],Xf);var u0=A(J()),z9=A(require("vscode"));var K9=A(J()),Er=A(require("vscode"));var Je=class{constructor(){this._onSessionAddedEmitter=new Er.EventEmitter;this._onSessionEndedEmitter=new Er.EventEmitter;this._disposables=[];this.sessions=new Map;this.onSessionAdded=this._onSessionAddedEmitter.event;this.onSessionEnded=this._onSessionEndedEmitter.event}static isConcreteSession(e){return!!e.configuration.__pendingTargetId}static pickSession(e,r){if(e.length<2)return e[0];let n=Er.window.createQuickPick();return n.title=r,n.items=e.map(i=>({label:i.name,id:i.id})),n.ignoreFocusOut=!0,new Promise(i=>{n.onDidAccept(()=>i(e.find(o=>o.id===n.selectedItems[0]?.id))),n.onDidHide(()=>i(void 0)),n.show()}).finally(()=>n.dispose())}get isDebugging(){return this.sessions.size>0}getById(e){return this.sessions.get(e)}isRunning(e){return[...this.sessions.values()].includes(e)}getByName(e){return[...this.sessions.values()].filter(r=>r.name===e)}getConcreteSessions(){return[...this.sessions.values()].filter(Je.isConcreteSession)}getChildren(e){return[...this.sessions.values()].filter(r=>r.configuration.__parentId===e.id)}attach(){Er.debug.onDidStartDebugSession(e=>{Gs(e.type)&&(this.sessions.set(e.id,e),this._onSessionAddedEmitter.fire(e))},void 0,this._disposables),Er.debug.onDidTerminateDebugSession(e=>{Gs(e.type)&&(this.sessions.delete(e.id),this._onSessionEndedEmitter.fire(e))},void 0,this._disposables),Er.debug.onDidReceiveDebugSessionCustomEvent(e=>{if(Gs(e.session.type)){if(e.event==="revealLocationRequested"){let r=e.body,n=Er.debug.asDebugSourceUri(e.body.source),i={};if(r.line){let o=new Er.Position((r.line||1)-1,(r.column||1)-1);i.selection=new Er.Range(o,o)}Er.window.showTextDocument(n,i);return}if(e.event==="copyRequested"){let r=e.body;Er.env.clipboard.writeText(r.text);return}}},void 0,this._disposables)}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};Je=T([(0,K9.injectable)()],Je);var Jf=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(this.tracker.onSessionEnded(r=>{let n=r.configuration.cascadeTerminateToConfigurations;if(!(!n||!(n instanceof Array)))for(let i of n)for(let o of this.tracker.getByName(i))z9.debug.stopDebugging(o)}))}};Jf=T([(0,u0.injectable)(),v(0,(0,u0.inject)(Je))],Jf);var c0=Symbol("IDebugConfigurationResolver"),l0=Symbol("IDebugConfigurationProvider");var rd=A(_e()),Bs=A(J()),uK=require("os"),nd=require("path"),Rg=A(require("vscode"));var X9=A(J()),J9=A(require("vscode"));var ks=class{get type(){return this.getType()}get triggerKind(){return this.getTriggerKind()}async provideDebugConfigurations(e,r){try{let n=await this.provide(e,r);if(!n)return[];let i=n instanceof Array?n:[n],o=jd.get(this.type);if(o)for(let s of i)s.type===this.type&&(s.type=o);return i}catch(n){return J9.window.showErrorMessage(n.message,{modal:!0}),[]}}};ks=T([(0,X9.injectable)()],ks);var d0=A(J()),Z9=require("path"),Os=A(require("vscode"));var $g=A(J()),GL=A(require("vscode"));var Y9=A(require("vscode")),Yf=class{constructor(e){this.key=e}set value(e){e!==this._value&&(this._value=e,Y9.commands.executeCommand("setContext",this.key,e))}get value(){return this._value}};var Q9=Symbol("Uninitialized"),p0=class{constructor(e,r){this.key=e;this.defaultValue=r;this._value=Q9}write(e,r){r!==this.read(e)&&(this._value=r,e.update(this.key,r))}read(e){return this._value===Q9&&(this._value=e.get(this.key)??this.defaultValue),this._value}};var f0=new p0("sourceSteppingEnabled",!0),Qf=class{constructor(e,r){this.context=e;this.tracker=r}register(e){let r=new Yf("jsDebugIsMapSteppingDisabled");f0.read(this.context.workspaceState)===!1&&(r.value=!0);let n=i=>{r.value=!i,f0.write(this.context.workspaceState,i);for(let o of this.tracker.getConcreteSessions())o.customRequest("setSourceMapStepping",{enabled:i})};e.subscriptions.push(xe(GL.commands,"extension.js-debug.enableSourceMapStepping",async()=>{n(!0)}),xe(GL.commands,"extension.js-debug.disableSourceMapStepping",async()=>{n(!1)}))}};Qf=T([(0,$g.injectable)(),v(0,(0,$g.inject)(it)),v(1,(0,$g.inject)(Je))],Qf);var di=class{constructor(e){this.extensionContext=e}get type(){return this.getType()}async resolveDebugConfiguration(e,r,n){if(r.type&&(r.type=this.getType()),"__pendingTargetId"in r)return r;let i=r;i.sourceMaps??=f0.read(this.extensionContext.workspaceState);try{let o=await this.resolveDebugConfigurationAsync(e,i,n);return o&&this.commonResolution(o,e)}catch(o){Os.window.showErrorMessage(o.message,{modal:!0})}}applyDefaultRuntimeExecutable(e){if(e.runtimeExecutable)return;let r=Dt(Os.workspace,"debug.javascript.defaultRuntimeExecutable"),n=r?r[e.type]:void 0;n&&(e.runtimeExecutable=n)}commonResolution(e,r){return e.trace=BI(e.trace,this.extensionContext.logPath),e.__workspaceCachePath=this.extensionContext.storagePath,e.__breakOnConditionalError=Dt(Os.workspace,"debug.javascript.breakOnConditionalError",r)??!1,r?e.__workspaceFolder=r.uri.fsPath:(e.__workspaceFolder||=this.getSuggestedWorkspaceFolders(e).filter(Ct).filter(n=>!n.includes("${workspaceFolder}")).map(n=>(0,Z9.isAbsolute)(n)?Os.workspace.getWorkspaceFolder(Os.Uri.file(n))?.uri.fsPath:n).find(Ct)||Os.workspace.workspaceFolders?.[0]?.uri.fsPath||"",e.__workspaceFolder?e=_A(e):e=wA(e)),e}getSuggestedWorkspaceFolders(e){return[]}};di=T([(0,d0.injectable)(),v(0,(0,d0.inject)(it))],di);var cu=A(_e()),ed=require("fs"),Zf=A(J()),At=A(require("path")),Un=A(require("vscode"));var eK=A(require("vscode"));function h0(t){eK.debug.activeDebugConsole.appendLine(t)}var Wc=A(_e()),tK=require("child_process"),rK=require("fs"),nK=require("path"),Hn=A(require("vscode"));var Zve=9229;async function iK(){let t=await XL();if(!t)return;let e=Dt(Hn.workspace,"debug.javascript.pickAndAttachOptions"),r={...HA,...e,name:"process",processId:t};await zL(new vn(rK.promises),r,!0),await Hn.debug.startDebugging(r.cwd?Hn.workspace.getWorkspaceFolder(Hn.Uri.file(r.cwd)):void 0,r)}async function zL(t,e,r=!1){let n=e.processId?.trim(),i=n&&rwe(n);if(!i||isNaN(i.pid))throw new Error(Wc.t("Attach to process: '{0}' doesn't look like a process id.",n||"<unknown>"));if(i.port||iwe(i.pid),e.port=i.port||Zve,delete e.processId,r){let o=await ewe(t,i.pid);o&&(e.cwd=o)}}async function ewe(t,e){let r=e&&await Ig.getWorkingDirectory(e);if(!r)return Hn.workspace.workspaceFolders?.[0].uri.fsPath;let n=await $l(t,r,"package.json");if(!n)return r;let i=Hn.workspace.getWorkspaceFolder(Hn.Uri.file(r));return!i||hy(i.uri.fsPath,n)?n:i.uri.fsPath}async function XL(){try{let t=await nwe();return t?t.pidAndPort:null}catch(t){return await Hn.window.showErrorMessage(Wc.t("Process picker failed ({0})",t.message),{modal:!0}),null}}var twe=(t,e)=>`${t}:${e??""}`,rwe=t=>{let[e,r]=t.split(":");return{pid:Number(e),port:r?Number(r):void 0}};async function nwe(){let t=/^(?:node|iojs)(?:$|\b)/i,e=0,r=Hn.window.createQuickPick();r.placeholder=Wc.t("Pick the node.js process to attach to"),r.matchOnDescription=!0,r.matchOnDetail=!0,r.busy=!0,r.show();let n=!1,i=new Promise(s=>{r.onDidAccept(()=>s(r.selectedItems[0])),r.onDidHide(()=>s(void 0))});Ig.lookup((s,a)=>{if(n)return a;process.platform==="win32"&&s.command.indexOf("\\??\\")===0&&(s.command=s.command.replace("\\??\\",""));let u=(0,nK.basename)(s.command,".exe"),{port:c}=$_(s.args);if(!c&&!t.test(u))return a;let l={label:u,description:s.args,pidAndPort:twe(s.pid,c),sortKey:s.date?s.date:e++,detail:c?Wc.t("process id: {0}, debug port: {1} ({2})",s.pid,c,"SIGUSR1"):Wc.t("process id: {0} ({1})",s.pid,"SIGUSR1")},p=a.findIndex(f=>f.sortKey<l.sortKey);return a.splice(p===-1?a.length:p,0,l),r.items=a,a},[]).then(()=>r.busy=!1).catch(s=>{Hn.window.showErrorMessage(`Error listing processes: ${s.message}`),r.dispose()});let o=await i;return n=!0,r.dispose(),o}function iwe(t){try{if(process.platform==="win32"){let e=`node -e process._debugProcess(${t})`;(0,tK.execSync)(e)}else process.kill(t,"SIGUSR1")}catch(e){throw new Error(Wc.t("Attach to process: cannot enable debug mode for process '{0}' ({1}).",t,e))}}var lu=class extends di{constructor(r,n,i){super(r);this.nvmResolver=n;this.fsUtils=i}async resolveDebugConfigurationWithSubstitutedVariables(r,n){let i=n;if(i.type==="pwa-node"&&i.request==="attach"&&typeof i.processId=="string"&&await zL(this.fsUtils,i),i.cwd){let o=await wn(ed.promises,i.cwd);if(!o){Un.window.showErrorMessage(cu.t("The configured `cwd` {0} does not exist.",i.cwd),{modal:!0});return}if(!o.isDirectory()){Un.window.showErrorMessage(cu.t("The configured `cwd` {0} is not a folder.",i.cwd),{modal:!0});return}}return i}async resolveDebugConfigurationAsync(r,n,i){if(!n.name&&!n.type&&!n.request&&(n=await YL(r,!0,n),n.request==="launch"&&!n.program)){Un.window.showErrorMessage(cu.t("Cannot find a program to debug"),{modal:!0});return}if(n.cwd||(n.cwd=n.localRoot||JL(n.request==="launch"?n.program:void 0,r)),n.remoteRoot&&!n.localRoot&&(n.localRoot="${workspaceFolder}"),n.request==="launch"){if(this.applyDefaultRuntimeExecutable(n),n.runtimeExecutable&&qy(n.runtimeExecutable)==="deno"&&!n.attachSimplePort){let s=await ya();n.attachSimplePort=s,n.continueOnAttach??=!0;let a=[`--inspect-brk=127.0.0.1:${s}`,"--allow-all"];n.runtimeArgs?n.runtimeArgs.includes("run")?n.runtimeArgs=[...n.runtimeArgs,...a]:n.runtimeArgs=["run",...a,...n.runtimeArgs]:n.runtimeArgs=["run",...a]}let o=n.runtimeVersion;if(typeof o=="string"&&o!=="default"){let{directory:s,binary:a}=await this.nvmResolver.resolveNvmVersionPath(o);n.env=new _t(n.env).addToPath(s,"prepend",!0).value,n.runtimeExecutable=!n.runtimeExecutable||n.runtimeExecutable==="node"?a:n.runtimeExecutable}if(n.console==="integratedTerminal"&&!n.internalConsoleOptions&&(n.internalConsoleOptions="neverOpen"),n.attachSimplePort===null||n.attachSimplePort===void 0)R_(n);else{if(n.attachSimplePort===0){n.attachSimplePort=await ya(void 0,i);let s=`--inspect-brk=${n.attachSimplePort}`;n.runtimeArgs=n.runtimeArgs?[...n.runtimeArgs,s]:[s]}n.continueOnAttach=!n.stopOnEntry,n.stopOnEntry=!1}await owe(this.fsUtils,r,n)}return bA(n)}getType(){return"pwa-node"}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.cwd]}};lu=T([(0,Zf.injectable)(),v(0,(0,Zf.inject)(it)),v(1,(0,Zf.inject)(O_)),v(2,(0,Zf.inject)(Mr))],lu);function JL(t,e){if(e)return e.uri.fsPath;if(Un.workspace.workspaceFolders&&Un.workspace.workspaceFolders.length>0)return Un.workspace.workspaceFolders[0].uri.fsPath;if(t){if(t==="${file}")return"${fileDirname}";if(At.isAbsolute(t))return At.dirname(t)}return"${workspaceFolder}"}function oK(t,e){if(t&&(e=Vi(e,"workspaceFolder",t.uri.fsPath)),Un.workspace.workspaceFolders?.length&&(e=Vi(e,"workspaceRoot",Un.workspace.workspaceFolders[0].uri.fsPath)),At.isAbsolute(e))return e;if(t)return At.join(t.uri.fsPath,e)}async function owe(t,e,r){if(r.outFiles||!e)return;let n;if(r.program?(n=oK(e,r.program),n&&(n=At.dirname(n))):r.cwd&&(n=oK(e,r.cwd)),!n||my(e.uri.fsPath,n))return;let i=await HS(n,async o=>!o.includes("node_modules")&&await t.exists(At.join(o,"package.json")));if(i){let o=ze(At.relative(e.uri.fsPath,i));o.length&&(r.outFiles=[...aH.outFiles,`\${workspaceFolder}/${o}/**/*.js`,`!\${workspaceFolder}/${o}/**/node_modules/**`])}}var swe=["index.js","main.js"];async function YL(t,e,r){let n={type:"pwa-node",request:"launch",name:cu.t("Launch Program"),skipFiles:["<node_internals>/**"]};r&&r.noDebug&&(n.noDebug=!0);let i=await sK(t,"package.json"),o,s=!1;if(i&&i.name==="mern-starter")return e&&h0(cu.t("Launch configuration for '{0}' project created.","Mern Starter")),uwe(n),n;if(i&&(o=await lwe(t,i,e),o&&e&&h0(cu.t("Launch configuration created based on 'package.json'."))),!o){let a=Un.window.activeTextEditor;a&&pH.includes(a.document.languageId)&&(s=a.document.languageId!=="javascript",o=t?At.relative(t.uri.fsPath,a.document.uri.fsPath):a.document.uri.fsPath,At.isAbsolute(o)||(o="${workspaceFolder}"+At.sep+o))}if(!o&&t){let a=t.uri.fsPath;o=await po(swe.map(async u=>await wn(ed.promises,At.join(a,u))&&"${workspaceFolder}"+At.sep+u))}if(o||(o="${file}"),o&&(n.program=o,t||(n.__workspaceFolder=At.dirname(o))),s||Un.workspace.textDocuments.some(a=>cwe(a.languageId))){e&&h0(cu.t("Adjust glob pattern(s) in the 'outFiles' attribute so that they cover the generated JavaScript."));let a="",u=await sK(t,"tsconfig.json");if(u?.compilerOptions?.outDir&&awe()){let c=u.compilerOptions.outDir;At.isAbsolute(c)||(a=c,a.indexOf("./")===0&&(a=a.substr(2)),a[a.length-1]!=="/"&&(a+="/")),n.preLaunchTask="tsc: build - tsconfig.json"}n.outFiles=["${workspaceFolder}/"+a+"**/*.js"]}return n}function awe(){let t=Un.workspace.getConfiguration().get("typescript.tsc.autoDetect");return t!=="off"&&t!=="watch"}function uwe(t){t.request==="launch"&&(t.runtimeExecutable="nodemon",t.program="${workspaceFolder}/index.js",t.restart=!0,t.env={BABEL_DISABLE_CACHE:"1",NODE_ENV:"development"},t.console="integratedTerminal",t.internalConsoleOptions="neverOpen")}function cwe(t){return t==="typescript"||t==="coffeescript"}async function sK(t,e){if(t)try{let r=await ed.promises.readFile(At.join(t.uri.fsPath,e),"utf8");return JSON.parse(r)}catch{}}async function lwe(t,e,r){let n;try{if(e.main?n=e.main:e.scripts&&typeof e.scripts.start=="string"&&(n=e.scripts.start.split(" ").pop()),n){let i;if(At.isAbsolute(n)?i=n:(i=t?At.join(t.uri.fsPath,n):void 0,n=At.join("${workspaceFolder}",n)),r&&i&&!await wn(ed.promises,i)&&!await wn(ed.promises,i+".js"))return}}catch{}return n}var aK=A(require("vscode"));var td=class extends di{async resolveDebugConfigurationAsync(e,r){if(r.cwd||(r.cwd=JL(void 0,e)),r.request==="launch"&&!r.command){await nH(aK.commands,"extension.js-debug.createDebuggerTerminal",void 0,e);return}return r.remoteRoot&&!r.localRoot&&(r.localRoot="${workspaceFolder}"),vA(r)}getType(){return"node-terminal"}};var pwe=t=>t.request==="launch",fwe=t=>t.request==="attach",pu=class extends di{constructor(r,n,i,o,s){super(r);this.nodeProvider=n;this.terminalProvider=i;this.location=o;this.fs=s}async resolveBrowserCommon(r,n){if(n.request,n.server&&"program"in n.server){let o={...n.server,type:"pwa-node",request:"launch",name:`${n.name}: Server`};n.server=await this.nodeProvider.resolveDebugConfiguration(r,o)}else n.server&&"command"in n.server&&(n.server=await this.terminalProvider.resolveDebugConfiguration(r,{...n.server,type:"node-terminal",request:"launch",name:`${n.name}: Server`}));let i=this.location==="remote"?"ui":"workspace";if(pwe(n)&&!n.browserLaunchLocation&&(n.browserLaunchLocation=i),fwe(n)&&!n.browserAttachLocation&&(n.browserAttachLocation=i),n.request==="launch"){let o=n;this.applyDefaultRuntimeExecutable(o)}}getSuggestedWorkspaceFolders(r){return[r.rootPath,r.webRoot]}async resolveDebugConfigurationWithSubstitutedVariables(r,n){if("__pendingTargetId"in n)return n;let i=n;if(i.request==="launch"){let o=await this.ensureNoLockfile(i);if(o===void 0)return;i=o}return i}async ensureNoLockfile(r){if(r.request!=="launch")return r;let n=r;if(n.userDataDir===!1||n.port&&!await lN(n.port))return r;let i=typeof n.userDataDir=="string"?n.userDataDir:(0,nd.join)(this.extensionContext.storagePath??(0,uK.tmpdir)(),n.runtimeArgs?.includes("--headless")?".headless-profile":".profile"),o=(0,nd.join)(i,process.platform==="win32"?"lockfile":"SingletonLock");if(await po([dk(this.fs,o),this.isVsCodeLocked((0,nd.join)(i,"code.lock"))])){let a=rd.t("Debug Anyway");if(await Rg.window.showErrorMessage(rd.t("It looks like a browser is already running from {0}. Please close it before trying to debug, otherwise VS Code may not be able to connect to it.",n.userDataDir===!0?rd.t("an old debug session"):rd.t("the configured userDataDir")),{modal:!0},a)!==a)return}return{...r,userDataDir:i}}async isVsCodeLocked(r){try{let n=Number(await this.fs.readFile(r,"utf-8"));return process.kill(n,0),!0}catch{return!1}}};pu=T([(0,Bs.injectable)(),v(0,(0,Bs.inject)(it)),v(1,(0,Bs.inject)(lu)),v(2,(0,Bs.inject)(td)),v(3,(0,Bs.inject)(us)),v(4,(0,Bs.inject)(we))],pu);var fu=class extends ks{provide(){return this.createLaunchConfigFromContext()||this.getDefaultLaunch()}getTriggerKind(){return Rg.DebugConfigurationProviderTriggerKind.Initial}createLaunchConfigFromContext(){let e=Rg.window.activeTextEditor;if(e&&e.document.languageId==="html")return{type:this.getType(),request:"launch",name:`Open ${(0,nd.basename)(e.document.uri.fsPath)}`,file:e.document.uri.fsPath}}getDefaultLaunch(){return{type:this.getType(),request:"launch",name:rd.t("Launch Chrome against localhost"),url:"http://localhost:8080",webRoot:"${workspaceFolder}"}}};fu=T([(0,Bs.injectable)()],fu);var QL=A(J());var id=class extends pu{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let n=new Vc().createLaunchConfigFromContext();if(!n)return null;r=n}return await this.resolveBrowserCommon(e,r),r.request==="attach"?{...Vd,...r}:{...cH,...r}}getType(){return"pwa-chrome"}};id=T([(0,QL.injectable)()],id);var Vc=class extends fu{getType(){return"pwa-chrome"}};Vc=T([(0,QL.injectable)()],Vc);var cK=A(_e()),ZL=A(J());var od=class extends pu{async resolveDebugConfigurationAsync(e,r){if(!r.name&&!r.type&&!r.request){let n=new Gc().createLaunchConfigFromContext();if(!n)return;r=n}return await this.resolveBrowserCommon(e,r),r.useWebView&&(r.timeout=r.timeout??0),r.request==="attach"?{...mA,...r}:{...gA,...r}}getType(){return"pwa-msedge"}};od=T([(0,ZL.injectable)()],od);var Gc=class extends fu{getType(){return"pwa-msedge"}getDefaultLaunch(){return{...super.getDefaultLaunch(),name:cK.t("Launch Edge against localhost")}}};Gc=T([(0,ZL.injectable)()],Gc);var pK=require("fs"),fK=A(J()),dK=require("path");var sd=class extends di{async resolveDebugConfigurationAsync(e,r){if(r.debugWebWorkerHost===void 0){let n=await dwe(e,r);r={...r,debugWebWorkerHost:n.length===1&&n[0]==="web"}}return r.debugWebWorkerHost&&(r.outFiles=[]),lH(r),Promise.resolve({...hA,...r})}getType(){return"pwa-extensionHost"}};sd=T([(0,fK.injectable)()],sd);var lK="--extensionDevelopmentPath=",dwe=async(t,e)=>{let r=e.args?.find(o=>o.startsWith(lK));if(!r)return["workspace"];let n=Vi(r.slice(lK.length),"workspaceFolder",t?.uri.fsPath??e.__workspaceFolder??""),i;try{let o=await pK.promises.readFile((0,dK.join)(n,"package.json"),"utf-8");i=JSON.parse(o).extensionKind??"workspace"}catch{return["workspace"]}return i instanceof Array?i:[i]};var g0=A(_e()),nT=A(J()),ld=A(require("path")),Mg=A(require("vscode"));var ad=A(_e()),HK=A(require("fs")),m0=A(require("path")),rt=A(require("vscode"));var hK=require("vscode"),eT=async t=>{try{return await hK.commands.executeCommand("npm.packageManager",t?.uri)}catch{return"npm"}},mK=async(t,e)=>`${await eT(e)} run ${t}`;async function yK(t){let e=await rT(t?[t]:void 0);if(!e)return;let r=async a=>{let u=rt.workspace.getWorkspaceFolder(rt.Uri.file(a.directory));nH(rt.commands,"extension.js-debug.createDebuggerTerminal",await mK(a.name,u),u,{cwd:a.directory})};if(e.length===1)return r(e[0]);let n=e.some(a=>a.directory!==e[0].directory),i=rt.window.createQuickPick(),o,s=[];for(let a of e)a.directory!==o&&n&&(s.push({label:m0.basename(a.directory),kind:rt.QuickPickItemKind.Separator}),o=a.directory),s.push({script:a,label:a.name,description:a.command});i.items=s,i.onDidAccept(async()=>{r(i.selectedItems[0].script),i.dispose()}),i.show()}var tT=(t,e)=>t.score>e.score?t:e;async function rT(t,e=!1){let r=t??rt.workspace.workspaceFolders??[];if(!r||r.length===0){e||rt.window.showErrorMessage(ad.t("You need to open a workspace folder to debug npm scripts."));return}let n=(await Promise.all(r.map(s=>rt.workspace.findFiles(new rt.RelativePattern(s,"**/package.json"),"**/{node_modules,.vscode-test}/**")))).flat();if(n.length===0){e||rt.window.showErrorMessage(ad.t("No package.json files found in your workspace."));return}let i=[],o={path:n[0].fsPath,score:0};for(let{fsPath:s}of new Set(n)){o=tT(o,{path:s,score:1});let a;try{a=JSON.parse(await py(s))}catch(u){e||gK("showWarningMessage",ad.t("Could not read {0}: {1}",s,u.message),s),o=tT(o,{path:void 0,score:3});continue}if(o=tT(o,{path:void 0,score:2}),!!a.scripts)for(let u of Object.keys(a.scripts))i.push({directory:m0.dirname(s),name:u,command:a.scripts[u]})}if(i.length===0){o.path&&!e&&gK("showErrorMessage",ad.t("No npm scripts found in your package.json"),o.path);return}return i.sort((s,a)=>(s.name==="start"?-1:0)+(a.name==="start"?1:0)),i}var hwe=`{
  "scripts": {
    
  }
}
`;async function gK(t,e,r){let n=ad.t("Edit package.json");if(await rt.window[t](e,n)!==n)return;if(HK.existsSync(r)){let a=await rt.workspace.openTextDocument(r);await rt.window.showTextDocument(a);return}let i=await rt.workspace.openTextDocument(rt.Uri.file(r).with({scheme:"untitled"})),o=await rt.window.showTextDocument(i);await o.edit(a=>a.insert(new rt.Position(0,0),hwe));let s=new rt.Position(2,5);o.selection=new rt.Selection(s,s)}var ud=class extends ks{provide(e){return YL(e,!0)}getType(){return"pwa-node"}getTriggerKind(){return Mg.DebugConfigurationProviderTriggerKind.Initial}};ud=T([(0,nT.injectable)()],ud);var mwe=["cwd","program"],cd=class extends ks{async provide(e){let r=Yo(await Promise.all([this.getFromNpmScripts(e),this.getFromActiveFile()]));if(e)for(let n of r){let i=n;for(let o of mwe){let s=i[o];s&&ld.isAbsolute(s)&&(i[o]=ld.join("${workspaceFolder}",ld.relative(e.uri.fsPath,s)))}}return r}getType(){return"pwa-node"}getTriggerKind(){return Mg.DebugConfigurationProviderTriggerKind.Dynamic}async getFromNpmScripts(e){let r={type:il("node-terminal"),name:g0.t("JavaScript Debug Terminal"),request:"launch",cwd:e?.uri.fsPath};if(!e)return[r];let n=await rT([e],!0);if(!n)return[r];let i=await eT(e);return n.map(o=>({type:il("node-terminal"),name:g0.t("Run Script: {0}",o.name),request:"launch",command:`${i} run ${o.name}`,cwd:o.directory})).concat(r)}getFromActiveFile(){let e=Mg.window.activeTextEditor;return!e||!pH.includes(e.document.languageId)||e.document.uri.scheme!=="file"?[]:[{type:il("pwa-node"),name:g0.t("Run Current File"),request:"launch",program:e.document.uri.fsPath}]}};cd=T([(0,nT.injectable)()],cd);var bK=[id,od,sd,lu,td],vK=[Vc,Gc,ud,cd];var pd=A(_e()),kg=A(J()),oT=require("url"),yn=A(require("vscode"));function iT(t,e){if(t){try{if(new oT.URL(t).hostname)return t}catch{}try{let r=`http://${t}`,n=new oT.URL(r);if(!e||n.port)return r}catch{}}}var fd=class{constructor(e,r){this.defaultBrowser=e;this.context=r}register(e){e.subscriptions.push(yn.commands.registerCommand("extension.js-debug.debugLink",r=>this.handle(r)))}async handle(e){if(e=e??await this.getLinkFromTextEditor()??await this.getLinkFromQuickInput(),!e)return;let r="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(r="pwa-msedge")}catch{}let n=Dt(yn.workspace,"debug.javascript.debugByLinkOptions")??{},i={...typeof n=="string"?{}:n,type:il(r),name:e,request:"launch",url:e};yn.debug.startDebugging(yn.workspace.workspaceFolders?.[0],i),this.persistConfig(i)}getLinkFromTextEditor(){let e=yn.window.activeTextEditor;if(e)return iT(e.document.getText(e.selection),!0)}async getLinkFromQuickInput(){let e=await yn.env.clipboard.readText(),r=await yn.window.showInputBox({value:iT(e,!1)||this.mostRecentLink,placeHolder:"https://localhost:8080",validateInput:n=>{if(n&&!iT(n,!1))return pd.t("The URL provided is invalid")}});if(r)return this.mostRecentLink=r,r}async persistConfig(e){if(this.context.globalState.get("saveDebugLinks")===!1)return;let r=yn.workspace.getConfiguration("launch"),n=r.get("configurations")??[];if(n.some(a=>a.url===e.url))return;let i=pd.t("Yes"),o=pd.t("Never"),s=await yn.window.showInformationMessage(pd.t("Would you like to save a configuration in your launch.json for easy access later?"),i,pd.t("No"),o);s===o&&this.context.globalState.update("saveDebugLinks",!1),s===i&&await r.update("configurations",[...n,e])}};fd=T([(0,kg.injectable)(),v(0,(0,kg.inject)(Vp)),v(1,(0,kg.inject)(it))],fd);var dd=A(_e()),md=A(J()),jn=A(require("vscode"));var wK="neverRemind",hd=class{constructor(e,r,n){this.fs=e;this.context=r;this.tracker=n;this.dismissedForSession=!1;this.isPrompting=!1}register(e){e.subscriptions.push(xe(jn.commands,"extension.js-debug.getDiagnosticLogs",async()=>{let r=await this.getTargetSession();if(!r)return;let n=await jn.window.showSaveDialog({filters:{JSON:["json"]}});n&&r.customRequest("saveDiagnosticLogs",{toFile:n.fsPath})}),xe(jn.commands,"extension.js-debug.createDiagnostics",async()=>this.getDiagnosticInfo(await this.getTargetSession())),jn.debug.onDidReceiveDebugSessionCustomEvent(async r=>{if(r.event==="openDiagnosticTool")return this.openDiagnosticTool(r.body.file);if(r.event!=="suggestDiagnosticTool"||this.dismissedForSession||this.context.workspaceState.get(wK)||this.isPrompting)return;this.isPrompting=!0;let n=dd.t("Yes"),i=dd.t("Not Now"),o=dd.t("Never"),s=await jn.window.showInformationMessage("It looks like you might be having trouble with breakpoints. Would you like to open our diagnostic tool?",n,i,o);switch(this.isPrompting=!1,s){case n:this.getDiagnosticInfo(await this.getTargetSession(),!0);break;case o:e.workspaceState.update(wK,!0);break;case i:this.dismissedForSession=!0;break}}))}getTargetSession(){let e=jn.debug.activeDebugSession;if(!e||!Gs(e?.type))return this.pickSession();if(Je.isConcreteSession(e))return e;let r=this.tracker.getChildren(e);return r.length===1?r[0]:this.pickSession()}pickSession(){return Je.pickSession(this.tracker.getConcreteSessions(),dd.t("Select the session you want to inspect:"))}async getDiagnosticInfo(e,r=!1){if(!e||!this.tracker.isRunning(e)){jn.window.showErrorMessage(dd.t('It looks like your debug session has already ended. Try debugging again, then run the "Debug: Diagnose Breakpoint Problems" command.'));return}let{file:n}=await e.customRequest("createDiagnostics",{fromSuggestion:r});await this.openDiagnosticTool(n)}async openDiagnosticTool(e){let r=jn.window.createWebviewPanel("jsDebugDiagnostics","Debug Diagnostics",jn.ViewColumn.Active,{enableScripts:!0});r.webview.html=await this.fs.readFile(e,"utf-8")}};hd=T([(0,md.injectable)(),v(0,(0,md.inject)(we)),v(1,(0,md.inject)(it)),v(2,(0,md.inject)(Je))],hd);var gd=A(_e()),_K=A(J()),hi=A(require("vscode"));var Kc=class{register(e){e.subscriptions.push(hi.debug.onDidReceiveDebugSessionCustomEvent(r=>{if(r.event!=="suggestDisableSourcemap"||!Gs(r.session.type))return;let n=r.body;this.unmap(r.session,n.source).catch(i=>hi.window.showErrorMessage(i.message))}))}async unmap(e,r){(Dt(hi.workspace,"debug.javascript.unmapMissingSources")||await this.prompt())&&await e.customRequest("disableSourcemap",{source:r})}async prompt(){let e=gd.t("Always"),r=gd.t("Always in this Workspace"),n=gd.t("Yes");switch(await hi.window.showInformationMessage(gd.t("This is a missing file path referenced by a sourcemap. Would you like to debug the compiled version instead?"),e,r,gd.t("No"),n)){case e:return fA(hi.workspace,"debug.javascript.unmapMissingSources",!0,hi.ConfigurationTarget.Global),!0;case r:return fA(hi.workspace,"debug.javascript.unmapMissingSources",!0,hi.ConfigurationTarget.Workspace),!0;case n:return!0;default:return!1}}};Kc=T([(0,_K.injectable)()],Kc);var zc=A(_e()),H0=A(J()),Ui=A(require("vscode"));var AK="ms-vscode.wasm-dwarf-debugging",IK="dwarf.neverRemind",Hd=class{constructor(e){this.context=e;this.didPromptForSession=this.context.workspaceState.get(IK,!1)}async load(){try{return await import("@vscode/dwarf-debugging")}catch{}let e=Ui.extensions.getExtension(AK);if(e)return e.isActive||await e.activate(),e.exports}async prompt(){if(this.didPromptForSession)return;this.didPromptForSession=!0;let e=zc.t("Yes"),r=zc.t("Never"),n=await Ui.window.showInformationMessage(zc.t({message:'VS Code can provide better debugging experience for WebAssembly via "DWARF Debugging" extension. Would you like to install it?',comment:'"DWARF Debugging" is the extension name and should not be localized.'}),e,zc.t("Not Now"),r);n===e?this.install():n===r&&this.context.workspaceState.update(IK,!0)}async install(){await Ui.window.withProgress({location:Ui.ProgressLocation.Notification,title:zc.t("Installing the DWARF debugger...")},async()=>{try{await Ui.commands.executeCommand("workbench.extensions.installExtension",AK),Ui.window.showInformationMessage(zc.t("Installation complete! The extension will be used after you restart your debug session."))}catch(e){Ui.window.showErrorMessage(e.message||String(e))}})}};Hd=T([(0,H0.injectable)(),v(0,(0,H0.inject)(it))],Hd);var EK=A(_e()),y0=A(J()),du=A(require("vscode"));var SK=t=>{if(t?.type!=="pwa-msedge")return!1;let e=t.configuration.__browserTargetType;return e==="iframe"||e==="page"},Hwe="ms-edgedevtools.vscode-edge-devtools",ywe="vscode-edge-devtools.attachToCurrentDebugTarget";function bwe(t){let e=t;for(;e.parentSession;)e=e.parentSession;return e}var yd=class{constructor(e){this.tracker=e}register(e){e.subscriptions.push(xe(du.commands,"extension.js-debug.openEdgeDevTools",async()=>{let r=du.debug.activeDebugSession&&SK(du.debug.activeDebugSession)?du.debug.activeDebugSession:await Je.pickSession(this.tracker.getConcreteSessions().filter(SK),EK.t("Select the page where you want to open the devtools"));if(!r)return;let n=bwe(r);try{return await du.commands.executeCommand(ywe,r.id,n.configuration)}catch(i){if(i instanceof Error&&/command .+ not found/.test(i.message))return du.commands.executeCommand("workbench.extensions.action.showExtensionsWithIds",[Hwe]);throw i}}))}};yd=T([(0,y0.injectable)(),v(0,(0,y0.inject)(Je))],yd);var xK=require("crypto"),b0=A(J()),LK=require("path"),ot=A(require("vscode"));var DK=({name:t,line:e,column:r,source:n})=>`${t} (${(0,LK.basename)(String(n.path))}:${e}:${r})`,CK=({name:t,line:e,column:r,source:n})=>`${t} (${n.path}:${e}:${r})`,PK=async({line:t,column:e,source:r})=>{if(r.sourceReference!==0||!r.path)return;let n=ot.Uri.file(r.path),i=await ot.workspace.openTextDocument(n),o=await ot.window.showTextDocument(i),s=new ot.Position(t-1,e-1);o.revealRange(new ot.Range(s,s)),o.selection=new ot.Selection(s,s)},sT=class{constructor(e,r){this.caller=e;this.target=r;this.treeItem=new ot.TreeItem(`${DK(e)} \u2192 ${DK(r)}`,ot.TreeItemCollapsibleState.None),this.treeItem.tooltip=`Breaks at ${CK(r)} containing ${CK(e)} will be skipped`,this.id=this.treeItem.id=(0,xK.createHash)("sha1").update(JSON.stringify([e,r])).digest("base64")}toDap(){return{caller:this.caller,target:this.target}}},bd=class{constructor(e){this.sessionTracker=e;this._onDidChangeTreeData=new ot.EventEmitter;this.allCallers=new Map;this.lastHadCallers=!1;this.onDidChangeTreeData=this._onDidChangeTreeData.event}register(e){e.subscriptions.push(ot.window.createTreeView("jsExcludedCallers",{treeDataProvider:this}),xe(ot.commands,"extension.js-debug.callers.add",async(r,n)=>{let i=await this.sessionTracker.getById(n.sessionId)?.customRequest("stackTrace",{threadId:0,startFrame:0,levels:1});if(!i?.stackFrames.length)return;let o=i.stackFrames[0],s=new sT({name:n.frameName,column:n.frameLocation.range.startColumn,line:n.frameLocation.range.startLineNumber,source:n.frameLocation.source},{name:o.name,column:o.column,line:o.line,source:o.source});this.allCallers.set(s.id,s),this.triggerUpdate()}),xe(ot.commands,"extension.js-debug.callers.goToCaller",r=>PK(r.caller)),xe(ot.commands,"extension.js-debug.callers.gotToTarget",r=>PK(r.target)),xe(ot.commands,"extension.js-debug.callers.remove",async r=>{this.allCallers.delete(r.id),this.triggerUpdate()}),xe(ot.commands,"extension.js-debug.callers.removeAll",async()=>{this.allCallers.clear(),this.triggerUpdate()}),this.sessionTracker.onSessionAdded(r=>{this.allCallers.size>0&&this.sendCallersToSession(r)}))}getTreeItem(e){return e.treeItem}getChildren(e){return e?[]:[...this.allCallers.values()]}sendCallersToSession(e){e.customRequest("setExcludedCallers",{callers:[...this.allCallers.values()].map(r=>r.toDap())})}triggerUpdate(){this._onDidChangeTreeData.fire(void 0);for(let r of this.sessionTracker.getConcreteSessions())this.sendCallersToSession(r);let e=this.allCallers.size>0;e!==this.lastHadCallers&&(qd(ot.commands,"jsDebugHasExcludedCallers",e),this.lastHadCallers=e)}};bd=T([(0,b0.injectable)(),v(0,(0,b0.inject)(Je))],bd);var aT=A(_e()),Og=A(J());var TK="linkBpWarnIgnored",wwe="https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_can-i-debug-if-im-using-symlinks",vd=class{constructor(e,r){this.vscode=e;this.context=r;this.didWarn=this.context.workspaceState.get(TK,!1)}async warn(){if(this.didWarn)return;this.didWarn=!0;let e=aT.t("Read More"),r=aT.t("Ignore"),n=await this.vscode.window.showWarningMessage("It looks like you have symlinked files. You might need to update your configuration to make this work as expected.",r,e);n===r?this.context.workspaceState.update(TK,!0):n===e&&this.vscode.env.openExternal(this.vscode.Uri.parse(wwe))}};vd=T([(0,Og.injectable)(),v(0,(0,Og.inject)(Yn)),v(1,(0,Og.inject)(it))],vd);var Fg=A(_e()),v0=A(J()),RK=require("path"),Ns=A(require("vscode"));var $K="omitLongPredictions",wd=class{constructor(e){this.context=e}register(e){e.subscriptions.push(Ns.debug.onDidReceiveDebugSessionCustomEvent(r=>{r.event==="longPrediction"&&this.promptLongBreakpoint(r.session.workspaceFolder)}))}async promptLongBreakpoint(e){if(this.context.workspaceState.get($K))return;let r=Fg.t("It's taking a while to configure your breakpoints. You can speed this up by updating the 'outFiles' in your launch.json."),n=Fg.t("Open launch.json"),i=Fg.t("Don't show again"),o=await Ns.window.showWarningMessage(r,i,n);if(o===i){this.context.workspaceState.update($K,!0);return}if(o!==n)return;if(e||(e=await Ns.window.showWorkspaceFolderPick()),!e){await Ns.window.showWarningMessage(Fg.t("No workspace folder open."));return}let s=await Ns.workspace.openTextDocument((0,RK.join)(e.uri.fsPath,".vscode","launch.json"));await Ns.window.showTextDocument(s)}};wd=T([(0,v0.injectable)(),v(0,(0,v0.inject)(it))],wd);var w0=A(J()),Ad=require("vscode");var _d=class{constructor(e){this.leaseTracker=e;this.cachedResolutions=new Array(16).fill("");this.cachedResolutionIndex=0}register(e){typeof Ad.workspace.registerPortAttributesProvider=="function"&&e.subscriptions.push(Ad.workspace.registerPortAttributesProvider({portRange:[53e3,54e3]},this))}async providePortAttributes({port:e,pid:r}){if(r&&this.cachedResolutions.includes(`${e}:${r}`))return{port:e,autoForwardAction:Ad.PortAutoForwardAction.Ignore};if(await this.leaseTracker.isRegistered(e)){if(r){let n=this.cachedResolutionIndex++%this.cachedResolutions.length;this.cachedResolutions[n]=`${e}:${r}`}return{port:e,autoForwardAction:Ad.PortAutoForwardAction.Ignore}}}};_d=T([(0,w0.injectable)(),v(0,(0,w0.inject)(at))],_d);var _0=A(J()),kK=A(require("querystring")),Xc=A(require("vscode"));var Id=class{constructor(e){this.tracker=e;this.canPrettyPrintKey=new Yf("jsDebugCanPrettyPrint")}register(e){e.subscriptions.push(xe(Xc.commands,"extension.js-debug.prettyPrint",()=>this.prettifyActive()),Xc.window.onDidChangeActiveTextEditor(r=>this.updateEditorState(r)),this.tracker.onSessionAdded(()=>this.updateEditorState(Xc.window.activeTextEditor)),this.tracker.onSessionEnded(()=>this.updateEditorState(Xc.window.activeTextEditor)))}async prettifyActive(){let e=Xc.window.activeTextEditor;if(!e||!this.canPrettyPrint(e))return;let{sessionId:r,source:n}=_we(e.document.uri),i=r&&this.tracker.getById(r);if(i)MK(i,n,e.selection.start);else for(let o of this.tracker.getConcreteSessions())MK(o,n,e.selection.start)}canPrettyPrint(e){return this.tracker.isDebugging&&e.document.languageId==="javascript"&&!e.document.fileName.endsWith("-pretty.js")}updateEditorState(e){if(!this.tracker.isDebugging){this.canPrettyPrintKey.value=void 0;return}e&&this.canPrettyPrint(e)&&e.document.uri.toString()!==this.canPrettyPrintKey.value?.[0]&&(this.canPrettyPrintKey.value=[e.document.uri.toString()])}};Id=T([(0,_0.injectable)(),v(0,(0,_0.inject)(Je))],Id);var MK=(t,e,r)=>t.customRequest("prettyPrintSource",{source:e,line:r.line,column:r.character}),_we=t=>{let e=kK.parse(t.query),r=e.session,n={path:t.fsPath,sourceReference:Number(e.ref)||0};return{sessionId:r,source:n}};var Bg=A(_e()),Ng=A(J()),FK=A(require("path")),ji=A(require("vscode"));var OK="breakpointTerminationWarnedSlow",Sd=class{constructor(e,r){this.fs=e;this.context=r;this.sortOrder=2;this.id="breakpoint";this.label=Bg.t("Pick Breakpoint");this.description=Bg.t("Run until a specific breakpoint is hit")}async onPick(e,r){if(r)return new A0(r);let n=ji.window.createQuickPick();n.canSelectMany=!0,n.matchOnDescription=!0,n.busy=!0;let i=await new Promise(o=>{n.onDidAccept(()=>o(n.selectedItems)),n.onDidHide(()=>o(void 0)),n.onDidChangeActive(async s=>{if(!s.length)return;let a=s[0].location,u=await ji.workspace.openTextDocument(a.uri);ji.window.showTextDocument(u,{selection:a.range,preview:!0,preserveFocus:!0})}),n.show(),(async()=>{let s=ji.debug.breakpoints.filter(c=>c.enabled&&c instanceof ji.SourceBreakpoint),a=await Promise.all(s.map(c=>e.getDebugProtocolBreakpoint(c))),u=await this.getCandidates(a,s);n.items=u,n.selectedItems=u,n.busy=!1})()});if(n.dispose(),!!i)return await this.warnSlowCode(),new A0(i.map(o=>Number(o.id)))}async warnSlowCode(){this.context.workspaceState.get(OK)||(ji.window.showWarningMessage(Bg.t('Profiling with breakpoints enabled can change the performance of your code. It can be useful to validate your findings with the "duration" or "manual" termination conditions.'),Bg.t("Got it!")),await this.context.workspaceState.update(OK,!0))}async getCandidates(e,r){if(e.length!==r.length)throw new Error("Mismatched breakpoint array lengths");let n=Jo(o=>this.getFileLines(o));return(await Promise.all(r.map(async(o,s)=>{let a=e[s];if(!a||!a.id)return;let u=o.location,c=ji.workspace.getWorkspaceFolder(u.uri),l=c?FK.relative(c.uri.fsPath,u.uri.fsPath):u.uri.fsPath,p=await n(u.uri.fsPath);return{id:a.id,label:`${l}:${u.range.start.line}:${u.range.start.character}`,location:u,description:p?.[u.range.start.line]?.trim()}}))).filter(Ct)}async getFileLines(e){try{return(await this.fs.readFile(e,"utf-8")).split(`
`)}catch{return}}};Sd=T([(0,Ng.injectable)(),v(0,(0,Ng.inject)(we)),v(1,(0,Ng.inject)(it))],Sd);var A0=class{constructor(e){this.breakpointIds=e}get customData(){return{stopAtBreakpoint:this.breakpointIds.slice()}}dispose(){}};var Jc=A(_e()),BK=A(J()),NK=A(require("vscode"));var I0=A(_e()),Go=A(require("vscode"));var Ug=class{constructor(e,r,n){this.session=e;this.impl=r;this.termination=n;this.statusChangeEmitter=new z;this.stopEmitter=new z;this._innerStatus=[];this.disposables=new Se;this.state=0;this.onStatusChange=this.statusChangeEmitter.event;this.onStop=this.stopEmitter.event;this.disposables.push(Go.debug.onDidReceiveDebugSessionCustomEvent(i=>{i.session===e&&i.event==="profilerStateUpdate"&&this.onStateUpdate(i.body)}),Go.debug.onDidTerminateDebugSession(i=>{i===e&&this.stopEmitter.fire(void 0)})),n&&(this.disposables.push(n),n.attachTo?.(this))}get status(){return this._innerStatus.filter(e=>!!e).join(", ")||void 0}async start(){try{await Go.window.withProgress({location:Go.ProgressLocation.Window,title:I0.t("Starting profile...")},()=>this.session.customRequest("startProfile",{type:this.impl.type,...this.termination?.customData}))}catch(e){Go.window.showErrorMessage(e.message),this.stopEmitter.fire(void 0)}}dispose(){this.state=2,this.disposables.dispose()}setFile(e){this.file=e}async stop(){this.state===0&&(this.setStatus(-1,I0.t("Saving")),this.state=1,await Go.window.withProgress({location:Go.ProgressLocation.Window,title:I0.t("Stopping profile...")},()=>this.session.customRequest("stopProfile",{})))}onStateUpdate(e){if(e.running){this.setStatus(0,e.label);return}this.state=2,this.stopEmitter.fire(this.file),this.dispose()}setStatus(e,r){this.state===0&&(e===-1?this._innerStatus=[r]:this._innerStatus[e]=r,this.statusChangeEmitter.fire(this.status))}};var Ed=class{constructor(){this.sortOrder=1;this.id="duration";this.label=Jc.t("Duration");this.description=Jc.t("Run for a specific amount of time")}async onPick(e,r){if(r)return new S0(r*1e3);let n=NK.window.createInputBox();n.title=Jc.t("Duration of Profile"),n.placeholder=Jc.t('Profile duration in seconds, e.g "5"'),this.lastDuration&&(n.value=String(this.lastDuration)),n.onDidChangeValue(o=>{/^[0-9]+$/.test(o)?Number(o)<1?n.validationMessage=Jc.t("Please enter a number greater than 1"):n.validationMessage=void 0:n.validationMessage=Jc.t("Please enter a number")});let i=await new Promise(o=>{n.onDidAccept(()=>{if(n.validationMessage)return o(void 0);this.lastDuration=Number(n.value),o(new S0(this.lastDuration*1e3))}),n.onDidHide(()=>o(void 0)),n.show()});return n.dispose(),i}};Ed=T([(0,BK.injectable)()],Ed);var S0=class{constructor(e){this.duration=e;this.disposable=new Se}attachTo(e){let r=Date.now()+this.duration,n=()=>e.setStatus(1,`${Math.round((r-Date.now())/1e3)}s`),i=setTimeout(()=>e.stop(),this.duration),o=setInterval(n,1e3);n(),this.disposable.callback(()=>{clearTimeout(i),clearInterval(o)})}dispose(){this.disposable.dispose()}};var uT=A(_e()),UK=A(J());var Dd=class{constructor(){this.sortOrder=0;this.id="manual";this.label=uT.t("Manual");this.description=uT.t("Run until manually stopped")}async onPick(){return new jg}};Dd=T([(0,UK.injectable)()],Dd);var jg=class{dispose(){}};var Cd=Symbol("ITerminationConditionFactory");var Ko=A(_e()),mu=A(J()),jK=require("os"),E0=require("path"),pr=A(require("vscode"));var Awe=t=>"__pendingTargetId"in t.configuration,hu=class{constructor(e,r,n,i){this.tracker=e;this.fs=r;this.sessionStates=n;this.terminationConditions=i;this.activeSessions=new Map;this.disposables=new Se;this.disposables.push(pr.debug.onDidReceiveDebugSessionCustomEvent(o=>{if(o.event!=="profileStarted")return;let s=o.body,a=this.activeSessions.get(o.session.id);a||(a=new Ug(o.session,dn.ctors.find(u=>u.type===s.type)||dn.ctors[0],new jg),this.registerSession(a)),a.setFile(s.file)}))}async start(e){let r,n=[...this.tracker.getConcreteSessions()].filter(Awe);if(e.sessionId?r=n.find(c=>c.id===e.sessionId):r=await this.pickSession(n),!r)return;let i=r,o=this.activeSessions.get(i.id);if(o&&!await this.alreadyRunningSession(o))return;let s=await this.pickType(i,e.type);if(!s)return;let a;if(!s.instant&&(a=await this.pickTermination(i,e.termination),!a))return;let u=new Ug(i,s,a);u&&(this.registerSession(u,e.onCompleteCommand),await u.start(),s.instant&&await u.stop())}async stop(e){let r;if(e)r=this.activeSessions.get(e);else{let n=await this.pickSession([...this.activeSessions.values()].map(i=>i.session));r=n&&this.activeSessions.get(n.id)}r&&(this.sessionStates.remove(r.session.id),await r.stop())}dispose(){for(let e of this.activeSessions.values())e.dispose();this.activeSessions.clear(),this.disposables.dispose()}registerSession(e,r){this.activeSessions.set(e.session.id,e),this.sessionStates.add(e.session.id,Ko.t("Profiling")),e.onStatusChange(()=>this.updateStatusBar()),e.onStop(n=>{n&&this.openProfileFile(e,r,e.session,n),this.activeSessions.delete(e.session.id),e.dispose(),this.updateStatusBar()}),this.updateStatusBar()}async openProfileFile(e,r,n,i){if(r)return Promise.all([pr.commands.executeCommand(r,{contents:await this.fs.readFile(i,"utf-8"),basename:(0,E0.basename)(i)+e.impl.extension}),this.fs.unlink(i)]);let o=n.workspaceFolder?.uri.fsPath??pr.workspace.workspaceFolders?.[0].uri.fsPath??(0,jK.homedir)(),s=vv()+e.impl.extension,a=pr.Uri.file((0,E0.join)(o,s));await hk(this.fs,i,a.fsPath),await pr.commands.executeCommand(e.impl.editable?"vscode.open":"revealInExplorer",a)}updateStatusBar(){if(this.activeSessions.size===0){this.statusBarItem?.hide(),qd(pr.commands,"jsDebugIsProfiling",!1);return}this.statusBarItem||(this.statusBarItem=pr.window.createStatusBarItem(pr.StatusBarAlignment.Right,500),this.statusBarItem.command="extension.js-debug.stopProfile"),qd(pr.commands,"jsDebugIsProfiling",!0);let e=ia(this.activeSessions.values());e&&this.activeSessions.size===1?this.statusBarItem.text=e.status?Ko.t("{0} Click to Stop Profiling ({1})","$(loading~spin)",e.status):Ko.t("{0} Click to Stop Profiling","$(loading~spin)"):this.statusBarItem.text=Ko.t("{0} Click to Stop Profiling ({1} sessions)","$(loading~spin)",this.activeSessions.size),this.statusBarItem.show()}async alreadyRunningSession(e){let r=Ko.t("Yes"),n=Ko.t("No");return await pr.window.showErrorMessage(Ko.t("A profiling session is already running, would you like to stop it and start a new session?"),r,n)!==r?!1:(await this.stop(e.session.id),!0)}async pickSession(e){if(e.length===0)return;if(e.length===1)return e[0];let r=await pr.window.showQuickPick(e.map(n=>({label:n.name,id:n.id})));return r&&e.find(n=>n.id===r.id)}async pickType(e,r){let n=e.configuration;if(r)return dn.ctors.find(o=>o.type===r&&o.canApplyTo(n));let i=await this.pickWithLastDefault(Ko.t("Type of profile:"),dn.ctors.filter(o=>o.canApplyTo(n)),this.lastChosenType);return i&&(this.lastChosenType=i.label),i}async pickTermination(e,r){if(r){let i=typeof r=="string"?{type:r}:r;return this.terminationConditions.find(o=>o.id===i.type)?.onPick(e,...i.args??[])}let n=await this.pickWithLastDefault(Ko.t("How long to run the profile:"),this.terminationConditions,this.lastChosenTermination);return n&&(this.lastChosenTermination=n.label),n?.onPick(e)}async pickWithLastDefault(e,r,n){if(r.length<=1)return r[0];let i=pr.window.createQuickPick();i.title=e,i.items=r.slice().sort((s,a)=>s.label===n||a.label===n?s.label===n?-1:1:(s.sortOrder??0)-(a.sortOrder??0)).map(s=>({label:s.label,description:s.description,alwaysShow:!0}));let o=await new Promise(s=>{i.onDidAccept(()=>s(i.selectedItems[0]?.label)),i.onDidHide(()=>s(void 0)),i.show()});if(i.dispose(),!!o)return r.find(s=>s.label===o)}};hu=T([(0,mu.injectable)(),v(0,(0,mu.inject)(Je)),v(1,(0,mu.inject)(we)),v(2,(0,mu.inject)(ip)),v(3,(0,mu.multiInject)(Cd))],hu);var WK=A(J()),VK=require("vscode");var qK=(t,e)=>{let r=t;for(let[n,i]of Object.entries(e))typeof i=="object"&&i?r[n]=Object.assign(r[n]||{},i):r[n]=i};var Pd=class{constructor(){this.read=Ae(()=>Dt(VK.workspace,"debug.javascript.resourceRequestOptions"))}provideOptions(e){qK(e,this.read()||{})}};Pd=T([(0,WK.injectable)()],Pd);var GK=A(J()),cT=require("vscode");var xd=class{register(e){e.subscriptions.push(xe(cT.commands,"extension.node-debug.startWithStopOnEntry",()=>cT.commands.executeCommand("workbench.action.debug.start",{config:{stopOnEntry:!0}})))}};xd=T([(0,GK.injectable)()],xd);var AT=A(_e()),K0=A(J()),nz=A(rz()),iz=require("url"),dr=A(require("vscode"));var yu=class{constructor(e){this.defaultBrowser=e;this.enabledTerminals=new WeakSet;this.disposable=new Se;this.notifiedCantOpenOnWeb=!1;this.baseConfiguration=this.readConfig();this.disposable.push(dr.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("debug.javascript.debugByLinkOptions")&&(this.baseConfiguration=this.readConfig())}))}enableHandlingInTerminal(e){this.enabledTerminals.add(e)}dispose(){this.disposable.dispose()}provideTerminalLinks(e){switch(this.baseConfiguration.enabled){case"off":return[];case"always":break;case"on":default:if(!this.enabledTerminals.has(e.terminal))return[]}let r=[],n=Ae(()=>{if("cwd"in e.terminal.creationOptions&&e.terminal.creationOptions.cwd){let i=dr.workspace.getWorkspaceFolder(typeof e.terminal.creationOptions.cwd=="string"?dr.Uri.file(e.terminal.creationOptions.cwd):e.terminal.creationOptions.cwd);if(i)return i}return dr.workspace.workspaceFolders?.[0]});for(let i of(0,nz.find)(e.line,"url")){let o=-1;for(;(o=e.line.indexOf(i.value,o+1))!==-1;){let s;try{s=new iz.URL(i.href)}catch{continue}s.protocol==="http:"&&!i.value.startsWith("http:")&&!By(s.hostname)&&(s.protocol="https:"),!(s.protocol!=="http:"&&s.protocol!=="https:")&&r.push({startIndex:o,length:i.value.length,tooltip:AT.t("Debug URL"),target:s,workspaceFolder:n()?.index})}}return r}async handleTerminalLink(e){await this.handleTerminalLinkInner(e)||dr.env.openExternal(dr.Uri.parse(e.target.toString()))}async handleTerminalLinkInner(e){if(!e.target)return!1;let r=e.target;if(dr.env.uiKind===dr.UIKind.Web)return this.notifiedCantOpenOnWeb||(dr.window.showInformationMessage(AT.t("We can't launch a browser in debug mode from here. If you want to debug this webpage, open this workspace from VS Code on your desktop.")),this.notifiedCantOpenOnWeb=!0),!1;j1(r.hostname)&&(r.hostname="localhost");let n="pwa-chrome";try{await this.defaultBrowser.lookup()===3&&(n="pwa-msedge")}catch{}let i=e.workspaceFolder!==void 0?dr.workspace.workspaceFolders?.[e.workspaceFolder]:void 0;return dr.debug.startDebugging(i,{...this.baseConfiguration,type:n,name:r.toString(),request:"launch",url:r.toString()}),!0}readConfig(){let e=Dt(dr.workspace,"debug.javascript.debugByLinkOptions");return typeof e=="boolean"&&(e=e?"on":"off"),typeof e=="string"?{enabled:e}:{enabled:"on",...e}}};yu=T([(0,K0.injectable)(),v(0,(0,K0.inject)(Vp))],yu);var oz=t=>{t.bind(Yn).toConstantValue(require("vscode")),bK.forEach(e=>{t.bind(e).toSelf().inSingletonScope(),t.bind(c0).to(e)}),vK.forEach(e=>t.bind(l0).to(e).inSingletonScope()),t.bind(ln).to(wd).inSingletonScope(),t.bind(ln).to(fd).inSingletonScope(),t.bind(ln).to(Jf).inSingletonScope(),t.bind(ln).to(Kc).inSingletonScope(),t.bind(ln).to(hd).inSingletonScope(),t.bind(ln).to(xd).inSingletonScope(),t.bind(ln).to(_d).inSingletonScope(),t.bind(ln).to(yd).inSingletonScope(),t.bind(ln).to(bd).inSingletonScope(),t.bind(ln).to(Id).inSingletonScope(),t.bind(ln).to(Qf).inSingletonScope(),t.bind(mg).to(vd).inSingletonScope(),t.bind(Je).toSelf().inSingletonScope().onActivation(wt),t.bind(hu).toSelf().inSingletonScope().onActivation(wt),t.bind(yu).toSelf().inSingletonScope(),t.bind(Kc).toSelf().inSingletonScope(),t.bind(Xu).to(Hd).inSingletonScope(),t.bind(Cd).to(Ed).inSingletonScope(),t.bind(Cd).to(Dd).inSingletonScope(),t.bind(Cd).to(Sd).inSingletonScope()},sz=t=>{t.bind(Hr).to(Rs).onActivation(wt),t.bind(Bp).to(Pd).inSingletonScope(),t.bind(Ql).to(Xf).inSingletonScope()};var uz=A(_e()),z0=A(J());var az="@vscode/dwarf-debugging",Od=class{constructor(e){this.dap=e;this.didPrompt=!1}async load(){try{return await import(az)}catch{return}}prompt(){this.didPrompt||(this.didPrompt=!0,this.dap.output({output:uz.t("You may install the `{}` module via npm for enhanced WebAssembly debugging",az),category:"console"}))}};Od=T([(0,z0.injectable)(),v(0,(0,z0.inject)(on))],Od);var lz=(t,e,r,n)=>{let i=new Y0.Container;return i.parent=t,i.bind(Me).toConstantValue(e.launchConfig),i.bind(rp).toConstantValue(i),i.bind(on).toConstantValue(r),i.bind(mt).toConstantValue(n),i.bind(Po).toConstantValue(e),i.bind(pG).toConstantValue(e.targetOrigin()),i.bind(Tu).to(hc).inSingletonScope(),i.bind(Ho).to(Ou).inSingletonScope(),i.bind(sb).to(Gl).inSingletonScope(),i.bind(fa).toSelf().inSingletonScope(),e.sourcePathResolver&&i.bind(Ze).toConstantValue(e.sourcePathResolver),i.bind(uc).toSelf(),i.bind(mv).toDynamicValue(o=>o.container.get(uc).create()).inSingletonScope(),e.parent()&&(i.bind(Nu).to(Bu).inSingletonScope(),i.bind(yo).to(Bl).inSingletonScope()),i.bind(zt).to(process.env.DA_TEST_DISABLE_TELEMETRY?Fc:pn).inSingletonScope().onActivation(wt),i.bind(Zn).toSelf().inSingletonScope(),i.bind(or).toSelf().inSingletonScope(),i.bind(Da).toSelf().inSingletonScope(),i.bind(ha).to(Lo).inSingletonScope(),i.bind(wa).toSelf().inSingletonScope(),i.bind(Ip).to(Ap).inSingletonScope(),i.bind(Bb).to(hp).inSingletonScope(),i.bind(Kn).to(Wl).inSingletonScope(),i.bind(cv).to(_p).inSingletonScope(),i.bind(Ea).to(wp).inSingletonScope(),i.bind(Ab).to(op).inSingletonScope(),i.bind(lr).toSelf(),i.bind(Ln).toSelf(),i.bind(Tn).toSelf(),i.bind(bv).to(dn).inSingletonScope(),i.bind(wv).to(Ep).inSingletonScope(),i.bind(Fb).to(fp).inSingletonScope().onActivation(wt),i},pz=t=>{let e=new Y0.Container;e.parent=t,e.bind(rp).toConstantValue(e),e.bind(ce).to(oi).inSingletonScope().onActivation(wt),e.bind(Tu).to(hc).inSingletonScope(),e.bind(zt).to(process.env.DA_TEST_DISABLE_TELEMETRY?Fc:pn).inSingletonScope().onActivation(wt),e.bind(co).to(co).inSingletonScope(),e.bind(ts).to(ts).inSingletonScope(),e.bind(Up).to(Np).inSingletonScope(),e.bind(Ol).to(cf).inSingletonScope(),e.bind(fi).to(_f),e.bind(Bo).toSelf().inSingletonScope().onActivation(wt),e.bind(Wo).toSelf(),e.bind(Hr).to(Bi).onActivation(wt),e.bind(Hr).to(If).onActivation(wt),e.bind(Hr).to(Sf).onActivation(wt),e.bind(Hr).to(Lf).onActivation(wt),e.bind(Eg).to(Mf),e.bind(Eg).to(Of),e.bind($c).to(wf).inSingletonScope(),sz(e),e.bind(Hr).to(Pf).onActivation(wt),e.bind(Lc).toSelf().inSingletonScope().onActivation(wt),e.bind(Hr).toService(Lc),e.bind(Hr).to(ff).inSingletonScope().onActivation(wt),e.bind(Hr).to(hf).inSingletonScope().onActivation(wt),e.bind(Hr).to(df).inSingletonScope().onActivation(wt),e.bind(Hr).to(mf).inSingletonScope().onActivation(wt),e.bind(Hr).to(li).onActivation(wt),e.bind(Hr).toDynamicValue(()=>t.get(Uo).createLauncher(e.get(ce))).inSingletonScope(),e.isBound(Xu)||e.bind(Xu).to(Od).inSingletonScope();let r=n=>i=>new n(i.container.get(KS),i.container.get(we),i.container.get(kh));return e.bind(zu).toDynamicValue(r(J0.ChromeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","chrome"),e.bind(zu).toDynamicValue(r(J0.EdgeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","edge"),e},fz=t=>{let e=new Y0.Container;return e.bind(rp).toConstantValue(e),e.bind(Uo).toSelf().inSingletonScope(),e.bind(Fi).toSelf().inSingletonScope(),e.bind(Ql).to(Ff).inSingletonScope(),e.bind(ip).toConstantValue(new To),e.bind(Vp).to(Wp).inSingletonScope(),e.bind(_o).toConstantValue(t.storagePath),e.bind(np).toConstantValue(t.isVsCode),e.bind(O_).to($f),e.bind(at).to(pp).inSingletonScope(),e.bind(KS).toConstantValue(process.env),e.bind(kh).toConstantValue(cz.default),e.bind(we).toConstantValue(X0.promises),e.bind(Mr).toConstantValue(new vn(X0.promises)),e.bind(us).toConstantValue(t.isRemote?"remote":"local"),t.context&&e.bind(it).toConstantValue(t.context),oz(e),e},dz=(t,e,r)=>{t.bind(Rm).toConstantValue(jq(e)),t.bind(Me).toService(Rm),t.bind(Qr).to(yf).inSingletonScope(),t.bind(Dl).toConstantValue(r),t.bind(Ze).toDynamicValue(n=>n.container.get(Qr).create(e,n.container.get(ce))).inSingletonScope(),t.bind(Mr).toConstantValue(ly.create(e.__remoteFilePrefix,X0.promises,r)),t.bind(bS).to(ua).inSingletonScope().onActivation(wt),t.bind(la).to(jl).inSingletonScope(),t.bind(Ht).toSelf().inSingletonScope().onActivation(wt),t.bind(Ho).to(Ou).inSingletonScope(),t.bind(Fu).toSelf().inSingletonScope(),t.bind(Nu).to(Bu).inSingletonScope(),t.bind(yo).to(Fl).inSingletonScope()};var wz=A(_e()),hr=A(require("vscode"));var hz=A(_e()),qs=A(J()),IT=A(require("path")),bu=A(require("vscode"));var el=class extends mn{constructor(r,n,i,o,s,a){super(r,n,a,s);this.extensionContext=i;this.fs=o;this.telemetryItems=new Map}get deferredSocketName(){let r=this.extensionContext.environmentVariableCollection.get("VSCODE_INSPECTOR_OPTIONS");return r?new I_({VSCODE_INSPECTOR_OPTIONS:r.value}).inspectorOptions?.inspectorIpc:void 0}getProcessTelemetry(r){return Promise.resolve(r instanceof Af?this.telemetryItems.get(r.processId()):void 0)}resolveParams(r){if(r.type==="node-terminal"&&r.request==="launch")return r}async launchProgram(r){await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,r),this.program=new $s,this.program.stopped.then(n=>this.onProgramTerminated(n))}async refreshVariables(){this.run&&await this.applyInspectorOptions(this.extensionContext.environmentVariableCollection,this.run)}async applyInspectorOptions(r,n){let i;try{i=await this.resolveNodePath(n.params)}catch(u){if(u instanceof ee&&u.cause.id===9229)i=new Ar("node",void 0);else throw u}let o=Dt(bu.workspace,"debug.javascript.autoAttachFilter"),a=(await this.resolveEnvironment(n,i,{deferredMode:!0,inspectorIpc:this.deferredSocketName??n.serverAddress+".deferred",autoAttachMode:o,aaPatterns:o==="smart"?this.readSmartPatterns():void 0})).defined();r.persistent=!0,r.description=new bu.MarkdownString(hz.t({message:'Enables Node.js [auto attach]({0}) debugging in "{1}" mode',comment:["{Locked='[auto attach]({0})'}","the 2nd placeholder is the setting value"],args:["https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_auto-attach",o]})),r.prepend("NODE_OPTIONS",a.NODE_OPTIONS),r.append("VSCODE_INSPECTOR_OPTIONS",a.VSCODE_INSPECTOR_OPTIONS)}readSmartPatterns(){let r=Dt(bu.workspace,"debug.javascript.autoAttachSmartPattern"),n=bu.workspace.workspaceFolders?.length===1?bu.workspace.workspaceFolders[0].uri.fsPath:`{${bu.workspace.workspaceFolders?.map(i=>i.uri.fsPath).join(",")}}`;return r?.map(i=>i.replace("${workspaceFolder}",n)).map(ze)}async getBootloaderFile(r,n){let i=this.extensionContext.storagePath||this.extensionContext.globalStoragePath;if(i.includes(" ")&&n.isPreciselyKnown&&!n.has(0))throw new Yg(`The \`node\` version on your PATH is too old (${n.version?.major}), so we cannot enable auto-attach in your environment`,"https://github.com/microsoft/vscode-js-debug/issues/708");let o=IT.join(i,"bootloader.js");try{await this.fs.mkdir(i)}catch{}await Promise.all([MI(this.fs,S_,o),MI(this.fs,mG,IT.join(i,"watchdog.js"))]);let s=ze(o);return{interpolatedPath:s.includes(" ")?`"${s}"`:s,dispose:()=>{}}}async spawnForChild(r){if(!this.run)return;let n=Number(r.pid??"0");this.telemetryItems.set(n,r.telemetry);let i=await gn.attach({...r,ipcAddress:this.run.serverAddress});i.onEnd(()=>{this.telemetryItems.delete(n),i.dispose()})}static clearVariables(r){r.environmentVariableCollection.clear()}};el=T([(0,qs.injectable)(),v(0,(0,qs.inject)(fi)),v(1,(0,qs.inject)(ce)),v(2,(0,qs.inject)(it)),v(3,(0,qs.inject)(we)),v(4,(0,qs.inject)(Qr)),v(5,(0,qs.inject)(at))],el);var Yg=class extends Error{constructor(r,n){super(r);this.helpLink=n}};var Hz=A(_e()),yz=require("os"),St=A(require("vscode"));var mz=()=>{let t,e=Ue(),r=(n,i)=>i==="connect"?o=>{e.resolve(o),t=o}:i==="disconnect"?()=>{e=Ue(),t=void 0}:async(...o)=>(t||await e.promise)[i](...o);return new Proxy({},{get:r})};var ET=(t,e,r={},n=()=>!0)=>{let i=new pn,o={...Dt(St.workspace,"debug.javascript.terminalOptions"),internalConsoleOptions:"neverOpen"},s=mz();i.attachDap(s);let a=new Set,u=async c=>{let l=await e.getProcessTelemetry(c),p=l&&St.Uri.file(l.cwd),f=p&&St.workspace.getWorkspaceFolder(p);return f?f.uri:r.__workspaceFolder?St.Uri.file(r.__workspaceFolder):St.workspace.workspaceFolders?.[0].uri??p};return e.onTargetListChanged(async()=>{let c=await St.workspace.requestWorkspaceTrust(),l=new Set;for(let p of e.targetList()){if(l.add(p),a.has(p)){a.delete(p);continue}let f=t.addDelegate(p,s,p.parent());if(!n(p)){p.detach();return}if(p.targetInfo.openerId&&!p.parent()){p.detach();return}if(!c){p.detach();return}if(!p.parent()){let m=await u(p);St.debug.startDebugging(m&&St.workspace.getWorkspaceFolder(m),{...o,type:"node-terminal",name:"Node.js Process",request:"attach",delegateId:f,cwd:m?.fsPath,__workspaceFolder:m})}}for(let p of a)t.removeDelegate(p);a=l}),e.launch(Ks({...o,type:"node-terminal",name:uH.name,request:"launch",...r}),{dap:s,telemetryReporter:i,cancellationToken:ar,get targetOrigin(){return new vf("<unset>")}})},bz=Symbol("Abort"),gz=(0,yz.homedir)(),Bwe=process.platform==="win32"?t=>t:t=>t.startsWith(gz)?`~${t.slice(gz.length)}`:t;async function Nwe(){let t=St.workspace.workspaceFolders;return!t||t.length<2?t?.[0]:(await St.window.showQuickPick(t.map(r=>({label:r.name,description:Bwe(r.uri.fsPath),folder:r})),{placeHolder:Hz.t("Select current working directory for new terminal")}))?.folder??bz}var ST=class extends Rs{constructor(){super(...arguments);this.optionsReadyEmitter=new z;this.onOptionsReady=this.optionsReadyEmitter.event}createTerminal(r){return this.optionsReadyEmitter.fire(r),new Promise(n=>{let i=St.window.onDidOpenTerminal(o=>{i.dispose(),n(o)})})}};function vz(t,e,r,n){let i=new Map,o=(a,u)=>new Rs(u,a,n.get(we),n.get(Fi),n.get(at));async function s(a,u,c,l,p=o){if(!c){let h=await Nwe();if(h===bz)return;c=h}if(u){for(let[h,H]of i)if(H.folder===c&&H.cwd===l?.cwd&&!H.launcher.targetList().length){h.show(!0),h.sendText(u);return}}let f=new No,m=p(f,new Ts(f,n.get(we),E_));m.onTerminalCreated(h=>{i.set(h,{launcher:m,folder:c,cwd:l?.cwd}),r.enableHandlingInTerminal(h)});try{await ET(a,m,{command:u,...l,__workspaceFolder:c?.uri.fsPath},()=>{for(let[h,H]of i)if(H.launcher===m&&h.state.isInteractedWith)return!0;return!1})}catch(h){St.window.showErrorMessage(h.message)}}t.subscriptions.push(St.window.onDidCloseTerminal(a=>{i.delete(a)}),xe(St.commands,"extension.js-debug.createDebuggerTerminal",(a,u,c)=>s(e,a,u,c)),St.window.registerTerminalProfileProvider("extension.js-debug.debugTerminal",{provideTerminalProfile:()=>new Promise(a=>s(e,void 0,void 0,void 0,(u,c)=>{let l=new ST(c,u,n.get(we),n.get(Fi),n.get(at));return l.onOptionsReady(p=>a(new St.TerminalProfile(p))),l}))}),St.window.registerTerminalLinkProvider?.(r))}function _z(t,e,r){let n=new Map,i,o=s=>{let a=n.get(s);if(a)return a;let u=(async()=>{let c=new No,l=new el(new Ts(c,r.get(we),E_),c,t,r.get(we),r.get(Fi),r.get(at)),p=Dt(hr.workspace,"debug.javascript.terminalOptions");if(s){let f=s?.uri.fsPath;p={...p,cwd:f,__workspaceFolder:f}}return await ET(e,l,p),l.onTargetListChanged(()=>{l.targetList().length===0&&!i?i=setTimeout(()=>{n.delete(s),l.terminate()},5*60*1e3):i&&(clearTimeout(i),i=void 0)}),l})();return n.set(s,u),u};t.subscriptions.push(xe(hr.commands,"extension.js-debug.setAutoAttachVariables",async()=>{try{return{ipcAddress:(await o(hr.workspace.workspaceFolders?.[0])).deferredSocketName}}catch(s){if(s instanceof Yg&&s.helpLink){let a=wz.t("Details");await hr.window.showErrorMessage(s.message,a)===a&&hr.env.openExternal(hr.Uri.parse(s.helpLink))}else await hr.window.showErrorMessage(s.message)}}),xe(hr.commands,"extension.js-debug.autoAttachToProcess",async s=>{try{let a=s.scriptName&&hr.workspace.getWorkspaceFolder(hr.Uri.file(s.scriptName));(await o(a||hr.workspace.workspaceFolders?.[0])).spawnForChild(s)}catch(a){console.error(a),hr.window.showErrorMessage(`Error activating auto attach: ${a.stack||a}`)}}),xe(hr.commands,"extension.js-debug.clearAutoAttachVariables",async()=>{el.clearVariables(t);for(let[s,a]of n.entries())n.delete(s),a.then(u=>u.terminate())}))}var Az=A(_e()),Iz=require("url"),Cr=A(require("vscode"));var Q0=A(require("vscode"));var Fd=class{constructor(){this.tunnels=new Map;this.disposable=new Se;this.disposable.push(Q0.debug.onDidTerminateDebugSession(e=>this.destroySession(e.id)))}dispose(){return this.disposable.dispose()}destroySession(e){let r=this.tunnels.get(e);r&&(r.dispose(),this.tunnels.delete(e))}async request(e,r){let n=this.tunnels.get(e);n||(n=await Q0.workspace.openTunnel({remoteAddress:{port:r.remotePort,host:"localhost"},localAddressPort:r.localPort??r.remotePort,label:r.label}),this.tunnels.set(e,n));let i;if(typeof n.localAddress=="string"){let[o,s]=n.localAddress.split(":");i={host:o,port:Number(s)}}else i=n.localAddress;return{remoteAddress:n.remoteAddress,localAddress:i}}};var Uwe=t=>e=>typeof e.localAddress=="string"?e.localAddress.endsWith(`:${t}`):e.localAddress.port===t,jwe=async t=>{let e=t.params.url;if(!e)return;let r;try{r=new Iz.URL(e)}catch{return}if(!Dt(Cr.workspace,"debug.javascript.automaticallyTunnelRemoteServer"))return;let n=Number(r.port)||80;if(!(await Cr.workspace.tunnels).some(Uwe(n)))try{await Cr.workspace.openTunnel({remoteAddress:{port:n,host:"localhost"},localAddressPort:n})}catch{}},qwe=async(t,e,r)=>{if(Cr.env.uiKind===Cr.UIKind.Web)return Cr.debug.stopDebugging(t),Cr.window.showErrorMessage(Az.t("We can't launch a browser in debug mode from here. Open this workspace in VS Code on your desktop to enable debugging."));try{let[,n]=await Promise.all([jwe(r),e.request(t.id,{remotePort:r.serverPort,label:"Browser Debug Tunnel"}).catch(()=>{})]);await Cr.commands.executeCommand("js-debug-companion.launchAndAttach",{proxyUri:n?`127.0.0.1:${n.localAddress.port}`:`127.0.0.1:${r.serverPort}`,wslInfo:process.env.WSL_DISTRO_NAME&&{execPath:process.execPath,distro:process.env.WSL_DISTRO_NAME,user:process.env.USER},...r})}catch(n){Cr.window.showErrorMessage(`Error launching browser: ${n.message||n.stack}`)}},Wwe=async(t,e,{launchId:r})=>{await Cr.commands.executeCommand("js-debug-companion.kill",{launchId:r}),e.destroySession(t.id)};function Sz(t){let e=new Fd;t.subscriptions.push(e,Cr.debug.onDidReceiveDebugSessionCustomEvent(async r=>{switch(r.event){case"launchBrowserInCompanion":return qwe(r.session,e,r.body);case"killCompanionBrowser":return Wwe(r.session,e,r.body);default:}}))}var Et=A(require("vscode"));var Qg=class extends Et.TreeItem{constructor(r,n){super(r.title,Et.TreeItemCollapsibleState.None);this.checkboxState=n?Et.TreeItemCheckboxState.Checked:Et.TreeItemCheckboxState.Unchecked,this.id=r.id,this.group=r.group}static compare(r,n){return r.id.localeCompare(n.id)}},DT=class{constructor(e){this._onDidChangeTreeData=new z;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.breakpoints=[...im().values()].reduce((r,n)=>{let i=r.get(n.group);return i||(i=[],r.set(n.group,i)),i.push(new Qg(n,!1)),r},new Map),this._debugSessionTracker=e,e.onSessionAdded(r=>{Je.isConcreteSession(r)&&r.customRequest("enableCustomBreakpoints",{ids:this.getAllBreakpoints().filter(n=>n.checkboxState).map(n=>n.id)})})}getAllBreakpoints(){return[...this.breakpoints.values()].flat()}getTreeItem(e){return e}getChildren(e){return e?"label"in e?e.label==null?[]:this.breakpoints.get(e.label.toString()):[]:[...this.breakpoints].map(([r,n])=>{let i=new Et.TreeItem(r,Et.TreeItemCollapsibleState.Collapsed);return i.checkboxState=n.every(o=>o.checkboxState)?1:0,i})}getParent(e){if(e instanceof Qg)return this.getAllBreakpoints().find(r=>r.group==e.label)}addBreakpoints(e){if(e.length===0)return;for(let n of e)n.checkboxState=Et.TreeItemCheckboxState.Checked;let r=e.map(n=>n.id);for(let n of this._debugSessionTracker.getConcreteSessions())n.customRequest("enableCustomBreakpoints",{ids:r});this._onDidChangeTreeData.fire(void 0)}removeBreakpoints(e){if(e.length!==0){for(let r of e)r.checkboxState=Et.TreeItemCheckboxState.Unchecked;for(let r of this._debugSessionTracker.getConcreteSessions())r.customRequest("disableCustomBreakpoints",{ids:e.map(n=>n.id)});this._onDidChangeTreeData.fire(void 0)}}};function Ez(t,e){let r=new DT(e),n=Et.window.createTreeView("jsBrowserBreakpoints",{treeDataProvider:r,showCollapseAll:!0});n.onDidChangeCheckboxState(i=>{for(let o of i.items)if(o[0]instanceof Qg)o[1]?r.addBreakpoints([o[0]]):r.removeBreakpoints([o[0]]);else{if(!o[0].label)continue;let s=r.breakpoints.get(o[0].label.toString());if(!s)continue;o[1]?r.addBreakpoints(s):r.removeBreakpoints(s)}}),t.subscriptions.push(n),t.subscriptions.push(Et.commands.registerCommand("extension.js-debug.addCustomBreakpoints",()=>{let i=[...r.breakpoints.entries()].map(o=>[{kind:Et.QuickPickItemKind.Separator,id:o[0],label:o[0]},...o[1].map(s=>({id:s.id,label:`${s.label}`}))]).flat();Et.window.showQuickPick(i,{canPickMany:!0,placeHolder:"Select breakpoints to enable"}).then(o=>{if(!o)return;let s=o.filter(a=>a.kind!=Et.QuickPickItemKind.Separator).map(a=>a.id);r.addBreakpoints(r.getAllBreakpoints().filter(a=>s.includes(a.id)))})})),t.subscriptions.push(Et.commands.registerCommand("extension.js-debug.removeAllCustomBreakpoints",()=>{r.removeBreakpoints(r.getAllBreakpoints())})),t.subscriptions.push(Et.commands.registerCommand("extension.js-debug.removeCustomBreakpoint",()=>{let i=[...r.breakpoints.entries()].map(o=>[{kind:Et.QuickPickItemKind.Separator,id:o[0],label:o[0]},...o[1].map(s=>({id:s.id,label:`${s.label}`}))]).flat();Et.window.showQuickPick(i,{canPickMany:!0,placeHolder:"Select breakpoints to disable"}).then(o=>{if(!o)return;let s=o.map(a=>a.id);r.removeBreakpoints([...r.breakpoints].map(a=>a[1]).flat().filter(a=>s.includes(a.id)))})}))}var CT=A(require("vscode"));var Dz=(t,e)=>{let r=e.get(hu);t.subscriptions.push(xe(CT.commands,"extension.js-debug.startProfile",n=>r.start(typeof n=="string"?{sessionId:n}:n??{})),xe(CT.commands,"extension.js-debug.stopProfile",n=>r.stop(n)))};var Z0=A(require("vscode"));var Cz=(t,e)=>{let r=new Fd;t.subscriptions.push(r,xe(Z0.commands,"extension.js-debug.requestCDPProxy",async(n,i)=>{let o=e.getById(n);if(!o)return;let s=await o.customRequest("requestCDPProxy");if(!i)return s;try{if(Z0.env.remoteName!==void 0){let a=await r.request(n,{label:"Edge Devtools Tunnel",remotePort:s.port});return{host:a.localAddress.host,port:a.localAddress.port,path:s.path}}}catch{}return s}))};var Pz=A(require("vscode"));var xz=(t,e)=>{t.subscriptions.push(xe(Pz.commands,"extension.js-debug.revealPage",async r=>{await e.getById(r)?.customRequest("revealPage")}))};var Zg=A(require("vscode")),Lz=require("url");async function Tz(t){if(!t){let e=Zg.window.activeTextEditor;if(!e)return;t=e&&e.document.fileName}if(t&&Zg.debug.activeDebugSession){let e;typeof t=="string"?an(t)?e={resource:(0,Lz.fileURLToPath)(t)}:e={resource:t}:e={sourceReference:t},await Zg.debug.activeDebugSession.customRequest("toggleSkipFileStatus",e)}}var wu=A(require("vscode"));var Vz=require("fs"),Gz=A(require("net"));var $z=`\r
\r
`,Vwe=0,eH=class{constructor(e,r,n){this.inputStream=e;this.outputStream=r;this._contentLength=-1;this._connectionId=Vwe++;this.msgEmitter=new z;this.messageReceived=this.msgEmitter.event;this.endedEmitter=new z;this.closed=this.endedEmitter.event;this._handleData=e=>{let r=new zr;for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let n=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,n.length>0)try{let i=JSON.parse(n);this.logger?.verbose("dap.receive",void 0,{connectionId:this._connectionId,message:i}),this.msgEmitter.fire({message:i,receivedTime:r})}catch(i){console.error("Error handling data: "+(i&&i.message))}continue}}else{let n=this._rawData.indexOf($z);if(n!==-1){let o=this._rawData.toString("utf8",0,n).split(`\r
`);for(let s=0;s<o.length;s++){let a=o[s].split(/: +/);a[0]==="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(n+$z.length);continue}}break}};this.logger=n,this._rawData=Buffer.alloc(0),e.on("end",()=>this.endedEmitter.fire()),e.on("data",this._handleData)}send(e,r=!0,n){let i=JSON.stringify(e);if(r){let s=e;e.type==="response"&&e.command==="source"&&(s={...e,body:{...e.body,content:"<script source>"}}),this.logger?.verbose("dap.send",void 0,{connectionId:this._connectionId,message:s})}let o=`Content-Length: ${Buffer.byteLength(i,"utf8")}\r
\r
${i}`;if(this.outputStream.destroyed){this.logger?.warn("dap.send","Message not sent. Connection was closed."),n?.();return}this.outputStream.write(o,"utf8",s=>{n?.(),s&&(console.log(e),this.logger?.error("dap.send","Error while writing to output stream",s),this.close())})}close(){this.inputStream.destroy(),this.outputStream.destroy()}setLogger(e){return this.logger=e,this}};var qz=A(_e()),nA=A(require("os"));var Gwe={connect:async()=>Yl},Mz=t=>({async connect(e){return await e.Debugger.setAsyncCallStackDepth({maxDepth:t}),Yl}}),Kwe=t=>{let e=new z,r=!1,n=()=>{r||(r=!0,e.fire())};return{async connect(i){if(r)return await i.Debugger.setAsyncCallStackDepth({maxDepth:t}),Yl;let o=new Se;return o.push(e.event(()=>{o.dispose(),i.Debugger.setAsyncCallStackDepth({maxDepth:t})}),i.Debugger.on("breakpointResolved",n),i.Debugger.on("paused",s=>{s.reason!=="instrumentation"&&n()})),o}}},Rz=Mz(32),kz=t=>t===!1?Gwe:t===!0?Rz:"onAttach"in t?Mz(t.onAttach):"onceBreakpointResolved"in t?Kwe(t.onceBreakpointResolved):Rz;var gi=A(_e());var tl=class{constructor(e,r,n,i){this.asyncStackPolicy=r;this.launchConfig=n;this._services=i;this._disposables=new Se;this._customBreakpoints=new Set;this._threadDeferred=Ue();this.breakpointIdCounter=sH();this._cdpProxyProvider=this._services.get(Fb);this._configurationDoneDeferred=Ue(),this.sourceContainer=i.get(or),this.breakpointManager=i.get(Zn);let o=i.get(mv),s=i.get(zt);s.onFlush(()=>{s.report("breakpointStats",this.breakpointManager.statisticsForTelemetry()),s.report("statistics",this.sourceContainer.statistics())}),this.dap=e,this.dap.on("initialize",a=>this.onInitialize(a)),this.dap.on("setBreakpoints",a=>this._onSetBreakpoints(a)),this.dap.on("setExceptionBreakpoints",a=>this.setExceptionBreakpoints(a)),this.dap.on("configurationDone",()=>this.configurationDone()),this.dap.on("loadedSources",()=>this._onLoadedSources()),this.dap.on("disableSourcemap",a=>this._onDisableSourcemap(a)),this.dap.on("source",a=>this._onSource(a)),this.dap.on("threads",()=>this._onThreads()),this.dap.on("stackTrace",a=>this._withThread(u=>u.stackTrace(a))),this.dap.on("variables",a=>this._onVariables(a)),this.dap.on("readMemory",a=>this._onReadMemory(a)),this.dap.on("writeMemory",a=>this._onWriteMemory(a)),this.dap.on("setVariable",a=>this._onSetVariable(a)),this.dap.on("setExpression",a=>this._onSetExpression(a)),this.dap.on("continue",()=>this._withThread(a=>a.resume())),this.dap.on("pause",()=>this._withThread(a=>a.pause())),this.dap.on("next",()=>this._withThread(a=>a.stepOver())),this.dap.on("stepIn",a=>this._withThread(u=>u.stepInto(a.targetId))),this.dap.on("stepOut",()=>this._withThread(a=>a.stepOut())),this.dap.on("restartFrame",a=>this._withThread(u=>u.restartFrame(a))),this.dap.on("scopes",a=>this._withThread(u=>u.scopes(a))),this.dap.on("evaluate",a=>this.onEvaluate(a)),this.dap.on("completions",a=>this._withThread(u=>u.completions(a))),this.dap.on("exceptionInfo",()=>this._withThread(a=>a.exceptionInfo())),this.dap.on("enableCustomBreakpoints",a=>this.enableCustomBreakpoints(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("disableCustomBreakpoints",a=>this._disableCustomBreakpoints(a)),this.dap.on("prettyPrintSource",a=>this._prettyPrintSource(a)),this.dap.on("revealPage",()=>this._withThread(a=>a.revealPage())),this.dap.on("getPerformance",()=>this._withThread(a=>o.retrieve(a.cdp()))),this.dap.on("breakpointLocations",a=>this._breakpointLocations(a)),this.dap.on("createDiagnostics",a=>this._dumpDiagnostics(a)),this.dap.on("requestCDPProxy",()=>this._requestCDPProxy()),this.dap.on("setExcludedCallers",a=>this._onSetExcludedCallers(a)),this.dap.on("saveDiagnosticLogs",({toFile:a})=>this._saveDiagnosticLogs(a)),this.dap.on("setSourceMapStepping",a=>this._setSourceMapStepping(a)),this.dap.on("stepInTargets",a=>this._stepInTargets(a)),this.dap.on("setDebuggerProperty",a=>this._setDebuggerProperty(a)),this.dap.on("setSymbolOptions",a=>this._setSymbolOptions(a))}_setDebuggerProperty(e){return this._thread?.cdp().DotnetDebugger.setDebuggerProperty(e),Promise.resolve({})}_setSymbolOptions(e){return this._thread?.cdp().DotnetDebugger.setSymbolOptions(e),Promise.resolve({})}_breakpointLocations(e){return this._withThread(async r=>{let n=this.sourceContainer.source(e.source);return n?{breakpoints:(await this.breakpointManager.getBreakpointLocations(r,n,new Ut(e.line,e.column||1),new Ut(e.endLine||e.line+1,e.endColumn||e.column||1))).map(o=>o.uiLocations.find(s=>s.source===n)).filter(Ct).map(o=>({line:o.lineNumber,column:o.columnNumber}))}:{breakpoints:[]}})}_stepInTargets(e){return this._withThread(async r=>({targets:await r.getStepInTargets(e.frameId)}))}_setSourceMapStepping({enabled:e}){return this.sourceContainer.doSourceMappedStepping=e,Promise.resolve({})}async _saveDiagnosticLogs(e){let r=this._services.get(ce).getRecentLogs();return await this._services.get(we).writeFile(e,r.map(n=>JSON.stringify(n)).join(`
`)),{}}async launchBlocker(){await this._configurationDoneDeferred.promise,await this._services.get(Ip).launchBlocker,await this.breakpointManager.launchBlocker()}async _onSetExcludedCallers({callers:e}){return(await this._threadDeferred.promise).setExcludedCallers(e),{}}async onInitialize(e){console.assert(e.linesStartAt1),console.assert(e.columnsStartAt1);let r=tl.capabilities(!0);return setTimeout(()=>this.dap.initialized({}),0),setTimeout(()=>this._thread?.dapInitialized(),0),r}static capabilities(e=!1){return{supportsConfigurationDoneRequest:!0,supportsFunctionBreakpoints:!1,supportsConditionalBreakpoints:!0,supportsHitConditionalBreakpoints:!0,supportsEvaluateForHovers:!0,supportsReadMemoryRequest:!0,supportsWriteMemoryRequest:!0,exceptionBreakpointFilters:[{filter:"all",label:gi.t("Caught Exceptions"),default:!1,supportsCondition:!0,description:gi.t("Breaks on all throw errors, even if they're caught later."),conditionDescription:'error.name == "MyError"'},{filter:"uncaught",label:gi.t("Uncaught Exceptions"),default:!1,supportsCondition:!0,description:gi.t("Breaks only on errors or promise rejections that are not handled."),conditionDescription:'error.name == "MyError"'}],supportsStepBack:!1,supportsSetVariable:!0,supportsRestartFrame:!0,supportsGotoTargetsRequest:!1,supportsStepInTargetsRequest:!0,supportsCompletionsRequest:!0,supportsModulesRequest:!1,additionalModuleColumns:[],supportedChecksumAlgorithms:[],supportsRestartRequest:!0,supportsExceptionOptions:!1,supportsValueFormattingOptions:!0,supportsExceptionInfoRequest:!0,supportTerminateDebuggee:!0,supportsDelayedStackTraceLoading:!0,supportsLoadedSourcesRequest:!0,supportsLogPoints:!0,supportsTerminateThreadsRequest:!1,supportsSetExpression:!0,supportsTerminateRequest:!1,completionTriggerCharacters:[".","[",'"',"'"],supportsBreakpointLocationsRequest:!0,supportsClipboardContext:!0,supportsExceptionFilterOptions:!0,supportsEvaluationOptions:!!e,supportsDebuggerProperties:!!e,supportsSetSymbolOptions:!!e}}async _onSetBreakpoints(e){return this.breakpointManager.setBreakpoints(e,e.breakpoints?.map(()=>this.breakpointIdCounter())??[])}async setExceptionBreakpoints(e){return await this._services.get(Ip).setBreakpoints(e),{}}async configurationDone(){return this._configurationDoneDeferred.resolve(),{}}async _onLoadedSources(){return{sources:await this.sourceContainer.loadedSources()}}async _onDisableSourcemap(e){let r=this.sourceContainer.source(e.source);if(!r)return Xe(gi.t("Source not found"));if(!(r instanceof $t))return Xe(gi.t("Source not a source map"));for(let n of r.compiledToSourceUrl.keys())this.sourceContainer.disableSourceMapForSource(n,!0);return await this._thread?.refreshStackTrace(),{}}async _onSource(e){e.source||(e.source={sourceReference:e.sourceReference}),e.source.path=Ii(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Xe(gi.t("Source not found"));let n=await r.content();return n===void 0?(r instanceof $t&&this.dap.suggestDisableSourcemap({source:e.source}),Xe(gi.t("Unable to retrieve source content"))):{content:n,mimeType:r.getSuggestedMimeType}}async _onThreads(){let e=[];return this._thread&&e.push({id:this._thread.id,name:this._thread.name()}),{threads:e}}findVariableStore(e){if(!this._thread)return;let r=this._thread.pausedVariables();if(r&&e(r))return r;if(e(this._thread.replVariables))return this._thread.replVariables}async _onVariables(e){return{variables:await this.findVariableStore(n=>n.hasVariable(e.variablesReference))?.getVariables(e)??[]}}async _onReadMemory(e){let r=e.memoryReference,n=await this.findVariableStore(i=>i.hasMemory(r))?.readMemory(r,e.offset??0,e.count);return n?{address:"0",data:n.toString("base64"),unreadableBytes:e.count-n.length}:{address:"0",unreadableBytes:e.count}}async _onWriteMemory(e){let r=e.memoryReference;return{bytesWritten:await this.findVariableStore(i=>i.hasMemory(r))?.writeMemory(r,e.offset??0,Buffer.from(e.data,"base64"))}}async _onSetExpression(e){if(!this._thread)throw new ee(iS());let r=await this._thread.evaluate({expression:`${e.expression} = ${yh(e.value)}`,context:"repl",frameId:e.frameId});return{value:r.result,variablesReference:r.variablesReference,indexedVariables:r.indexedVariables,namedVariables:r.namedVariables,presentationHint:r.presentationHint,type:r.type}}async _onSetVariable(e){let r=this.findVariableStore(n=>n.hasVariable(e.variablesReference));return r?(e.value=yh(e.value.trim()),r.setVariable(e)):Xe(gi.t("Variable not found"))}_withThread(e){if(!this._thread)throw new ee(iS());return e(this._thread)}async _refreshStackTrace(){if(!this._thread)return;this._thread.pausedDetails()&&await this._thread.refreshStackTrace()}createThread(e,r){this._thread=new Ia(this.sourceContainer,e,this.dap,r,this._services.get(la),this._services.get(ce),this._services.get(Kn),this._services.get(Bb),this.launchConfig,this.breakpointManager,this._services.get(cv),this._services.get(Ip),this._services.get(wa),this._services.get(Ea));let n=this._services.get(wv);n.connect(this.dap,this._thread),"profileStartup"in this.launchConfig&&this.launchConfig.profileStartup&&n.start(this.dap,this._thread,{type:lr.type});for(let i of this._customBreakpoints)this._thread.updateCustomBreakpoint(i,!0);return this.asyncStackPolicy.connect(e).then(i=>this._disposables.push(i)).catch(i=>this._services.get(ce).error("internal","Error enabling async stacks",i)),this.breakpointManager.setThread(this._thread),this._services.get(Ht).attach(e),this._threadDeferred.resolve(this._thread),this._thread}async enableCustomBreakpoints(e){let r=[];for(let n of e.ids)this._customBreakpoints.add(n),this._thread&&r.push(this._thread.updateCustomBreakpoint(n,!0));return await Promise.all(r),{}}async _disableCustomBreakpoints(e){let r=[];for(let n of e.ids)this._customBreakpoints.delete(n),this._thread&&r.push(this._thread.updateCustomBreakpoint(n,!1));return await Promise.all(r),{}}async _toggleSkipFileStatus(e){return await this._services.get(ha).toggleSkippingFile(e),await this._refreshStackTrace(),{}}async _prettyPrintSource(e){if(!e.source||!this._thread)return{canPrettyPrint:!1};e.source.path=Ii(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Xe(gi.t("Source not found"));let n=await r.prettyPrint();if(!n)return Xe(gi.t("Unable to pretty print"));let{map:i,source:o}=n;return await this.breakpointManager.moveBreakpoints(this._thread,r,i,o),this.sourceContainer.clearDisabledSourceMaps(r),await this._refreshStackTrace(),{}}onEvaluate(e){return e.expression===".scripts"?this._dumpDiagnostics({fromSuggestion:!1}).then(this.dap.openDiagnosticTool).then(()=>({result:"Opening diagnostic tool...",variablesReference:0})):this._withThread(r=>r.evaluate(e))}async _dumpDiagnostics(e){let r={file:await this._services.get(Da).generateHtml()};return e.fromSuggestion&&this._services.get(zt).report("diagnosticPrompt",{event:"opened"}),r}async _requestCDPProxy(){return await this._cdpProxyProvider.proxy()}dispose(){this._disposables.dispose(),bb(this._services)}};var Oz=require("inspector"),Fz=require("fs"),eA=class{constructor(e){this.file=e;this.session=new Oz.Session;this.session.connect()}async start(){try{await this.post("Profiler.enable")}catch{}await this.post("Profiler.start")}async stop(){let{profile:e}=await this.post("Profiler.stop");await Fz.promises.writeFile(this.file,JSON.stringify(e))}dispose(){this.session.disconnect()}post(e,r){return new Promise((n,i)=>this.session.post(e,r,(o,s)=>{o?i(o):n(s)}))}};var tA=A(require("path"));function Nz(t,e,r){let n=Bz(t,e,"uncaughtException",r),i=Bz(t,e,"unhandledRejection",r);return process.addListener("uncaughtException",n),process.addListener("unhandledRejection",i),{dispose:()=>{process.removeListener("uncaughtException",n),process.removeListener("unhandledRejection",i)}}}var Bz=(t,e,r,n=!0)=>i=>{Jwe(i)&&(e.report("error",{"!error":i,error:n?void 0:i,exceptionType:r}),t.error("runtime.exception","Unhandled error in debug adapter",i))},zwe=t=>typeof t=="object"&&!!t&&"stack"in t,Xwe=tA.dirname(tA.dirname(tA.dirname(__dirname)));function Jwe(t){return!Uz||zwe(t)&&!!t.stack?.includes(Xwe)}var Uz=!1;function jz(){Uz=!0}var rA=class{constructor(e,r,n,i){this._delegate=e;this._rootServices=n;this._disposables=new Se;this._serviceTree=new WeakMap;this._root=new vu(void 0);this.getLaunchers=Ae(()=>{let e=new Set(this._rootServices.getAll(Hr));for(let r of e)this._disposables.push(r.onTargetListChanged(()=>{let n=this.targetList();this._attachToNewTargets(n,r),this._terminateOrphanThreads(n)}));return e});this._dap=r.dap(),this._targetOrigin=i,this._disposables.callback(()=>bb(n)),this._disposables.push(Nz(n.get(ce),n.get(zt),n.get(np))),r.attachTelemetry(n.get(zt));let o=this._dap,s=0,a;o.on("initialize",async u=>{this._rootServices.bind(cn).toConstantValue(u);let c=tl.capabilities();return u.clientID==="vscode"&&jz(),setTimeout(()=>o.initialized({}),0),c}),o.on("setExceptionBreakpoints",async()=>({})),o.on("setBreakpoints",async u=>(u.breakpoints?.length&&n.get(Ht).notifyHadBreakpoint(),{breakpoints:u.breakpoints?.map(()=>({id:++s,verified:!1,message:qz.t("Unbound breakpoint")}))??[]})),o.on("configurationDone",async()=>({})),o.on("threads",async()=>({threads:[]})),o.on("loadedSources",async()=>({sources:[]})),o.on("breakpointLocations",()=>Promise.resolve({breakpoints:[]})),o.on("attach",async u=>(await this.boot(u,o),{})),o.on("launch",async u=>(await this.boot(u,o),{})),o.on("pause",async()=>({})),o.on("terminate",()=>this._terminateRoot(!0)),o.on("disconnect",u=>this._disconnectRoot(u)),o.on("restart",async({arguments:u})=>(await this._restart(u),{})),o.on("startSelfProfile",async({file:u})=>(a?.dispose(),a=new eA(u),await a.start(),{})),o.on("stopSelfProfile",async()=>(a&&(await a.stop(),a.dispose(),a=void 0),{}))}async _terminateRoot(e){return this._root.state=1,await Promise.all([...this.getLaunchers()].map(r=>r.terminate(e))),await this._root.waitUntilChildrenAre(2),this._root.state=2,{}}async _disconnectRoot(e){return this._root.state<1&&await this._terminateRoot(e.terminateDebuggee),this._rootServices.get(zt).flush(),await this._root.waitUntilChildrenAre(3),this._root.state=3,{}}async boot(e,r){return this._boot(Ks(e,this._rootServices.get(us)),r)}async _boot(e,r){Ywe(r),this.reportBootTelemetry(e),dz(this._rootServices,e,r),this._rootServices.get(ce).setup(Sk(r,e.trace));let n=e.timeout>0?sr.withTimeout(e.timeout):new sr;e.rootPath&&(e.rootPath=Ii(e.rootPath)),this._launchParams=e;let i=await Promise.all([...this.getLaunchers()].map(o=>this._launch(o,e,n.token)));return Promise.all(i.map(o=>o.terminated)).then(o=>{let s=o.find(Ct);this._markTargetAsTerminated(this._root,{restart:!!s?.restart})}),{}}reportBootTelemetry(e){let r=Ks({type:e.type,request:e.request,name:"<string>",__workspaceFolder:"<workspace>"}),n=(i,o)=>typeof i=="string"?o&&r[o]===i?i:"<string>":i instanceof Array?i.map(s=>n(s)):i&&typeof i=="object"?Xo(i,s=>n(s)):i;this._rootServices.get(zt).report("launch",{type:e.type,request:e.request,os:`${nA.platform()} ${nA.arch()}`,nodeVersion:process.version,adapterVersion:Iu,parameters:Xo(e,n)})}async _restart(e){let r;if(e){let n=this._rootServices.get(Rm);r=Ks({__workspaceFolder:n.__workspaceFolder,...e},this._rootServices.get(us)),n.update(r)}await Promise.all([...this.getLaunchers()].map(n=>n.restart(r)))}async _launch(e,r,n){return(await this.captureLaunch(e,r,n)).blockSessionTermination?{terminated:new Promise(o=>{let s=this._disposables.push(e.onTerminated(a=>{s.dispose(),o(a)}))})}:{terminated:Promise.resolve(void 0)}}async captureLaunch(e,r,n){let i=e.constructor.name,o;try{o=await e.launch(r,{telemetryReporter:this._rootServices.get(zt),cancellationToken:n,targetOrigin:this._targetOrigin,dap:this._dap})}catch(s){throw this._rootServices.get(ce).warn("runtime.launch","Launch returned error",{error:s,wasCancelled:n.isCancellationRequested,name:i}),s}return o.blockSessionTermination&&this._rootServices.get(ce).info("runtime.launch","Launched successfully",{name:i}),o}dispose(){this._disposables.dispose(),this._terminateOrphanThreads([])}targetList(){let e=[];for(let r of this.getLaunchers())e.push(...r.targetList());return e}async attach(e,r){if(!this._launchParams)throw new Error("Cannot launch before params have been set");let n=e.value;if(!n.canAttach())return;let i=await n.attach();if(!i)return;let o=await this._delegate.acquireDap(n),s=o.dap(),a=this._launchParams;this._asyncStackPolicy||(this._asyncStackPolicy=kz(a.showAsyncStacks));let u=n.parent(),c=u&&this._serviceTree.get(u)||this._rootServices,l=lz(c,n,s,i);o.attachTelemetry(l.get(zt)),this._serviceTree.set(n,c);let p=new tl(s,this._asyncStackPolicy,a,l),f=p.createThread(i,n),m=async()=>(await p.launchBlocker(),n.runIfWaitingForDebugger(),e.threadData.resolve({thread:f,debugAdapter:p}),{});s.on("disconnect",h=>this._disconnectTarget(e,h)),s.on("terminate",()=>this._terminateTarget(e)),s.on("restart",async()=>(n.canRestart()?n.restart():await this._restart(),Promise.resolve({}))),await this._delegate.initAdapter(p,n,r)?m():(s.on("attach",m),s.on("launch",m)),await n.afterBind()}_attachToNewTargets(e,r){for(let n of e.values()){if(!n.waitingForDebugger()||vu.targetNodes.has(n))continue;let i=n.parent(),o=i?vu.targetNodes.get(i):this._root;if(!o)throw new Error(`Got target with unknown parent: ${n.name()}`);let s=new vu(n);o.add(s),this.attach(s,r)}}async _terminateOrphanThreads(e,r){let n=[...this._root.all()].filter(i=>!e.includes(i.value));return Promise.all(n.map(i=>this._markTargetAsTerminated(i,r)))}async _markTargetAsTerminated(e,r={}){if(e.state>=1)return await e.waitUntil(2),{};if(e.state=1,Wz(e)){let n=await e.threadData.promise;await n.thread.dispose(),n.debugAdapter.dap.terminated(r),n.debugAdapter.dispose()}else this._dap.terminated(r);return await e.waitUntilChildrenAre(2),e.state=2,{}}async _terminateTarget(e){return e.state>=3?{}:(e.value.canStop()?e.value.stop():this._terminateRoot(!0),await e.waitUntil(2),{})}async _disconnectTarget(e,r){if(e.state>=3)return{};e.state<1&&(r.terminateDebuggee!==!0&&e.value.canDetach()?await e.value.detach():e.value.canStop()?e.value.stop():this._terminateRoot(r.terminateDebuggee)),await e.waitUntil(2),await e.waitUntilChildrenAre(3),e.state=3,queueMicrotask(()=>this._delegate.releaseDap(e.value));let n=e.value.parent();return(n?vu.targetNodes.get(n):this._root)?.remove(e),{}}};function Ywe(t){dH&&t.output({category:"console",output:`Note: Using the "preview" debug extension
`})}var Wz=t=>!!t.value,PT=class{constructor(e){this.value=e;this.threadData=Ue();this._state=0;this._children=new Set;this._stateChangeEmitter=new z;e&&PT.targetNodes.set(e,this)}get state(){return this._state}set state(e){e>this._state&&(this._state=e,this._stateChangeEmitter.fire(e))}add(e){this._children.add(e)}remove(e){this._children.delete(e)}async waitUntil(e){return this._state>=e?Promise.resolve():new Promise(r=>{let n=this._stateChangeEmitter.event(i=>{i>=e&&(n.dispose(),r())})})}async waitUntilChildrenAre(e){await Promise.all([...this._children].map(r=>r.waitUntil(e)))}*all(){Wz(this)&&(yield this);for(let e of this._children)yield*e.all()}},vu=PT;vu.targetNodes=new WeakMap;var iA=class{constructor(e,r,n,i,o){this.debugSession=e;this.logger=n;this.sessionStates=i;this.parent=o;this.subscriptions=new Se;r instanceof El?this.connection=r:(r.setLogger(n),this.connection=new El(r,this.logger))}listenToTarget(e){this.subscriptions.push(e.onNameChanged(()=>this.setName(e)),this.sessionStates.onAdd(([r])=>r===this.debugSession.id&&this.setName(e)),this.sessionStates.onRemove(([r])=>r===this.debugSession.id&&this.setName(e))),this.setName(e)}dispose(){this.subscriptions.dispose()}setName(e){let r=this.sessionStates.get(this.debugSession.id),n=e.name();this.parent instanceof Bd&&(n=`${this.parent.debugSession.name}: ${n}`),this.debugSession.name=r?`${n} (${r})`:n}},Bd=class extends iA{constructor(r,n,i){super(r,n,i.get(ce),i.get(ip));this.debugSession=r;this.services=i;this.connection.attachTelemetry(i.get(zt))}get binder(){return this._binder}createBinder(r){this._binder=new rA(r,this.connection,this.services,new b_(this.debugSession.id))}dispose(){super.dispose(),this._binder?.dispose?.()}},oA=class{constructor(e,r){this.globalContainer=e;this.sessionLauncher=r;this._disposables=[];this._sessions=new Map;this._pendingTarget=new Map;this._sessionForTarget=new Map;this._sessionForTargetCallbacks=new Map}terminate(e){let r=this._sessions.get(e.id);this._sessions.delete(e.id),r&&r.dispose()}hasPendingTargetId(e){return this._pendingTarget.has(e)}createNewRootSession(e,r){let n=new Bd(e,r,pz(this.globalContainer));return n.createBinder(this),this._sessions.set(e.id,n),n}createNewChildSession(e,r,n){let i=this._pendingTarget.get(r);if(!i)throw new Error(`Cannot find target ${r}`);let{target:o,parent:s}=i,a=new iA(e,n,s.logger,s.sessionStates,s);this._pendingTarget.delete(r),a.debugSession.name=o.name(),a.listenToTarget(o);let u=this._sessionForTargetCallbacks.get(o);return this._sessionForTargetCallbacks.delete(o),u?.fulfill?.(a),this._sessions.set(e.id,a),a}async acquireDap(e){return(await this.getOrLaunchSession(e)).connection}getOrLaunchSession(e){let r=this._sessionForTarget.get(e);if(r)return r;let n=new Promise(async(i,o)=>{let s,a=e.parent();if(a?s=await this.getOrLaunchSession(a):s=this._sessions.get(e.targetOrigin().id),!s)throw new Error("Expected to get a parent debug session for target");this._pendingTarget.set(e.id(),{target:e,parent:s}),this._sessionForTargetCallbacks.set(e,{fulfill:i,reject:o});let u=s.debugSession.configuration,c={type:u.type==="pwa-extensionHost"?"pwa-chrome":u.type,name:e.name(),request:s.debugSession.configuration.request,__pendingTargetId:e.id(),preRestartTask:u.preRestartTask??u.postDebugTask,postRestartTask:u.postRestartTask??u.preLaunchTask};this.sessionLauncher.launch(s,e,c)});return this._sessionForTarget.set(e,n),n}initAdapter(e,r,n){return Promise.resolve(!1)}releaseDap(e){this._sessionForTarget.delete(e);let r=this._sessionForTargetCallbacks.get(e);r&&r.reject(new Error("Target gone")),this._sessionForTargetCallbacks.delete(e)}dispose(){for(let e of this._sessions.values())e.dispose();this._sessions.clear(),this._pendingTarget.clear(),this._sessionForTarget.clear(),this._sessionForTargetCallbacks.clear();for(let e of this._disposables)e.dispose();this._disposables=[]}};var sA=class{constructor(e,r,n="127.0.0.1"){this.host=n;this.disposables=[];this.servers=new Map;this.sessionManager=new oA(e,r),this.portLeaseTracker=e.get(at),this.disposables.push(this.sessionManager)}createDebugServer(e,r){return e.configuration.__pendingTargetId?this.createChildDebugServer(e):this.createRootDebugServer(e,r)}createRootDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewRootSession(e,n),r)}createRootDebugSessionFromStreams(e,r,n){let i=new eH(r,n);return this.sessionManager.createNewRootSession(e,i)}createChildDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewChildSession(e,e.configuration.__pendingTargetId,n),r)}async innerCreateServer(e,r,n){let i=Ue(),o=a=>{let u=new eH(a,a),c=r(u);i.resolve(c.connection)},s=n===void 0?await new Promise((a,u)=>{let c=fy(),l=Gz.createServer(o).on("error",u).on("close",()=>Vz.promises.unlink(c).catch(()=>{})).listen(c,()=>a(l))}):await mN(this.portLeaseTracker,o,n,this.host);return this.servers.set(e.id,s),{server:s,connectionPromise:i.promise}}terminate(e){this.sessionManager.terminate(e),this.servers.get(e.id)?.close(),this.servers.delete(e.id)}dispose(){this.sessionManager.dispose()}};var xT=class{launch(e,r,n){wu.debug.startDebugging(e.debugSession.workspaceFolder,{...n,...r.supplementalConfig,serverReadyAction:e.debugSession.configuration.serverReadyAction,__parentId:e.debugSession.id},{parentSession:e.debugSession,consoleMode:wu.DebugConsoleMode.MergeWithParent,noDebug:e.debugSession.configuration.noDebug,compact:e instanceof Bd,lifecycleManagedByParent:!r.independentLifeycle})}},aA=class{constructor(e){this.sessionServerManager=new sA(e,new xT)}async createDebugAdapterDescriptor(e){let r=process.env.JS_DEBUG_USE_LOCAL_DAP_PORT;if(r)return new wu.DebugAdapterServer(+r);let n=await this.sessionServerManager.createDebugServer(e);return new wu.DebugAdapterNamedPipeServer(n.server.address())}terminate(e){this.sessionServerManager.terminate(e)}dispose(){this.sessionServerManager.dispose()}};function Qwe(t){Gt.l10n.bundle&&Kz.config({contents:Gt.l10n.bundle});let e=fz({storagePath:process.platform==="win32"?(0,zz.tmpdir)():t.storagePath||t.extensionPath,isVsCode:!0,isRemote:!!process.env.JS_DEBUG_USE_COMPANION||Gt.extensions.getExtension(KT)?.extensionKind===Gt.ExtensionKind.Workspace,context:t});t.subscriptions.push(xe(Gt.commands,"extension.js-debug.npmScript",yK),xe(Gt.commands,"extension.js-debug.pickNodeProcess",XL),xe(Gt.commands,"extension.pwa-node-debug.attachNodeProcess",iK),xe(Gt.commands,"extension.js-debug.toggleSkippingFile",Tz));let r=e.getAll(c0);for(let s of r){let a=s;t.subscriptions.push(Gt.debug.registerDebugConfigurationProvider(s.type,a));let u=jd.get(s.type);u&&t.subscriptions.push(Gt.debug.registerDebugConfigurationProvider(u,a))}let n=e.getAll(l0);for(let s of n)Gt.debug.registerDebugConfigurationProvider(s.type,s,Gt.DebugConfigurationProviderTriggerKind!==void 0?s.triggerKind:void 0);let i=new aA(e);t.subscriptions.push(...[...pA].map(s=>Gt.debug.registerDebugAdapterDescriptorFactory(s,i))),t.subscriptions.push(Gt.debug.onDidTerminateDebugSession(s=>i.terminate(s))),t.subscriptions.push(i);let o=e.get(Je);o.attach(),Sz(t),Ez(t,o),vz(t,e.get(Uo),e.get(yu),e),Dz(t,e),_z(t,e.get(Uo),e),xz(t,o),Cz(t,o),e.getAll(ln).forEach(s=>s.register(t))}function Zwe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-windows/index.js:
  (*!
   * is-windows <https://github.com/jonschlinkert/is-windows>
   *
   * Copyright © 2015-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=extension.js.map
